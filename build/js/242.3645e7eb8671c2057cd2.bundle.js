"use strict";(self.webpackChunk_byted_editor=self.webpackChunk_byted_editor||[]).push([[242],{36803:function(e,t,r){r(22142),t.Z=r.p+"3a90690ed2bc8c0853f16f9d2be55cc1.svg"},1293:function(e,t,r){r.d(t,{ZP:function(){return f},s_:function(){return h},t1:function(){return Q}});var n=r(22142),o=r(62732),a=r(42753),i=r(42761),l=r(40985),c=r(7910),s=r(5635),A=Object.defineProperty,u=Object.defineProperties,d=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))g.call(t,r)&&p(e,r,t[r]);if(E)for(var r of E(t))m.call(t,r)&&p(e,r,t[r]);return e};function f({content:e}){const{token:t}=s.Z.useToken(),{getState:r}=(0,i.oR)(),[c,A]=(0,n.useState)(""),[E,g]=(0,n.useState)("abcde"),[m,p]=(0,n.useState)("none"),[f,B]=(0,n.useState)(""),[b,N]=(0,n.useState)(""),S=(0,n.useRef)(null),{clearIframe:C,postMessage:w}=h(S);return(0,a.qV)("ViewResource",(e=>{return t=this,n=[e],o=function*({type:e,category:t,url:n,name:o,description:a,extra:i}){var c,s,E;if("enter"===e){if(["Lottie","Particle","FrameAnime","Spine","DragonBones","Sprite","Animation","PSD","Live2d","Skybox"].includes(t))if(t=y(t),["spine","dragonBones","component","psd"].includes(t)?p("big"):p("small"),A(o),g(a),N(null!=(c=null==i?void 0:i.userName)?c:""),null==i?void 0:i.previewVideo)B(null==i?void 0:i.previewVideo);else if(S.current)if("number"==typeof n){const{project:e}=r(),{scenes:t,customScripts:o,settings:a}=e,i={scenes:t.filter((e=>"Animation"===e.type)).map((e=>(0,l.GV)(e))),customScripts:o,settings:(s=v({},a),E={sceneOrders:[n]},u(s,d(E)))};w({type:"change",url:a.basePath,projectType:"scene",loop:!0,data:i})}else w({type:"change",url:n,projectType:t,loop:!0})}else p("none"),B(""),C()},new Promise(((e,r)=>{var a=e=>{try{l(o.next(e))}catch(e){r(e)}},i=e=>{try{l(o.throw(e))}catch(e){r(e)}},l=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,i);l((o=o.apply(t,n)).next())}));var t,n,o})),n.createElement("div",{className:(0,o.iv)({position:"absolute",top:4,right:0,width:214,padding:6,borderRadius:4,background:t.colorBgContainer,border:`1px solid ${t.colorBorder}`,transform:"translate(100%)",pointerEvents:"none"}),style:{right:e?"-260px":"0",visibility:"none"!==m?"visible":"hidden"}},f&&n.createElement("video",{style:{position:"absolute",top:6,left:6,zIndex:99999},src:f,autoPlay:!0,loop:!0,width:200,height:"big"===m?356:200}),n.createElement(Q,{ref:S,width:200,height:"big"===m?356:200,scale:1.2}),n.createElement("div",{className:(0,o.iv)({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"center"})},c),E&&n.createElement("div",{className:(0,o.iv)({borderTop:"1px solid #ccc",paddingTop:2,wordBreak:"break-all",wordWrap:"break-word",maxHeight:200,overflow:"scroll"})},E),b&&n.createElement("div",{className:(0,o.iv)({paddingTop:2,overflow:"scroll",textAlign:"center"})},"作者：",b))}const Q=n.memo(n.forwardRef(((e,t)=>{var r=e,{width:a,height:i,scale:l=1}=r,s=((e,t)=>{var r={};for(var n in e)g.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&E)for(var n of E(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(r,["width","height","scale"]);return n.createElement("div",{className:(0,o.iv)({width:a,height:i,overflow:"hidden"})},n.createElement("iframe",v({ref:t,src:(0,c.cM)({release:!0})?"https://magicplay.oceanengine.com/static-cloud/invoke/riko_player?type=preload":["https://local-clab.","bytedance",".net/static-cloud/invoke/riko_player?type=preload"].join(""),allow:"autoplay",frameBorder:"0",className:(0,o.iv)(v({width:a,height:i,position:"relative",transformOrigin:"0 0",border:"none"},l?{transform:`scale(${l})`,left:`-${a*(l-1)/2}px`,top:`-${i*(l-1)/2}px`}:{})),onError:e=>{console.log("e:",e)}},s)))})));function h(e){const t=(0,n.useRef)([]);return window.previewLog=()=>{console.log(t.current)},{postMessage:r=>{var n,o;t.current.push(r),null==(o=null==(n=e.current)?void 0:n.contentWindow)||o.postMessage(JSON.stringify(r),"*")},clearIframe:()=>{var t,r;null==(r=null==(t=e.current)?void 0:t.contentWindow)||r.postMessage(JSON.stringify({type:"clear"}),"*")}}}const y=e=>("FrameAnime"===e&&(e="frame"),"Sprite"===e&&(e="image"),"Animation"===e&&(e="component"),"PSD"===e&&(e="psd"),e.replace(/^\w/,(e=>e.toLowerCase())))},40953:function(e,t,r){r.d(t,{Z:function(){return N}});var n=r(22142),o=r(62732),a={img:(0,o.iv)({maxWidth:"100%",maxHeight:"100%"}),audio:(0,o.iv)({width:"50%",height:"50%"}),videoWrapper:(0,o.iv)({position:"relative"}),videoButton:(0,o.iv)({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"}),audioWrapper:(0,o.iv)({display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}),audioButton:(0,o.iv)({width:"50%",height:"50%"})},i=r(16848),l=r(56520),c=r.n(l);const s={container:(0,o.iv)({maxWidth:"100%",maxHeight:"100%"})};var A=({name:e,boxRef:t,path:r})=>{const o=(0,n.useRef)(null);return(0,n.useEffect)((()=>{var n,a;if(!o.current)return;const i=c().loadAnimation({name:e,container:o.current,renderer:"svg",loop:!0,autoplay:!1,path:r});function l(){i.goToAndStop(i.totalFrames/2,!0)}function s(){i.goToAndPlay(0,!0)}function A(){i.goToAndStop(i.totalFrames/2,!0)}function u(e){console.error("Lottie Animation failed:",{errMsg:e.message})}return i.addEventListener("data_ready",l),i.addEventListener("data_failed",u),t&&(null==(n=t.current)||n.addEventListener("mouseenter",s),null==(a=t.current)||a.addEventListener("mouseleave",A)),()=>{var e,r;t&&(null==(e=t.current)||e.removeEventListener("mouseenter",s),null==(r=t.current)||r.removeEventListener("mouseleave",A)),i.removeEventListener("data_ready",l),i.removeEventListener("data_failed",u),i.destroy()}}),[e,t,r]),n.createElement("div",{ref:o,className:s.container})},u=r.p+"7fd6d6c804e635e2ad2a4e4451f4a4e3.svg",d=({path:e,boxRef:t,customStyle:r,playIcon:o,onLoad:i})=>{const l=(0,n.useRef)(null),c=(0,n.useRef)(!1),[s,A]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{var e,r;function n(){var e;c.current&&(null==(e=l.current)||e.play(),A(!1))}function o(){l.current&&c.current&&(l.current.pause(),l.current.currentTime=0,A(!0))}return t&&(null==(e=t.current)||e.addEventListener("mouseenter",n),null==(r=t.current)||r.addEventListener("mouseleave",o)),()=>{var e,r;t&&(o(),null==(e=t.current)||e.removeEventListener("mouseenter",n),null==(r=t.current)||r.removeEventListener("mouseleave",o))}}),[t,e]),console.log("___:",r),n.createElement("div",{style:r,className:a.videoWrapper},void 0===o?n.createElement("img",{className:a.videoButton,src:u,style:{visibility:s?"visible":"hidden"}}):o,n.createElement("video",{ref:l,muted:!0,preload:"metadata",style:r,className:a.img,src:e,onCanPlay:()=>{c.current=!0},onLoadedMetadata:()=>{l.current&&(null==i||i(l.current))}}))},E=r(42560),g=r(43248),m=({path:e,boxRef:t,onLoad:r})=>{const o=(0,n.useRef)(null),i=(0,n.useRef)(!1),[l,c]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{var e,r;function n(){var e;i.current&&(null==(e=o.current)||e.play(),c(!1))}function a(){o.current&&(o.current.pause(),o.current.currentTime=0,c(!0))}return t&&(null==(e=t.current)||e.addEventListener("mouseenter",n),null==(r=t.current)||r.addEventListener("mouseleave",a)),()=>{var e,r;t&&(null==(e=t.current)||e.removeEventListener("mouseenter",n),null==(r=t.current)||r.removeEventListener("mouseleave",a))}}),[t,e]),n.createElement("div",{className:a.audioWrapper},l?n.createElement("img",{className:a.audioButton,src:E.Z}):n.createElement(g.Z,{theme:"outline",size:"34",fill:"#f5a623"}),n.createElement("audio",{ref:o,preload:"metadata",className:a.img,src:e,onCanPlay:()=>{i.current=!0},onLoadedMetadata:()=>{o.current&&(null==r||r(o.current))}}))},p=r(92366),v=r.p+"84e3e15d73da25d930bb90cb5c573321.svg",f=r(36803),Q=Object.defineProperty,h=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,N=e=>{var t=e,{data:r,CoverBoxRef:o,customStyle:l={},onLoad:c}=t,s=((e,t)=>{var r={};for(var n in e)y.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&h)for(var n of h(e))t.indexOf(n)<0&&B.call(e,n)&&(r[n]=e[n]);return r})(t,["data","CoverBoxRef","customStyle","onLoad"]);const u=(0,n.useRef)(null),E=(0,n.useCallback)((()=>{const{type:e,name:t,previewUrl:E,cover:g}=r;switch(e.cid){case i.Rj.image:return n.createElement("img",{ref:u,onLoad:()=>{u.current&&(null==c||c(u.current))},style:l,className:a.img,src:E||g,alt:t});case i.Rj.video:return n.createElement(d,((e,t)=>{for(var r in t||(t={}))y.call(t,r)&&b(e,r,t[r]);if(h)for(var r of h(t))B.call(t,r)&&b(e,r,t[r]);return e})({boxRef:o,path:E,customStyle:l,onLoad:c},s));case i.Rj.audio:return n.createElement(m,{boxRef:o,path:E,onLoad:c});case i.Rj.photoshop:return n.createElement("img",{className:a.audio,src:f.Z,alt:t});case i.Rj.particles2D:case i.Rj.particles3D:case i.Rj.lottie:return n.createElement("img",{className:g?a.img:a.audio,style:{width:"100%",height:"100%"},ref:u,onLoad:()=>{u.current&&(null==c||c(u.current))},src:g||v,alt:t});case i.Rj.lottie:return n.createElement(A,{name:t,boxRef:o,path:E});case i.Rj.editor:default:return n.createElement("img",{ref:u,onLoad:()=>{u.current&&(null==c||c(u.current))},className:a.img,src:g||p,style:l,alt:t})}}),[o,r]);return n.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"}},E())}},16848:function(e,t,r){var n,o,a,i,l,c;r.d(t,{Gn:function(){return a},N7:function(){return l},Rj:function(){return n}}),(o=n||(n={}))[o.case=1]="case",o[o.otherCase=2]="otherCase",o[o.creative=3]="creative",o[o.component=4]="component",o[o.image=5]="image",o[o.video=6]="video",o[o.audio=8]="audio",o[o.font=9]="font",o[o.lottie=12]="lottie",o[o.particles2D=13]="particles2D",o[o.particles3D=14]="particles3D",o[o.frameAni=18]="frameAni",o[o.photoshop=21]="photoshop",o[o.dragonBones=23]="dragonBones",o[o.spine=24]="spine",o[o.customScript=25]="customScript",o[o.editor=26]="editor",o[o.scene=26]="scene",o[o.live2d=30]="live2d",o[o.Skybox=31]="Skybox",o[o.other=32]="other",(i=a||(a={}))[i.Editor=1]="Editor",i[i.Cocos=2]="Cocos",(c=l||(l={}))[c.lottie=12]="lottie",c[c.frame=18]="frame",c[c.proj=26]="proj",c[c.component=4]="component",c[c.scene=26]="scene",c[c.particle=13]="particle",c[c.dragonBones=23]="dragonBones",c[c.spine=24]="spine",c[c.image=5]="image",c[c.live2d=30]="live2d"},92366:function(e){e.exports="data:image/png;base64,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"}}]);