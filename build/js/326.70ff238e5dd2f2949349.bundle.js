"use strict";(self.webpackChunk_byted_editor=self.webpackChunk_byted_editor||[]).push([[326],{99326:function(e,t,r){r.r(t),r.d(t,{default:function(){return V}});var i,n,o,l,a,p,c,d,s=r(22142),x=r(14908),f=r(26840),u=r(70072),y=r(62255),m=r(61754),g=r(32078),b=r(68961),h=r(81513),v=r(76151),O=r(10839),w=r(88902),P=r(62226),j=r(99674),E=r(47914),Z=r(10155),C=r(72704),k=r(54690),I=r(33058),D=r(75382);r(61645),r(47707),Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,(n=i||(i={}))[n.Enabled=1]="Enabled",n[n.Deleted=2]="Deleted",n[n.Disable=3]="Disable",(l=o||(o={}))[l.First=1]="First",l[l.Second=2]="Second",l[l.Third=3]="Third",(p=a||(a={}))[p.Platform=1]="Platform",p[p.Cloud=2]="Cloud",(d=c||(c={}))[d.CreativeIdea=1]="CreativeIdea",d[d.Aesthetics=3]="Aesthetics",d[d.Audio=4]="Audio",d[d.Image=6]="Image",d[d.Marketing=8]="Marketing",r(34450);var L=r(62732);(0,L.iv)({flex:"auto",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",padding:"30px 0"}),(0,L.iv)({flex:1,display:"flex",flexWrap:"wrap",alignContent:"flex-start",alignItems:"flex-start",width:1156}),(0,L.iv)({height:"100%",margin:0,display:"flex",justifyContent:"center",alignItems:"center"}),(0,L.iv)({position:"absolute",top:0,right:0,bottom:0,left:0,background:"rgba(255, 255, 255, 0.3)",display:"flex",justifyContent:"center",alignItems:"center"}),(0,L.iv)({maxHeight:"34px",width:"100%",color:"#333333",marginTop:"0",resize:"none"}),(0,L.iv)({width:"500px",height:"300px",display:"flex",border:"1px solid #e8e8e8",position:"absolute",top:"35px",zIndex:11}),(0,L.iv)({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start",overflow:"auto",alignContent:"flex-start"}),(0,L.iv)({position:"absolute",right:"50px",top:"25%"}),(0,L.iv)({margin:"10px",padding:"3px",borderRadius:"2px",position:"relative"}),(0,L.iv)({width:"280px",border:"1px solid #e8e8e8",position:"absolute",left:0,top:"38px",zIndex:11,display:" flex",flexWrap:"wrap"});const{Option:S}=b.Z;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,r(40953),Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,(0,L.iv)({display:"flex",backgroundColor:"#f8f9fa",lineHeight:"50px"}),(0,L.iv)({paddingLeft:"50px",flex:"0 0 150px"}),(0,L.iv)({paddingLeft:"96px",flex:1}),(0,L.iv)({maxHeight:"350px",overflowY:"auto"}),(0,L.iv)({display:"flex",alignItems:"center",padding:"8px 0",borderBottom:"1px solid #e4e9ed","&:last-child":{borderBottom:0}}),(0,L.iv)({width:"100px",height:"100px",borderRadius:"4px",backgroundColor:"#f2f2f2",objectFit:"contain"}),(0,L.iv)({width:"260px"});var T=r(22033);const{Option:A}=b.Z,{TreeNode:B}=T.Z;(0,L.iv)({height:"300px"}),(0,L.iv)({paddingLeft:"28px",color:"#999"}),r(87491),r(13883),r(78405),Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const{Option:F}=b.Z,{TreeNode:H}=T.Z;var z,M;(0,L.iv)({display:"flex",backgroundColor:"#f8f9fa",lineHeight:"50px"}),(0,L.iv)({textAlign:"center",flex:"0 0 200px"}),(0,L.iv)({paddingLeft:"100px",flex:1}),(0,L.iv)({height:"600px",width:"850px",overflowY:"auto",display:"flex",flexDirection:"row"}),(0,L.iv)({width:"500px",height:"600px",display:"flex",border:"1px solid #e8e8e8",marginLeft:"300px",marginTop:"10px",position:"absolute"}),(0,L.iv)({width:"200px",display:"flex",flexDirection:"column",padding:"8px 0",borderBottom:"1px solid #e4e9ed","&:last-child":{borderBottom:0}}),r(73760),r(16848),r(34708),s.createContext({library:{loading:!1,list:null,total:0,refreshList:()=>Promise.resolve()}}),(0,L.iv)({"& .ant-image-mask":{opacity:0,cursor:"zoom-in"}}),(0,L.iv)({display:"flex",height:"100%"}),(0,L.iv)({flex:"0 0 250px",width:"250px",display:"flex",alignItems:"center",marginTop:"-8px",marginLeft:"-8px",minHeight:"444px",backgroundColor:"#F2F4F7"}),(0,L.iv)({flex:1,padding:"0 24px",width:0,height:"100%"}),(0,L.iv)({padding:"12px 0",display:"flex",alignItems:"center",position:"relative","&:first-child":{paddingTop:0}}),(0,L.iv)({flex:"0 0 60px",textAlign:"right",color:"#999"}),(0,L.iv)({flex:"0 0 1",paddingLeft:"20px",overflow:"hidden"}),(0,L.iv)({paddingTop:"200px",height:"500px",textAlign:"center"}),(0,L.iv)({marginLeft:"8px",padding:"4px 8px"}),(0,L.iv)({width:"300px",maxHeight:"30px",height:"30px",color:"#999",marginLeft:"10px",marginTop:"0",resize:"none"}),r(23247),r(40985),(M=z||(z={}))[M["已删除"]=2]="已删除",M[M["不可用"]=3]="不可用",M[M["待审核"]=4]="待审核",M[M["未上架"]=5]="未上架",M[M["审核不通过"]=6]="审核不通过",r.p,r(1293),r(18691),Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,Laya.init(0,0),document.body.style.overflow="auto",(0,L.iv)({padding:"32px",height:"428px",textAlign:"center"});var Y=Object.defineProperty,_=Object.defineProperties,R=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,K=(e,t,r)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,q=(e,t)=>{for(var r in t||(t={}))$.call(t,r)&&K(e,r,t[r]);if(W)for(var r of W(t))N.call(t,r)&&K(e,r,t[r]);return e},G=(e,t,r)=>new Promise(((i,n)=>{var o=e=>{try{a(r.next(e))}catch(e){n(e)}},l=e=>{try{a(r.throw(e))}catch(e){n(e)}},a=e=>e.done?i(e.value):Promise.resolve(e.value).then(o,l);a((r=r.apply(e,t)).next())}));const J=Object.values(E.mZ).filter((e=>"number"==typeof e)),Q=({data:e,onChangeInput:t,onBlur:r,onDelete:i,style:n})=>{const[o,l]=(0,s.useState)("0"!==e.id),[a,p]=(0,s.useState)(!1),c=(0,s.useRef)(null);(0,s.useEffect)((()=>{var t;"0"===e.id&&(null==(t=c.current)||t.focus())}),[]);const d=()=>{setTimeout((()=>{var e;null==(e=c.current)||e.focus()})),l(!1)};return s.createElement(x.Z,{style:q({backgroundColor:a&&o?"#f2f3f5":"unset",display:"flex",alignItems:"center",height:"35px"},n),onMouseEnter:()=>{p(!0)},onMouseLeave:()=>{p(!1)}},s.createElement(k.Z,null),o?s.createElement("div",{onDoubleClick:d},s.createElement("span",{style:{width:"150px",display:"inline-block"}},e.name),a&&s.createElement(s.Fragment,null,s.createElement(f.Z,{placement:"top",title:"删除",style:{marginLeft:"5px"}},s.createElement(u.Z,{type:"link",icon:s.createElement(I.Z,{component:Z.Z}),onClick:d})),s.createElement(f.Z,{placement:"top",title:"删除"},s.createElement(u.Z,{type:"link",icon:s.createElement(I.Z,{component:C.Z}),onClick:()=>{i(e.id)}})))):s.createElement(y.Z,{ref:c,style:{width:"150px"},placeholder:"请输入分类名称",value:e.name,disabled:o,onChange:e=>{t(e.target.value)},onBlur:()=>{l(!0),r(e.id)}}))},U=()=>{const[e,t]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[n,o]=(0,s.useState)(),[l,a]=(0,s.useState)(!1);console.log("CategoryLevel1:",J),(0,s.useEffect)((()=>{(0,P.Y4)().then((e=>{console.log("data：",e),e=e.filter((e=>J.includes(e.cid))),t(e.map((e=>({label:e.name,value:e.cid})))),o(e[0].cid)})).catch((e=>{m.ZP.error("获取资源类型失败:",e)}))}),[]),(0,s.useEffect)((()=>{n&&p(n)}),[n]);const p=e=>G(void 0,null,(function*(){a(!0),i([]);try{const t=yield(0,j.n3)(e);i(t.map((e=>({id:e.id,name:e.name}))))}catch(e){m.ZP.error("获取分类失败：",e)}finally{a(!1)}})),c=e=>G(void 0,null,(function*(){var t;console.log("!:",e,n);const o=null==(t=r.find((t=>t.id===e)))?void 0:t.name;"0"===e?(o||i((e=>e.filter((e=>"0"!==e.id)))),n&&o&&(yield((e,t)=>G(void 0,null,(function*(){try{yield(0,j.k4)(e,t),m.ZP.success("创建成功")}catch(e){m.ZP.error(`新建分类失败：${e}`)}})))(n,o),yield p(n))):o&&(yield((e,t)=>G(void 0,null,(function*(){try{yield(0,j.yr)(e,{name:t})}catch(e){m.ZP.error(`修改分类失败：${e}`)}})))(e,o))})),d=e=>G(void 0,null,(function*(){var t;console.log("id:",e);const i=null==(t=r.find((t=>t.id===e)))?void 0:t.name;g.Z.confirm({content:s.createElement("p",null,"确定要删除",s.createElement("span",{style:{color:"orange"}},i),"分类吗？"),cancelText:"取消",okText:"确定",onOk:()=>G(this,null,(function*(){yield(e=>G(void 0,null,(function*(){try{yield(0,j.uu)(e)}catch(e){m.ZP.error(`删除分类失败：${e}`)}})))(e),yield p(n)}))})}));return s.createElement("div",null,s.createElement("div",{style:{display:"flex"}},s.createElement("div",null,s.createElement(b.Z,{value:n,style:{width:120},onChange:o,options:e})),s.createElement("div",{style:{display:"flex",flexDirection:"column",marginLeft:"20px",border:"1px solid rgba(0, 0, 0, 0.06)",height:"500px",width:"260px",overflowY:"scroll"}},s.createElement(u.Z,{type:"link",style:{width:"80px",margin:"5px 10px"},disabled:r.some((e=>"0"===e.id)),onClick:()=>{i((e=>[...e,{id:"0",name:""}]))}},"新增分类"),s.createElement(h.Z,{style:{margin:"0 0 10px 0"}}),0===r.length?l?s.createElement(v.Z,null):s.createElement(O.Z,null):r.map(((e,t)=>s.createElement(Q,{style:{padding:"0 5px"},data:e,onChangeInput:e=>{i((r=>r.map(((r,i)=>{return t===i?(n=q({},r),_(n,R({name:e}))):r;var n}))))},onBlur:c,onDelete:d}))))))};var V=()=>{const[e,t]=(0,s.useState)("1");return s.createElement(w.Z,{style:{flex:1,padding:"0 10px"},defaultActiveKey:"1",onChange:t},s.createElement(w.Z.TabPane,{tab:"资源管理",key:"1"},s.createElement(D.Z,{type:"super",visible:"1"===e})),s.createElement(w.Z.TabPane,{tab:"分类设置",key:"2"},s.createElement(U,null)))}}}]);