/*! For license information please see 97.7aff1443496ab6a2a707.bundle.js.LICENSE.txt */
(self.webpackChunk_byted_editor=self.webpackChunk_byted_editor||[]).push([[97],{25380:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=25380,e.exports=t},42560:function(e,t,r){"use strict";r.d(t,{r:function(){return d}});var n,o,a,i,l,c=r(22142),s=["title","titleId"];function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(this,arguments)}var u=function(e,t){var r=e.title,u=e.titleId,d=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,s);return c.createElement("svg",p({width:100,height:100,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":u},d),r?c.createElement("title",{id:u},r):null,n||(n=c.createElement("path",{d:"M100 0H0V100H100V0Z",fill:"white",fillOpacity:.01})),o||(o=c.createElement("path",{d:"M62.5 71.8796C62.5 67.8525 65.7646 64.5879 69.7917 64.5879H85.4167V71.6712C85.4167 75.8133 82.0588 79.1712 77.9167 79.1712H69.7917C65.7646 79.1712 62.5 75.9066 62.5 71.8796Z",fill:"#C1C1C1",stroke:"#C1C1C1",strokeWidth:8.33333,strokeLinejoin:"round"})),a||(a=c.createElement("path",{d:"M12.5 80.2038C12.5 76.1767 15.7646 72.9121 19.7917 72.9121H33.3333V79.9954C33.3333 84.1375 29.9754 87.4954 25.8333 87.4954H19.7917C15.7646 87.4954 12.5 84.2309 12.5 80.2038Z",fill:"#C1C1C1",stroke:"#C1C1C1",strokeWidth:8.33333,strokeLinejoin:"round"})),i||(i=c.createElement("path",{d:"M33.3379 37.5871L85.4212 25.2559",stroke:"#C1C1C1",strokeWidth:8.33333,strokeLinecap:"round",strokeLinejoin:"round"})),l||(l=c.createElement("path",{d:"M33.3379 79.1712V20.8379L85.4212 8.33789V70.1971",stroke:"#C1C1C1",strokeWidth:8.33333,strokeLinecap:"round",strokeLinejoin:"round"})))},d=(0,c.forwardRef)(u);t.Z=r.p+"5d410df568fccde16ba555acfab7855c.svg"},85381:function(e,t,r){"use strict";var n=r(30655),o=r.n(n),a=r(60811),i=r.n(a)()(o());i.push([e.id,"._editor-property .ant-select-arrow,.editor-property .ant-select-arrow{top:48%}._editor-property .ant-select-arrow .anticon>svg,.editor-property .ant-select-arrow .anticon>svg{color:#333}._editor-property .ant-select-arrow .anticon.anticon-down,.editor-property .ant-select-arrow .anticon.anticon-down{transform:scale(0.83)}._editor-property .ant-select-arrow .anticon.anticon-down>svg,.editor-property .ant-select-arrow .anticon.anticon-down>svg{transform:scaleY(0.83)}._editor-property .ant-cascader-picker,.editor-property .ant-cascader-picker{width:100%}._editor-property .ant-cascader-input.ant-input,.editor-property .ant-cascader-input.ant-input{border-color:#f0f0f0}._editor-property .ant-select,.editor-property .ant-select{width:100%}._editor-property .ant-select-disabled.ant-select:not(.ant-select-customize-input) .ant-select-selector,.editor-property .ant-select-disabled.ant-select:not(.ant-select-customize-input) .ant-select-selector{color:#c1c1c1}._editor-property .ant-select-multiple .ant-select-selection-placeholder,.editor-property .ant-select-multiple .ant-select-selection-placeholder{padding-left:57px}._editor-property .ant-select-single .ant-select-selector,.editor-property .ant-select-single .ant-select-selector{border-radius:4px;padding-left:72px;border-color:#f0f0f0}._editor-property .ant-select-single .ant-select-selector .ant-select-selection-search-input,.editor-property .ant-select-single .ant-select-selector .ant-select-selection-search-input{padding-left:56px}._editor-property .ant-select-selection-overflow,.editor-property .ant-select-selection-overflow{padding-left:56px}._editor-property .ant-btn>.anticon+span,._editor-property .ant-btn>span+.anticon,.editor-property .ant-btn>.anticon+span,.editor-property .ant-btn>span+.anticon{margin-left:4px}._editor-property .ant-btn:hover,._editor-property .ant-btn:focus,.editor-property .ant-btn:hover,.editor-property .ant-btn:focus{color:#3955f6;border-color:#3955f6;border-left-width:1px;position:relative;z-index:5}._editor-property .ant-btn-link:hover,._editor-property .ant-btn-link:focus,._editor-property .ant-btn-text:hover,._editor-property .ant-btn-text:focus,.editor-property .ant-btn-link:hover,.editor-property .ant-btn-link:focus,.editor-property .ant-btn-text:hover,.editor-property .ant-btn-text:focus{border-color:rgba(0,0,0,0)}._editor-property .ant-checkbox,.editor-property .ant-checkbox{width:14px;height:14px;margin-left:2px;margin-bottom:9px}._editor-property .ant-input-number,.editor-property .ant-input-number{padding-right:0}._editor-property .ant-input-number-input,.editor-property .ant-input-number-input{padding-left:2px;padding-right:0;line-height:30px}._editor-property .ant-input-number-handler-up-inner,.editor-property .ant-input-number-handler-up-inner{margin-top:-7px;left:1px}._editor-property .ant-input-number-handler-down-inner,.editor-property .ant-input-number-handler-down-inner{margin-bottom:-7px;left:1px}._editor-property .ant-input-number-handler-wrap,.editor-property .ant-input-number-handler-wrap{width:16px;border-color:#f0f0f0}._editor-property .ant-input-number-handler-wrap svg,.editor-property .ant-input-number-handler-wrap svg{width:12px;height:12px;transform:scaleY(0.8)}._editor-property .ant-row,.editor-property .ant-row{padding-top:8px;padding-bottom:8px;position:relative;margin-left:10px;margin-right:10px}._editor-property .ant-col,.editor-property .ant-col{display:flex;flex-direction:row;position:relative;min-height:32px;margin-left:6px;margin-right:6px}._editor-property .ant-checkbox-wrapper,.editor-property .ant-checkbox-wrapper{padding-left:70px;display:flex;align-items:center}._editor-property .ant-slider,.editor-property .ant-slider{flex:1;height:32px;margin:0;margin-left:76px;margin-right:6px;padding-top:14px}._editor-property .ant-slider-rail,.editor-property .ant-slider-rail{background-color:#e0e5ec}._editor-property .ant-slider-track,.editor-property .ant-slider-track{background-color:#3955f6}._editor-property .ant-slider-handle,.editor-property .ant-slider-handle{border-color:#3955f6}._editor-property .ant-switch,.editor-property .ant-switch{min-width:30px;width:30px;height:16px}._editor-property .ant-switch-handle,.editor-property .ant-switch-handle{width:14px;height:14px;top:1px;left:1px}._editor-property .ant-switch-checked,.editor-property .ant-switch-checked{background-color:#3955f6}._editor-property .ant-switch-checked .ant-switch-handle,.editor-property .ant-switch-checked .ant-switch-handle{left:auto;right:1px;transform:translateX(0)}._editor-property .ant-collapse,.editor-property .ant-collapse{position:relative}._editor-property .ant-collapse .ant-collapse-item.no-header,.editor-property .ant-collapse .ant-collapse-item.no-header{padding-top:8px}._editor-property .ant-collapse .ant-collapse-item.no-header>.ant-collapse-header,.editor-property .ant-collapse .ant-collapse-item.no-header>.ant-collapse-header{display:none}._editor-property .ant-collapse .ant-collapse-item,.editor-property .ant-collapse .ant-collapse-item{width:100%;border-top:1px solid #ebebeb;padding-bottom:8px}._editor-property .ant-collapse .ant-collapse-item .ant-collapse-content,.editor-property .ant-collapse .ant-collapse-item .ant-collapse-content{overflow:visible}._editor-property .ant-collapse .ant-collapse-item .ant-collapse-content .ant-collapse-content-box,.editor-property .ant-collapse .ant-collapse-item .ant-collapse-content .ant-collapse-content-box{padding:0;position:relative}._editor-property .ant-collapse .ant-collapse-item .ant-collapse-header,.editor-property .ant-collapse .ant-collapse-item .ant-collapse-header{line-height:20px;padding-top:16px;padding-bottom:8px;color:#333;cursor:auto}._editor-property .ant-collapse .ant-collapse-item .ant-collapse-header .ant-collapse-arrow,.editor-property .ant-collapse .ant-collapse-item .ant-collapse-header .ant-collapse-arrow{top:7px}._editor-property *,.editor-property *{font-size:14px}._editor-property-grid,.editor-property-grid{display:grid;width:100%}._editor-property-grid-wrapper,.editor-property-grid-wrapper{position:relative;margin-left:10px;margin-right:10px}._editor-property-grid-cell,.editor-property-grid-cell{padding-top:8px;padding-bottom:8px;position:relative}._editor-property-grid-cover,.editor-property-grid-cover{position:absolute;top:4px;left:2px;bottom:4px;right:2px;background-color:rgba(57,85,246,.2);z-index:100}._editor-property-grid-tooltip .ant-tooltip-inner,.editor-property-grid-tooltip .ant-tooltip-inner{background-color:#fff;color:#333}._editor-property-grid-tooltip .ant-tooltip-arrow-content,.editor-property-grid-tooltip .ant-tooltip-arrow-content{background-color:#fff}._editor-property-grid-tooltip .ant-tooltip-content,.editor-property-grid-tooltip .ant-tooltip-content{width:158px}._editor-property-grid-tag,.editor-property-grid-tag{width:20px;height:20px;border-radius:20px;background-color:#fff;position:absolute;top:0;bottom:0;right:11px;margin:auto;cursor:pointer;font-size:0;display:flex;align-items:center;justify-content:center}._editor-property-text,.editor-property-text{width:100%;color:#3955f6;border-bottom:1px solid #3955f6;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-left:72px;line-height:30px}._editor-property-input,.editor-property-input{padding-left:72px;padding-right:16px;flex:1;width:100%;border-color:#f0f0f0;color:#191919;border-radius:4px}._editor-property-input.no-label,.editor-property-input.no-label{padding-left:7px}._editor-property-input.ant-input-textarea-show-count,.editor-property-input.ant-input-textarea-show-count{position:relative;padding-left:0;padding-right:0;overflow:hidden}._editor-property-input.ant-input-textarea-show-count .ant-input,.editor-property-input.ant-input-textarea-show-count .ant-input{padding-left:72px;padding-right:16px;padding-bottom:26px;border-color:#f0f0f0;color:#191919;border-radius:4px}._editor-property-input.ant-input-textarea-show-count .ant-input:hover,._editor-property-input.ant-input-textarea-show-count .ant-input:focus,.editor-property-input.ant-input-textarea-show-count .ant-input:hover,.editor-property-input.ant-input-textarea-show-count .ant-input:focus{border-color:#6380ff}._editor-property-input.ant-input-textarea-show-count::after,.editor-property-input.ant-input-textarea-show-count::after{position:absolute;left:3px;right:18px;bottom:1px;text-align:right;font-size:12px;line-height:26px;background-color:#fff}._editor-property-option,.editor-property-option{font-size:14px}._editor-property-option *,.editor-property-option *{font-size:14px;overflow-x:hidden}._editor-property-option-sm,.editor-property-option-sm{font-size:12px}._editor-property-option-sm *,.editor-property-option-sm *{font-size:12px;overflow-x:hidden}._editor-property-option-sm .ant-select-item-option,.editor-property-option-sm .ant-select-item-option{padding:5px 8px}._editor-property-cascader,.editor-property-cascader{display:flex;width:100%}._editor-property-cascader.show-label .ant-cascader-picker-label,.editor-property-cascader.show-label .ant-cascader-picker-label{padding-left:72px}._editor-property-cascader.show-label .ant-cascader-input.ant-input,.editor-property-cascader.show-label .ant-cascader-input.ant-input{padding-left:72px}._editor-property-arc,.editor-property-arc{width:120px;height:120px;overflow:hidden;margin-left:55px}._editor-property-arc canvas,.editor-property-arc canvas{width:120px;height:100%}._editor-property-label,._editor-property-masks,.editor-property-label,.editor-property-masks{width:70px;padding-left:8px;height:32px;margin:0;font-weight:400;opacity:.6;color:#999;line-height:32px;text-align:left;cursor:pointer}._editor-property-masks,.editor-property-masks{color:#333}._editor-property-label,.editor-property-label{position:absolute;left:0;top:0;z-index:2}._editor-property-upload,.editor-property-upload{display:inline-block;width:100%}._editor-property-upload .ant-upload-select-text,.editor-property-upload .ant-upload-select-text{width:100%}.number-sliding-cursor{cursor:ew-resize;pointer-events:none;user-select:none}",""]),t.Z=i},14307:function(e,t,r){"use strict";var n=r(30655),o=r.n(n),a=r(60811),i=r.n(a)()(o());i.push([e.id,".effect-changer-effect-container{height:100%}.effect-changer-effect-container .ant-tabs-top{height:100%}.effect-changer-effect-container .ant-tabs-nav{margin:0;padding:0px 24px}.effect-changer-effect-container .ant-tabs-nav .ant-tabs-extra-content .ant-input{font-size:12px}.effect-changer-effect-container .ant-tabs-top>.ant-tabs-nav::before{border:none}.effect-changer-effect-container .ant-tabs-nav-list .ant-tabs-tab{padding:0 0 6px 0;font-size:14px}.effect-changer-effect-container .ant-tabs-content-holder{padding:12px 12px 0px 20px;overflow-y:scroll}.effect-changer-effect-container .ant-tabs-content-holder::-webkit-scrollbar-thumb{background-color:#e8e8e8;border-radius:2px}.effect-changer-effect-container .ant-tabs-content-holder::-webkit-scrollbar{width:4px}.effect-changer-effect-container .ant-tabs-tab+.ant-tabs-tab{margin:0 0 0 16px}.effect-changer-effect-input{z-index:2;width:131px;height:26px;padding:3px;line-height:20px;border:1px solid #e0e0e0;border-radius:4px}.effect-changer-effect-item{text-align:center;width:64px;height:64px;font-size:10px;margin:4px;background:#f5f5f5;border-radius:4px;border:1px solid rgba(0,0,0,0);transition:200ms;color:#666;transition:200ms;display:flex;flex-direction:column;justify-content:space-around;cursor:pointer}.effect-changer-effect-item img{transition:200ms;opacity:.72}.effect-changer-effect-item:hover{color:#3955f6;background:#ebebeb}.effect-changer-effect-item:hover img{opacity:1}.effect-changer-effect-item.active{color:#3955f6;background:#eef3fe;border:1px solid #3955f6}.effect-changer-effect-item.active img{opacity:1}.effect-changer-effect-title{margin:0px 4px;color:#999;font-size:12px;line-height:20px}",""]),t.Z=i},13883:function(e,t,r){"use strict";r.d(t,{a:function(){return x}});var n=r(61754),o=r(16969),a=r(70072),i=r(33058),l=r(26995),c=r(64256),s=r(98466),p=r(62732),u=r(22142),d=Object.defineProperty,f=Object.defineProperties,m=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))b.call(t,r)&&g(e,r,t[r]);if(y)for(var r of y(t))h.call(t,r)&&g(e,r,t[r]);return e},O=(e,t)=>f(e,m(t));function k({value:e,onChange:t,label:r,size:d,width:f,height:m}){const y={accept:"image/jpg,image/jpeg,image/png",action:"/api/upload/file",headers:s.Dr,showUploadList:!1,beforeUpload:e=>{if(e.size>1024*d*1024)return n.ZP.error(`${r}图片能超过${d}M`),!1},onChange({file:e}){var r,o,a;"done"===e.status&&e.response.data?t(e.response.data.previewUrl):("error"===e.status||(null==(r=e.response)?void 0:r.message))&&n.ZP.error(null!=(a=null==(o=e.response)?void 0:o.message)?a:`${e.name}上传失败`)}};return u.createElement("div",{style:{display:"flex"}},u.createElement(o.Z.Dragger,O(v({},y),{className:(0,p.iv)({"&.ant-upload.ant-upload-drag":{width:f,height:m,"&>*":{padding:0}}})}),e?u.createElement("img",{src:e,style:{width:"100%",maxHeight:m}}):u.createElement("div",{className:(0,p.iv)({height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"})},u.createElement("p",{className:"ant-upload-hint"},u.createElement(i.Z,{component:l.Z,style:{fontSize:"1.38em"}}),u.createElement("br",null),"上传",r))),Boolean(e)&&u.createElement("div",{style:{display:"flex",flexDirection:"column"}},u.createElement(o.Z,v({},y),u.createElement(a.Z,{type:"link",icon:u.createElement(i.Z,{component:c.Z})},"更换"))))}t.Z=e=>u.createElement(k,O(v({},e),{size:10,label:"封面",width:100,height:178}));const x=e=>u.createElement(k,O(v({},e),{size:1,label:"头像",width:100,height:100}))},78405:function(e,t,r){"use strict";var n=r(22142),o=r(61754),a=r(16969),i=r(70072),l=r(33058),c=r(26995),s=r(64256),p=r(87491),u=r(98466),d=Object.defineProperty,f=Object.defineProperties,m=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))b.call(t,r)&&g(e,r,t[r]);if(y)for(var r of y(t))h.call(t,r)&&g(e,r,t[r]);return e};t.Z=({value:e,onChange:t})=>{const r={accept:"video/*",action:"/api/upload/file",headers:u.Dr,showUploadList:!1,beforeUpload:e=>{if(e.size>10485760)return o.ZP.error("预览视频不能超过10M"),!1},onChange({file:e}){var r;"done"===e.status?t(null==(r=e.response.data)?void 0:r.previewUrl):"error"===e.status&&o.ZP.error(`${e.name}上传失败`)}};return n.createElement("div",{style:{display:"flex"}},n.createElement(a.Z.Dragger,(d=v({},r),y={className:p.Z.upload},f(d,m(y))),e?n.createElement("video",{src:e,style:{width:"100%",maxHeight:"142px"}}):n.createElement("div",{className:p.Z.empty},n.createElement("p",{className:"ant-upload-hint"},n.createElement(l.Z,{component:c.Z,style:{fontSize:"1.38em"}}),n.createElement("br",null),"上传视频"))),Boolean(e)&&n.createElement("div",{style:{display:"flex",flexDirection:"column"}},n.createElement(a.Z,v({},r),n.createElement(i.Z,{type:"link",icon:n.createElement(l.Z,{component:s.Z})},"更换"))));var d,y}},87491:function(e,t,r){"use strict";var n=r(62732);t.Z={modal:(0,n.iv)({textAlign:"center"}),form:(0,n.iv)({width:"90%",margin:"0 10%"}),upload:(0,n.iv)({"&.ant-upload.ant-upload-drag":{width:"100px",height:"144px","&>*":{padding:0}}}),empty:(0,n.iv)({height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"}),textarea:(0,n.iv)({"&>textarea.ant-input":{height:"100px"}}),checkbox:(0,n.iv)({marginRight:"5px",marginBottom:"2px",verticalAlign:"middle"})}},56228:function(e,t,r){"use strict";r.d(t,{Bi:function(){return f},_w:function(){return d},md:function(){return m}});var n=r(98466),o=Object.defineProperty,a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,s=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e},p=(e,t)=>{var r={};for(var n in e)i.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&a)for(var n of a(e))t.indexOf(n)<0&&l.call(e,n)&&(r[n]=e[n]);return r},u=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));function d(e){return u(this,null,(function*(){var t=e,{description:r="",isPublic:o=0}=t,a=p(t,["description","isPublic"]);const{data:i}=yield n.dJ.post("user/dynamicResource/create",s({isPublic:o,description:r},a));return i.data}))}function f(e){return u(this,null,(function*(){var t=e,{isTeam:r=!1,page:o=1,pageSize:a=99}=t,i=p(t,["isTeam","page","pageSize"]);const{data:l}=yield n.dJ.get("user/dynamicResource/list",{params:s({isTeam:r,page:o,pageSize:a},i)});return l.data}))}function m(e){return u(this,null,(function*(){const{data:t}=yield n.dJ.post("user/dynamicResource/delete",e);return t.data}))}},96056:function(e,t,r){"use strict";r.d(t,{ZP:function(){return T},z9:function(){return z}});var n,o,a=r(91694),i=r(31284),l=r(89591),c=r(76151),s=r(78296),p=r(14908),u=r(26840),d=r(5635),f=r(22142),m=r(30470),y=r(38193),b=r(98920),h=r(62732),g=r(40985);function v(e,t=!1){if(!e)return n.DEFAULT;switch(e){case"root":return n.BLUEPRINT;case"scene":case"node":return n.DEFAULT;case"block":case"component":return n.BLOCK;default:return(0,g.Ak)(e)}}(o=n||(n={})).SELECTED="rgb(164, 160, 228)",o.DEFAULT="#68d4aa",o.BLUEPRINT="rgb(100 159 210)",o.BLOCK="rgb(213 122 132)";var O=r(36989),k=r(98029),x=r(34808),E=r(73760),w=r(42761),P=r(7910),j=r(99045),S=r(19104),C=r(15303),I=r(49590),A=r(56915),M=Object.defineProperty,_=Object.defineProperties,D=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,B=(e,t,r)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Z=(e,t)=>{for(var r in t||(t={}))N.call(t,r)&&B(e,r,t[r]);if(R)for(var r of R(t))V.call(t,r)&&B(e,r,t[r]);return e},T=(0,f.memo)((e=>{const{onSelectChildren:t,loadingNodes:r,setNodes:n,edges:o,onExpand:O}=(0,m.zi)(),{id:M,type:R,data:N,isConnectable:V,selected:B,zIndex:T}=e,{name:L,inputs:U,outputs:F}=z(M,N,"root"===R),{inputEdges:Y,outputEdges:$}=(0,C.yL)(o,[M]),Q=(0,A.Z)(U,E.isEqual),W=(0,A.Z)(F,E.isEqual),J=(0,A.Z)(Y,E.isEqual),K=(0,A.Z)($,E.isEqual),H=r.some((e=>e===M)),{editor:{collapsed:G}={},props:{enabled:q}}=N,X=function(e){const{getState:t}=(0,w.oR)(),r=(0,x.jt)(),{props:n}=e,{script:o,nodeId:a,targetId:i,_editor:{cover:l}={cover:""}}=n,c=[];if("PlayEffect"===o)c.push({type:"",url:l,name:""});else{const n=("CustomScript"===o?[...(0,I.F)([e],(function*(e){"Riko.useNode"===e.callee&&(yield e.value)}))]:[a,i].filter((e=>-1!==e&&void 0!==e))).map((e=>-1===e?r:e)),{props:l}=(0,g.zh)(t().project);for(const e of n){const{type:t,name:r,url:n,_editor:{cover:o}={cover:""}}=l[e]||{};c.push({type:t,url:o||((0,E.isString)(n)?(0,P.GR)(n):""),name:r})}}const s=c.map(((e,t)=>f.createElement(f.Fragment,{key:t},e.url?f.createElement(u.Z,{title:e.name,mouseEnterDelay:.5},f.createElement("div",{className:(0,h.iv)({maxHeight:80,background:"#d2c6d8",display:"flex"})},"Video"===e.type?f.createElement("video",{src:e.url,className:(0,h.iv)({objectFit:"contain",width:"100%"})}):f.createElement("img",{src:e.url,className:(0,h.iv)({objectFit:"contain",width:"100%"})}))):e.name?f.createElement("div",{className:(0,h.iv)({background:"#d2c6d8",textAlign:"center",padding:"4px 0"})},e.name):null)));return(0,f.useMemo)((()=>s),[e,r])}(N),ee=function(e){let t=(0,S.useScriptError)(e.props);const{token:r}=d.Z.useToken(),n=j.FP[e.props.script];if(n&&!t){const{Summary:r}=n;r&&(t=f.createElement(r,Z({},e)))}if("CustomScript"===e.props.script){const r=[...(0,I.F)([e],(function*(e){var t;"Riko.useSymbol"===e.callee&&"define"===e.type&&(yield null!=(t=e.value)?t:e.default)}))];t=r.length>0&&f.createElement(f.Fragment,null,"定义场景变量：",r.join(" "))}return(0,f.useMemo)((()=>t&&f.createElement("div",{className:(0,h.cx)((0,h.iv)({background:"#d2c6d8",padding:"6px 8px",textAlign:"center",opacity:.9}),"string"==typeof t&&(0,h.iv)({color:r.colorErrorText}))},t)),[e])}(N),{setStatus:te}=(0,m.$t)();return(0,f.useMemo)((()=>f.createElement(l.Z.ErrorBoundary,null,f.createElement(c.Z,{spinning:H},f.createElement(s.Z,{overlay:f.createElement(k.u,null),trigger:["contextMenu"]},f.createElement("div",{onDoubleClick:()=>{t(M)},onContextMenu:e=>{e.stopPropagation(),n((e=>{const t=e.find((e=>e.id===M));return(null==t?void 0:t.selected)?e:e.map((e=>{return t=Z({},e),r={selected:e.id===M},_(t,D(r));var t,r}))}))},className:(0,h.cx)((0,h.iv)({boxSizing:"content-box",width:220,display:"flex",flexDirection:"column"}),B&&(0,h.iv)({border:B?"6px solid #fd9c04":"none",borderRadius:2,marginLeft:-6,marginTop:-6}),!1===q&&(0,h.iv)({filter:"grayscale(1)"})),onClick:e=>e.stopPropagation()},f.createElement("div",{className:(0,h.cx)((0,h.iv)({boxSizing:"content-box",height:24,padding:8,background:v(R,B),color:"#fff",flex:"0 0 24px",fontSize:16,display:"flex",alignItems:"center"}),(Q.length>0||W.length>0)&&(0,h.iv)({marginBottom:1}))},f.createElement("span",{className:(0,h.iv)({marginRight:"auto",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"})},f.createElement("span",null,L),"CustomScript"===N.props.script&&L!==N.props.name&&f.createElement("span",{className:(0,h.iv)({color:"#545454",fontSize:12})},"（",N.props.name,"）")),f.createElement(p.Z,{className:(0,h.iv)({marginLeft:"auto"})},"CustomScript"===N.props.script&&f.createElement(u.Z,{title:N.props.name},f.createElement(y.Z,{onClick:()=>{!N.props.url&&N.props.tsCode?te({type:"readOnly",tsCode:N.props.tsCode}):te({type:"selected"})}})),G&&f.createElement(u.Z,{title:"展开子节点"},f.createElement(b.Z,{onClick:O})))),f.createElement(l.Z.ErrorBoundary,{description:null},ee),f.createElement("div",{className:(0,h.cx)((0,h.iv)({position:"relative",background:"#d2c6d8",flex:"auto",display:"flex",columnGap:8,fontSize:14,lineHeight:"20px",opacity:.9}),(Q.length>0||W.length>0)&&(0,h.iv)({padding:10}))},Q.map((({key:e},t)=>f.createElement(a.HH,{id:e,key:e,type:"target",position:i.P.Left,isConnectable:V,style:{top:20*(t+1),left:-8,width:16,height:16,background:J.some((t=>t.targetHandle===e))?"#d97252":"#9e9e9e",zIndex:T+1}}))),f.createElement("div",{style:{flex:"1 0 auto",minWidth:40}},Q.map((({key:e,label:t=e,tooltip:r},n)=>f.createElement("div",{key:n,className:(0,h.iv)({color:J.some((t=>t.targetHandle===e))?"#555":"#9e9e9e"})},f.createElement(u.Z,{title:r},t))))),X,f.createElement("div",{style:{flex:"1 0 auto",textAlign:"right",minWidth:40}},W.map((({key:e,label:t=e,tooltip:r},n)=>f.createElement("div",{key:n,className:(0,h.iv)({color:K.some((t=>t.sourceHandle===e))?"#555":"#9e9e9e"})},f.createElement(u.Z,{title:r},t))))),W.map((({key:e},t)=>f.createElement(a.HH,{id:e,key:e,type:"source",position:i.P.Right,isConnectable:V,style:{top:20*(t+1),right:-8,width:16,height:16,background:K.some((t=>t.sourceHandle===e))?"#d97252":"#9e9e9e",zIndex:T+1}}))))))))),[H,B,q,R,Q,W,L,N.props.script,N.props.url,N.props.tsCode,G,O,ee,X,t,M,n,te,V,J,T,K])}));const z=(e,{props:t,editor:{inputs:r=[],outputs:n=[]}={}},o=!1)=>{const{name:a,_editor:{bpName:i}={}}=t,{inputs:l,outputs:c}=(0,O.HU)(t);return r=[...r.filter((({key:e})=>!!o||"onStart"!==e)),...l],n=[...n,...c],o?"0"===e?{name:"蓝图输入",outputs:r,inputs:[]}:{name:"蓝图输出",inputs:n,outputs:[]}:{name:null!=i?i:a,inputs:r,outputs:n}}},98029:function(e,t,r){"use strict";r.d(t,{U:function(){return d},u:function(){return v}});var n=r(50509),o=r(27002),a=r(30470),i=r(22142),l=Object.defineProperty,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(e){const{getCoordinate:t,onPaste:r,onLayout:l,onExpandAll:d}=(0,a.zi)(),{fitView:f,zoomIn:m,zoomOut:y}=(0,o.u)(),b=(0,a.Oy)();return i.createElement(n.Z,((e,t)=>{for(var r in t||(t={}))s.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))p.call(t,r)&&u(e,r,t[r]);return e})({},e),i.createElement(n.Z.Item,{key:b(),onClick:()=>{r(t())}},"粘贴（浅拷贝）"),i.createElement(n.Z.Item,{key:b(),onClick:()=>{r(t(),!0)}},"粘贴（深拷贝）"),i.createElement(n.Z.Item,{key:b(),onClick:()=>{d()}},"展开全部"),i.createElement(n.Z.Divider,null),i.createElement(n.Z.Item,{key:b(),onClick:()=>{f()}},"居中"),i.createElement(n.Z.Item,{key:b(),onClick:()=>{m()}},"放大"),i.createElement(n.Z.Item,{key:b(),onClick:()=>{y()}},"缩小"),i.createElement(n.Z.Divider,null),i.createElement(n.Z.Item,{key:b(),onClick:()=>{l()}},"水平布局"),i.createElement(n.Z.Item,{key:b(),onClick:()=>{l("TB")}},"垂直布局"))}var f=r(22142),m=Object.defineProperty,y=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function v(e){const{canOnCopy:t,onCopy:r,canOnEnter:o,onEnter:i,canOnGroup:l,onGroup:c,canOnPublish:s,onPublish:p,canOnToggle:u,onEnabled:d,onDisabled:m}=(0,a.zi)(),v=(0,a.Oy)();return f.createElement(n.Z,((e,t)=>{for(var r in t||(t={}))b.call(t,r)&&g(e,r,t[r]);if(y)for(var r of y(t))h.call(t,r)&&g(e,r,t[r]);return e})({},e),f.createElement(n.Z.Item,{key:v(),onClick:()=>r(),disabled:!t},"复制"),f.createElement(n.Z.Item,{key:v(),onClick:()=>r({remove:!0}),disabled:!t},"剪切"),u&&f.createElement(f.Fragment,null,f.createElement(n.Z.Item,{key:v(),onClick:()=>d()},"启用"),f.createElement(n.Z.Item,{key:v(),onClick:()=>m()},"禁用")),f.createElement(n.Z.Item,{key:v(),disabled:!o,onClick:()=>{i()}},"进入节点蓝图"),f.createElement(n.Z.Item,{key:v(),disabled:!l,onClick:()=>c()},"组合"),s&&f.createElement(n.Z.Item,{key:v(),onClick:()=>p()},"发布"))}},30470:function(e,t,r){"use strict";r.d(t,{To:function(){return zt},Oy:function(){return Rt},zi:function(){return Lt},yq:function(){return hr},Ov:function(){return i},rF:function(){return yr},$t:function(){return mr},G3:function(){return fr},ao:function(){return G},UA:function(){return er.UA},Vg:function(){return br},Dr:function(){return Bt},r$:function(){return Dt},Tx:function(){return me},fo:function(){return er.fo},zf:function(){return J},xW:function(){return fe},r2:function(){return h},BT:function(){return Pe},gA:function(){return Xt},T7:function(){return K},Le:function(){return gt},H8:function(){return yt},JN:function(){return Be},ce:function(){return ee},kp:function(){return W},kY:function(){return A},PV:function(){return kt},f8:function(){return He},ry:function(){return it},Fe:function(){return we},bc:function(){return _t},WW:function(){return _},RV:function(){return s},Ix:function(){return Gt},j6:function(){return M}});var n=r(71092),o=r(22142),a=r(91694);const i=()=>{const{ref:e,getCoordinate:t,setCoordinate:r}=G(),[i,l]=Dt(),[c,p]=(0,a.Rr)([]),[u,d]=(0,a.ll)([]),{selectedIds:f,onSelectAll:m,onSelectChildren:y}=it({nodes:c,edges:u,setNodes:p}),{pushUndo:b,popUndo:g,clearUndoStack:v,length:O}=M(),{pushRedo:k,popRedo:x,clearRedoStack:E,length:w}=_(),{addNodes:P,removeNodes:j}=W({setLoadingNodes:l,setNodes:p,pushUndo:b,pushRedo:k}),{addEdges:S,removeEdges:C,freshEdges:I}=K({edges:u,setEdges:d,pushUndo:b,pushRedo:k}),{addSignal:D,removeSignal:R}=we({setNodes:p,setEdges:d,pushRedo:k,pushUndo:b}),N=Pe({addNodes:P,removeNodes:j,addEdges:S,removeEdges:C,addSignal:D,removeSignal:R,popUndo:g,popRedo:x}),[V,B]=(0,o.useState)(null),Z=Be({clearUndoStack:v,clearRedoStack:E,setNodes:p,setEdges:d,state:V,setState:B}),T=He({state:V,nodes:c,edges:u});(0,n.Z)("Blueprint",Z);const{canOnCopy:z,onCopy:L}=h({selectedIds:f,nodes:c,edges:u,removeNodes:j}),U=A({setNodes:p,addNodes:P,addEdges:S}),{canOnGroup:F,onGroup:Y}=yt({nodes:c,edges:u,selectedIds:f,removeNodes:j,addNodes:P,addEdges:S}),$=ee({nodes:c,edges:u,setNodes:p,setEdges:d}),{canOnEnter:Q,onEnter:J}=gt({nodes:c,selectedIds:f,save:T,init:Z,state:V}),{canOnCollapse:H,onCollapse:q,canOnExpand:X,onExpand:te,onExpandAll:re}=fe({selectedIds:f,nodes:c,edges:u,setNodes:p,setEdges:d}),{canOnPublish:ne,onPublish:oe}=kt({selectedIds:f,nodes:c}),{canOnToggle:ae,onEnabled:ie,onDisabled:le}=_t({nodes:c,selectedIds:f,setNodes:p});return s({dispatchAction:N,onCopy:L,onPaste:U,onSelectAll:m}),me(c,u,f),{ref:e,getCoordinate:t,setCoordinate:r,state:V,visible:null!==V,loadingNodes:i,undoLen:O,redoLen:w,init:Z,save:T,nodes:c,edges:u,setNodes:p,setEdges:d,selectedIds:f,onSelectChildren:y,addNodes:P,removeNodes:j,addEdges:S,removeEdges:C,freshEdges:I,addSignal:D,removeSignal:R,dispatchAction:N,onLayout:$,canOnCopy:z,onCopy:L,onPaste:U,canOnGroup:F,onGroup:Y,canOnEnter:Q,onEnter:J,canOnCollapse:H,onCollapse:q,canOnExpand:X,onExpand:te,onExpandAll:re,canOnPublish:ne,onPublish:oe,canOnToggle:ae,onEnabled:ie,onDisabled:le,setLoadingNodes:l}};var l=r(19104),c=r(40985);function s({dispatchAction:e,onCopy:t,onPaste:r,onSelectAll:n}){(0,l.useBlueprintHotkeys)(`${(0,c.zO)("command","control")}+c`,(()=>t()),void 0,[t]),(0,l.useBlueprintHotkeys)(`${(0,c.zO)("command","control")}+v`,(()=>r()),void 0,[r]),(0,l.useBlueprintHotkeys)(`${(0,c.zO)("command","control")}+x`,(()=>{t({remove:!0})}),void 0,[t]),(0,l.useBlueprintHotkeys)(`${(0,c.zO)("command","control")}+z`,(()=>{e("undo")})),(0,l.useBlueprintHotkeys)(`${(0,c.zO)("command","control")}+shift+z`,(()=>{e("redo")})),(0,l.useBlueprintHotkeys)(`${(0,c.zO)("command","control")}+a`,(()=>{n()}))}var p=r(23256),u=r(65164),d=r(26494),f=r(61754),m=r(42761),y=r(10127),b=r(15303);function h({selectedIds:e,nodes:t,edges:r,removeNodes:n}){const{getState:a}=(0,m.oR)(),[i,l]=(0,u.Z)(p.Ek.BLUEPRINT);return{canOnCopy:(0,o.useMemo)((()=>e.length>0&&t.filter((t=>e.includes(t.id))).every((e=>{var t;return"root"!==e.type&&!(0,y.C_)(null==(t=e.data.editor)?void 0:t.nodeType)}))),[e]),onCopy:(0,d.Z)((({remove:o=!1}={})=>{if(e.length>0){const i=t.filter((t=>e.includes(t.id))).filter((e=>{var t;return"root"!==e.type&&!(0,y.C_)(null==(t=e.data.editor)?void 0:t.nodeType)})),{innerEdges:c}=(0,b.yL)(r,e);l({nodes:i,edges:c,projectId:a().project.id}),o?(n(e.filter((e=>{var r;const n=t.find((t=>t.id===e));if(!n)throw new Error(`不存在目标节点: ${e}`);return"root"!==n.type&&!(0,y.C_)(null==(r=n.data.editor)?void 0:r.nodeType)}))),f.ZP.info("剪切成功")):f.ZP.info("复制成功")}}))}}var g=r(23091),v=r(51908),O=Object.defineProperty,k=Object.defineProperties,x=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,j=(e,t,r)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&j(e,r,t[r]);if(E)for(var r of E(t))P.call(t,r)&&j(e,r,t[r]);return e},C=(e,t)=>k(e,x(t)),I=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));function A({setNodes:e,addNodes:t,addEdges:r}){const{getState:n,dispatch:a}=(0,m.oR)();return(0,o.useCallback)(((o,i=!1)=>I(this,null,(function*(){const s=g.R.getValue();if(!s)return;const{projectId:p,edges:u}=s;let{nodes:d}=s;if(null==d?void 0:d.length){const s=d.reduce(((e,t)=>((null==t?void 0:t.position.x)<=e.x&&(e.x=t.position.x),(null==t?void 0:t.position.y)<=e.y&&(e.y=t.position.y),e)),{x:Number.MAX_SAFE_INTEGER,y:Number.MAX_SAFE_INTEGER}),{copyScript:m,createScenes:y}=(0,v.O6)(n().project,p,i),h=[];d=yield Promise.all(d.map((e=>I(this,null,(function*(){return C(S({},e),{data:(yield m([e.data]))[0]})})))));const{nodes:g,edges:O}=(0,b.tP)(d,u);t(g.map((e=>Object.assign(C(S({},e),{position:C(S({},e.position),{x:o?e.position.x-s.x+o.x:e.position.x+20,y:o?e.position.y-s.y+o.y:e.position.y+20}),selected:!1}),i&&{data:C(S({},e.data),{props:C(S({},e.data.props),{name:e.data.props.name+"(复制)"})})})))),e((e=>e.map((e=>C(S({},e),{selected:g.some((t=>t.id===e.id))}))))),r(O);const{components:k,customScripts:x}=yield y();for(const e of k)h.push((0,l.addComponent)(e));for(const e of x){const t=(0,l.nameWithOrder)(e.name,(0,c.o$)(n().project).customScripts);h.push((0,l.addCustomScript)(C(S({},e),{name:t})))}for(const e of h)a(e);f.ZP.info("粘贴成功")}}))),[r,t,a,n,e])}function M(){const e=(0,o.useRef)([]),t=(0,o.useCallback)((t=>{e.current.push(t)}),[]),r=(0,o.useCallback)((()=>{if(e.current.length)return{action:e.current.pop(),flag:"redo"}}),[]);return{clearUndoStack:(0,o.useCallback)((()=>{e.current=[]}),[]),pushUndo:t,popUndo:r,length:e.current.length}}function _(){const e=(0,o.useRef)([]),t=(0,o.useCallback)((t=>{e.current.push(t)}),[]),r=(0,o.useCallback)((()=>{if(e.current.length)return{action:e.current.pop(),flag:"undo"}}),[]);return{clearRedoStack:(0,o.useCallback)((()=>{e.current=[]}),[]),pushRedo:t,popRedo:r,length:e.current.length}}var D=r(44372),R=r(73760),N=r(45734),V=r(8385),B=Object.defineProperty,Z=Object.defineProperties,T=Object.getOwnPropertyDescriptors,z=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,F=(e,t,r)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Y=(e,t)=>{for(var r in t||(t={}))L.call(t,r)&&F(e,r,t[r]);if(z)for(var r of z(t))U.call(t,r)&&F(e,r,t[r]);return e},$=(e,t)=>Z(e,T(t)),Q=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));function W({setLoadingNodes:e,pushRedo:t,pushUndo:r,setNodes:n}){return{addNodes:(0,o.useCallback)(((o,a="undo")=>Q(this,null,(function*(){try{o=o.map((e=>$(Y({},e),{selected:!0}))),n((e=>[...e.map((e=>$(Y({},e),{selected:!1}))),...o]));const i={type:"removeNodes",data:o.map((e=>e.id))};return"undo"===a?r(i):t(i),o}catch(e){f.ZP.error(e)}finally{e([])}}))),[t,r,e,n]),removeNodes:(0,o.useCallback)(((e,o="undo")=>{n((n=>{const a={type:"addNodes",data:n.filter((t=>e.includes(t.id)))};return"undo"===o?r(a):t(a),n.filter((t=>!e.includes(t.id)))}))}),[t,r,n])}}function J(e,t,r){const n=(0,l.useOnAddCustomScript)(),o=(0,N.u)(),{getState:a,dispatch:i}=(0,m.oR)();return(0,d.Z)(((s,p)=>Q(this,null,(function*(){var u,d,f;const m=(0,c.xv)();try{if("CustomScript"!==s.props.script||!s.props.tsCode&&!s.props.url)return e([{id:String(m),position:null!=(f=null==p?void 0:p.position)?f:{x:100,y:100},type:"block",data:$(Y({},s),{id:m,props:$(Y({},s.props),{name:"设置动画"===s.props.name?"透明动画":s.props.name,_editor:{bpName:s.props.name}})})}]);{let f=s.props.tsCode;if(s.props.url){const{ideCode:e}=(0,c.se)(a().project,s.props.url);f=e}const[y]=(yield e([{id:String(m),position:null!=(u=null==p?void 0:p.position)?u:{x:100,y:100},type:"block",data:{id:m,editor:{inputs:[],outputs:[],nodeType:"block"},props:$(Y({},(0,R.omit)(s.props,"tsCode")),{name:(0,V.V)(s.props.name||""),script:"CustomScript"}),type:"Script"}}]))||[];if(r([String(m)]),y){if(!s.props.url){const{orderId:e}=yield n((0,b.oy)(y.data.props.name||"未命名脚本.ts"),"typescript",f,"",null!=(d=null==p?void 0:p.status)?d:1);t((t=>t.map((t=>t.id===y.id?$(Y({},t),{data:$(Y({},t.data),{props:$(Y({},t.data.props),{url:e})})}):t))))}const e=(0,c.o$)(a().project).customScripts,r=yield(0,b.ud)(e);i((0,l.setSettings)({jsCode:r},!0));let u=[y];return t((e=>e.map((e=>e.id===y.id?(u=[$(Y({},e),{data:$(Y({},e.data),{props:Y(Y({},e.data.props),(0,D.rM)(e.data.props,r,e.data.props.url))})})],u[0]):e)))),setTimeout((()=>{o(y.id)})),u}}}finally{r([])}}))))}function K({edges:e,pushRedo:t,pushUndo:r,setEdges:n}){return{addEdges:(0,o.useCallback)(((e,o="undo")=>{n((t=>[...t,...e]));const a={type:"removeEdges",data:e.map((e=>e.id))};"undo"===o?r(a):t(a)}),[t,r,n]),removeEdges:(0,o.useCallback)(((e,o="undo")=>{n((n=>{const a={type:"addEdges",data:n.filter((t=>e.includes(t.id)))};return"undo"===o?r(a):t(a),n.filter((t=>!e.includes(t.id)))}))}),[t,r,n]),freshEdges:(0,d.Z)((t=>{if(t){const{inputs:r,outputs:o}=(0,b.aj)(t),{inputEdges:a,outputEdges:i}=(0,b.yL)(e,[t.id]),l=a.filter((e=>r.some((({key:t})=>t===e.targetHandle)))),c=i.filter((e=>o.some((({key:t})=>t===e.sourceHandle))));l.length===a.length&&c.length===i.length||n((e=>e.filter((e=>[...a,...i].every((t=>t.id!==e.id)))).concat([...l,...c])))}}))}}var H=r(97884);function G(){const e=(0,o.useRef)(null),t=(0,o.useRef)({x:0,y:0}),r=(0,H.u)();return{ref:e,setCoordinate(n){if(e.current){const{left:o,top:a}=e.current.getBoundingClientRect(),{clientX:i,clientY:l}=n,c=(i-o-r.x)/r.zoom,s=(l-a-r.y)/r.zoom;t.current={x:c,y:s}}},getCoordinate(){return t.current}}}var q=r(99033),X=r.n(q);function ee({nodes:e,edges:t,setNodes:r,setEdges:n}){return(0,d.Z)(((o="LR")=>{const{nodes:a,edges:i}=te(e,t,o);r([...a]),n([...i])}))}const te=(e=[],t=[],r="LR")=>{const n=new(X().graphlib.Graph);n.setDefaultEdgeLabel((()=>({})));const o="LR"===r;return n.setGraph({rankdir:r}),e.forEach((e=>{n.setNode(e.id,{width:e.width||212,height:e.height||264})})),t.forEach((e=>{n.setEdge(e.source,e.target)})),X().layout(n),e.forEach((e=>{const t=n.node(e.id);return e.targetPosition=o?"left":"top",e.sourcePosition=o?"right":"bottom",e.position={x:t.x-(e.width||212)/2,y:t.y-(e.height||264)/2},e})),{nodes:e,edges:t}};var re=r(31284);function ne(e,t,r,n=[]){n.push(e.id);const o=(0,re.B)(e,t,r);for(const e of o){if(e.id===n[0])throw new Error("暂不支持对环状结构执行该操作");n.includes(e.id)||ne(e,t,r,n)}return n}var oe=Object.defineProperty,ae=Object.defineProperties,ie=Object.getOwnPropertyDescriptors,le=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,pe=(e,t,r)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ue=(e,t)=>{for(var r in t||(t={}))ce.call(t,r)&&pe(e,r,t[r]);if(le)for(var r of le(t))se.call(t,r)&&pe(e,r,t[r]);return e},de=(e,t)=>ae(e,ie(t));function fe({selectedIds:e,nodes:t,edges:r,setNodes:n,setEdges:o}){var a;const i=(0,N.u)(),l=t.find((t=>t.id===e[0])),c=1===e.length&&(null==(a=null==l?void 0:l.data.editor)?void 0:a.collapsed),s=(0,d.Z)((()=>{const a=t.find((t=>t.id===e[0]));if(a)try{const e=ne(a,t,r),{innerEdges:l}=(0,b.yL)(r,e);n((t=>t.map((t=>e.includes(t.id)?de(ue({},t),{hidden:!1,data:de(ue({},t.data),{editor:de(ue({},t.data.editor),{collapsed:!1})})}):t)))),o((e=>e.map((e=>l.some((t=>t.id===e.id))?de(ue({},e),{hidden:!1}):e)))),setTimeout((()=>{for(const t of e)i(String(t))}))}catch(e){f.ZP.warning(e.message)}})),p=(0,d.Z)((()=>{n((e=>e.map((e=>de(ue({},e),{hidden:!1,data:de(ue({},e.data),{editor:de(ue({},e.data.editor),{collapsed:!1})})}))))),o((e=>e.map((e=>de(ue({},e),{hidden:!1})))))}));return{canOnCollapse:1===e.length&&!c,onCollapse:(0,d.Z)((()=>{const a=t.find((t=>t.id===e[0]));if(a)try{const e=ne(a,t,r);if(e.length>1){const{innerEdges:t}=(0,b.yL)(r,e);n((t=>t.map((t=>t.id===a.id?de(ue({},t),{data:de(ue({},t.data),{editor:de(ue({},t.data.editor),{collapsed:!0})})}):e.filter((e=>e!==a.id)).includes(t.id)?de(ue({},t),{hidden:!0}):t)))),o((e=>e.map((e=>t.some((t=>t.id===e.id))?de(ue({},e),{hidden:!0}):e))))}}catch(e){f.ZP.warning(e.message)}})),canOnExpand:c,onExpand:s,onExpandAll:p}}function me(e,t,r){const{enableBlueprint:n}=(0,l.useEditor)(0,"enableBlueprint"),a=(0,o.useRef)(null),i=(0,d.Z)((()=>{const n=e.find((e=>e.id===r[0]));n&&console.log(n,e,t)}));(0,o.useEffect)((()=>{if(n)return a.current=window.editorScene,window.editorScene=i,()=>{window.editorScene=a.current}}),[n,i])}var ye=Object.defineProperty,be=Object.defineProperties,he=Object.getOwnPropertyDescriptors,ge=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,ke=(e,t,r)=>t in e?ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,xe=(e,t)=>{for(var r in t||(t={}))ve.call(t,r)&&ke(e,r,t[r]);if(ge)for(var r of ge(t))Oe.call(t,r)&&ke(e,r,t[r]);return e},Ee=(e,t)=>be(e,he(t));function we({setNodes:e,pushRedo:t,pushUndo:r}){return{addSignal:(0,o.useCallback)((({id:n,type:o,signal:a},i="undo")=>{e((e=>{var t,r;const i=e.find((e=>e.id===n)),l=Ee(xe({},i.data),{editor:Ee(xe({},i.data.editor),{[o]:[...null!=(r=null==(t=i.data.editor)?void 0:t[o])?r:[],a]})});return e.map((e=>e.data===i.data?Ee(xe({},e),{data:l}):e))}));const l={type:"removeSignal",data:{id:n,type:o,signal:a}};"undo"===i?r(l):t(l)}),[t,r,e]),removeSignal:(0,o.useCallback)((({id:n,type:o,signal:a},i="undo")=>{e((e=>{var t,r,i;const l=e.find((e=>e.id===n)),c=Ee(xe({},l.data),{editor:Ee(xe({},l.data.editor),{[o]:null!=(i=null==(r=null==(t=l.data.editor)?void 0:t[o])?void 0:r.filter((e=>e.key!==a.key)))?i:[]})});return e.map((e=>e.data===l.data?Ee(xe({},e),{data:c}):e))}));const l={type:"addSignal",data:{id:n,type:o,signal:a}};"undo"===i?r(l):t(l)}),[t,r,e])}}function Pe({addEdges:e,addNodes:t,removeEdges:r,removeNodes:n,addSignal:a,removeSignal:i,popUndo:l,popRedo:s}){return(0,o.useCallback)((o=>{const p="undo"===o?l():s();if(p){const{action:o,flag:l}=p;switch(o.type){case"addNodes":return t(o.data,!1,l);case"removeNodes":return n(o.data,l);case"addEdges":return e(o.data,l);case"removeEdges":return r(o.data,l);case"addSignal":return a(o.data,l);case"removeSignal":return i(o.data,l);default:return(0,c.Ak)(o)}}}),[e,t,a,s,l,r,n,i])}var je=r(48837),Se=r(49590),Ce=Object.defineProperty,Ie=Object.defineProperties,Ae=Object.getOwnPropertyDescriptors,Me=Object.getOwnPropertySymbols,_e=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable,Re=(e,t,r)=>t in e?Ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ne=(e,t)=>{for(var r in t||(t={}))_e.call(t,r)&&Re(e,r,t[r]);if(Me)for(var r of Me(t))De.call(t,r)&&Re(e,r,t[r]);return e},Ve=(e,t)=>Ie(e,Ae(t));function Be({clearUndoStack:e,clearRedoStack:t,setState:r,setNodes:n,setEdges:a,state:i}){const s=(0,l.useProject)("type"),{getState:p}=(0,m.oR)(),{onChange:u}=(0,l.useEditor)(0,"enableBlueprint"),{onChange:d}=(0,l.useEditor)(0,"blueprintState");return(0,o.useEffect)((()=>{if(null==i?void 0:i.script){const{nodes:e,edges:t}=(0,b.SY)(i.script,"Scene"===i.type&&"Component"!==s||"Project"===i.type);n(e),a(t)}d(i?(0,R.omit)(i,["script","parent"]):i)}),[s,d,a,n,i]),(0,o.useCallback)((o=>{if(n([]),a([]),e(),t(),!o)return u(!1),void r(null);u(!0);const{type:i}=p().project,{type:l,id:s,parent:d}=o;switch(l){case"Node":{const e=Ze((0,c.zh)(p().project),s);return void(e&&r({id:s,type:l,script:e}))}case"Scene":{const e=Te((0,c.zh)(p().project),"Component"===i);return void(e&&r({type:l,id:s,script:e}))}case"Project":{const e=function(e){var t;const{settings:r}=e,n=null!=(t=r.blueprint)?t:ze("项目蓝图","project"),o=e.scenes.filter((({type:e,editor:t})=>"Scene"===e&&!t.loading)),a=Object.fromEntries(o.map((e=>{const t=ze(e.name,"scene");return[e.orderId,{nextIds:Array.from((0,Se.Z)((0,c.GV)(e),(function*(e){"ChangeScene"===e.props.script&&(yield e.props.sceneId)}),!1)),blueprint:t}]})));let i=ze("上一个场景","scene");i=Ve(Ne({},i),{id:-1,editor:Ve(Ne({},i.editor),{inputs:[{key:"-1",label:"切换"}]})});const l=o.map((e=>{const t=a[e.orderId].blueprint,r=a[e.orderId].nextIds.map(((e,t)=>{var r,n;return{key:(0,b.GY)("$outputs",t+1),label:`条件 ${t+1}`,_targetId:-1===e?-1:null==(n=null==(r=a[e])?void 0:r.blueprint)?void 0:n.id}}));return Ve(Ne({},t),{editor:Ve(Ne({},t.editor),{inputs:[{key:"-1",label:"切换"}],outputs:r.map((e=>(0,R.omit)(e,"_targetId")))}),props:Ve(Ne({},t.props),{outputs:Object.fromEntries(r.map((({key:e,_targetId:t})=>[e,[t?[t,"-1",{}]:[]]])))})})})),s=Ve(Ne({},n),{props:Ve(Ne({},n.props),{scripts:l.concat(i).concat(n.props.scripts||[]),inputs:{onStart:[[a[o[0].orderId].blueprint.id,"-1",{}]]}})}),{nodes:p,edges:u}=(0,b.SY)(s),{nodes:d,edges:f}=te(p,u);return(0,b.ST)(d,f)}(p().project);return void(e&&r({type:l,id:s,script:e}))}case"Script":{const e=(0,c.zh)(p().project),[t]=(0,c.Nf)(e.props,s);return void(t&&r({type:l,id:s,script:t,parent:d}))}default:return(0,c.Ak)(l)}}),[t,e,p,u,a,n,r])}function Ze(e,t){var r;const[n]=(0,c.qC)((0,c.v$)(e),t);if(n)return null!=(r=(0,c.uz)(n.scripts,e.props).find((e=>"Blueprint"===e.type)))?r:ze(n.name,"node")}function Te(e,t=!1){var r,n;const o=null!=(r=(0,c.uz)(e.scripts||[],e.props).find((e=>"Blueprint"===e.type)))?r:ze("场景蓝图","scene"),a=Array.from(function*e(t,r){for(const n of t){const t=(0,c.uz)(n.scripts,r).find((e=>"Blueprint"===e.type));t&&(yield Ve(Ne({},t),{props:Ve(Ne({},t.props),{name:n.name})})),n.nodes&&(yield*e(n.nodes,r))}}(t?e.nodes[0].nodes:e.nodes,e.props));return Ve(Ne({},o),{props:Ve(Ne({},o.props),{scripts:a.concat(null!=(n=o.props.scripts)?n:[])})})}function ze(e="未命名蓝图",t){return{id:(0,c.xv)(),type:"Blueprint",editor:{inputs:[{label:"开始",key:"onStart",tooltip:"蓝图开始触发起点"}],outputs:[],nodeType:t},props:{script:"Blueprint",name:e,time:0,scripts:[]}}}var Le=Object.defineProperty,Ue=Object.defineProperties,Fe=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,$e=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable,We=(e,t,r)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Je=(e,t)=>{for(var r in t||(t={}))$e.call(t,r)&&We(e,r,t[r]);if(Ye)for(var r of Ye(t))Qe.call(t,r)&&We(e,r,t[r]);return e},Ke=(e,t)=>Ue(e,Fe(t));function He({state:e,nodes:t,edges:r}){const{dispatch:n,getState:o}=(0,m.oR)();return(0,d.Z)((()=>{if(!e)return;const a=(0,b.ST)(t.map((e=>e.selected?Ke(Je({},e),{selected:!1}):e)),r);switch(e.type){case"Node":return i(e.id,a);case"Scene":return s(e.id,a);case"Project":return;case"Script":{const{parent:t}=e;if(!t)return;switch(t.type){case"Scene":case"Node":{const e=(0,c.zh)(o().project),r="Node"===t.type?Ze(e,t.id):Te(e);if(r){const e=function e(t,r){const n=r(t);if(t===n)for(const n of t.props.scripts||[]){const o=e(n,r);if(n!==o)return Ke(Je({},t),{props:Ke(Je({},t.props),{scripts:(t.props.scripts||[]).map((e=>e===n?o:e))})})}return n}(r,(e=>e.id===a.id?a:e));("Node"===t.type?i:s)(t.id,e)}break}default:return}}}function i(e,t){const{props:r}=(0,c.zh)(o().project);r[t.id]?n((0,l.groupActions)([(0,l.changeEditor)(t.id,t.editor),(0,l.changeProps)([t.id],t.props,{replace:!0})])):n((0,l.addScript)(e,t))}function s(e,t){const{props:r}=(0,c.zh)(o().project),a=(t.props.scripts||[]).filter((e=>{var t;return"Blueprint"===e.type&&(0,y.C_)(null==(t=e.editor)?void 0:t.nodeType)})),i=Object.entries(r).filter((([e,r])=>Number(e)!==t.id&&"Blueprint"===r.type)).map((([e])=>Number(e))).reduce(((e,t)=>{const r=a.find((e=>e.id===t));return r&&r.editor?e.push((0,l.changeEditor)(t,r.editor),(0,l.changeProps)([t],r.props,{replace:!0})):e.push((0,l.delScript)(t)),e}),[]);r[t.id]?i.push((0,l.changeEditor)(t.id,t.editor),(0,l.changeProps)([t.id],Ke(Je({},t.props),{scripts:(t.props.scripts||[]).filter((({editor:{nodeType:e}={}})=>!(0,y.C_)(e)))}),{replace:!0})):i.push((0,l.addScript)(e,Ke(Je({},t),{props:Ke(Je({},t.props),{scripts:(t.props.scripts||[]).filter((({editor:{nodeType:e}={}})=>!(0,y.C_)(e)))})}))),n((0,l.groupActions)(i,je.ActionFlag.EditorOnly))}}))}var Ge=Object.defineProperty,qe=Object.defineProperties,Xe=Object.getOwnPropertyDescriptors,et=Object.getOwnPropertySymbols,tt=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,nt=(e,t,r)=>t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ot=(e,t)=>{for(var r in t||(t={}))tt.call(t,r)&&nt(e,r,t[r]);if(et)for(var r of et(t))rt.call(t,r)&&nt(e,r,t[r]);return e},at=(e,t)=>qe(e,Xe(t));function it({nodes:e,edges:t,setNodes:r}){const n=e.reduce(((e,t)=>(t.selected&&e.push(t.id),e)),[]),a=(0,o.useMemo)((()=>n),[JSON.stringify(n)]),i=(0,o.useCallback)((()=>{r((e=>e.map((e=>"root"===e.type?e:at(ot({},e),{selected:!0})))))}),[r]),l=(0,d.Z)((n=>{if(n||1===a.length){const o=e.find((e=>e.id===n));if(o)try{const n=ne(o,e,t);r((e=>e.map((e=>n.some((t=>t===e.id))?at(ot({},e),{selected:!0}):e))))}catch(e){f.ZP.warning(e.message)}}}));return{selectedIds:a,onSelectAll:i,onSelectChildren:l}}var lt=Object.defineProperty,ct=Object.defineProperties,st=Object.getOwnPropertyDescriptors,pt=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,ft=(e,t,r)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mt=(e,t)=>{for(var r in t||(t={}))ut.call(t,r)&&ft(e,r,t[r]);if(pt)for(var r of pt(t))dt.call(t,r)&&ft(e,r,t[r]);return e};function yt({nodes:e,edges:t,selectedIds:r,removeNodes:n,addNodes:a,addEdges:i}){return{canOnGroup:(0,o.useMemo)((()=>r.length>1&&e.filter((e=>r.includes(e.id))).every((e=>{var t;return"root"!==e.type&&!(0,y.C_)(null==(t=e.data.editor)?void 0:t.nodeType)}))),[r]),onGroup:(0,d.Z)((()=>{const o=e.filter((e=>r.includes(e.id))),c=(0,re.o)(o),{innerEdges:s,inputEdges:p,outputEdges:u}=(0,b.yL)(t,r),d=ze("复合节点","component"),{map:f,signals:m}=l(p,"in"),{map:y,signals:h}=l(u,"out");d.editor.inputs=m.map((({key:e,label:t,tooltip:r})=>({key:e,label:t,tooltip:r}))),d.editor.outputs=h.map((({key:e,label:t,tooltip:r})=>({key:e,label:t,tooltip:r})));const g=(0,b.SY)(d),v=[...o,...g.nodes],O=[...s,...bt(p.map((e=>ht(e,{source:"0",sourceHandle:f.get(e.id)})))),...bt(u.map((e=>ht(e,{target:String(d.id),targetHandle:y.get(e.id)}))))],k=(0,b.ST)(v,O);n(r),a([{id:String(d.id),position:{x:c.x+c.width/2,y:c.y+c.height/2},type:"component",data:mt({},k)}]),i([...bt(p.map((e=>ht(e,{target:String(k.id),targetHandle:f.get(e.id)})))),...bt(u.map((e=>ht(e,{source:String(k.id),sourceHandle:y.get(e.id)}))))])}))};function l(e,t="out"){const r=e=>"in"===t?`${e.target}:${e.targetHandle}`:`${e.source}:${e.sourceHandle}`;let n=1;const o=new Map,a=[];for(const i of e){const e=r(i),l=a.find((({_edge:t})=>r(t)===e));if(l)o.set(i.id,o.get(l._edge.id));else{const e=(0,b.GY)("in"===t?"$inputs":"$outputs",n);a.push({key:e,label:`${"in"===t?"输入":"输出"}信号 ${n}`,_edge:i}),o.set(i.id,e),n++}}return{map:o,signals:a}}}function bt(e){const t=[];for(const r of e)t.every((e=>e.id!==r.id))&&t.push(r);return t}function ht(e,t){const{source:r,sourceHandle:n,target:o,targetHandle:a}=e;return i=mt(mt({},e),t),l={id:(0,b.lK)(mt({source:r,sourceHandle:n,target:o,targetHandle:a},t))},ct(i,st(l));var i,l}function gt({save:e,init:t,state:r,nodes:n,selectedIds:a}){const{getState:i,dispatch:s}=(0,m.oR)(),{onEditComponent:p}=(0,l.useOnEditComponent)(),u=n.find((e=>e.id===a[0]));return{canOnEnter:(0,o.useMemo)((()=>{var e,t,r;return 1===a.length&&u&&"root"!==u.type&&("scene"===(null==(e=u.data.editor)?void 0:e.nodeType)||"node"===(null==(t=u.data.editor)?void 0:t.nodeType)||"component"===(null==(r=u.data.editor)?void 0:r.nodeType))}),[u,a.length]),onEnter:(0,d.Z)((()=>{var n;const{data:o}=u;switch(null==(n=o.editor)?void 0:n.nodeType){case"node":{const r=(0,b.Bi)(o,i);if(r){if((0,c.W6)(r.type)){const{props:n}=(0,c.zh)(i().project),o=n[r.id].url;if(o)return e(),t(null),void p(o,!0).then((()=>{const e=(0,c.zh)(i().project);t({type:"Scene",id:e.id})}))}s((0,l.selectNode)([r.id])),e(),t({type:"Node",id:r.id})}break}case"scene":{const r=(0,b.Bi)(o,i);r&&(s((0,l.changeEditor)(0,{selectedSceneId:r.id})),e(),t({type:"Scene",id:r.id}));break}case"component":e(),t({type:"Script",id:o.id,parent:vt(r)})}}))}}function vt(e){for(;null==e?void 0:e.parent;)e=vt(e.parent);return e}var Ot=r(56228);function kt({selectedIds:e,nodes:t}){const{getState:r}=(0,m.oR)(),{trigger:a}=(0,n.Z)("reloadResource"),i=(0,o.useMemo)((()=>{if(1===e.length){const r=t.find((t=>t.id===e[0]));if(r){const{data:{props:{script:e,url:t}}}=r;if("CustomScript"===e&&t)return!0}}return!1}),[t,e]),l=(0,d.Z)((()=>{return n=this,null,o=function*(){if(i)try{const n=t.find((t=>t.id===e[0])),{data:{props:{name:o="",url:i,_editor:{bpName:l}={}}}}=n,{ideCode:s}=(0,c.se)(r().project,i);yield(0,Ot._w)({name:l||o,description:"",type:"code",data:{code:s,contextType:"both"}}),a(),f.ZP.success("发布成功")}catch(e){f.ZP.error(e.message)}},new Promise(((e,t)=>{var r=e=>{try{i(o.next(e))}catch(e){t(e)}},a=e=>{try{i(o.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,a);i((o=o.apply(n,null)).next())}));var n,o}));return{canOnPublish:i,onPublish:l}}var xt=Object.defineProperty,Et=Object.defineProperties,wt=Object.getOwnPropertyDescriptors,Pt=Object.getOwnPropertySymbols,jt=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable,Ct=(e,t,r)=>t in e?xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,It=(e,t)=>{for(var r in t||(t={}))jt.call(t,r)&&Ct(e,r,t[r]);if(Pt)for(var r of Pt(t))St.call(t,r)&&Ct(e,r,t[r]);return e},At=(e,t)=>Et(e,wt(t)),Mt=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));function _t({selectedIds:e,nodes:t,setNodes:r}){const n=(0,o.useMemo)((()=>!!(e.length>0&&e.map((e=>t.find((t=>t.id===e)))).every((e=>"block"===e.type)))),[t,e]),a=(0,d.Z)((()=>Mt(this,null,(function*(){if(n)try{r((t=>t.map((t=>e.includes(t.id)?At(It({},t),{data:At(It({},t.data),{props:At(It({},t.data.props),{enabled:!0})})}):t))))}catch(e){f.ZP.error(e.message)}})))),i=(0,d.Z)((()=>Mt(this,null,(function*(){if(n)try{r((t=>t.map((t=>e.includes(t.id)?At(It({},t),{data:At(It({},t.data),{props:At(It({},t.data.props),{enabled:!1})})}):t))))}catch(e){f.ZP.error(e.message)}}))));return{canOnToggle:n,onEnabled:a,onDisabled:i}}function Dt(){const[e,t]=(0,o.useState)([]);return[e,t]}function Rt(){const e=(0,o.useRef)(1);return(0,o.useCallback)((()=>e.current++),[])}var Nt=r(83776),Vt=r(23936);function Bt(){return(0,m.v9)((e=>Zt(e)),m.wU)}const Zt=(0,Nt.P1)((({project:e})=>{for(;e.editor.prevState;)e=e.editor.prevState;return e.customScripts}),(({project:e})=>{return t=e.scenes,(0,R.uniq)(t.map((e=>Array.from((0,Se.Z)((0,c.GV)(e),(function*(e){"number"==typeof e.props.url&&(yield e.props.url)}))))).flat());var t}),((e,t)=>{const r=function(e){const t=new Map;for(const{orderId:r,ideCode:n}of e)(0,Vt.Q)(n,e,(({orderId:e})=>{t.set(r,t.has(r)?[...t.get(r),e]:[e])}));return t}(e.filter((e=>1!==e.status)));return(0,R.uniq)([...t,...Array.from(Tt(t,r)).flat()])}),{memoizeOptions:{equalityCheck:m.wU}});function*Tt(e,t){for(const r of e)if(t.has(r)){const e=t.get(r);e&&(yield e,yield*Tt(e,t))}}r(44322);const zt=o.createContext(null);function Lt(){return(0,o.useContext)(zt)}var Ut=Object.defineProperty,Ft=Object.defineProperties,Yt=Object.getOwnPropertyDescriptors,$t=Object.getOwnPropertySymbols,Qt=Object.prototype.hasOwnProperty,Wt=Object.prototype.propertyIsEnumerable,Jt=(e,t,r)=>t in e?Ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Kt=(e,t)=>{for(var r in t||(t={}))Qt.call(t,r)&&Jt(e,r,t[r]);if($t)for(var r of $t(t))Wt.call(t,r)&&Jt(e,r,t[r]);return e},Ht=(e,t)=>Ft(e,Yt(t));function Gt({nodes:e,selectedIds:t,setNodes:r,freshEdges:n}){const o=e.find((e=>e.id===t[0])),a=(0,N.u)();return{script:null==o?void 0:o.data,onChange:(0,d.Z)(((e,{ids:o}={})=>{var i;try{const l=String(null!=(i=null==o?void 0:o[0])?i:t[0]);r((t=>t.map((r=>{if("root"===r.type){const n=t.find((e=>"root"===e.type));if("0"===l||l===String(n.data.id))return Ht(Kt({},r),{data:Kt(Kt({},r.data),e)})}else if(r.id===l)return n(Ht(Kt({},r),{data:Kt(Kt({},r.data),e)})),Ht(Kt({},r),{data:Kt(Kt({},r.data),e)});return r})))),setTimeout((()=>{a(String(t[0]))}))}catch(e){console.error(e.message)}}))}}var qt=r(80330);function Xt({setNodes:e,addNodes:t,ref:r,setLoadingNodes:n}){const o=(0,H.u)(),a=J(t,e,n),[i,l]=(0,qt.L)({accept:["block"],drop({script:e,status:t},n){const{left:i,top:l}=r.current.getBoundingClientRect(),{x:c,y:s}=n.getSourceClientOffset();a(e,{position:{x:(c-i-o.x)/o.zoom,y:(s-l-o.y)/o.zoom},status:t})}});return l}var er=r(14294),tr=r(50509),rr=r(62732),nr=r(13780),or=r(22142),ar=Object.defineProperty,ir=Object.defineProperties,lr=Object.getOwnPropertyDescriptors,cr=Object.getOwnPropertySymbols,sr=Object.prototype.hasOwnProperty,pr=Object.prototype.propertyIsEnumerable,ur=(e,t,r)=>t in e?ar(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dr=(e,t)=>{for(var r in t||(t={}))sr.call(t,r)&&ur(e,r,t[r]);if(cr)for(var r of cr(t))pr.call(t,r)&&ur(e,r,t[r]);return e};function fr(e,t,r,n,a,i){const l=J(t,a,i),c=(0,o.useRef)({type:"none"}),s=(0,o.useRef)(null),p=(0,o.useCallback)(((e,t)=>{c.current={type:e},"pending"===e&&t&&(s.current=t)}),[]),[u,d]=(0,o.useState)(!1),[f,m]=(0,o.useState)({top:0,left:0}),{menus:y}=(0,er.fo)(),h=or.createElement(tr.Z,{mode:"vertical",className:(0,rr.iv)((g=dr({position:"absolute"},f),v={width:100},ir(g,lr(v))))},Object.entries(y).map((([e,t])=>or.createElement(tr.Z.SubMenu,{key:e,title:e},or.createElement("div",{className:(0,rr.iv)({maxHeight:300,overflow:"scroll"})},t.map((({type:e,script:t})=>or.createElement(tr.Z.Item,{key:`${t.props.script}-${t.props.name}-${t.props.url}`,onClick:()=>{return o=this,null,a=function*(){var o,a;d(!1);const i=yield l(t,{position:n(),status:0===e?1:0});if(i){const{inputs:e,outputs:t}=(0,b.aj)(i[0]);if("source"===(null==(o=s.current)?void 0:o.handleType)&&1===(null==e?void 0:e.length)){const t=s.current.nodeId,n=s.current.handleId,o=String(i[0].id),a=e[0].key,l=(0,nr.j)({source:t,sourceHandle:n,target:o,targetHandle:a});r([l])}if("target"===(null==(a=s.current)?void 0:a.handleType)&&1===(null==t?void 0:t.length)){const e=s.current.nodeId,n=s.current.handleId,o=String(i[0].id),a=t[0].key,l=(0,nr.j)({source:o,sourceHandle:a,target:e,targetHandle:n});r([l])}}},new Promise(((e,t)=>{var r=e=>{try{i(a.next(e))}catch(e){t(e)}},n=e=>{try{i(a.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,n);i((a=a.apply(o,null)).next())}));var o,a}},t.props.name))))))));var g,v;return{status:c,changeStatus:p,visible:u,setVisible:d,position:f,setPositionBy:(0,o.useCallback)((t=>{const{left:r,top:n}=e.current.getBoundingClientRect();m({top:t.clientY-n,left:t.clientX-r})}),[e]),menus:h}}const mr=(0,r(28324).ZP)((e=>({status:{type:"hidden"},setStatus:t=>{e({status:t})}})));function yr(e){const{script:t,onChange:r}=Gt(e);return{script:t,onChange:r}}function br(){const{enableBlueprint:e}=(0,l.useEditor)(0,"enableBlueprint");return e}function hr(){(0,o.useEffect)((()=>{const e=e=>((e||window.event).returnValue="你确定吗？","蓝图数据尚未保存，请保存后再退出");return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[])}},14294:function(e,t,r){"use strict";r.d(t,{UA:function(){return M},fo:function(){return A},qG:function(){return S}});var n=r(48837),o=r(13564),a=r(99045),i=r(3207),l=r(22142),c=r(19104),s=r(42761),p=r(73760),u=r(56228),d=r(71092),f=r(81958),m=r(92641),y=r(30470),b=Object.defineProperty,h=Object.defineProperties,g=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,x=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E=(e,t)=>{for(var r in t||(t={}))O.call(t,r)&&x(e,r,t[r]);if(v)for(var r of v(t))k.call(t,r)&&x(e,r,t[r]);return e},w=(e,t)=>h(e,g(t));const P=n.BlueprintTemplateNodes.findIndex((({script:e})=>"ModifyData"===e));let j;if(P>-1){const e=n.BlueprintTemplateNodes[P];j=w(E({},e),{script:"ModifyProperty",name:"修改属性",category:"通用"}),n.BlueprintTemplateNodes.splice(P,0,w(E({},e),{name:"修改全局变量"}))}var S,C;function I(e){switch(e){case"Inherent":return"内置图块";case"Team":return"团队图块";case"Personal":return"个人图块";case"Project":return"项目图块"}}function A(){const e=(0,c.useSettings)("enabled3d"),{enableBlueprint:t}=(0,c.useEditor)(0,"enableBlueprint"),[r,s]=(0,l.useState)(0);(0,d.Z)("reloadResource",(()=>{s((e=>e+1))}));const b=(0,y.Dr)(),h=(0,l.useMemo)((()=>{var r;return Object.fromEntries(Object.entries(null==(r=n.BlueprintTemplateNodes)?void 0:r.reduce(((t,r)=>{const{category:n,contextType:o}=r;return t[n]||(t[n]=[]),"2d"===o&&e||"3d"===o&&!e||t[n].push(r),t}),{})).map((([e,r])=>[e,("通用"===e?[j,...r]:r).map((e=>{var r;const{name:n,script:l,inputs:c,outputs:s,code:u}=e,d=E(E({},o.p_),a.FP)[l],f={};if(d){const e=d.content?(0,i.sparkValue)((0,p.isFunction)(d.content)?d.content({}):d.content):{},n=(null==(r=d.extraProps)?void 0:r.call(d,{enableBlueprint:t}))||{};Object.assign(f,e,n)}return"修改全局变量"===e.name&&(f.expression=w(E({},f.expression||{}),{from:{type:"store"}})),{type:0,script:{id:0,type:"Effect"===l?"Effect":"Script",editor:{inputs:c,outputs:s,nodeType:"block"},props:w(E({},f),{name:n,script:"Effect"===l?"AlphaTo":"ModifyProperty"===l?"ModifyData":l,tsCode:u})}}}))])))}),[e,t]),g=M(),v=(0,l.useMemo)((()=>(0,p.sortBy)(g.filter((e=>1!==e.status)).map((({id:e,orderId:t,name:r})=>({type:3,inUsed:b.includes(t),script:{id:e,type:"Script",editor:{inputs:[],outputs:[],nodeType:"block"},props:{script:"CustomScript",name:r,url:t}}}))),(e=>e.script.props.name))),[g,b]),[O,k]=(0,l.useState)([]),[x,P]=(0,l.useState)([]);(0,l.useEffect)((()=>{!function(){return e=this,null,t=function*(){const[{list:e},{list:t}]=yield Promise.all([(0,u.Bi)({type:"code"}),(0,u.Bi)({type:"code",isTeam:!0,excludeSelf:!0})]);k(e.map((e=>{const{id:t,name:r,data:{code:n}}=e;return{type:2,resourceId:t,script:{id:0,type:"Script",editor:{inputs:[],outputs:[],nodeType:"block"},props:{script:"CustomScript",name:r,tsCode:n}}}}))),P(t.map((e=>{const{id:t,name:r,data:{code:n}}=e;return{type:1,resourceId:t,script:{id:0,type:"Script",editor:{inputs:[],outputs:[],nodeType:"block"},props:{script:"CustomScript",name:r,tsCode:n}}}})))},new Promise(((r,n)=>{var o=e=>{try{i(t.next(e))}catch(e){n(e)}},a=e=>{try{i(t.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,a);i((t=t.apply(e,null)).next())}));var e,t}()}),[k,P,r]);const C=(0,l.useMemo)((()=>{const e=Object.assign({},{[I(S[3])]:v},h,{[I(S[1])]:x},{[I(S[2])]:O});return Object.fromEntries(Object.entries(e).filter((([e,t])=>t.length>0)))}),[h,O,v,x]),[A,_]=(0,l.useState)(C),[D,R]=(0,l.useState)(""),{run:N,cancel:V}=(0,f.Z)(((e,t)=>{_(e?Object.fromEntries(Object.entries(t).map((([t,r])=>[t,r.filter((({script:t})=>{var r;return(null==(r=t.props.name)?void 0:r.includes(e))||(0,m.convertToPinyin)(t.props.name).toLowerCase().includes(e.replace(/\s/,"").toLowerCase())}))])).filter((([e,t])=>t.length>0))):t)}),300);return(0,l.useEffect)((()=>(N(D,C),V)),[V,N,D,C]),{menus:A,search:D,setSearch:R}}function M(){return(0,s.v9)((({project:e})=>{for(;e.editor.prevState;)e=e.editor.prevState;return e.customScripts}),p.isEqual)}n.BlueprintTemplateNodes.push({name:"启用3D物理",script:"RigidBody3D",inputs:[{label:"启用",key:"onEnter",tooltip:"启用3D物理"}],outputs:[],category:"高级",contextType:"both"}),(C=S||(S={}))[C.Inherent=0]="Inherent",C[C.Team=1]="Team",C[C.Personal=2]="Personal",C[C.Project=3]="Project"},7891:function(e,t,r){"use strict";r.d(t,{v:function(){return i}});var n=r(40985),o=r(73760),a=r(42761);function i(){return(0,a.v9)((({project:e})=>{const t=(0,n.zh)(e);return Object.keys(t.props[t.id].sceneData||{}).map((e=>({label:e,value:e})))}),o.isEqual)}},44322:function(e,t,r){"use strict";r.d(t,{p:function(){return i}});var n=r(73760),o=r(22142),a=r(31635);function i(){const{visible:e}=(0,a.A)(),[t,r]=(0,o.useState)(window.innerWidth-(e?281:0));return(0,o.useEffect)((()=>{r(window.innerWidth-(e?281:0))}),[e]),(0,o.useEffect)((()=>{const t=(0,n.throttle)((()=>{r(window.innerWidth-(e?281:0))}));return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[e]),t}},23091:function(e,t,r){"use strict";r.d(t,{Z:function(){return cr},R:function(){return fr}});var n=r(23256),o=r(12570),a=r(86694),i=r(65164),l=r(43699),c=r(6054),s=r(78296),p=r(61754),u=r(26840),d=r(45858),f=r(70072),m=r(62732),y=r(91694),b=r(31284),h=r(82302),g=r(63500),v=r(96056),O=r(98029),k=r(30470),x=r(55762),E=r(71092),w=r(19104),P=r(92481),j=r(40985),S=r(14908),C=r(15252),I=r(22142),A=r(42761),M=r(15303),_=r(31635),D=r(22142),R=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const N="blueprint-header-container",V=(0,I.memo)((()=>{const{getState:e,dispatch:t}=(0,A.oR)(),{save:r,init:n,state:o}=(0,k.zi)(),{status:a,setStatus:i}=(0,k.$t)(),l="hidden"!==a.type;function c(){return R(this,null,(function*(){r(),n(null),"writeOnly"!==a.type&&i({type:"hidden"});const o=(0,j.o$)(e().project).customScripts;if(o.length){const e=yield(0,M.ud)(o);t((0,w.setSettings)({jsCode:e},!0))}}))}(0,E.Z)("closeBlueprint",c),(0,w.useBlueprintHotkeys)(`${(0,j.zO)("command","control")}+shift+o`,(()=>{c()}));const{visible:s,toggle:p}=(0,_.A)();return D.createElement("header",{className:(0,m.iv)({position:"relative",flex:"0 0 60px",display:"flex",borderBottom:"1px solid #ccc",alignItems:"center",padding:"0 20px"})},l?D.createElement(S.Z,null,D.createElement(C.Z,{checkedChildren:"全屏代码开启",unCheckedChildren:"全屏代码关闭",checked:!s,onClick:p}),D.createElement("div",{id:N})):"Scene"!==(null==o?void 0:o.type)&&D.createElement(f.Z,{icon:D.createElement(x.Z,null),onClick:()=>{const t=e().project.editor.selectedSceneId;t&&(r(),n({type:"Scene",id:t}))}},"场景蓝图"),D.createElement(P.Z,{options:[{label:"项目模式",value:"Project"},{label:"模板模式",value:"Template"}]}),D.createElement(S.Z,{className:(0,m.iv)({marginLeft:"auto"})},l&&D.createElement(f.Z,{icon:D.createElement(x.Z,null),onClick:()=>R(void 0,null,(function*(){i({type:"hidden"});const r=(0,j.o$)(e().project).customScripts;if(r.length){const e=yield(0,M.ud)(r);t((0,w.setSettings)({jsCode:e},!0))}}))},"返回蓝图"),D.createElement(u.Z,{title:"(⇧+⌘+o)"},D.createElement(f.Z,{type:"primary",onClick:c},"返回项目"))))}));var B=r(89591),Z=r(10127),T=r(81958),z=r(48916),L=r(64175),U=r(43294),F=r(55066),Y=r(22142),$=Object.defineProperty,Q=Object.defineProperties,W=Object.getOwnPropertyDescriptors,J=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,G=(e,t,r)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,q=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));function X({theme:e="light",readOnly:t=!1,width:r=560,name:n,value:o,onChange:a,virtualKey:i}){const l=ee(e,i);return Y.createElement(z.ZP,(c=((e,t)=>{for(var r in t||(t={}))K.call(t,r)&&G(e,r,t[r]);if(J)for(var r of J(t))H.call(t,r)&&G(e,r,t[r]);return e})({width:r,height:"90vh",defaultLanguage:"typescript",onMount:l},n?{path:re(n)}:{}),Q(c,W({value:o,onChange:a,options:{folding:!0,foldingHighlight:!0,automaticLayout:!0,formatOnPaste:!0,formatOnType:!0,tabSize:2,lineDecorationsWidth:4,fontSize:14,padding:{top:10,bottom:10},lightbulb:{enabled:!0},minimap:{enabled:!0},readOnly:t}}))));var c}function ee(e,t){const{getState:n}=(0,A.oR)(),o=(0,I.useRef)(),a=(0,I.useRef)();(0,I.useEffect)((()=>{var t;null==(t=a.current)||t.editor.setTheme("light"===e?"vs":"vs-dark")}),[e]);const i=(0,k.UA)(),l=(0,I.useRef)(null);(0,I.useEffect)((()=>()=>{var e;null==(e=l.current)||e.call(l)}),[]),(0,I.useEffect)((()=>()=>{F.Fd.editor.getModels().forEach((e=>e.dispose()))}),[t]);const{trigger:c}=(0,E.Z)("closeBlueprint");return(t,n)=>{o.current=t,a.current=n,n.editor.setTheme("light"===e?"vs":"vs-dark"),function(e){e.languages.typescript.typescriptDefaults.setEagerModelSync(!0),e.languages.typescript.typescriptDefaults.setCompilerOptions({target:e.languages.typescript.ScriptTarget.ES2016,moduleResolution:e.languages.typescript.ModuleResolutionKind.NodeJs,module:e.languages.typescript.ModuleKind.CommonJS,allowJs:!0,removeComments:!0,experimentalDecorators:!0,emitDecoratorMetadata:!0}),function(e){te(e,L,"riko.d.ts"),te(e,U,"laya.d.ts")}(e),function(e){q(this,null,(function*(){const[t,n]=yield Promise.all([r.e(115).then(r.t.bind(r,66575,23)),r.e(115).then(r.t.bind(r,40139,23))]);e.languages.registerDocumentFormattingEditProvider("typescript",{provideDocumentFormattingEdits(e){return q(this,null,(function*(){try{const r=t.format(e.getValue(),{parser:"typescript",plugins:[n],singleQuote:!0});return[{range:e.getFullModelRange(),text:r}]}catch(e){}}))}})}))}(e)}(n),t.addCommand(n.KeyMod.CtrlCmd|n.KeyMod.Shift|n.KeyCode.KEY_O,(()=>{c()})),l.current=function(e,t,r){for(const r of t)te(e,r.ideCode,r.name);const{dispose:n}=e.languages.registerCompletionItemProvider("typescript",{provideCompletionItems:function(r,n){const{lineNumber:o,column:a}=n,i=r.getLineContent(o),l={startLineNumber:o,endLineNumber:o,startColumn:a,endColumn:a};return i.match(/^(import)\s[\s\S]*\s?from\s['"]\.\/['"]/)?{suggestions:t.filter((e=>e.name.slice(0,-3)!==r.uri.path.slice(1,-3))).map((t=>{const r=t.name.slice(0,-3);return{label:r,kind:e.languages.CompletionItemKind.File,insertText:r,range:l}}))}:{suggestions:[]}},triggerCharacters:["/"]});return n}(n,i)}}function te(e,t,r){const n=re(r),o=e.Uri.parse(n);e.editor.getModel(o)||(e.editor.createModel(t,"typescript",o),e.languages.typescript.typescriptDefaults.addExtraLib(t,n))}function re(e){return`workspace://src/${e}`}z._m.config({monaco:F.Fd});var ne=r(22142);function oe({theme:e="light",readOnly:t=!1,width:r=560,original:n,modified:o,virtualKey:a}){const i=ee(e,a);return ne.createElement(z.SV,{onMount:i,width:r,height:"90vh",language:"typescript",original:n,modified:o,options:{folding:!0,foldingHighlight:!0,automaticLayout:!0,formatOnPaste:!0,formatOnType:!0,lineDecorationsWidth:4,fontSize:14,padding:{top:10,bottom:10},lightbulb:{enabled:!0},minimap:{enabled:!0},readOnly:t}})}var ae=r(44372),ie=r(71478),le=r(14540),ce=r(34450),se=r.n(ce),pe=r(95611),ue=r.n(pe),de=r(38499),fe=r(42347),me=r(2550),ye=r(22142);function be({id:e,width:t,selectedHistory:r,onSelectHistory:n}){const{histories:o,load:a}=function(e){const[t,r]=(0,I.useState)([]),n=(0,I.useCallback)((()=>{(0,ie.Je)(e).then((e=>{e&&r(e.sort(((e,t)=>e.isLocked===t.isLocked?t.createTime-e.createTime:e.isLocked?-1:1)))}))}),[e]);return(0,I.useEffect)((()=>{n()}),[n]),{histories:t,load:n}}(e),[i,l]=(0,I.useState)(null);return ye.createElement("div",{className:(0,m.iv)({width:t,borderRight:"1px solid #d9d9d9",overflow:"scroll"})},o.map((e=>{const{createTime:t}=e,o=se()(new Date(t)).locale(ue()).fromNow();return ye.createElement("div",{key:e.historyId,className:(0,m.cx)((0,m.iv)({padding:"8px 12px",cursor:"pointer",borderBottom:"1px solid #d9d9d9",display:"flex",justifyContent:"center"}),(null==r?void 0:r.historyId)===e.historyId&&(0,m.iv)({background:"rgb(132, 150, 251)",color:"#fff"})),onClick:()=>{(null==r?void 0:r.historyId)===e.historyId?n(null):n(e)},onMouseOver:()=>{l(e)},onMouseLeave:()=>{l(null)}},ye.createElement("span",null,o),ye.createElement(S.Z,{className:(0,m.iv)({marginLeft:"auto"})},(null==i?void 0:i.historyId)===(null==e?void 0:e.historyId)&&ye.createElement(u.Z,{title:"删除"},ye.createElement(de.Z,{onClick:t=>{t.stopPropagation(),(0,ie.M$)(e.historyId).then((()=>{a()}))}})),ye.createElement(u.Z,{title:"收藏"},e.isLocked?ye.createElement(fe.Z,{className:(0,m.iv)({color:"#f44336"}),onClick:t=>{t.stopPropagation(),(0,ie.cS)(e.historyId,!e.isLocked).then((()=>{a()}))}}):ye.createElement(me.Z,{onClick:t=>{t.stopPropagation(),(0,ie.cS)(e.historyId,!e.isLocked).then((()=>{a()}))}}))))})))}var he=r(44322),ge=r(22142),ve=Object.defineProperty,Oe=Object.defineProperties,ke=Object.getOwnPropertyDescriptors,xe=Object.getOwnPropertySymbols,Ee=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,Pe=(e,t,r)=>t in e?ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,je=(e,t)=>{for(var r in t||(t={}))Ee.call(t,r)&&Pe(e,r,t[r]);if(xe)for(var r of xe(t))we.call(t,r)&&Pe(e,r,t[r]);return e},Se=(e,t)=>Oe(e,ke(t)),Ce=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const Ie=(0,I.memo)((function({theme:e}){var t;const r=(0,k.zi)(),{selectedIds:n}=r,{status:o}=(0,k.$t)(),{script:a,onChange:i}=(0,k.rF)(r),l=(0,he.p)();switch(o.type){case"hidden":default:return null;case"readOnly":return ge.createElement("div",{className:(0,m.cx)((0,m.iv)({display:"flex",height:"calc(100vh - 60px)"}),"dark"===e&&darkMode)},ge.createElement(X,{theme:e,width:n.length>0?l-320:l,readOnly:!0,value:o.tsCode,onChange:e=>{throw new Error(e)}}));case"writeOnly":case"selected":return"selected"!==o.type||a&&"CustomScript"===a.props.script&&a.props.url?ge.createElement(Ae,{maxWidth:(null==(t=r.selectedIds)?void 0:t.length)?l-320:l,key:"writeOnly"===o.type?o.url:a.id,theme:e,url:"writeOnly"===o.type?o.url:a.props.url,onChangeProps:e=>{if("selected"===o.type){const t=(0,ae.rM)(a.props,e,a.props.url);i(Se(je({},a),{props:t}),{ids:[Number(n[0])]})}}}):null}})),Ae=(0,I.memo)((({url:e,onChangeProps:t,maxWidth:r,theme:n="light"})=>{const{getState:o,dispatch:a}=(0,A.oR)(),i=(0,w.useOnSaveCustomScript)(),l=(0,A.v9)((({project:t})=>(0,j.se)(t,e)));(0,I.useEffect)((()=>{s(l.ideCode),u.current=l.ideCode}),[l.ideCode]);const[c,s]=(0,I.useState)(l.ideCode),p=(0,I.useRef)(c),u=(0,I.useRef)(c),{run:d,cancel:f}=(0,T.Z)((()=>Ce(void 0,null,(function*(){if((0,M.Ej)(c)){const e=(0,j.o$)(o().project).customScripts.map((e=>e.id===l.id?Se(je({},e),{ideCode:c}):e));if(e.length){const r=yield(0,M.ud)(e);null==t||t(r),a((0,w.setSettings)({jsCode:r},!0))}}}))),600,[c,l]),{run:y,cancel:b}=(0,T.Z)((()=>Ce(void 0,null,(function*(){(0,ie.kO)({resourceContent:c,id:l.id,orderId:l.orderId,projectId:o().project.id,name:l.name,resourceLanguage:"typescript",needsSave:!0,saveStatus:0})}))),6e3,[c,l]);(0,I.useEffect)((()=>(d(),y(),()=>{f(),b()})),[c]),(0,I.useEffect)((()=>()=>{p.current!==u.current&&i(l.id,l.name,Se(je({},l),{ideCode:u.current,status:0})),d(),y()}),[]);const h=(0,m.iv)({filter:"invert(1) hue-rotate(180deg)"}),[g,v]=(0,I.useState)(null),[O,k]=(0,I.useState)(!1),[x,E]=(0,I.useState)(null);(0,I.useEffect)((()=>{const e=document.querySelector(`#${N}`);e&&E(e)}),[]);const P=O?140:0;return ge.createElement("div",{className:(0,m.cx)((0,m.iv)({display:"flex",height:"calc(100vh - 60px)"}),"dark"===n&&h)},O&&ge.createElement(be,{id:l.id,width:P,selectedHistory:g,onSelectHistory:e=>{v(e)}}),g?ge.createElement(oe,{virtualKey:e,key:e,theme:n,width:r-P,original:g.resourceContent,modified:c}):ge.createElement(X,{virtualKey:e,key:e,name:l.name,theme:n,width:r-P,value:c,onChange:e=>{e&&(u.current=e,s(e))}}),x&&(0,le.createPortal)(ge.createElement(Me,{historiesVisible:O,setHistoriesVisible:k,selectedHistory:g,setSelectedHistory:v,onApply:e=>{s(e.resourceContent)}}),x))}));function Me({historiesVisible:e,setHistoriesVisible:t,selectedHistory:r,setSelectedHistory:n,onApply:o}){return e?ge.createElement(S.Z,null,ge.createElement(f.Z,{onClick:()=>Ce(this,null,(function*(){t(!1),n(null)}))},"继续编辑"),r&&ge.createElement(f.Z,{type:"primary",onClick:()=>Ce(this,null,(function*(){t(!1),n(null),setTimeout((()=>{r&&o(r)}))}))},"应用")):ge.createElement(f.Z,{onClick:()=>Ce(this,null,(function*(){t(!0)}))},"历史代码")}var _e=r(69580),De=r(3207),Re=r(7891),Ne=r(26616),Ve=r(73760),Be=r(99535),Ze=r(86750),Te=r(22142),ze=Object.defineProperty,Le=Object.defineProperties,Ue=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,Qe=(e,t,r)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,We=(e,t)=>{for(var r in t||(t={}))Ye.call(t,r)&&Qe(e,r,t[r]);if(Fe)for(var r of Fe(t))$e.call(t,r)&&Qe(e,r,t[r]);return e},Je=(e,t)=>Le(e,Ue(t));const Ke=["onStart"];function He(){const e=(0,k.zi)(),t=(0,A.oR)(),{state:r,nodes:n=[],edges:o=[],setEdges:a}=e,i=(0,w.useProject)("type"),{script:l,onChange:c}=(0,k.Ix)(e);return l?(0,De.default)(function({value:e,onChange:t,state:r,nodes:n=[],edges:o=[],setEdges:a,caseType:i,store:l}){const c=n.filter((e=>e.selected))[0],s="root"===c.type&&("0"===c.id?"in":"out"),u=[{label:"输入信号",index:"inputs",hidden:"in"!==s},{label:"输出信号",index:"outputs",hidden:"out"!==s}];return"root"===c.type?{spark:"grid",content:[{spark:"context",provide:()=>({useValue:r=>{var n;const{indexValue:o,indexEntries:a}=(0,De.getIndexer)(r);return r in e||[].concat(r).includes("id")?{value:[o(e)],onChange([e],r){(null==r?void 0:r.replace)?t(e,r):t(We({},Object.fromEntries(a(e))),r)}}:{value:[o(null!=(n=e.props)?n:{})],onChange([r],n){(null==n?void 0:n.replace)?t({props:r},n):t({props:We(We({},e.props),Object.fromEntries(a(r)))},n)}}}}),content:{spark:"check",index:["id","editor"],check:{hidden:t=>{const[r,{nodeType:n}]=t;if(!r||!n)return!0;const{getState:o}=(0,A.oR)();return"node"!==n||!(0,M.Bi)(e,o)}},content:{spark:"group",label:"蓝图节点信息",content:{spark:"grid",content:[{spark:"value",index:"editor",content({nodeType:t},r){const{dispatch:n,getState:o}=(0,A.oR)();if("node"===t){const t=(0,M.Bi)(e,o);if(t)return{spark:"element",content(o){return o({spark:"string",label:"节点名称",value:t.name,onChange(o,a){r({props:Je(We({},e.props),{name:o})},{replace:!0}),n((0,w.changeProps)([t.id],{name:o},a))}})}}}return De.NULL_SPARK}}]}}}},{spark:"context",provide:()=>({useValue:r=>{var n;const{indexValue:o,indexEntries:a}=(0,De.getIndexer)(r);return{value:[o(null!=(n=e.editor)?n:{})],onChange([r],n){(null==n?void 0:n.replace)?t({editor:r},n):t({editor:We(We({},e.editor),Object.fromEntries(a(r)))},n)}}}}),content:{spark:"element",content(){return Te.createElement("div",{className:(0,m.iv)({flex:"0 0 340px"})},(0,De.default)({spark:"grid",content:u.map((({label:t,index:n,hidden:o})=>({hidden:o,spark:"group",label:`${t}定义`,content:{spark:"value",index:n,content(o=[],a){return{spark:"element",content:()=>{const{selectedIds:l,edges:c,removeEdges:u,addSignal:d,removeSignal:f}=(0,k.zi)();return(0,I.useMemo)((()=>Te.createElement(De.ArrayCell,{addable:!("Scene"===(null==r?void 0:r.type)&&"Component"!==i),defaultExpanded:!0,label:t,array:o,onChange:a,onDelete:t=>{const r=t.key;if(Ke.includes(r))return p.ZP.warning("不允许删除默认信号");const o=c.filter((t=>s?"inputs"===n?"0"===t.source&&t.sourceHandle===r:t.target===String(e.id)&&t.targetHandle===r:"outputs"===n?t.source===String(e.id)&&t.sourceHandle===r:t.target===String(e.id)&&t.targetHandle===r)).map((e=>e.id));o.length&&u(o),f({id:l[0],type:n,signal:t})},defaultItem:()=>{const e=(0,M.Ys)(o);d({id:l[0],type:n,signal:{key:(0,M.GY)(`$${n}`,e),label:`${t} ${e}`}})},render:(e,t)=>(0,De.default)((0,De.withContext)(e,t,{spark:"grid",content:[{spark:"string",label:"信号名称",index:"label"},{spark:"string",label:"信号提示",index:"tooltip"},{spark:"value",hidden:!("Scene"===(null==r?void 0:r.type)&&"Component"===i)||"onStart"===e.key,index:"parameters",content(e=[],t){const r=(0,Re.v)();return{spark:"element",content(n){return Te.createElement(De.ArrayCell,{addButtonProps:{block:!1},defaultExpanded:!0,label:"参数",array:e,onChange:t,render:(e,t)=>n({spark:"select",value:e,onChange:t,options:r,label:"参数名"})})}}}}]}))})),[c,o,f,l,u,d])}}}}})))}))}}}]}:function({nodes:e,edges:t,setEdges:r,store:n,withParameters:o}){const{getState:a}=n,i=e.filter((e=>e.selected))[0],l=(0,j.zh)(a().project),c=(0,j.v$)(l),[s]=(0,j.qC)(c,Number(i.id),!0),{inputEdges:p,outputEdges:u}=(0,M.yL)(t,e.filter((({selected:e})=>e)).map((({id:e})=>e)));return{spark:"grid",content:[o&&{spark:"group",label:"组件输入",content:{spark:"element",content(){return Te.createElement(De.ArrayCell,{defaultExpanded:!0,sortable:!1,addable:!1,deletable:!1,array:p,onChange:()=>{},onSelect:e=>{const t=p[e];r((e=>e.map((e=>Je(We({},e),{selected:e.id===t.id})))))},labelRender:t=>{const r=e.find((e=>e.id===t.source)),n=(0,M.aj)(r)["root"===r.type?"inputs":"outputs"].find((e=>e.key===t.sourceHandle)),{label:o}=(0,M.aj)(i).inputs.find((e=>e.key===t.targetHandle))||{};return`${r.data.props.name}-${(null==n?void 0:n.label)||(null==n?void 0:n.key)}-${o}-${i.data.props.name}`},render:t=>{var n,o,a,l,c;const{parameters:s=[]}=(0,M.aj)(i).inputs.find((e=>e.key===t.targetHandle))||{},p=e.find((e=>e.id===t.source)),u=Ge(p)&&null!=(c=null==(l=null==(a=null==(o=null==(n=p.data.editor)?void 0:n.outputs)?void 0:o.find((e=>e.key===t.sourceHandle)))?void 0:a.parameters)?void 0:l.map((e=>({label:e,value:{type:"scene",key:e}}))))?c:[];let d=t.data||[];t.data&&!Array.isArray(t.data)&&(d=[]);const f=(0,Ve.uniqBy)([...d,...s.map((e=>["",{type:"scene",key:e}]))].filter((([e,t])=>""!==t&&s.includes(t.key))),(([e,t])=>t.key));return f.length?(0,De.default)((0,De.withContext)(f,(e=>{r((r=>r.map((r=>r.id===t.id?Je(We({},r),{data:e}):r))))}),{spark:"grid",content:f.map((([e,{key:t}],r)=>({spark:"enter",index:r,content:Ge(p)?{spark:"value",index:0,content(e,r){return{spark:"element",content(n){return n({spark:"select",label:t,options:u,value:e,onChange:r})}}}}:(0,Ne.R)({spark:"string",label:t,index:0})})))})):null}})}}},o&&{spark:"group",label:"组件输出",content:{spark:"element",content(){const t=(0,Re.v)();return Te.createElement(De.ArrayCell,{defaultExpanded:!0,sortable:!1,addable:!1,deletable:!1,array:u,onChange:()=>{},onSelect:e=>{const t=u[e];r((e=>e.map((e=>Je(We({},e),{selected:e.id===t.id})))))},labelRender:t=>{const r=e.find((e=>e.id===t.target)),n=(0,M.aj)(r)["root"===r.type?"outputs":"inputs"].find((e=>e.key===t.targetHandle)),{label:o}=(0,M.aj)(i).outputs.find((e=>e.key===t.sourceHandle))||{};return`${i.data.props.name}-${o}-${(null==n?void 0:n.label)||(null==n?void 0:n.key)}-${r.data.props.name}`},render:n=>{var o,a,l,c,s;const{parameters:p=[]}=(0,M.aj)(i).outputs.find((e=>e.key===n.sourceHandle))||{},u=e.find((e=>e.id===n.target)),d=Ge(u)?null!=(s=null==(c=null==(l=null==(a=null==(o=u.data.editor)?void 0:o.inputs)?void 0:a.find((e=>e.key===n.targetHandle)))?void 0:l.parameters)?void 0:c.map((e=>({label:e,value:{type:"scene",key:e}}))))?s:[]:t.map((e=>Je(We({},e),{value:{type:"scene",key:e.value}})));let f=n.data||[];n.data&&!Array.isArray(n.data)&&(f=[]);const m=(0,Ve.uniqBy)([...f,...p.map((e=>[{type:"scene",key:e},""]))].filter((([e])=>""!==e&&p.includes(e.key))),(([e])=>e.key));return m.length?(0,De.default)((0,De.withContext)(m,(e=>{r((t=>t.map((t=>t.id===n.id?Je(We({},t),{data:e}):t))))}),{spark:"grid",content:m.map((([{key:e}],t)=>({spark:"enter",index:t,content:{spark:"value",index:1,content(t,r){return{spark:"element",content(n){return n({spark:"select",label:e,options:d,value:t,onChange:r})}}}}})))})):null}})}}},{spark:"context",content:(0,Be.Uc)({},{rootType:"Scene"}),provide:()=>({useValue:(0,Ze.kA)([s.id],n)})}].filter(Boolean)}}({nodes:n,edges:o,setEdges:a,withParameters:Ge(c),store:l})}({value:l,onChange:c,state:r,nodes:n,edges:o,setEdges:a,caseType:i,store:t})):null}function Ge(e){const{data:{editor:{inputs:t=[],outputs:r=[]}={}}}=e;return"node"===e.type&&[...t,...r].some((({parameters:e=[]})=>e.length>0))}var qe=r(5635),Xe=r(22142);const{useToken:et}=qe.Z,tt=(0,I.memo)((({theme:e})=>{const t=(0,k.zi)(),{token:r}=et(),{nodes:n}=t,o=n.filter((e=>e.selected))[0];return(0,I.useMemo)((()=>{var t;return Xe.createElement("div",{className:(0,m.iv)({height:"100%",display:"flex",position:"absolute",right:0,zIndex:5,background:r.colorBgContainer})},Xe.createElement(B.Z.ErrorBoundary,null,Xe.createElement(Ie,{theme:e})),(null==o?void 0:o.data)&&Xe.createElement("div",{className:(0,m.iv)({width:320,flexShrink:0,borderLeft:`1px solid ${r.colorBorder}`,overflow:"scroll"})},Xe.createElement(B.Z.ErrorBoundary,null,"Blueprint"!==o.data.type||!(0,Z.C_)(o.type)&&"component"===(null==(t=o.data.editor)?void 0:t.nodeType)?Xe.createElement(_e.Wo,null):Xe.createElement(He,null))))}),[o,e])}));var rt=r(53933),nt=r(33058),ot=r(12672),at=r(62255),it=r(10839),lt=r(50509),ct=r(32078),st=r(65852),pt=r(79726),ut=r(40337),dt=r(17638),ft=r(38193),mt=r(20630),yt=r(72458),bt=r(92546),ht=r(14294),gt=r(27002),vt=r(43047),Ot=r(56228),kt=r(22142),xt=Object.defineProperty,Et=Object.defineProperties,wt=Object.getOwnPropertyDescriptors,Pt=Object.getOwnPropertySymbols,jt=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable,Ct=(e,t,r)=>t in e?xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,It=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));function At(){const{setNodes:e,addNodes:t,setLoadingNodes:r}=(0,k.zi)(),{menus:n,search:o,setSearch:a}=(0,ht.fo)(),i=(0,w.useOnAddCustomScript)(),l=(0,w.useOnRenameCustomScript)(),c=(0,k.zf)(t,e,r),[s,u]=(0,I.useState)(null),[d,y]=(0,I.useState)(Object.keys(n)[0]),b=(0,I.useRef)(!1);(0,I.useEffect)((()=>{const e=new IntersectionObserver((e=>{for(const t of e){if(!t.isIntersecting)return;b.current||y(t.target.dataset.category)}}),{threshold:.8});for(const t of document.querySelectorAll("[data-category]"))e.observe(t)}),[]);const h=(0,I.useRef)(null);(0,w.useBlueprintHotkeys)(`${(0,j.zO)("command","control")}+f`,(e=>{var t;e.preventDefault(),null==(t=h.current)||t.focus()}));const{setStatus:g}=(0,k.$t)();return(0,I.useMemo)((()=>kt.createElement(kt.Fragment,null,kt.createElement("div",{className:(0,m.iv)({padding:10})},kt.createElement(at.Z.Search,{ref:h,placeholder:"搜索",value:o,onChange:e=>{a(e.target.value)},className:(0,m.iv)({flex:1}),allowClear:!0})),kt.createElement("div",{className:(0,m.iv)({height:"calc(100% - 52px)",display:"flex",justifyContent:"center",borderTop:"1px solid rgba(31, 28, 35, 0.08)"})},Object.keys(n).length>0?kt.createElement(kt.Fragment,null,kt.createElement("div",{className:(0,m.iv)({height:"100%",padding:8,color:"rgba(31, 28, 35, 0.8)",borderRight:"1px solid rgba(31, 28, 35, 0.08)",display:"flex",flexDirection:"column"})},Object.keys(n).map((e=>kt.createElement("div",{key:e,onClick:()=>{var t;y(e),b.current=!0,null==(t=document.querySelector(`[data-category=${e}]`))||t.scrollIntoView({behavior:"auto"}),setTimeout((()=>{b.current=!1}),100)},className:(0,m.cx)((0,m.iv)({fontSize:12,width:72,height:36,display:"flex",justifyContent:"center",alignItems:"center",borderRight:3,marginBottom:12,cursor:"pointer","&:hover":{background:"rgb(243, 237, 249)"}}),d===e&&(0,m.iv)({color:"rgb(106, 58, 199)",background:"rgb(243, 237, 249)",fontWeight:700}))},kt.createElement("span",null,e)))),kt.createElement(f.Z,{size:"small",icon:kt.createElement(dt.Z,null),onClick:()=>It(this,null,(function*(){u({type:"add",name:"未命名脚本"})})),className:(0,m.iv)({fontSize:12,height:30})},"新增")),kt.createElement("div",{className:(0,m.iv)({height:"100%",flex:1,margin:12,overflowY:"scroll","::-webkit-scrollbar":{display:"none"}})},Object.entries(n).map((([t,r])=>kt.createElement("div",{key:t,className:(0,m.iv)({marginBottom:24}),"data-category":t},kt.createElement("div",{className:(0,m.iv)({color:"rgba(31, 28, 35, 0.8)",fontSize:12,padding:6})},t),kt.createElement("div",null,r.map((({type:t,script:r,resourceId:n,inUsed:o},a)=>kt.createElement(Mt,{key:`${r.props.name}_${a}`,type:t,resourceId:n,inUsed:o,script:r,setModalState:u,onClick:()=>{c(r,{status:0===t?1:0}),g({type:"hidden"})},setNodes:e}))))))))):kt.createElement(it.Z,null)),s&&kt.createElement(Dt,{label:"add"===s.type?"新增脚本":"编辑脚本",defaultValue:s.name,onSubmit:e=>It(this,null,(function*(){if(e)try{switch(s.type){case"add":{const{orderId:r}=yield i(`${e}.ts`,"typescript",Rt);p.ZP.success("创建成功");const n=(0,j.xv)();yield t([{id:String(n),position:{x:100,y:100},type:"block",data:{id:n,editor:{inputs:[],outputs:[],nodeType:"block"},props:{script:"CustomScript",name:e,url:r},type:"Script"}}]),g({type:"selected"});break}case"edit":l(s.id,`${e}.ts`);break;default:(0,j.Ak)(s)}}catch(e){p.ZP.error(e.message)}finally{u(null)}else u(null)}))}),kt.createElement(_t,null))),[d,c,t,n,s,i,l,o,e,a,g])}function Mt({type:e,resourceId:t,inUsed:r,script:n,onClick:o,setModalState:a,setNodes:i}){const{id:l,props:{name:c,url:d,script:f}}=n,[y,b,h]=(0,st.c)({item:{type:"block",script:n,status:e===ht.qG.Inherent?1:0}});(0,I.useEffect)((()=>{h((0,ut.r)(),{captureDraggingState:!0})}),[h]);const{getState:g}=(0,A.oR)(),v=(0,w.useOnDeleteCustomScript)(),{trigger:O}=(0,E.Z)("reloadResource"),{status:x,setStatus:P}=(0,k.$t)(),C=kt.createElement("div",{ref:b,className:(0,m.cx)((0,m.iv)({cursor:"pointer",border:"1px solid rgba(31,28,35,0.08)",borderRadius:3,marginBottom:10,display:"flex",alignItems:"stretch"}),!1===r&&(0,m.iv)({color:"#999"}),"writeOnly"===x.type&&x.url===d&&(0,m.iv)({background:"rgb(202 180 225)","&:hover":{background:"rgb(202 180 225)"}})),onClick:o},kt.createElement(S.Z,{className:(0,m.iv)({flex:1,padding:10,"&:hover":{background:"rgb(243, 237, 249)"},overflow:"hidden"})},kt.createElement(nt.Z,{component:(0,vt.F)(n),style:{fontSize:16}}),kt.createElement(u.Z,{title:e!==ht.qG.Inherent?null==c?void 0:c.replace(/\.ts$/,""):void 0},kt.createElement("div",{className:(0,m.iv)({maxWidth:86,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"})},null==c?void 0:c.replace(/\.ts$/,"")))),"CustomScript"===f&&d&&kt.createElement(u.Z,{title:"编辑"},kt.createElement(ft.Z,{className:(0,m.iv)({padding:10,"&:hover":{background:"rgb(243, 237, 249)"},display:"flex",justifyContent:"center",alignItems:"center"}),onClick:e=>{e.stopPropagation();const t=d?(0,j.se)(g().project,d).ideCode:n.props.tsCode;P(d?{type:"writeOnly",url:d}:{type:"readOnly",name:c,tsCode:t}),i((e=>e.map((e=>{return t=((e,t)=>{for(var r in t||(t={}))jt.call(t,r)&&Ct(e,r,t[r]);if(Pt)for(var r of Pt(t))St.call(t,r)&&Ct(e,r,t[r]);return e})({},e),Et(t,wt({selected:!1}));var t}))))}}))),M=e===ht.qG.Personal||e===ht.qG.Team?[{label:kt.createElement(S.Z,null,kt.createElement(mt.Z,null),"下架"),key:"1"}]:e===ht.qG.Project?[{label:kt.createElement(S.Z,null,kt.createElement(yt.Z,null),"发布"),key:"2"}]:[];return"CustomScript"===f&&d&&M.push({label:kt.createElement(S.Z,null,kt.createElement(bt.Z,null),"重命名"),key:"4"},{label:kt.createElement(S.Z,null,kt.createElement(de.Z,null),"删除"),key:"5"}),kt.createElement(s.Z,{overlay:kt.createElement(lt.Z,{items:M,onClick:e=>It(this,null,(function*(){if("1"===e.key&&t)try{yield(0,Ot.md)({id:t}),O(),p.ZP.success("下架成功")}catch(e){p.ZP.error(e.message)}if("2"===e.key){const{props:{name:e="",url:t}}=n,{ideCode:r}=(0,j.se)(g().project,t);yield(0,Ot._w)({name:e,description:"",type:"code",data:{code:r,contextType:"both"}}),O(),p.ZP.success("发布成功")}"4"===e.key&&a({type:"edit",name:null==c?void 0:c.replace(/\.ts$/,""),id:l}),"5"===e.key&&(r?p.ZP.error("脚本正在使用，无法删除"):v(l,d,!1))}))}),trigger:["contextMenu"]},C)}function _t(){const{getZoom:e}=(0,gt.u)(),{isDragging:t,item:r,initialOffset:n,currentOffset:o}=(0,pt.f)((e=>({item:e.getItem(),itemType:e.getItemType(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()})));return t&&r&&r.script?kt.createElement("div",{style:{position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"}},kt.createElement("div",{style:function(e,t){if(!e||!t)return{display:"none"};const{x:r,y:n}=t,o=`translate(${r}px, ${n}px)`;return{transform:o,WebkitTransform:o}}(n,o)},kt.createElement("div",{className:(0,m.iv)({transformOrigin:"0 0",transform:`scale(${e()})`})},kt.createElement(v.ZP,{id:"0",type:"block",data:r.script,isConnectable:!1,selected:!0,xPos:0,yPos:0,dragging:!1,zIndex:0})))):null}function Dt({defaultValue:e,onSubmit:t,label:r}){const[n,o]=(0,I.useState)(e),[a,i]=(0,I.useState)(!1),l=()=>{if(n){if(/\s/.test(n))return void p.ZP.warning("名字不能包含空白字符");i(!0),t(n).finally((()=>i(!1)))}else p.ZP.warning("名字不能为空")};return kt.createElement(ct.Z,{open:!0,title:r,width:500,okText:"确认",cancelText:"取消",confirmLoading:a,onOk:l,onCancel:()=>t(!1)},kt.createElement(at.Z,{autoFocus:!0,placeholder:"请输入脚本名称",maxLength:20,value:n,onChange:({currentTarget:{value:e}})=>{o(e)},onPressEnter:l}))}const Rt="export default class Script extends Riko.Script {\n  enableSignal = Riko.useInput({ name: '启用' }); \n\n  // 脚本开始逻辑\n  onAwake() {\n\n  }\n\n  onSignal(inputId: string, value: unknown) {\n    if (inputId === this.enableSignal) {\n      console.log(\"Hello World!\");\n    }\n  }\n}\n";var Nt,Vt=["title","titleId"];function Bt(){return Bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bt.apply(this,arguments)}var Zt=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Vt);return I.createElement("svg",Bt({t:1660899011833,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":3049,width:48,height:48,ref:t,"aria-labelledby":n},o),r?I.createElement("title",{id:n},r):null,Nt||(Nt=I.createElement("path",{d:"M76.818347 981.333333a188.330667 188.330667 0 0 1-57.6-12.8A57.344 57.344 0 0 1 0.018347 924.245333a54.613333 54.613333 0 0 1 19.2-38.058666 91.52 91.52 0 0 1 38.4-12.8h32c19.2 0 38.4 6.357333 64 6.357333a69.418667 69.418667 0 0 0 51.2-12.8 297.472 297.472 0 0 0 38.4-95.146667l89.6-361.514666H224.018347l19.2-69.76h115.2v-12.8a428.970667 428.970667 0 0 1 51.2-152.234667 243.2 243.2 0 0 1 102.4-95.146667 388.608 388.608 0 0 1 121.6-38.058666 121.429333 121.429333 0 0 1 51.2 12.8 57.344 57.344 0 0 1 19.2 44.416 89.6 89.6 0 0 1-12.8 38.058666 91.52 91.52 0 0 1-38.4 12.8 229.205333 229.205333 0 0 1-64-12.8c-12.8 0-19.2-6.357333-32-6.357333a66.261333 66.261333 0 0 0-44.8 31.701333 554.666667 554.666667 0 0 0-32 95.146667l-25.6 82.432 275.2-6.357333h6.4a55.466667 55.466667 0 0 1 38.4 19.029333 434.517333 434.517333 0 0 1 19.2 50.730667l6.4 25.386666 19.2-25.386666a302.037333 302.037333 0 0 1 64-63.402667 199.168 199.168 0 0 1 83.2-38.058667 91.52 91.52 0 0 1 38.4 12.8 42.112 42.112 0 0 1 0 63.402667l-6.4 6.357333c-6.4 6.357333-19.2 12.8-57.6 12.8a73.045333 73.045333 0 0 0-51.2 19.029334A437.717333 437.717333 0 0 0 819.218347 499.2v12.8l25.6 133.205333c12.8 50.730667 44.8 101.461333 64 101.461334s19.2-12.8 25.6-19.029334v-6.357333a67.498667 67.498667 0 0 1 44.8-38.058667c12.8 0 19.2 6.357333 32 12.8a48.213333 48.213333 0 0 1 12.8 31.701334 66.474667 66.474667 0 0 1-32 57.088 96.768 96.768 0 0 1-70.4 25.386666 157.866667 157.866667 0 0 1-102.4-38.058666 356.736 356.736 0 0 1-70.4-126.848l-6.4-25.386667-19.2 19.029333A641.578667 641.578667 0 0 1 640.018347 740.309333a96.768 96.768 0 0 1-70.4 25.386667 58.368 58.368 0 0 1-44.8-19.029333 54.613333 54.613333 0 0 1-19.2-38.058667 46.336 46.336 0 0 1 12.8-38.058667c6.4-12.8 19.2-12.8 32-12.8a45.738667 45.738667 0 0 1 38.4 19.029334l6.4 12.8 12.8-6.357334 19.2-19.029333a318.549333 318.549333 0 0 0 44.8-50.730667l57.6-82.432-25.6-120.490666-256-6.357334-70.4 285.397334a530.517333 530.517333 0 0 1-108.8 215.637333A317.738667 317.738667 0 0 1 76.818347 981.333333z","p-id":3050})))},Tt=(0,I.forwardRef)(Zt),zt=(r.p,r(81513)),Lt=r(45963),Ut=r(22142),Ft=Object.defineProperty,Yt=Object.defineProperties,$t=Object.getOwnPropertyDescriptors,Qt=Object.getOwnPropertySymbols,Wt=Object.prototype.hasOwnProperty,Jt=Object.prototype.propertyIsEnumerable,Kt=(e,t,r)=>t in e?Ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ht=(e,t)=>{for(var r in t||(t={}))Wt.call(t,r)&&Kt(e,r,t[r]);if(Qt)for(var r of Qt(t))Jt.call(t,r)&&Kt(e,r,t[r]);return e},Gt=(e,t)=>Yt(e,$t(t));function qt(){const{getState:e,dispatch:t}=(0,A.oR)(),r=(0,A.v9)((({project:e})=>{const t=(0,j.zh)(e);return t.props[t.id].sceneData||{}}),A.wU);return Ut.createElement("div",{className:(0,m.iv)({padding:"10px"})},Ut.createElement(Xt,{value:r,onChange:r=>{t((0,w.changeProps)([(0,j.zh)(e().project).id],{sceneData:r}))}}),Ut.createElement(tr,{onAddItem:({key:n,value:o})=>{if(!n)throw new Error("场景变量名不能为空");if(Object.keys(r).includes(n))throw new Error("已存在该场景变量");t((0,w.changeProps)([(0,j.zh)(e().project).id],{sceneData:Object.assign({},r,{[n]:o})}))}}))}function Xt({value:e,onChange:t}){return Ut.createElement("div",null,Object.entries(e).map(((r,n)=>Ut.createElement("div",{key:n,className:(0,m.iv)({marginBottom:20})},Ut.createElement(er,{value:r,onChange:r=>{t(Object.fromEntries(Object.entries(e).map(((e,t)=>t===n?r:e))))},onDelete:()=>{t(Object.fromEntries(Object.entries(e).filter(((e,t)=>t!==n))))}})))))}function er({value:e,onChange:t,onDelete:r}){const[n,o]=e;return Ut.createElement(S.Z,null,(0,De.default)((0,De.withContext)(e,t,{spark:"flex",content:[{spark:"string",index:0,label:"名称",width:48,required:!0,grow:1},["string","number","boolean"].includes(typeof o)&&{spark:typeof o,index:1,width:48,label:"值",grow:1},Array.isArray(o)&&{spark:"value",index:1,grow:2,content(e,t){return{spark:"element",content(){return Ut.createElement(Lt.O,{value:e,onChange:t})}}}}].filter(Boolean)})),Ut.createElement(u.Z,{title:"删除",placement:"right"},Ut.createElement(f.Z,{type:"primary",danger:!0,icon:Ut.createElement(de.Z,null),onClick:r})))}function tr({onAddItem:e}){const[t,r]=(0,I.useState)({type:"string",key:"",value:""}),{type:n,value:o}=t;let a;switch(n){case"string":case"number":a={spark:"element",content(e){return e({spark:n,label:"值",value:o,onChange(e){r(Gt(Ht({},t),{type:n,value:e}))}})}};break;case"boolean":a={spark:"label",label:"值",content:{spark:"element",content(e){return e({spark:n,value:o,onChange(e){r(Gt(Ht({},t),{type:n,value:e}))}})}}};break;case"Vector3":case"Vector4":a={spark:"element",content:()=>Ut.createElement(Lt.O,{value:o,onChange:e=>r(Gt(Ht({},t),{type:n,value:e}))})}}return Ut.createElement(Ut.Fragment,null,Ut.createElement(zt.Z,{plain:!0},"新增变量"),(0,De.default)((0,De.withContext)(t,r,{spark:"grid",content:[{spark:"element",content(e){return e({spark:"select",label:"变量类型",options:[{label:"文本",value:"string"},{label:"数值",value:"number"},{label:"开关",value:"boolean"},{label:"三维向量",value:"Vector3"},{label:"四维向量",value:"Vector4"}],value:t.type,onChange(e){const n=e;switch(n){case"string":return void r(Gt(Ht({},t),{type:n,value:""}));case"number":return void r(Gt(Ht({},t),{type:n,value:0}));case"boolean":return void r(Gt(Ht({},t),{type:n,value:!0}));case"Vector3":return void r(Gt(Ht({},t),{type:n,value:[0,0,0]}));case"Vector4":return void r(Gt(Ht({},t),{type:n,value:[0,0,0,0]}));default:(0,j.Ak)(n)}}})}},{spark:"string",index:"key",label:"变量名"},a]})),Ut.createElement(f.Z,{type:"primary",block:!0,className:(0,m.iv)({margin:"20px 0"}),onClick:()=>{try{e(t),r(Gt(Ht({},t),{value:rr(t.type)}))}catch({message:e}){p.ZP.warning(e)}}},"创建"))}function rr(e){switch(e){case"boolean":return!0;case"string":return"";case"number":return 0;case"Vector3":return[0,0,0];case"Vector4":return[0,0,0,0];default:return(0,j.Ak)(e)}}var nr=r(22142);const or=(0,I.memo)((()=>{const{visible:e,toggle:t}=(0,_.A)(),{trigger:r}=(0,E.Z)("RikoLog"),[n,o]=(0,I.useState)(!0);return nr.createElement("div",{className:(0,m.cx)((0,m.iv)({width:n?280:440,flexShrink:0,display:"flex",flexDirection:"column",borderRight:"1px solid #ccc",boxSizing:"content-box",position:"relative",transition:"all .3s",marginLeft:n?"-280px":"-440px"}),e&&(0,m.iv)({marginLeft:"unset"}))},n?nr.createElement(At,null):nr.createElement(qt,null),nr.createElement(u.Z,{title:e?"收起":"图块列表",placement:"right"},nr.createElement(f.Z,{shape:"circle",className:(0,m.iv)({position:"absolute",right:-44,top:8,zIndex:5}),icon:e?nr.createElement(x.Z,null):nr.createElement(rt.Z,null),onClick:()=>t()})),nr.createElement(u.Z,{title:"场景变量",placement:"right"},nr.createElement(f.Z,{type:n?void 0:"primary",shape:"circle",className:(0,m.iv)({position:"absolute",right:-44,top:48,zIndex:5}),icon:nr.createElement(nt.Z,{component:Tt}),onClick:()=>o((e=>!e))})),nr.createElement(u.Z,{title:"全局变量",placement:"right"},nr.createElement(f.Z,{shape:"circle",className:(0,m.iv)({position:"absolute",right:-44,top:88,zIndex:5}),icon:nr.createElement(ot.Z,null),onClick:()=>r("globalVar")})))}));var ar=r(13780),ir=r(13718),lr=r(22142);function cr(){return lr.createElement(y.tV,null,lr.createElement(sr,null))}function sr(){const e=(0,k.Ov)();return e.visible?lr.createElement(pr,{context:e}):null}function pr({context:e}){const{ref:t,getCoordinate:r,setCoordinate:n,nodes:v,edges:x,setNodes:E,addNodes:w,setEdges:P,removeNodes:j,addEdges:S,removeEdges:C,dispatchAction:A,undoLen:M,redoLen:_,onLayout:D,setLoadingNodes:R}=e,N=(0,k.gA)({ref:t,addNodes:w,setNodes:E,setLoadingNodes:R});(0,k.yq)();const{status:B,changeStatus:T,visible:z,setVisible:L,setPositionBy:U,menus:F}=(0,k.G3)(t,w,S,r,E,R),Y=(0,b.b)((e=>e.nodesSelectionActive)),{setStatus:$}=(0,k.$t)(),[Q,W]=(0,i.Z)("ui.settings.blueprint.theme","light"),J=(0,I.useRef)(null);return(0,I.useEffect)((()=>{var e;const t=document.querySelector(`#${ir.F_}`),r=null==t?void 0:t.parentNode;return t&&(null==(e=J.current)||e.appendChild(t)),()=>{r&&r.insertBefore(t,r.firstChild)}}),[]),lr.createElement(k.To.Provider,{value:e},lr.createElement("div",{className:(0,m.cx)((0,m.iv)({position:"fixed",width:"100vw",height:"100vh",top:0,left:0,zIndex:2,background:"#fff",display:"flex",flexDirection:"column",".react-flow__attribution":{display:"none"}}),"dark"===Q&&ur)},lr.createElement(V,null),lr.createElement("main",{className:(0,m.iv)({height:"calc(100vh - 60px)",position:"relative",display:"flex",flex:"auto"})},lr.createElement(or,null),lr.createElement(s.Z,{open:z,onOpenChange:e=>{e&&"pending"!==B.current.type||L(e)},overlay:F,trigger:["click"]},lr.createElement(s.Z,{prefixCls:"ant-dropdown",overlay:Y?lr.createElement(O.u,null):lr.createElement(O.U,null),trigger:["contextMenu"]},lr.createElement("div",{className:(0,m.cx)((0,m.iv)({width:"100%",height:"calc(100vh - 60px)"}),"dark"===Q&&ur),ref:N},lr.createElement(y.ZP,{ref:t,onContextMenu:n,nodes:v,edges:x,nodeTypes:mr,onConnectStart:(e,t)=>{T("pending",t)},onConnect:e=>{T("reject");const t=(0,ar.j)(e);if(x.some((e=>e.id===t.id)))return p.ZP.error("连线重复");S([t])},onConnectEnd:e=>{"pending"===B.current.type&&setTimeout((()=>{n(e),U(e),L(!0),T("none")}),0),"reject"===B.current.type&&T("none")},onEdgesChange:e=>{if("remove"===e[0].type){(0,Z.gM)(e);const t=e.map((e=>e.id));return C(t)}P((t=>(0,b.x)(e,t))),P((t=>(0,b.x)(e,t)))},onNodesChange:e=>{const t=e.filter((e=>{var t;if("remove"===e.type){const r="root"!==(null==(t=v.find((({id:t})=>t===e.id)))?void 0:t.type);return r||p.ZP.warning("不允许删除输入/输出节点"),r}return!0}));if(t.length){if("remove"===t[0].type){(0,Z.$Z)(t);const e=t.map((e=>e.id));return j(e)}E((e=>(0,b.y)(t,e)))}},onEdgeUpdate:(e,t)=>P((r=>(0,b.E)(e,t,r))),onClick:()=>{$({type:"hidden"})}},lr.createElement(h.i,null,lr.createElement(h.C,{onClick:()=>{D()}},lr.createElement(u.Z,{title:"自动布局",placement:"right"},lr.createElement(l.Z,{theme:"outline",size:"24",fill:"#333"}))),lr.createElement(h.C,{className:(0,m.cx)(0===M&&dr),onClick:()=>{M>0&&A("undo")}},lr.createElement(u.Z,{title:"撤回(⌘+z)",placement:"right"},lr.createElement(o.Z,null))),lr.createElement(h.C,{className:(0,m.cx)(0===_&&dr),onClick:()=>{_>0&&A("redo")}},lr.createElement(d.Z,{size:"small",count:_,offset:[4,0]},lr.createElement(u.Z,{title:"重做(⇧+⌘+z)",placement:"right"},lr.createElement(a.Z,null))))),lr.createElement(g.i,{color:"#aaa",gap:60,variant:"lines",className:(0,m.cx)("dark"===Q&&(0,m.iv)({background:"#555"}))}),lr.createElement(u.Z,{title:"切换主题"},lr.createElement(f.Z,{shape:"circle",icon:lr.createElement(c.Z,{theme:"filled",size:"24",fill:"#555",strokeWidth:2}),className:(0,m.iv)({position:"absolute",zIndex:4,right:20,bottom:220}),onClick:()=>{W((e=>"light"===e?"dark":"light"))}})),lr.createElement("div",{ref:J,className:(0,m.iv)({position:"absolute",zIndex:4,right:v.filter((e=>e.selected)).length>0?330:10,bottom:10,width:400,height:200})}))))),lr.createElement(tt,{theme:Q}))))}const ur=(0,m.iv)({filter:"invert(1) hue-rotate(180deg)"}),dr=(0,m.iv)({color:"#00000040",background:"#f5f5f5!important",cursor:"not-allowed!important",span:{color:"#00000040"}}),fr=(0,n.Yo)(n.Ek.BLUEPRINT,(e=>{try{return JSON.parse(e)}catch(e){return null}}),JSON.stringify,!0),mr={root:v.ZP,scene:v.ZP,node:v.ZP,block:v.ZP,component:v.ZP}},69580:function(e,t,r){"use strict";r.d(t,{Wo:function(){return W},MF:function(){return H}});var n={};r.r(n),r.d(n,{RigidBody3D:function(){return V},Switch:function(){return M}});var o=r(38499),a=r(19104),i=r(99535),l=r(88551),c=r(99045),s=r(26840),p=r(70072),u=r(62732),d=r(22142),f=r(3207),m=r(13564),y=r(30470),b=r(15303),h=r(87139),g=r(62834),v=r(27625),O=r(60468),k=r(22142),x=Object.defineProperty,E=Object.defineProperties,w=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,C=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,I=(e,t)=>{for(var r in t||(t={}))j.call(t,r)&&C(e,r,t[r]);if(P)for(var r of P(t))S.call(t,r)&&C(e,r,t[r]);return e},A=(e,t)=>E(e,w(t));const M={name:"条件判断",category:"逻辑修改",content:{spark:"group",label:"分支判断",content:{spark:"value",index:"editor",content(e={},t){const{outputs:r=[]}=e;return{spark:"value",index:"switch",content(n=[],o){if(r.length!==n.length+1)throw new Error(`数据异常 ${r} ${n}`);return{spark:"element",content(){const i=r.find((e=>"0"===e.key)),l=r.filter((e=>"0"!==e.key)).map(((e,t)=>[e,n[t]]));return k.createElement(h.L,{label:"分支",array:l,defaultItem:e=>{const t=(0,b.Ys)(l.map((([e])=>e)));e([{key:(0,b.GY)("$outputs",t),label:`分支 ${t}`},{case:(0,b.GY)("$outputs",t),conditions:[]}])},onChange:r=>{const n=r.map((([e])=>e)),a=r.map((([e,t])=>t));t(A(I({},e),{outputs:[...n,i]})),o(a)},render:([e,t],r)=>(0,f.default)({spark:"grid",content:[{spark:"element",content(n){return n({spark:"string",value:e.label,label:"分支名",onChange(n){"string"==typeof n&&r([A(I({},e),{label:n}),t])}})}},{spark:"element",content(){const n=(0,g.SW)(),{enableBlueprint:o}=(0,a.useEditor)(0,"enableBlueprint");return k.createElement(h.L,{label:"条件判断",array:t.conditions,defaultItem:{from:{ids:[-1],key:"alpha",type:"node"},compare:"=",to:1},onChange:n=>{r([e,A(I({},t),{conditions:n})])},render:(e,t)=>{const r=(0,O.Gr)(e,n);return(0,f.default)((0,v.E)(e,t,r,"compare",(e=>o?e:e.filter((e=>"scene"!==e.value)))))}})}}]})})}}}}}}}};var _=r(21004),D=r(48001),R=r(71331),N=r(22142);const V={name:"启用3D物理",category:"高级",content:{spark:"grid",content:[(0,D.c)(),{spark:"check",index:"physics",check:{hidden:e=>["none",void 0].includes(null==e?void 0:e.type)},content:(0,_.u)({},{})}]},checkRef({joints:e=[]},t){return e.some((({otherNodeId:e})=>t.includes(e)))},Summary:({props:{time:e}})=>N.createElement(N.Fragment,null,(0,R.g)(e)," 启用元素3D物理属性")};var B=r(22142),Z=Object.defineProperty,T=Object.defineProperties,z=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,Y=(e,t,r)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$=(e,t)=>{for(var r in t||(t={}))U.call(t,r)&&Y(e,r,t[r]);if(L)for(var r of L(t))F.call(t,r)&&Y(e,r,t[r]);return e},Q=(e,t)=>T(e,z(t));function W(){const e=(0,y.zi)(),{script:t,onChange:r}=(0,y.Ix)(e),{propsMode:o}=(0,a.useEditor)(0,"propsMode"),l=function(e,t){var r,o,l,s,p,d,y;const b=null!=(y=null!=(d=m.p_[e.props.script]?K((0,m.Mq)({},{}),"触发方式"):"Effect"===e.type?c.FP.Effect.content:(null==(r=c.FP[e.props.script])?void 0:r.content)&&K(null!=(l=null==(o=c.FP[e.props.script])?void 0:o.content)?l:f.NULL_SPARK,"ModifyData"===e.props.script?"赋值":null==(s=c.FP[e.props.script])?void 0:s.name))?d:null==(p=n[e.props.script])?void 0:p.content)?y:f.NULL_SPARK,h=J(e,t,b);return{spark:"context",provide:()=>({useValue:r=>{var n;const{indexValue:o,indexEntries:a}=(0,f.getIndexer)(r);return r in e?{value:[o(null!=e?e:{})],onChange([e],n){t({[r]:e},n)}}:{value:[o(null!=(n=e.props)?n:{})],onChange([r],n){(null==n?void 0:n.replace)?t({props:r},n):t({props:$($({},e.props),Object.fromEntries(a(r)))},n)}}},blueprint:{enabled:!0},openKeys:h}),content:{spark:"grid",content:[{spark:"check",index:"",check:{hidden:()=>{const{propsMode:e}=(0,a.useEditor)(0,"propsMode");return"Template"!==e}},content:{spark:"element",content(){return B.createElement(i.K2,{className:(0,u.iv)({height:40,padding:"16px 16px 0"})})}}},{spark:"group",label:"图块信息",content:{spark:"value",index:"name",content(e){return{spark:"value",index:"_editor",content(t={},r){const{bpName:n}=t;return{spark:"element",content(o){var a;return o({spark:"string",value:null!=(a=null!=n?n:e)?a:"",onChange(e){r(Q($({},t),{bpName:e}))},tooltip:"名称",label:"名称"})}}}}}},extra:H},b]}}}(t,r);return(0,d.useMemo)((()=>(0,f.default)(l)),[t,o])}const J=(e,t,r)=>{const{propsMode:n}=(0,a.useEditor)(0,"propsMode");if("Template"!==n)return{};const{editor:{enabled:o=!1,openKeys:i=[]}={}}=e;return{checking:!0,enabled:o,setEnabled(r){t(Q($({},e),{editor:Q($({},e.editor),{enabled:r})}))},openKeys:i,setOpenKeys:(n,o)=>{t(Q($({},e),{editor:Q($({},e.editor),{openKeys:(0,f.updateIndices)(null!=i?i:(0,f.collectIndices)(r,["required","recommended"]),n,o)})}))}}};function K(e,t){return"group"===e.spark?Q($({},e),{label:t,extra:void 0}):e}const H={spark:"flex",columnGap:0,content:[(0,l.I)(),{spark:"value",index:"id",content(e){return{spark:"element",content:()=>{const{removeNodes:t}=(0,y.zi)();return(0,d.useMemo)((()=>B.createElement(s.Z,{title:"删除"},B.createElement(p.Z,{type:"text",size:"small",icon:B.createElement(o.Z,null),onClick:()=>{t([String(e)])}}))),[e,t])}}}}]}},31635:function(e,t,r){"use strict";r.d(t,{A:function(){return a}});var n=r(28324);const o="ui.settings.blueprint.sidebar",a=(0,n.ZP)((e=>{var t;return{visible:JSON.parse(null!=(t=localStorage.getItem(o))?t:"true"),toggle:()=>{e((({visible:e})=>(localStorage.setItem(o,JSON.stringify(!e)),{visible:!e})))}}}))},10127:function(e,t,r){"use strict";function n(e){return void 0!==e&&["project","scene","node"].includes(e)}function o(e){if(e.some((e=>!("id"in e)||!("type"in e))))throw new Error("assert Error")}function a(e){if(e.some((e=>!("id"in e)||!("type"in e))))throw new Error("assert Error")}r.d(t,{$Z:function(){return o},C_:function(){return n},gM:function(){return a}})},49590:function(e,t,r){"use strict";r.d(t,{F:function(){return a},Z:function(){return o}});var n=r(40985);function*o(e,t,r=!0){const{nodes:n=[],scripts:a=[]}=e;yield*function*e(n=[]){for(const o of n){r?"Script"===o.type&&"CustomScript"===o.props.script&&(yield*t(o)):yield*t(o);for(const t of["scripts","elseScripts"])yield*e(o.props[t])}}(a);for(const e of n)yield*o(e,t,r)}function*a(e,t){for(const{props:n}of e)yield*r(Object.entries(n).filter((([e])=>e.startsWith("$"))).map((([e,t])=>t)),t);function*r(e,t){for(const o of e){const{callee:e,value:a,default:i,defaultItem:l}=o;switch(e){case"Riko.useObject":case"object":yield*r(Object.values(null!=a?a:i),t);break;case"Riko.useArray":l&&(yield*r(a.map((e=>(0,n.a$)(l,e))),t));break;default:yield*t(o)}}}}},13780:function(e,t,r){"use strict";r.d(t,{j:function(){return c},l:function(){return s}});var n=Object.defineProperty,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function c(e){const t=e,{source:r,sourceHandle:n,target:c,targetHandle:p}=t,u=((e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&i.call(e,n)&&(r[n]=e[n]);return r})(t,["source","sourceHandle","target","targetHandle"]);if(!r||!c)throw new Error("");return((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(o)for(var r of o(t))i.call(t,r)&&l(e,r,t[r]);return e})({source:r,sourceHandle:n,target:c,targetHandle:p,id:s({source:r,sourceHandle:n,target:c,targetHandle:p}),style:{strokeWidth:3}},u)}function s({source:e,sourceHandle:t,target:r,targetHandle:n}){return`${e}:${t}-${r}:${n}`}},8385:function(e,t,r){"use strict";function n(e){return e.endsWith(".ts")?e:e.endsWith(".js")?e.replace(".js",".ts"):`${e}.ts`}function o(e){return e.replace(/\.\w+$/,"")}r.d(t,{V:function(){return o},o:function(){return n}})},23936:function(e,t,r){"use strict";r.d(t,{M:function(){return l},Q:function(){return i}});var n=r(8453),o=r(60379),a=r(8385);function i(e,t,r){try{const{ast:i}=(0,o.transform)(e,{presets:["typescript"],filename:"main.ts",ast:!0});i&&(0,n.default)(i,{ImportDeclaration(e){const n=(0,a.o)(e.node.source.value.replace(/^\.\//,"")),o=t.find((e=>e.name===n));o&&r(o)}})}catch(e){}}function l(e,t,r){try{const{ast:i}=(0,o.transform)(e,{presets:["typescript"],filename:"main.ts",ast:!0});i&&(0,n.default)(i,{ImportDeclaration(e){const n=(0,a.o)(e.node.source.value.replace(/^\.\//,""));t(void 0,n).then((([e,t])=>{t&&r(t)}))}})}catch(e){}}},15303:function(e,t,r){"use strict";r.d(t,{ud:function(){return j},U5:function(){return P},GY:function(){return M.GY},lK:function(){return A.l},ST:function(){return Y},yL:function(){return W},Bi:function(){return K},aj:function(){return M.aj},Ej:function(){return S},Ys:function(){return M.Ys},SY:function(){return F},tP:function(){return Q.tP},oy:function(){return a.o}});var n=r(60379),o=r(61645),a=r(8385),i=r(38173),l=r.n(i),c=r(36366),s=Object.defineProperty,p=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&f(e,r,t[r]);if(p)for(var r of p(t))d.call(t,r)&&f(e,r,t[r]);return e};const y=(b={key:"customScript",placement:"bottomRight"},e=>{const t=m(m({},b),e),{type:r="success"}=t,n=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(t,["type"]);c.Z[r](n)});var b,h=Object.defineProperty,g=Object.defineProperties,v=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const P=(e,t)=>w(void 0,null,(function*(){return C((()=>w(this,null,(function*(){return(yield(0,o.cI)({name:e.name||"compilerTSCode.ts",content:e.ideCode},t.filter((t=>t.id!==e.id)).map((({name:e,ideCode:t})=>({name:e,content:t}))))).replace(/module\.exports\s+=\s+(__toCommonJS\(\w+\));/,"Object.defineProperty(exports, 'default', { get: () => $1.default });")}))))}));function j(e){return w(this,null,(function*(){try{const t=function(e){const t=e.filter((({ideCode:e})=>/export\s+default\s+class/.test(e))),r=new Map,{importStatement:n,regStatement:o,recordStatement:i}=t.reduce((({importStatement:e,regStatement:t,recordStatement:n},{orderId:o,name:i,ideCode:c},s)=>{const p=(0,a.V)(i);let u=`_${p.replace(/[()（）-\s]/g,"_")}${s}`;const d=l()(c);return r.has(d)?u=r.get(d):(r.set(d,u),e.push(`import ${u} from './${p}';\r\n`)),t.push(`Riko.RegManager.regScript(${o}, ${u});\r\n`),n.push(`${o}: ${u},\r\n`),{importStatement:e,regStatement:t,recordStatement:n}}),{importStatement:[],regStatement:[],recordStatement:[]});return`\n      ${n.join("")}\n      ${o.join("")}\n      const map = {\n        ${i.join("")}\n      }\n      exports.default = function (orderId) {\n        return map[orderId]\n      }\n    `}(e=e.map((e=>{return t=((e,t)=>{for(var r in t||(t={}))k.call(t,r)&&E(e,r,t[r]);if(O)for(var r of O(t))x.call(t,r)&&E(e,r,t[r]);return e})({},e),r={name:e.name.replace("/","_")},g(t,v(r));var t,r})));return yield(0,o.cI)({name:"entry.ts",content:t},e.map((({name:e,ideCode:t})=>({name:(0,a.o)(e),content:t}))))}catch(e){throw y({type:"error",message:"脚本编译失败",description:e.message,duration:2}),e}}))}function S(e){try{return(0,n.transform)(e,{presets:["typescript"],filename:"main.ts"}),!0}catch(e){return!1}}function C(e,t=2){try{return e()}catch(r){if(t>0)return C(e,t-1);throw r}}var I=r(96056),A=r(13780),M=r(36989),_=Object.defineProperty,D=Object.defineProperties,R=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertySymbols,V=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,Z=(e,t,r)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,T=(e,t)=>{for(var r in t||(t={}))V.call(t,r)&&Z(e,r,t[r]);if(N)for(var r of N(t))B.call(t,r)&&Z(e,r,t[r]);return e},z=(e,t)=>D(e,R(t));const L={x:100,y:400},U={x:900,y:400},F=(e,t=!1)=>{const r=[],n=[],{id:o,props:{scripts:a=[]},editor:{inputPosition:i=L,outputPosition:l=U}={}}=e;r.push({id:"0",position:i,type:"root",data:e},{id:String(o),position:l,type:"root",data:e,hidden:t});for(const e of a){const{id:t,editor:{position:n=L,nodeType:o}={}}=e,a={id:String(t),position:n,type:o,data:e};r.push(T({},a))}for(const e of r)"root"===e.type&&"0"!==e.id||c(e);return{nodes:r,edges:n};function c(e){const{id:t,type:o,data:{editor:{inputs:a=[],outputs:i=[]}={},props:l}}=e,{inputs:c,outputs:s}=l,p=("root"===o?c:s)||{};for(const[e,c]of Object.entries(p)){const{inputs:s,outputs:p}=(0,M.HU)(l);if(("root"===o?[...a,...s]:[...i,...p]).map((e=>e.key)).includes(e))for(const[o,a,i]of c){const l=r.find((e=>e.data.id===o));if(l){const{inputs:r,outputs:c}=(0,M.aj)(l);("root"===l.type?c:r).map((e=>e.key)).includes(a)&&n.push((0,A.j)({source:t,target:String(o),sourceHandle:e,targetHandle:a,data:i}))}}}}},Y=(e,t)=>{const r=$(e),n=t.reduce(((e,t)=>{if(r(t)){const{source:r,target:n,sourceHandle:o,targetHandle:a,data:i}=t;e[r][o]||(e[r][o]=[]),e[r][o].push([Number(n),a,i])}return e}),Object.fromEntries(e.map((({id:e})=>[e,{}])))),{data:o,position:a}=e.find((({id:e})=>"0"===e)),{position:i}=e.find((({id:e,data:t})=>"0"!==e&&t.id===o.id)),l=e.reduce(((e,{id:t,data:r,position:a})=>("0"!==t&&r.id!==o.id&&e.push(z(T({},r),{editor:z(T({},r.editor),{position:a}),props:z(T({},r.props),{outputs:n[r.id]})})),e)),[]);return z(T({},o),{editor:z(T({},o.editor),{inputPosition:a,outputPosition:i}),props:z(T({},o.props),{scripts:l,inputs:n[0]})})},$=e=>{const t=e.reduce(((e,{id:t,type:r,data:n})=>(e[t]=(0,I.z9)(t,n,"root"===r),e)),{});return({source:e,target:r,sourceHandle:n,targetHandle:o})=>t[e]&&t[r]&&t[e].outputs.find((({key:e})=>e===n))&&t[r].inputs.find((({key:e})=>e===o))};var Q=r(41946);function W(e,t){const r=[],n=[],o=[];for(const a of e)t.includes(a.source)&&t.includes(a.target)&&r.push(a),t.includes(a.source)&&!t.includes(a.target)&&o.push(a),!t.includes(a.source)&&t.includes(a.target)&&n.push(a);return{innerEdges:r,inputEdges:n,outputEdges:o}}var J=r(40985);function K(e,t){var r;switch(null==(r=e.editor)?void 0:r.nodeType){case"node":{const[r]=(0,J.qC)((0,J.v$)((0,J.zh)(t().project)),e.id,!0);return r}case"scene":return t().project.scenes.filter((e=>!e.editor.loading&&"Scene"===e.type)).find((t=>(0,J.uz)(t.scripts||[],t.props).some((t=>{var r;return"Blueprint"===t.type&&"scene"===(null==(r=t.editor)?void 0:r.nodeType)&&t.id===e.id}))))}}},36989:function(e,t,r){"use strict";function n(e){const{data:{props:t,editor:{inputs:r=[],outputs:n=[]}={}}}=e,{inputs:a,outputs:i}=o(t);return{inputs:[...r,...a],outputs:[...n,...i]}}function o(e){return Object.fromEntries(Object.entries(e).filter((([e])=>e.startsWith("$"))).reduce(((e,[t,r])=>{const{callee:n,name:o,tooltip:a}=r;return"Riko.useInput"===n&&e[0][1].push({key:t.replace(/^\$/,""),label:o,tooltip:a}),"Riko.useInputs"===n&&e[0][1].push(...(r.value||[]).filter((e=>!!e)).map((e=>({key:e,label:e})))),"Riko.useOutput"===n&&e[1][1].push({key:t.replace(/^\$/,""),label:o,tooltip:a}),"Riko.useOutputs"===n&&e[1][1].push(...(r.value||[]).filter((e=>!!e)).map((e=>({key:e,label:e})))),e}),[["inputs",[]],["outputs",[]]]))}function a(e,t=1){const r=e.reduce(((e,t)=>function({key:e}){return l.test(e)||isFinite(Number(e))}(t)?e.concat(function(e){var t;const[r,n]=null!=(t=l.exec(e.key))?t:[];if(void 0===n)throw new Error(`非自定义信号${e.key}`);return Number(n)}(t)):e),[]).sort(((e,t)=>e-t));for(const e of r){if(t!==e)break;t++}return t}function i(e,t){return`${e}_${t}`}r.d(t,{GY:function(){return i},HU:function(){return o},Ys:function(){return a},aj:function(){return n}});const l=/\$(?:inputs|outputs)_(\d)+$/},41946:function(e,t,r){"use strict";r.d(t,{UG:function(){return d},tP:function(){return f}});var n=r(40985),o=Object.defineProperty,a=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))s.call(t,r)&&p(e,r,t[r]);return e};function d(e){const t=Array.from(function*e(t){yield t.id;for(const r of["scripts","elseScripts"])for(const n of t.props[r]||[])yield*e(n)}(e)),r=Object.fromEntries(t.map((e=>[e,(0,n.xv)()])));return{newScript:m(e,r),map:r}}function f(e,t){const r=[],n={};for(const t of e){const{newScript:e,map:c}=d(t.data);r.push((o=u({},t),l={data:e,id:String(e.id)},a(o,i(l)))),Object.assign(n,c)}var o,l;return{nodes:r,edges:t.map((e=>m(e,n)))}}function m(e,t){return JSON.parse(JSON.stringify(e).replace(new RegExp(Object.keys(t).join("|"),"g"),(e=>String(t[Number(e)]))))}},31934:function(e,t,r){"use strict";r.d(t,{Mk:function(){return D},qF:function(){return R}});var n=r(22142),o=r(42761),a=r(61754),i=r(70072),l=r(19104),c=r(40985),s=r(60439),p=r(50585),u=r(36006),d=r(26494),f=r(3197),m=r(23247),y=r.n(m),b=r(66716),h=r(7910),g=r(39089),v=r(73760),O=r(8523),k=r(73073),x=Object.defineProperty,E=Object.defineProperties,w=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,C=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,I=(e,t)=>{for(var r in t||(t={}))j.call(t,r)&&C(e,r,t[r]);if(P)for(var r of P(t))S.call(t,r)&&C(e,r,t[r]);return e},A=(e,t)=>E(e,w(t)),M=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const _=(e,t)=>{const r=(0,v.cloneDeep)(e);return r.editor.prevState?r.editor.prevState=_(r.editor.prevState,t):r.scenes.find((e=>e.sceneId===t.sceneId))?r.scenes=r.scenes.map((e=>e.sceneId===t.sceneId?t:e)):r.scenes.push(t),r},D=()=>{const{getState:e}=(0,o.oR)();return(t,r=!0)=>{let n=_(e().project,t);return r&&(n=(0,c.hX)(n,t)),n}},R=()=>{const{getState:e}=(0,o.oR)(),t=(0,s.QO)();return(r=!1)=>M(void 0,null,(function*(){var n;const{editor:{prevState:o},scenes:[a],settings:i}=(0,c.q7)(e().project),l=yield t(),s=null==o?void 0:o.scenes.filter((e=>"Animation"===e.type)).map((e=>e.name)),u=null==(n=(0,c.GV)(a).props)?void 0:n.name;let d=u;if(null==s?void 0:s.includes(u)){const e=new RegExp("\\((\\d+)\\)$").exec(u),t=e?u.substring(0,e.index):u,r=null==s?void 0:s.map((e=>{const r=new RegExp(`${t}\\((\\d+)\\)$`).exec(e);return r?Number(r[1]):0})),n=Math.max(...r)+1;d=`${t}(${n})`}const f=A(I({},(0,c.GV)(a)),{props:A(I({},(0,c.GV)(a).props),{name:r?d:u})}),m=A(I({},(0,c.m7)(f)),{editor:A(I({},a.editor),{store:i.store,capture:l||a.editor.capture})});if(o)return(0,p.E)(o,m,r);throw new Error("无法创建组件")}))};t.ZP=(0,n.memo)((({children:e,publish:t,changed:r,saveAs:s=!1,disabled:m})=>{var v;const[x,E]=(0,n.useState)(!1),w=(0,n.useCallback)((()=>{E(!1)}),[]),P=D(),j=R(),S=(0,k.l6)(),[C,N]=(0,n.useState)(!1),{dispatch:V,getState:B}=(0,o.oR)(),Z=B().project.type,T=["Animation3D","Model","Particle3D"].includes(null==(v=(0,c.zh)(B().project))?void 0:v.type),z=(e,t,r)=>M(void 0,null,(function*(){var n,o;const a=!(null==(n=B().project.scenes[0])?void 0:n.orderId),i=Object.keys(e.editor.selected)[0],l=null==(o=Object.entries(e.props).find((([e])=>e===i)))?void 0:o[1];l&&a&&(l.url=t,e.props=I({},e.props)),yield(0,f.aq)({sceneContent:JSON.stringify((0,c.GV)(e)),name:e.name||"Scene",id:e.sceneId,projectId:r})})),L=(0,d.Z)((e=>M(void 0,null,(function*(){const{editor:n,type:o,scenes:[i],id:u,materials:d}=B().project;let f=n.prevState;if(f)return new Promise(((e,t)=>M(this,null,(function*(){var n;i.nodes.length||(null==(n=i.scripts)?void 0:n.length)?!r&&!s||i.editor.sourceJson?e(i):(N(!0),e(j(s))):t("互动组件没任何内容")})))).then((n=>M(this,null,(function*(){if(t&&(yield(0,p.Q)(f,n,e)),s)if(n.editor.sourceJson){N(!0);try{const{data:{scenes:e,customScripts:t}}=yield y().get((0,h.GR)(n.editor.sourceJson));e[0].editor.isOpen=!0;const{project:r}=B();yield(0,b.Z)(V,f,e.map((e=>(0,c.m7)(e))),r.scenes.length+e.length-1,t,!0);const{editor:{prevState:o}}=B().project,i=(0,c.o$)(B().project).scenes[0],s=f.scenes.find((e=>e.id===f.editor.selectedSceneId));return s&&(yield z(s,i.orderId,u)),V((0,l.restoreState)(o)),a.ZP.success("成功另存为项目组件")}catch(e){console.log(e)}finally{N(!1)}}else{f=_(f,n);const e=f.scenes.find((e=>e.id===f.editor.selectedSceneId));e&&(yield z(e,n.orderId,u)),V((0,l.restoreState)(f))}else{const e=P(n,r);V((0,l.restoreState)(A(I({},e.editor.prevState),{materials:d})))}(0,g.oA)(),V((0,l.changeCategory)("")),V((0,l.setSettings)({store:B().project.settings.store})),"Model"===n.type&&S(n.orderId),N(!1)})))).catch((e=>{var t;a.ZP.error((null==(t=null==e?void 0:e.data)?void 0:t.message)||(null==e?void 0:e.message)||e),N(!1)}))}))));return(0,O.Bv)(`${(0,c.zO)("command","control")}${s?"+shift":""}+s`,(e=>{e.preventDefault(),t||L()}),void 0,[L]),n.createElement(n.Fragment,null,n.createElement(i.Z,{style:{marginLeft:"8px"},size:"large",disabled:m,type:s||t?"default":"primary",loading:C,onClick:t?()=>E(!0):L},e),t&&x&&n.createElement(u.Z,{resourceType:Z,is3D:T,onPublish:L,onClose:w,requireCover:!1}))}))},50585:function(e,t,r){"use strict";r.d(t,{E:function(){return w},Q:function(){return P}});var n=r(3197),o=r(98466),a=r(40985),i=r(49405),l=r(14766),c=r.n(l),s=r(15303),p=r(48837),u=r(23936),d=Object.defineProperty,f=Object.defineProperties,m=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))b.call(t,r)&&g(e,r,t[r]);if(y)for(var r of y(t))h.call(t,r)&&g(e,r,t[r]);return e},O=(e,t)=>f(e,m(t)),k=(e,t)=>{var r={};for(var n in e)b.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&y)for(var n of y(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r},x=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const E=(e=[],t=0)=>e.reduce(((e,{nodes:t,scripts:r})=>E(t,Math.max(e,...r.map((({type:e,time:t=0,duration:r=0})=>{switch(e){case"Controller":case"Effect":return t+r;case"Script":return t;default:return 0}}))))),t),w=(e,t,r=!1)=>x(void 0,null,(function*(){var o;if(!r&&((e,t)=>{for(;e.editor.prevState;)e=e.editor.prevState;return e.scenes.some((({sceneId:e})=>e===t.sceneId))})(e,t)||(t=O(v({},t),{sceneId:0})),t.props[t.id].duration=E(t.nodes),null==(o=t.editor.state)||o.forEach((e=>{e.duration=E((0,a._V)(t,e.id))})),t.sceneId)return e.editor.readOnly||(yield(0,n.aq)({name:t.name||"Scene",id:t.sceneId,projectId:e.id,sceneContent:JSON.stringify((0,a.GV)(t))})),t;{if(e.editor.readOnly){const e=(0,a.xv)();return(0,a.oY)(t,e,e)}const{id:r,orderId:o}=yield(0,n.aY)({projectId:e.id,name:t.name,sceneContent:JSON.stringify((0,a.GV)(t))});return(0,a.oY)(t,r,o)}})),P=(e,t,r)=>x(void 0,null,(function*(){var n;const[l,d]=[[],[]],f=(...t)=>x(this,[...t],(function*(t=[]){const r=t.map((t=>x(this,null,(function*(){const r=t.props,{url:o}=r,i=k(r,["url"]),{script:l,scripts:c,elseScripts:p}=i;if("Conditions"===l&&Array.isArray(p)&&(null==p?void 0:p.length)){const[e,r]=yield Promise.all([yield f(c),yield f(c)]);return O(v({},t),{props:O(v({},i),{scripts:e,elseScripts:r})})}if("CloneComponent"===l&&"number"==typeof o){const[r,n]=yield Promise.all([(yield m([(0,a.GV)((0,a._N)(e,o))]))[0],yield f(c)]);return O(v({},t),{props:O(v({},i),{url:r,scripts:n})})}if("CustomScript"===l&&"number"==typeof o){const r=(0,a.se)(e,o);n(r,e);const[l,p]=yield Promise.all([(0,s.U5)(r,e.customScripts),f(c)]);return O(v({},t),{props:O(v({},i),{jsCode:l,tsCode:r.ideCode,scripts:p})})}return O(v({},t),{props:O(v({},t.props),{scripts:yield f(c)})})}))));return r.length?yield Promise.all(r):void 0;function n(e,t){d.push(e),(0,u.Q)(e.ideCode,t.customScripts,(e=>{n(e,t)}))}})),m=(...t)=>x(this,[...t],(function*(t=[]){const r=t.map((t=>x(this,null,(function*(){const r=t,{type:n,props:o={}}=r,i=o,{url:c}=i,s=k(i,["url"]),{nodes:p,scripts:u}=r;if(["Animation","Animation3D","Model","Particle3D"].includes(n)&&"number"==typeof c){const r=(0,a.GV)((0,a._N)(e,c));l.push(r);const[n]=yield m([O(v({},r),{nodes:(r.nodes||[]).concat(p||[]),scripts:(r.scripts||[]).concat(u||[])})]);return O(v({},t),{props:s,scripts:n.scripts,nodes:n.nodes})}const[d,y]=yield Promise.all([f(u),m(p)]);return O(v({},t),{scripts:d,nodes:y})}))));return r.length?yield Promise.all(r):void 0})),y=(0,a.GV)(t);console.log("currentScene:",t,y),["Animation3D","Model","Particle3D"].includes(t.type)&&(t.editor.capture=yield(0,p.captureNode3DData)(t.orderId)),l.push(y);const[b]=yield m([y]),{name:h,platformTags:g,cover:E,description:w,isAuthControl:P,extra:j}=null!=r?r:{},S=E?E.startsWith("data")?(yield(0,o.D5)(E||"","cover.png")).previewUrl:E:(yield(0,o.D5)(t.editor.capture||"","cover.png")).previewUrl,C=new(c());C.file("data.json",JSON.stringify(b)),C.file("source.json",JSON.stringify({scenes:l,customScripts:d}));const I=yield C.generateAsync({type:"blob"});yield(0,o.SN)({name:h||t.name,file:new File([I],"bundle-publish.zip",{type:"application/zip"}),cover:S,onPlatform:!0,type:null!=(n=i._g[b.type])?n:4,description:w,platformTags:g,isAuthControl:null!=P&&P,teamId:e.teamId,extra:j})}))},56683:function(e,t,r){"use strict";var n=r(51908),o=r(40985),a=r(61645),i=r(7910),l=r(23247),c=r.n(l),s=Object.defineProperty,p=Object.defineProperties,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&y(e,r,t[r]);if(d)for(var r of d(t))m.call(t,r)&&y(e,r,t[r]);return e},h=(e,t)=>p(e,u(t)),g=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));t.Z=e=>g(void 0,null,(function*(){const{createScenes:t,copyNode:r}=(0,n.KL)(e,!1,!1,((e,t)=>"string"==typeof t&&(t.includes("payload=")||t.startsWith("material/private"))),(e=>g(this,null,(function*(){const{data:t}=yield c().get((0,i.GR)(e));return[e,(0,o.m7)(t)]}))),(e=>g(this,null,(function*(){if(e){const{searchParams:t}=new URL((0,i.GR)(e)),{name:r}=yield(0,a.pR)(t.get("payload")||"",25).catch((()=>({name:"未知脚本"}))),{data:n}=yield c().get(e),o=h(b({},n),{ideCode:n.ideCode?n.ideCode:"typescript"===n.language?n.tsCode:n.jsCode,type:"CustomScript",name:r});return[e,o]}throw new Error})))),l=yield Promise.all(e.scenes.map((e=>g(this,null,(function*(){const t=(0,o.GV)(e);return(0,o.m7)(h(b({},t),{nodes:yield r(t.nodes)}))}))))),{components:s,customScripts:p}=yield t();return h(b({},e),{scenes:[...s,...l],customScripts:[...p,...e.customScripts]})}))},81749:function(e,t,r){"use strict";r.d(t,{Rr:function(){return Q},Ei:function(){return ge},os:function(){return ve}});var n=r(60350),o=r(19104),a=r(84215),i=({scene:e})=>{const{props:{[e.id]:{compProps:t}}}=e;if(Array.isArray(t))for(const{ids:r,props:n}of t)for(const t of n)void 0!==t.value&&(e=(0,a.ZP)(e,(0,o.changeProps)(r,{[t.key]:t.value})),delete t.value);return e},l=r(73760),c=r(40985),s=r(98466),p=Object.defineProperty,u=Object.defineProperties,d=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&b(e,r,t[r]);if(f)for(var r of f(t))y.call(t,r)&&b(e,r,t[r]);return e},g=(e,t)=>u(e,d(t)),v=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())})),O=e=>v(void 0,[e],(function*({projectId:e,scene:t}){const r={};if("Animation"===t.type)return t;for(const[n,o]of Object.entries(t.props))Array.isArray(o.scripts)?r[Number(n)]=g(h({},o),{scripts:yield k(e,t.sceneId,o.scripts)}):r[Number(n)]=o;return g(h({},t),{props:r})}));const k=(e,t,r)=>v(void 0,null,(function*(){return Promise.all(r.map((r=>v(this,null,(function*(){return"Conditions"===r.props.script?g(h({},r),{props:g(h({},r.props),{scripts:yield k(e,t,r.props.scripts)})}):"CustomScript"!==r.props.script||(0,l.isNil)(r.props.jsCode)?r:g(h({},r),{props:yield x(e,t,r.id,r.props)})})))))})),x=(e,t,r,n)=>v(void 0,null,(function*(){var o,a;const i=(0,l.omit)(n,"jsCode"),p=yield(0,c.Ko)(`${t}_${r}`),u=null!=(o=null==p?void 0:p.language)?o:"javascript",d=null!=(a=null==p?void 0:p.content)?a:n.jsCode,f=null==p?void 0:p.compiledContent,m={projectId:e,name:"脚本"+("typescript"===u?".ts":".js"),cover:"",isTeam:!1,type:25,content:JSON.stringify({ideCode:d,jsCode:"typescript"===u?f:d,language:u})},y=yield s.dJ.post("user/adv_resource/create",m);return i.url=y.data.data.previewUrl,i}));var E=Object.defineProperty,w=Object.defineProperties,P=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,A=(e,t)=>{for(var r in t||(t={}))S.call(t,r)&&I(e,r,t[r]);if(j)for(var r of j(t))C.call(t,r)&&I(e,r,t[r]);return e},M=(e,t)=>w(e,P(t)),_=(e,t)=>{var r={};for(var n in e)S.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&j)for(var n of j(e))t.indexOf(n)<0&&C.call(e,n)&&(r[n]=e[n]);return r},D=({scene:e})=>{const{props:t}=e;return Object.values(t).forEach((({type:e,scripts:t})=>{"Script"===e&&R(t)})),e};function R(e=[]){for(const t of e){if("ModifyData"===t.props.script){const{expression:e}=t.props;N(e)}if("Condition"===t.props.script&&(t.props.script="Conditions",t.props.condition&&(t.props.conditions=[t.props.condition])),"Conditions"===t.props.script){const{conditions:e=[]}=t.props;e.forEach((e=>{N(e)})),R(t.props.elseScripts),R(t.props.scripts)}}}function N(e){if(e){const{from:t,to:r}=e;if(t&&t.id){const r=t,{id:n}=r,o=_(r,["id"]);e.from=M(A({},o),{ids:[n]})}if(r&&r.id){const r=t,{id:n}=r,o=_(r,["id"]);e.to=M(A({},o),{ids:[n]})}}}var V=Object.defineProperty,B=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,U=(e,t,r)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,F=(e,t)=>{for(var r in t||(t={}))z.call(t,r)&&U(e,r,t[r]);if(T)for(var r of T(t))L.call(t,r)&&U(e,r,t[r]);return e},Y=(e,t)=>B(e,Z(t)),$=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const Q=(e,t)=>$(void 0,null,(function*(){const r=[i,O,D];return Promise.all(t.map((t=>$(this,null,(function*(){const o=yield r.slice(location.search.includes("update=force")?0:t.editor.dataVersion).reduce(((t,r)=>$(this,null,(function*(){return r({projectId:e,scene:yield t})}))),t);return Y(F({},o),{editor:Y(F({},o.editor),{dataVersion:n.M})})})))))}));var W=e=>{return void 0,null,t=function*(){let{settings:{enableProps:t}}=e;return(0,l.isArray)(t)&&(t=null==t?void 0:t.map((t=>(0,l.isString)(t)?{key:t,default:e.settings[t]}:t)),t.find((({key:e})=>"bgMusic"===e))&&!t.find((({key:e})=>"bgMusicVoice"===e))&&t.push({key:"bgMusicVoice",default:e.settings.bgMusicVoice}),e.settings.enableProps=t),e},new Promise(((e,r)=>{var n=e=>{try{a(t.next(e))}catch(e){r(e)}},o=e=>{try{a(t.throw(e))}catch(e){r(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);a((t=t.apply(undefined,null)).next())}));var t},J=r(56683),K=r(61645),H=r(23247),G=r.n(H),q=Object.defineProperty,X=Object.defineProperties,ee=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,oe=(e,t,r)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ae=(e,t)=>{for(var r in t||(t={}))re.call(t,r)&&oe(e,r,t[r]);if(te)for(var r of te(t))ne.call(t,r)&&oe(e,r,t[r]);return e},ie=(e,t)=>X(e,ee(t)),le=e=>{return void 0,null,t=function*(){const t=[...e.customScripts],{materialList:r}=yield(0,K.xP)({projectId:e.id,page:1,pageSize:99,types:"25"}).catch((()=>({materialList:[]})));for(const{previewUrl:n,name:a}of r){if(t.find((({parentId:e})=>e===n)))continue;const{data:r}=yield G().get(n),i={name:a,jsCode:r.jsCode,ideCode:r.ideCode?r.ideCode:"typescript"===r.language?r.tsCode:r.jsCode,language:r.language,parentId:n,type:"CustomScript"},{id:l,orderId:c}=yield(0,o.createScriptComponent)(e.id,i.name,i);t.push(ie(ae({},i),{id:l,orderId:c}))}return ie(ae({},e),{customScripts:t})},new Promise(((e,r)=>{var n=e=>{try{a(t.next(e))}catch(e){r(e)}},o=e=>{try{a(t.throw(e))}catch(e){r(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);a((t=t.apply(undefined,null)).next())}));var t},ce=r(48837),se=Object.defineProperty,pe=Object.defineProperties,ue=Object.getOwnPropertyDescriptors,de=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable,ye=(e,t,r)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,be=(e,t)=>{for(var r in t||(t={}))fe.call(t,r)&&ye(e,r,t[r]);if(de)for(var r of de(t))me.call(t,r)&&ye(e,r,t[r]);return e},he=(e,t)=>pe(e,ue(t));const ge=e=>{return void 0,null,t=function*(){const t=[W,J.Z,le];for(const r of t.slice(location.search.includes("update=force")?0:e.editor.dataVersion))e=yield r(e);return he(be({},e),{extra:he(be({},e.extra),{version:ce.RIKO_VERSION}),editor:he(be({},e.editor),{dataVersion:n.t})})},new Promise(((e,r)=>{var n=e=>{try{a(t.next(e))}catch(e){r(e)}},o=e=>{try{a(t.throw(e))}catch(e){r(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);a((t=t.apply(undefined,null)).next())}));var t},ve=(e=1)=>location.search.includes(`readonly=${e}`)},60350:function(e,t,r){"use strict";r.d(t,{M:function(){return o},t:function(){return n}});const n=3,o=3},37285:function(e,t,r){"use strict";r.d(t,{s:function(){return m}});var n=r(42761),o=r(26494),a=r(40985),i=r(19104),l=r(73760),c=r(32078),s=r(61754),p=r(31934),u=r(22669),d=r(39089),f=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const m=({project:{type:e,scenes:t,editor:r}})=>{if("Component"!==e&&"Model"!==e&&"Particle3D"!==e||!r.prevState)return!1;const[{orderId:n,nodes:o,props:i,scripts:c,editor:{state:s}}]=t;try{const e=(0,a._N)(r.prevState,n);return!((0,l.isEqual)(o,e.nodes)&&(0,l.isEqual)(i,e.props)&&(0,l.isEqual)(c,e.scripts)&&(0,l.isEqual)(s,e.editor.state))}catch(e){return!0}};t.Z=e=>{const{getState:t,dispatch:r}=(0,n.oR)(),y=(0,p.Mk)(),b=(0,p.qF)(),h=(0,u.qw)(),g=(0,u.kS)(),v=(0,u.an)(),O=(0,u.PF)(),k=(0,n.v9)((t=>e&&(m(t)||(({project:{panoramaDataList:e,type:t,scenes:r,editor:n}})=>{if("PanoramaData"!==t||!n.prevState)return!1;for(let e=0;e<r.length;e++){const{nodes:t,props:o,editor:{state:i},orderId:c}=r[e],s=(0,a._N)(n.prevState,c);if(!(0,l.isEqual)(t,s.nodes)||!(0,l.isEqual)(o,s.props)||!(0,l.isEqual)(i,s.editor.state))return!0}return JSON.stringify(e)!==JSON.stringify((0,a.HE)(n.prevState))})(t)))),x=(e,t)=>{for(;t>0&&e;)e.editor.prevState&&(e=e.editor.prevState),t--;return e},E=e=>f(void 0,null,(function*(){return"PanoramaData"===e.type?(e=h(yield v(),yield g()),O({enabled:!1}),e):y(yield b())}));return(0,i.useEmitter)("LoadComponent",(0,o.Z)((e=>f(void 0,[e],(function*({loadComponent:e,skip:n=!1}){k&&!n?c.Z.confirm({title:"修改未保存test",cancelText:"取消",okText:"保存并继续",onOk:()=>f(this,null,(function*(){const n=yield E(t().project);return r((0,i.setSettings)({store:n.settings.store})),r((0,i.restoreState)(n)),e()}))}):yield e()}))))),{changed:k,onReturn:(e=0)=>{const{project:n}=t(),o=x(n,e);o&&(k?c.Z.confirm({title:"修改未保存",cancelText:"放弃修改",okText:"保存并返回",onOk:()=>f(void 0,null,(function*(){try{const n=yield E(t().project);r((0,i.setSettings)({store:n.settings.store})),r((0,i.restoreState)(x(n,e))),r((0,i.changeCategory)(""))}catch(e){s.ZP.error(null==e?void 0:e.message)}})),onCancel(){O({enabled:!1}),r((0,i.restoreState)(o)),r((0,i.changeCategory)(""))}}):((0,d.ud)(e),r((0,i.restoreState)(o)),r((0,i.changeCategory)("")),O({enabled:!1})))}}}},39089:function(e,t,r){"use strict";r.d(t,{E9:function(){return a},O8:function(){return o},oA:function(){return l},ud:function(){return i}});var n=r(3197);function o(){return e=this,null,t=function*(){var e;const t=new URLSearchParams(location.search),r=Number(location.pathname.split("/").pop())||0;if(location.pathname.endsWith("/component"))return{type:"component",url:t.get("url")||""};if("rubeex"!==t.get("from")){const n=null==(e=t.get("scene"))?void 0:e.split(",").pop();return n&&l(n),{type:"project",id:r,orderId:n}}return{type:"project",id:yield(0,n.Cv)(r,t.has("type")?Number(t.get("type")):-1)}},new Promise(((r,n)=>{var o=e=>{try{i(t.next(e))}catch(e){n(e)}},a=e=>{try{i(t.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,a);i((t=t.apply(e,null)).next())}));var e,t}function a(e){const t=new URL(window.location),r=t.searchParams.get("scene");t.searchParams.set("scene",r?`${r},${e}`:e),history.replaceState({},"",t)}function i(e){var t,r;const n=new URL(window.location),o=null!=(r=null==(t=n.searchParams.get("scene"))?void 0:t.split(","))?r:[],a=o.slice(0,o.length-e).join(",");a?n.searchParams.set("scene",a):n.searchParams.delete("scene"),history.replaceState({},"",n)}function l(e){const t=new URL(window.location);e?t.searchParams.set("scene",e):t.searchParams.delete("scene"),history.replaceState({},"",t)}},2502:function(e,t,r){"use strict";r.d(t,{ZP:function(){return N},Kl:function(){return V}});var n=r(19104),o=r(3197),a=r(7910);function i(e){return isFinite(Number(e))}var l=r(23256),c=r(47567),s=r(32078),p=r(62732),u=r(22142),d=r(48837),f=r(81749),m=r(39089),y=r(73760),b=r(61754),h=r(23247),g=r.n(h),v=r(40985),O=r(98466),k=r(80985),x=r(73073),E=r(16969),w=r(22142),P=Object.defineProperty,j=Object.defineProperties,S=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,M=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_=(e,t)=>{for(var r in t||(t={}))I.call(t,r)&&M(e,r,t[r]);if(C)for(var r of C(t))A.call(t,r)&&M(e,r,t[r]);return e},D=(e,t)=>j(e,S(t)),R=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())})),N=e=>R(void 0,null,(function*(){var t;try{const t=yield(0,m.O8)();switch(t.type){case"project":return yield function(t,r){return R(this,null,(function*(){var o,l;if(!t)throw new Error("无效ID, 请检查URL链接是否正确");const c=yield B(t),s=yield L(c,void 0);let p=s.scenes.map(v.gE);"Product"==s.editor.sceneMode&&(p=p.map((e=>"Scene"===e.type?(0,v.G)(e):e)));const u=D(_({},s),{scenes:p,editor:D(_({},s.editor),{count:e.editor.count,loading:!1,readOnly:(0,f.os)()||!c.editable||1===c.editable&&!(0,f.os)(0)})});if(r){const e=i(r)?p.find((e=>"Animation"===e.type&&e.orderId===Number(r))):(0,v.m7)((yield g().get((0,a.GR)(String(r)))).data);if(e){i(r)||(e.orderId=0);const t=(0,n.newCase)([e],"Component",u);return t.editor.selectedSceneId=null!=(l=null==(o=p.find((e=>String(e.orderId)===r)))?void 0:o.sceneId)?l:s.editor.selectedSceneId,t.editor.readOnly=!i(r)||u.editor.readOnly,t.settings.store=u.settings.store,t.materials=u.materials,t.id=u.id,t}}return u}))}(t.id,t.orderId);case"component":return yield function(e=""){return R(this,null,(function*(){const{data:t}=yield g().get(isFinite(Number(e))?e:(0,a.GR)(e)),r=(0,n.newCase)([(0,v.m7)(t)],"Component");return r.editor.readOnly=!0,r}))}(t.url);default:return(0,v.Ak)(t)}}catch(e){throw b.ZP.error((null==(t=null==e?void 0:e.data)?void 0:t.message)||(null==e?void 0:e.message)||String(e)||"项目数据无法加载"),e}}));const V=e=>R(void 0,null,(function*(){return yield B(e).then(L)})),B=e=>R(void 0,null,(function*(){const t=yield(0,o.GG)(e),r=yield Z(t);return r?(yield(0,o.ty)({id:t.id,name:t.name,shared:t.shared,categoryId:t.categoryId,projectContent:JSON.stringify(_({id:t.id,version:d.RIKO_VERSION},r[0])),projectExtra:JSON.stringify(r[1])}),(0,o.GG)(t.id)):t})),Z=e=>R(void 0,[e],(function*({id:e,scenes:t,projectContent:r,typeOfPlay:a=0,category:i=0,projectExtra:l,editable:c}){const u=(0,f.os)()||!c||1===c&&!(0,f.os)(0),m=3===a&&3===i,y=1===i||m;if(!t.length){if(u)throw new Error("无法初始化只读项目");if(m){const t=yield(b=e,new Promise((e=>{const t=s.Z.info({title:"请上传一个视频作为主场景",centered:!0,maskClosable:!1,icon:null,width:1334,className:(0,p.iv)({maxWidth:"unset","& .ant-modal-confirm-btns":{display:"none"},"& .ant-upload.ant-upload-drag":{height:"600px"}}),bodyStyle:{padding:"10px 20px"},content:w.createElement(E.Z.Dragger,{name:"file",accept:".mp4",multiple:!1,showUploadList:!1,beforeUpload:r=>{return n=function*(){t.destroy();const{url:n}=yield(0,O.SN)({file:r,type:x._g.VRVideo,projectId:b});return e(n),!1},new Promise(((e,t)=>{var r=e=>{try{a(n.next(e))}catch(e){t(e)}},o=e=>{try{a(n.throw(e))}catch(e){t(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,o);a((n=n.apply(void 0,null)).next())}));var n}},w.createElement("p",{className:"ant-upload-drag-icon"},w.createElement(k.Z,null)),w.createElement("p",{className:"ant-upload-text"},"点击或拖拽视频文件到此处上传"))})}))),r=(0,n.newScene)("主场景",D(_({},{edit3d:!1,enabled3d:!0}),{nodes:[yield(0,d.createNode)("VR视频","VRVideo",v.xv,t),yield(0,d.createNode)("VR3D场景","Scene3D",v.xv,"")]}));return T(e,[yield(0,n.newSceneAsync)("加载页",{playable:!0,width:686,height:386}),r],a,y)}return T(e,yield z(e,a,y),a,y)}var b;const h=t.map((({sceneContent:e})=>JSON.parse(e))).filter((e=>"Scene"===e.type));if(!u&&(0===a||3===a)&&h.filter((({editor:{loading:e}})=>e)).length<2){const t=yield(0,n.newSceneAsync)("加载页",{playable:0===a,loading:!0}),i=(0,v.GV)(t),{id:c,orderId:s}=yield(0,o.aY)({projectId:e,name:t.name,sceneContent:JSON.stringify(i)});yield(0,o.aq)({projectId:e,name:t.name,id:c,sceneContent:JSON.stringify(D(_({},i),{orderId:s}))});const p=JSON.parse(r);return[D(_({},p),{settings:D(_({},p.settings),{playable:p.settings.loading,[0===a?"playable":"loading"]:s})}),JSON.parse(l)]}if(!r)throw new Error("项目不可用，请重新创建")})),T=(e,t,r,n,i)=>R(void 0,null,(function*(){const l=(yield(0,o.to)(e,t.map(((e,t)=>({name:e.name,orderId:i?++i:t+1,sceneContent:JSON.stringify((0,v.GV)(e))}))))).map((({orderId:e})=>e)),c=Object.fromEntries(t.map((({editor:{capture:e}},t)=>[l[t],e])));return[{sceneOrders:l,settings:_({enabled3d:n,scaleMode:1,basePath:(0,a.zC)(),multiTouchEnabled:!1,loading:l[t.findIndex((({editor:{loading:e,playable:t}})=>e&&!t))],playable:l[t.findIndex((({editor:{loading:e,playable:t}})=>e&&t))]},(()=>{switch(r){case 2:return{width:686,height:386};case 4:return{width:720,height:1280}}})())},{sceneCovers:c}]})),z=(e,t,r)=>R(void 0,null,(function*(){switch(t){case 2:return[yield(0,n.newSceneAsync)("加载页",{loading:!0,width:686,height:386}),yield(0,n.newSceneAsync)("主场景",{enabled3d:r})];case 4:return yield(o=e,new Promise((e=>{const t=s.Z.info({centered:!0,maskClosable:!1,icon:null,width:1334,className:(0,p.iv)({maxWidth:"unset","& .ant-modal-confirm-btns":{display:"none"},"& .ant-modal-confirm-content":{width:"100%"}}),content:u.createElement(c.W8,{projectId:o,onFinish:r=>{e(r),t.destroy()}})})})));default:return[yield(0,n.newSceneAsync)("加载页",{playable:!0}),yield(0,n.newSceneAsync)("加载页",{loading:!0}),yield(0,n.newSceneAsync)("主场景",{enabled3d:r})]}var o})),L=(e,t=!0)=>R(void 0,null,(function*(){e.scenes=e.scenes.map((e=>D(_({},e),{sceneContent:e.sceneContent.replaceAll("PVHotArea","PVClickArea")})));const{id:r,name:n,type:o=0,cover:i,shared:l,skinBy:c,teamId:s,categoryId:p,category:u,editMode:d,typeOfPlay:f,description:m,projectExtra:y,isAuthControl:b,projectContent:h,scenes:g}=e,{settings:O={},sceneOrders:k=[],captures:x={},store:E={},dataVersion:w=0,version:P}=JSON.parse(h),{sceneCovers:j=x}=(0,a.Mo)(y,{}),S=U(o,d,f);let C=g.filter((({sceneContent:e})=>{var t,r;const n=JSON.parse(e);return"Scene"===n.type&&n.editor.loading?3===f?!!n.editor.playable:!n.editor.playable:"Texture2D"!==n.type&&"PanoramaData"!==n.type&&"CustomScript"!==n.type&&0!=(null==(t=n.type)?void 0:t.indexOf("Material"))&&0!==(null==(r=n.type)?void 0:r.indexOf("Cubemap"))})).map((({id:e,orderId:t,sceneContent:r})=>{const n=JSON.parse(r);return(0,v.m7)(D(_({},n),{id:e,sceneId:e,orderId:t,editor:D(_({},n.editor),{capture:(0,a.XO)(j[t])})}))})).sort(((e,t)=>{if(e.type===t.type){const r=k.indexOf(e.orderId),n=k.indexOf(t.orderId);return r>-1&&n>-1?r-n:e.editor.loading?-1:t.editor.loading?1:e.orderId-t.orderId}return[e,t].map((({type:e})=>["Animation","Scene","Animation3D"].indexOf(e))).reduce(((e,t)=>e-t))}));const I=g.filter((({sceneContent:e})=>"CustomScript"===JSON.parse(e).type)).map((({id:e,orderId:t,name:r,sceneContent:n})=>{const o=JSON.parse(n);return D(_({},o),{id:e,orderId:t,name:r})})).sort((()=>-1)),A=g.filter((({sceneContent:e})=>{const t=JSON.parse(e);return/Material$/.test(t.type)})).map((({id:e,orderId:t,name:r,sceneContent:n})=>D(_({},JSON.parse(n)),{id:e,orderId:t,name:r}))),M=g.filter((({sceneContent:e})=>{const t=JSON.parse(e);return/Cubemap$/.test(t.type)})).map((({id:e,orderId:t,name:r,sceneContent:n})=>D(_({},JSON.parse(n)),{id:e,orderId:t,name:r}))),R=g.filter((({sceneContent:e})=>{const t=JSON.parse(e);return/Texture2D$/.test(t.type)})).map((({id:e,orderId:t,name:r,sceneContent:n})=>{const o=JSON.parse(n);return{props:o.props,type:o.type,id:e,orderId:t,name:r}})),N=g.filter((({sceneContent:e})=>"PanoramaData"===JSON.parse(e).type)).map((({id:e,orderId:t,name:r,sceneContent:n})=>D(_({},JSON.parse(n)),{id:e,orderId:t,name:r})));return"Product"===S&&(C=C.map((e=>D(_({},e),{editor:D(_({},e.editor),{moment:0})})))),{id:r,type:"Project",name:n,teamId:s,description:m,extra:{shared:l,categoryId:p,version:P},editor:{selectedSceneId:F(f,C.filter((({type:e})=>"Scene"===e))),propsMode:"Template"==S?"Project":S,protectedTemplate:b,editorTaskStack:[],settingsOn:!1,soundVolume:100,canvasScale:1,skinning:void 0!==c,playRate:1,readOnly:!1,loading:!1,playing:0,count:200,sceneMode:S,cover:i,dataVersion:w,panoramaEdit:{panoramaDataOrderId:0,panoramaId:0,spaceId:0,panoramaSpaceId:0,mainSceneId:0,type:void 0}},scenes:C,customScripts:I,texture2Ds:R,materials:A.map((e=>{var t;return(null==(t=e.material)?void 0:t.value)&&(e.material=e.material.value),e})),cubemaps:M,panoramaDataList:N,settings:t?D(_({},O),{category:u,store:_(_({},E),O.store||{}),basePath:(0,a.zC)(),typeOfPlay:f}):D(_({basePath:(0,a.zC)()},O),{store:_(_({},E),O.store||{}),typeOfPlay:f,category:u})}})),U=(e,t,r=0)=>{const n=["Project","Template","Product"],o=new URLSearchParams(location.search).get("sceneMode");if(n.includes(o))return o;const a=location.pathname.split("/")[2];switch(a){case"template":case"project":case"product":return(0,y.capitalize)(a);case"simple":return"Project"}switch(t){case 2:return"Project";case 1:return"Product";default:return 3===r?"Project":n[e%2]}},F=(e,t)=>{let r=Number(new URLSearchParams(location.search).get("scene")),n=t.find((({orderId:e})=>e===r));return n?n.id:(r=l.DS.getValue(),n=t.find((({id:e})=>e===r)),n?n.id:3===e?t[0].id:(0,v.dU)(t).id)}},93422:function(e,t,r){"use strict";r.d(t,{ZP:function(){return W},aY:function(){return K},Gq:function(){return J},p_:function(){return G},cv:function(){return q},dM:function(){return X},mK:function(){return H},zL:function(){return oe},Yj:function(){return Q}});var n=r(19104),o=r(40985),a=r(22142),i=r(3197),l=r(81749),c=r(23256),s=r(7910),p=r(32078);var u=r(88460),d=r(37285),f=r(71092),m=r(42761),y=r(73760),b=r(98466),h=r(2502),g=r(76566),v=r(61754),O=Object.defineProperty,k=Object.defineProperties,x=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,j=(e,t,r)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&j(e,r,t[r]);if(E)for(var r of E(t))P.call(t,r)&&j(e,r,t[r]);return e},C=(e,t)=>k(e,x(t));const I=Date.now(),A=()=>{var e;return JSON.parse(null!=(e=localStorage.getItem("multipleTabEditableVersion"))?e:"{}")},M=e=>{localStorage.setItem("multipleTabEditableVersion",JSON.stringify(e))},_=e=>{if(A()[e]!==I)throw new Error("项目已在其它标签打开，若要编辑请刷新页面")},D=(e,t)=>e?C(S({},e),{editor:C(S({},e.editor),{prevState:D(e.editor.prevState,t),readOnly:t})}):e;var R=()=>{const{dispatch:e,getState:t}=(0,m.oR)(),{projectId:r,readOnly:o}=(0,m.v9)((({project:e})=>({projectId:e.id,readOnly:e.editor.readOnly})),m.wU);return(0,a.useEffect)((()=>{r&&!o&&M(C(S({},A()),{[r]:I}))}),[r,o]),(0,a.useEffect)((()=>{const r=()=>{const{project:r}=t(),o=A();r.id&&o[r.id]!==I&&!r.editor.readOnly&&(v.ZP.warning("项目已在其它标签打开，若要编辑请刷新页面"),e((0,n.restoreState)(D(r,!0))))};return window.addEventListener("focus",r),()=>{window.removeEventListener("focus",r);const e=A(),{project:n}=t();e[n.id]===I&&M(C(S({},A()),{[n.id]:void 0}))}}),[e,t]),_},N=r(51514),V=Object.defineProperty,B=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,U=(e,t,r)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,F=(e,t)=>{for(var r in t||(t={}))z.call(t,r)&&U(e,r,t[r]);if(T)for(var r of T(t))L.call(t,r)&&U(e,r,t[r]);return e},Y=(e,t)=>B(e,Z(t)),$=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const Q=e=>{const{subscribe:t,getState:r}=(0,m.oR)(),n=(0,a.useRef)(""),o=(0,a.useRef)();(0,a.useEffect)((()=>{var a;return null==(a=o.current)||a.call(o),e&&(o.current=t((0,y.debounce)((()=>{n.current&&n.current!==r().project.type||e(),n.current=r().project.type}),600))),()=>{var e;null==(e=o.current)||e.call(o)}}),[e,t])};var W=()=>{const{getState:e,subscribe:t,dispatch:r}=(0,m.oR)(),i=(0,a.useRef)(Promise.resolve(K(e().project))),y=(0,a.useRef)(K(e().project)),b=R(),v=(0,a.useRef)({}),{trigger:O}=(0,f.Z)("SaveStatus"),k=(0,u.cD)(),x=(0,a.useCallback)((()=>{const t=K(e().project);return!(!t.editor.readOnly&&t.id)||!ae(t,y.current)&&!t.scenes.some((e=>ee(e,y.current.scenes.find((({orderId:t})=>t===e.orderId)))))}),[e]),E=(0,a.useCallback)((t=>$(void 0,null,(function*(){const{project:a}=e(),l=K(e().project);if(l.editor.readOnly||!l.id)return;b(a.id),t&&(yield((e,t)=>{return r=function*(){if(["同步","导出","发布","送审"].includes(t)){try{(0,n.checkPlayableVideoState)(e)}catch(e){(0,s.g_)(e.message,`，请修改后再${t}`)}const r=e.scenes.find((({editor:e})=>e.loading));if(r)for(const e of(0,n.checkPlayableScene)(r))(0,s.g_)(e,`，请设置后再${t}`);const a=(0,o.dU)(e.scenes);if(a&&!a.nodes.length&&(0,s.g_)("主场景",{text:a.name},`没有节点，不能${t}`),0===e.settings.typeOfPlay)for(const r of(0,n.checkDownloadOpacity)(e))(yield r)&&(0,s.g_)(yield r,`，请修改后再${t}`);3!==e.settings.typeOfPlay||[2,3].includes(e.settings.category)||(0,n.checkDirectDownloadScript)(e).length||(0,s.g_)(`直出互动素材必须设置“调起下载组件”事件，请修改后再${t}`);for(const r of e.scenes)for(const{message:e}of(0,n.checkUseStringAccept)(r))(0,s.g_)(e,`，请修改后再${t}`);if("Product"!==e.editor.sceneMode){if(0===e.settings.typeOfPlay){for(const r of e.scenes)for(const{message:e}of(0,n.checkSceneCompliance)(r))(0,s.g_)(e,`，请修改后再${t}`);0===(yield(0,n.checkStateDownloadText)(e))&&(yield new Promise(((e,r)=>{p.Z.confirm({title:"素材没有转化按钮",content:`当前素材没有转化按钮，投放后将无法完成转化行为(后果严重)。请检查后再${t}。`,onCancel(){e()},cancelText:`无需转化，继续${t}`,onOk(){n.default.dispatch((0,n.changeCategory)("Button")),r(new Error(`请添加转化按钮后再${t}`))},okText:"添加转化按钮"})})))}}else if(e.editor.protectedTemplate)for(const r of e.scenes)for(const e of(0,n.checkSceneCompProps)(r))(0,s.g_)(e,`，请替换后再${t}`)}},new Promise(((e,t)=>{var n=e=>{try{a(r.next(e))}catch(e){t(e)}},o=e=>{try{a(r.throw(e))}catch(e){t(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);a((r=r.apply(void 0,null)).next())}));var r})((0,o.qU)(l),t));const u=[];i.current=i.current.then((t=>$(this,null,(function*(){O("保存中...");const n=K(e().project);c.DS.setValue(n.editor.selectedSceneId);try{v.current=F(F({},v.current),yield oe(r,n,t))}catch(e){return console.error(e),u.push(n.name),t}const[a,i,l,s]=yield Promise.all([Promise.all(n.scenes.map((e=>$(this,null,(function*(){try{return yield H(n.id,e,t.scenes.find((({orderId:t})=>t===e.orderId)),v.current[e.orderId]),e}catch(t){console.error(t),u.push(e.name)}}))))),Promise.all(n.customScripts.map((e=>$(this,null,(function*(){try{return yield G(n.id,e,t.customScripts.find((({orderId:t})=>t===e.orderId))),e}catch(t){console.error(t),u.push(e.name)}}))))),Promise.all(n.materials.map((e=>$(this,null,(function*(){try{return yield q(n.id,e,t.materials.find((({id:t})=>t===e.id))),e}catch(t){console.error(t),u.push(e.name)}}))))),Promise.all((0,o.HE)(n).map((e=>$(this,null,(function*(){try{return yield X(n.id,e,(0,o.HE)(t).find((({id:t})=>t===e.id))),e}catch(t){console.error(t),u.push(e.id+"")}return e})))))]);return Y(F({},n),{scenes:a.filter(Boolean),customScripts:i.filter(Boolean),materials:l.filter(Boolean),panoramaDataList:s})}))));const d=yield i.current;if(u.length)throw O(`${u.join("、")}保存失败`),new Error(`${u.join("、")}保存失败`);O("已自动保存至云端"),k(a),y.current=d}))),[k,r,e,O]);return(0,a.useEffect)((()=>{const t=(0,h.ZP)(e().project).then((t=>$(void 0,null,(function*(){N.Pc.getState().updateUserInfo(),i.current=Promise.resolve(K(t)),y.current=K(t);const o=J((()=>{if((0,g.Yt)(e().project))return!1;if(!e().project.editor.readOnly){if((0,d.s)(e()))return!0;if(!x())return E(),!0}}));return r((0,n.restoreState)(yield(0,l.Ei)(Y(F({},t),{scenes:yield(0,l.Rr)(t.id,t.scenes)})))),{beforeUnload:o}}))));return()=>{t.then((({beforeUnload:e})=>{e(),E()}))}}),[x,E,t,e,r]),{isSaved:x,onSaving:E}};const J=e=>{const t=t=>{if(!e||e())return(t||window.event).returnValue="你确定吗？","你确定吗？"};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}},K=e=>e.editor.prevState?K(e.editor.prevState):e,H=(e,t,r,n)=>$(void 0,null,(function*(){var a;ee(t,r)&&(yield(0,i.aq)({sceneContent:JSON.stringify((0,o.GV)(t)),cover:null!=n?n:(null==(a=t.editor.capture)?void 0:a.startsWith("https://"))?t.editor.capture:void 0,name:t.name||"Scene",id:t.sceneId,projectId:e}))})),G=(e,t,r)=>$(void 0,null,(function*(){te(t,r)&&(yield(0,i.aq)({sceneContent:JSON.stringify(t),name:t.name||"Scene",id:t.id,projectId:e}))})),q=(e,t,r)=>$(void 0,null,(function*(){re(t,r)&&(yield(0,i.aq)({sceneContent:JSON.stringify(t),name:t.name||"Material",id:t.id,projectId:e}))})),X=(e,t,r)=>$(void 0,null,(function*(){ne(t,r)&&(yield(0,i.aq)({sceneContent:JSON.stringify(t),name:t.name||"PanoramaData",id:t.id,projectId:e}))})),ee=(e,t)=>{var r;return!t||t.props!==e.props||t.nodes!==e.nodes||t.editor.position!==e.editor.position||t.editor.dataVersion!==e.editor.dataVersion||t.editor.lockCapture!==e.editor.lockCapture||(null==(r=e.editor.capture)?void 0:r.startsWith("https://"))&&t.editor.capture!==e.editor.capture},te=(e,t)=>!t||e.ideCode!==t.ideCode,re=(e,t)=>!t||JSON.stringify(e)!==JSON.stringify(t),ne=(e,t)=>!t||JSON.stringify(e)!==JSON.stringify(t),oe=(e,t,r)=>$(void 0,null,(function*(){var a;if(ae(t,r)){const r=Object.fromEntries(yield Promise.all(t.scenes.map((e=>$(this,[e],(function*({orderId:e,editor:{capture:t}}){if(t){const{previewUrl:r}=yield(0,b.D5)(t,`${e}`);return[e,r]}return[e,t]})))))),l=ie(t,r),{settings:{componentInfo:c}}=t;return yield((e,t)=>{if(e.extra)return(0,i.ty)(F({id:e.id,name:e.name,shared:e.extra.shared,categoryId:e.extra.categoryId},t));throw new Error})(t,{cover:l,projectContent:JSON.stringify({id:t.id,settings:(0,o.xh)(t.settings),sceneOrders:t.scenes.filter((({type:e})=>"Scene"===e)).map((({orderId:e})=>e)),version:null==(a=t.extra)?void 0:a.version,dataVersion:t.editor.dataVersion}),projectExtra:JSON.stringify(F({sceneCovers:r},c))}),e((0,n.changeEditor)(0,{cover:l},!0)),r}})),ae=(e,t)=>{var r,n,o,a;return!t||t.name!==e.name||t.settings!==e.settings||(null==(r=t.extra)?void 0:r.version)!==(null==(n=e.extra)?void 0:n.version)||t.editor.dataVersion!==e.editor.dataVersion||t.editor.selectedSceneId!==e.editor.selectedSceneId||(null==(o=t.editor.cover)?void 0:o.split("?orderId=")[1])!==(null==(a=e.editor.cover)?void 0:a.split("?orderId=")[1])||(0,y.zip)(e.scenes,t.scenes).some((([e,t])=>!t||t.editor.lockCapture!==(null==e?void 0:e.editor.lockCapture)||t.orderId!==(null==e?void 0:e.orderId)))},ie=({scenes:e,editor:{cover:t}},r)=>{if(null==t?void 0:t.includes("?orderId=")){const e=Number(t.split("?orderId=").pop());if(r[e])return`${r[e]}?orderId=${e}`}else if(t)return t;const{orderId:n}=(0,o.dU)(e);if(r[n])return`${r[n]}?orderId=${n}`}},51828:function(e,t,r){"use strict";var n=r(62732);t.Z=(0,n.iv)({height:"60px",display:"flex",flexShrink:0,position:"relative",zIndex:1,boxShadow:"rgb(0 0 0 / 8%) 0px 2px 4px","&-content":{display:"flex",alignItems:"center",position:"relative","&-1":{flex:"0 0 50px",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",zIndex:10},"&-2":{display:"flex",justifyContent:"center",flexDirection:"column",position:"relative",zIndex:10,"& .ant-input:focus, .ant-input-focused":{boxShadow:"none",borderBottom:"1px solid #e0e0e0",borderTop:0,borderLeft:0,borderRight:0},"&>div":{width:"100%",display:"flex",alignItems:"center",borderLeft:"1px solid #EBEBEB",paddingLeft:"12px"}},"&-4":{position:"absolute",top:0,left:0,right:0,bottom:0,flex:1,justifyContent:"center",pointerEvents:"none"},"&-3":{flex:"0 0",paddingRight:"16px",justifyContent:"flex-end",marginLeft:"auto"}},"&-img":{width:"23px",height:"22px",cursor:"pointer","& img":{width:"100%",height:"100%",pointerEvents:"none"}},"&-input":{border:"none",width:"100%",padding:"0",height:"24px"},"&-edit":{color:"#000000","&:hover":{color:"#3955f6"},"&:active":{color:"#2e44c6"},"&:focus":{color:"#000000"}},"&-btn":{width:"52px",height:"46px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",fontSize:"12px",whiteSpace:"nowrap",overflow:"visible","& .ant-btn":{width:"40px",height:"24px",display:"flex",justifyContent:"center",alignItems:"center"}}})},92481:function(e,t,r){"use strict";r.d(t,{S:function(){return _}});var n=r(22142),o=r(68961),a=r(61754),i=r(14908),l=r(70072),c=r(32078),s=r(62255),p=r(42761),u=r(40985),d=r(3391),f=r(51828),m=r(7910),y=r(55309),b=r(10155),h=r(72704),g=r(19104),v=r(73760),O=r(62732),k=r(22142),x=Object.defineProperty,E=Object.defineProperties,w=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,C=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,I=(e,t)=>{for(var r in t||(t={}))j.call(t,r)&&C(e,r,t[r]);if(P)for(var r of P(t))S.call(t,r)&&C(e,r,t[r]);return e},A=(e,t)=>E(e,w(t));const{Option:M}=o.Z,_=()=>{const{dispatch:e,getState:t}=(0,p.oR)();return{propsMode:(0,p.v9)((({project:{editor:e}})=>e.propsMode)),onChange(r){const n=(0,u.q7)(t().project),o=`/play/${r.toLowerCase()}/${location.pathname.split("/").pop()}${location.search}`;return history.replaceState(void 0,"",o),e("Product"===r?(0,g.restoreState)(A(I({},n),{editor:A(I({},n.editor),{sceneMode:r,settingsOn:!1,propsMode:r}),scenes:n.scenes.map((e=>"Scene"===e.type?(0,u.G)(e):e))})):(0,g.changeEditor)(0,{propsMode:r,sceneMode:r}))}}},D=()=>{const{dispatch:e}=(0,p.oR)(),{state:t=[],onChange:r}=(0,g.useEditor)("state"),{stateId:d,onChange:f}=(0,g.useEditor)("stateId"),[m,O]=(0,n.useState)(null),[x,E]=(0,n.useState)("blank"),[w,P]=(0,n.useState)(""),j=(0,n.useRef)(null),S={add:"新增",edit:"编辑",blank:""},C=()=>{if(w.trim().length){if(t.some((e=>e.name===w.trim())))return a.ZP.error("组件状态名重复");if("add"===x){const t=(0,u.xv)();e((0,g.addState)(w,t)),f(t),P(""),E("blank"),a.ZP.success("状态新增成功")}else r(t.map((e=>e.id===m?A(I({},e),{name:w}):e))),P(""),E("blank"),a.ZP.success("状态名修改成功")}else a.ZP.warning("请输入状态名")};return k.createElement(i.Z,null,k.createElement(o.Z,{ref:j,value:null!=d?d:-1,style:{width:126,marginLeft:10},placeholder:"互动组件状态",optionLabelProp:"label",onChange:e=>{var t;f(e>0?e:void 0),null==(t=j.current)||t.blur()}},k.createElement(M,{key:-1,value:-1,label:"默认状态"},"默认状态"),t.map((t=>k.createElement(M,{value:t.id,label:t.name,key:t.id},k.createElement("div",{style:{display:"flex",alignItems:"center"}},k.createElement("div",{style:{marginRight:"auto",maxWidth:90,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},t.name),k.createElement(i.Z,null,k.createElement(b.Z,{theme:"outline",size:"14",fill:"#333",strokeWidth:2,onClick:e=>{e.stopPropagation(),O(t.id),E("edit"),P(t.name)}}),k.createElement(h.Z,{theme:"outline",size:"14",fill:"#333",strokeWidth:2,onClick:r=>{r.stopPropagation(),e((0,g.deleteState)(t.id))}}))))))),k.createElement(l.Z,{icon:k.createElement(y.Z,null),onClick:()=>{E("add")}}),k.createElement(c.Z,{open:"blank"!==x,title:`${S[x]}状态名`,okText:S[x],cancelText:"取消",destroyOnClose:!0,onCancel:()=>{E("blank"),P("")},onOk:C},k.createElement(s.Z,{autoFocus:!0,width:120,placeholder:"请输入新的状态名",value:w,onChange:e=>{P(e.currentTarget.value)},onPressEnter:(0,v.debounce)(C,200)})))};t.Z=(0,n.memo)((({disabled:e=!1,options:t})=>{const{propsMode:r,onChange:n}=_(),a=(0,g.useProject)("type"),{enableBlueprint:l}=(0,g.useEditor)(0,"enableBlueprint");return k.createElement("div",{className:(0,u.xG)({[`${f.Z}-content`]:4})},k.createElement(i.Z,{className:(0,O.iv)({pointerEvents:"auto"})},k.createElement(d.Z,{title:"切换模式",content:"在“编辑作品模式”下，您可以正常编辑作品；切换为“定义模板模式”后，您可以将该作品定义为模板，供他人使用。",visibleKey:"_sceneModeEnable"},k.createElement(o.Z,{value:r,disabled:e,options:t,onChange:n})),"Component"===a&&!l&&(0,m.cM)({release:!1})&&k.createElement(D,null)))}),v.isEqual)},88460:function(e,t,r){"use strict";r.d(t,{H7:function(){return x},J1:function(){return g},Z7:function(){return v},ZP:function(){return w},cD:function(){return E},db:function(){return h},fI:function(){return k},hv:function(){return O}});var n=r(22142),o=r(19104),a=r(40985),i=r(78134),l=Object.defineProperty,c=Object.defineProperties,s=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&f(e,r,t[r]);if(p)for(var r of p(t))d.call(t,r)&&f(e,r,t[r]);return e},y=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));class b extends i.Z{constructor(){super("HistoryDatabase"),this.version(3).stores({histories:"++historyId, projectId, sceneId, createTime, star"}),this.version(3).stores({customScript:"++historyId, projectId, id, createTime"}),this.histories=this.table("histories"),this.customScript=this.table("customScript")}}const h=new b;function g(e,t,r){return y(this,null,(function*(){const n={projectId:e,sceneId:t,scene:(o=m({},r),a={history:{redoStack:[],undoStack:[]}},c(o,s(a))),cover:r.editor.capture||"",star:0,createTime:Date.now()};var o,a;try{h.transaction("rw",h.histories,(()=>y(this,null,(function*(){yield h.histories.add(n),h.histories.where({projectId:e,sceneId:t}).count().then((r=>{r>150&&h.histories.where({projectId:e,sceneId:t,star:0}).limit(50).delete()})),h.histories.count().then((e=>{e>=2e4&&h.histories.where({star:0}).limit(2e3).delete()}))}))))}catch(e){console.log(e)}}))}function v(e,t){return y(this,null,(function*(){try{h.transaction("rw",h.histories,(()=>y(this,null,(function*(){h.histories.update(e,t)}))))}catch(e){console.log(e)}}))}function O(e){return y(this,null,(function*(){try{h.transaction("rw",h.histories,(()=>y(this,null,(function*(){h.histories.where({projectId:e,star:0}).delete()}))))}catch(e){console.log(e)}}))}function k(e,t){return y(this,null,(function*(){try{h.transaction("rw",h.histories,(()=>y(this,null,(function*(){h.histories.where({projectId:e,sceneId:t,star:0}).delete()}))))}catch(e){console.log(e)}}))}const x=(e,t)=>e.scenes.find((e=>e.id===t));function E(){const e=(0,n.useRef)(Date.now());return(0,n.useCallback)((t=>{const r=e.current,n=Date.now();if(n-r>1e4){const{id:r,type:o,editor:{selectedSceneId:i}}=t;"Project"===o&&(g(r,i,(0,a.zh)(t)),e.current=n)}}),[])}function w(e){const[t,r]=(0,n.useState)(!1),a=(0,o.useProject)("id"),[i,l]=(0,n.useState)([]),c=(e,t)=>{r(!0);try{(function(e,t){return y(this,null,(function*(){try{return h.transaction("rw",h.histories,(()=>y(this,null,(function*(){return h.histories.where({projectId:e,sceneId:t}).toArray()}))))}catch(e){console.log(e)}}))})(e,t).then((e=>{e&&l(e),r(!1)}))}catch(e){r(!1),console.log(e)}};return(0,n.useEffect)((()=>{c(a,e)}),[a,e]),(0,o.useEmitter)("CleanIndexedDB",(()=>{c(a,e)})),{loading:t,histories:(0,n.useMemo)((()=>i.sort(((e,t)=>e.star===t.star?t.createTime-e.createTime:t.star-e.star))),[i])}}window.getSceneByHistoryId=function(e){return y(this,null,(function*(){try{return h.transaction("rw",h.histories,(()=>y(this,null,(function*(){var t;return null==(t=(yield h.histories.where({historyId:e}).toArray())[0])?void 0:t.scene}))))}catch(e){console.log(e)}}))}},13718:function(e,t,r){"use strict";r.d(t,{Bt:function(){return m},F_:function(){return d},S6:function(){return s},_z:function(){return f},mA:function(){return p},wb:function(){return u}});var n=r(33058),o=r(1850),a=r(3799),i=r(43919),l=r(42761),c=r(22142);const s="ONBOARD_STEP_1",p="ONBOARD_STEP_2",u="ONBOARD_STEP_3",d="ONBOARD_STEP_4",f="ONBOARD_STEP_6",m=({onClose:e})=>{const{getState:t}=(0,l.oR)(),{onSelectScene:r}=(0,o.$)(),m=e=>c.createElement(c.Fragment,null,c.createElement(n.Z,{component:i.Z})," ",e);return c.createElement(a.Vi,{onClose:e,steps:[{selector:`#${s}`,title:m("第一步：设置加载页"),parent:"body",content:c.createElement("div",null,"这里是模板化的加载页，是整个直出互动素材的第1部分，需在右侧面板配置相关内容"),placement:"right-top",beforeStepChange(){var e;const n=null==(e=t().project.scenes.filter((({type:e})=>"Scene"===e)).find((({orderId:e})=>2===e)))?void 0:e.sceneId;n&&setTimeout((()=>{r(n)}))}},{selector:`#${p}`,title:m("第二步：导入物料"),parent:"body",content:c.createElement("div",null,"这里可以导入图片、视频、音乐等物料"),placement:"right-top"},{selector:`#${u}`,title:m("第三步：添加空白场景"),parent:"body",content:c.createElement("div",null,"这里可以添加新的空白场景，使内容更加丰富"),placement:"right-top"},{selector:`#${d}`,title:m("第四步：在画布上放置物料"),parent:"body",content:c.createElement("div",null,"这里是绘制区，每个场景都有一个绘制区，在这里可以布局你的物料"),placement:"right-top"},{selector:"#editor-property",title:m("第五步：为物料设置样式和互动事件"),parent:"body",content:c.createElement("div",null,"选中某个物料元素，然后在这里为它设置样式、动效，也可以为它添加互动行为以及响应事件"),placement:"left-top"},{selector:`#${f}`,title:m("第六步：同步"),parent:"body",content:c.createElement("div",null,"所有内容设置完成后，可以点“预览”来检查效果，确认没问题后即可点“同步”去投放啦！"),placement:"bottom-right",offset:{x:5,y:0}}]})}},3207:function(e,t,r){"use strict";r.d(t,{ArrayCell:function(){return P.L},BlockBase:function(){return Tr},BooleanBase:function(){return ce},CellContext:function(){return _},NULL_SPARK:function(){return n.jI},TooltipHelp:function(){return je},TreeModal:function(){return v},callValue:function(){return n.uD},collectIndices:function(){return n.ji},default:function(){return Mn},filterIndices:function(){return n.X$},filterSpark:function(){return n.Gu},flatEqual:function(){return n.pl},getIndexer:function(){return n.k9},labelBooleanSpark:function(){return n.l4},mergeOpenKeys:function(){return n.Q0},mergeSpark:function(){return n.hK},neverThrow:function(){return n.Ak},notImplemented:function(){return n.EQ},sameValue:function(){return n.it},sparkValue:function(){return n.Pv},updateIndices:function(){return n.Hh},updateValue:function(){return n.sW},useCurrent:function(){return n.x3},useRatioNumber:function(){return n.yx},withContext:function(){return n.lb}});var n=r(55781),o=r(22142);class a extends o.Component{componentDidCatch(e){this.props.onError(e)}render(){const{hasError:e,children:t,fallback:r}=this.props;return e?r():t}}var i=r(89591),l=r(70072),c=r(61754),s=r(62255),p=r(43279),u=r.n(p),d=r(32078),f=r(62732),m=r(22142);const y=(0,f.iv)({pointerEvents:"none",".ant-modal-header":{border:"none"},".ant-collapse-header":{paddingLeft:"0!important",paddingRight:"0!important"},".ant-collapse-content-box":{paddingLeft:"0!important",paddingRight:"0!important"},".ant-modal-footer":{textAlign:"center",cursor:"ns-resize",lineHeight:"12px",padding:0},".ant-collapse":{borderTop:"none"}}),b=[],h=(0,o.createContext)(0),g=[{x:0,y:0}],v=({onCancel:e,title:t,children:r,width:a=340,zIndex:i=2})=>{const{context:l,position:c,setPosition:s}=((e,t)=>{const r=(0,o.useContext)(h),a=(0,n.x3)(e),i=(0,o.useMemo)((()=>{if(!g[r]){const{x:e,y:t}=g[r-1];g.push({x:e+56,y:t+56})}return g[r]}),[r]);return(0,o.useEffect)((()=>{var e;return null==(e=b[r])||e.current(),b[r]=a,()=>{b[r]===a&&(b[r]=void 0)}}),[a,r]),{position:i,context:m.createElement(h.Provider,{value:r+1},t),setPosition(e){const{x:t,y:n}=g[r],[o,a]=[e.x-t,e.y-n];for(let e=r;e<g.length;e++)g[e].x+=o,g[e].y+=a}}})(e,r),p=(0,o.useMemo)((()=>`id${Date.now()}`),[]),v=m.createElement("div",{id:p,className:(0,f.iv)({width:"100%",cursor:"move"})},t);return m.createElement(d.Z,{open:!0,mask:!1,width:a,footer:null,zIndex:i,title:v,maskClosable:!1,onCancel:e,transitionName:"",maskTransitionName:"",wrapClassName:y,bodyStyle:{overflow:"auto",padding:"0 0 16px",maxHeight:640,minHeight:a},modalRender:e=>m.createElement(u(),{handle:`#${p}`,defaultPosition:c,onStop:(e,{x:t,y:r})=>{s({x:t,y:r})}},e)},l)};var O=r(22142);const k=({children:e,onChange:t,value:r})=>{const[n,i]=(0,o.useState)();return(0,o.useLayoutEffect)((()=>()=>i(void 0)),[r]),O.createElement(a,{hasError:void 0!==n,onError:i,fallback:()=>O.createElement(x,{error:n,value:r,onChange:t})},e)},x=({error:e,onChange:t,value:r})=>{var n;const[a,s]=(0,o.useState)(null);return O.createElement(O.Fragment,null,O.createElement(i.Z,{showIcon:!0,type:"error",message:null!=(n=null==e?void 0:e.message)?n:String(e),action:O.createElement(l.Z,{size:"small",danger:!0,onClick:()=>{s(t?O.createElement(E,{value:r,onChange:e=>{try{const r=JSON.parse(e);t(r)}catch(e){c.ZP.error(`修复失败：${e.message}`)}finally{s(null)}}}):O.createElement(v,{width:520,title:"错误详情",onCancel:()=>s(null),children:O.createElement("div",{className:(0,f.iv)({padding:"16px 16px 0"})},O.createElement(i.Z.ErrorBoundary,null,O.createElement(w,{error:e})))}))}},t?"修复":"详情")}),a)},E=({value:e,onChange:t})=>{const[r,n]=(0,o.useState)(JSON.stringify(e));return O.createElement(v,{title:"修复数据",onCancel:()=>t(r),children:O.createElement("div",{className:(0,f.iv)({padding:"16px 16px 0"})},O.createElement(s.Z.TextArea,{value:r,onChange:({target:{value:e}})=>n(e)}))})},w=({error:e})=>{throw e};var P=r(87139),j=r(22142),S=Object.defineProperty,C=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,M=(e,t,r)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const _=(0,o.createContext)({useValue:n.EQ,visiting:{onVisit:n.EQ},openKeys:{}}),D=({index:e,multi:t,render:r,content:a})=>{const i=(0,o.useContext)(_).useValue(e,n.pl),{value:l,onChange:c}=t?i:(0,n.Un)(i);return r(a(l,c))},R=e=>(0,o.memo)((t=>{var r=t,{index:a}=r,i=((e,t)=>{var r={};for(var n in e)I.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&C)for(var n of C(e))t.indexOf(n)<0&&A.call(e,n)&&(r[n]=e[n]);return r})(r,["index"]);const{value:l,onChange:c}=(0,n.Un)((0,o.useContext)(_).useValue(a,n.pl));return j.createElement(k,{value:l,onChange:c},j.createElement(e,((e,t)=>{for(var r in t||(t={}))I.call(t,r)&&M(e,r,t[r]);if(C)for(var r of C(t))A.call(t,r)&&M(e,r,t[r]);return e})({value:l,onChange:c},i)))}));var N=r(22142),V=Object.defineProperty,B=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,z=(e,t,r)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,L=(e,t)=>{for(var r in t||(t={}))Z.call(t,r)&&z(e,r,t[r]);if(B)for(var r of B(t))T.call(t,r)&&z(e,r,t[r]);return e};const U=({provide:e,content:t,render:r})=>{const n=(0,o.useContext)(_);return N.createElement(_.Provider,{value:L(L({},n),e(n))},r(t))};var F=r(34394),Y=r(15252),$=r(68373),Q=r(99350),W=r(26698),J=r(21060),K=r(27906),H=r(73775),G=r(95937),q=r(22142),X=Object.defineProperty,ee=Object.defineProperties,te=Object.getOwnPropertyDescriptors,re=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,ae=(e,t,r)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ie=(e,t)=>{for(var r in t||(t={}))ne.call(t,r)&&ae(e,r,t[r]);if(re)for(var r of re(t))oe.call(t,r)&&ae(e,r,t[r]);return e},le=(e,t)=>ee(e,te(t));const ce=e=>{var t,r=e,{type:o="checkbox",defaultValue:a,tabIndex:i,readOnly:c,disabled:s,value:p,size:u,onChange:d}=r,f=((e,t)=>{var r={};for(var n in e)ne.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&re)for(var n of re(e))t.indexOf(n)<0&&oe.call(e,n)&&(r[n]=e[n]);return r})(r,["type","defaultValue","tabIndex","readOnly","disabled","value","size","onChange"]);const m=null!=(t=null!=p?p:a)&&t,y=()=>null==d?void 0:d(!m);switch((c||s)&&(d=void 0),o){case"checkbox":return q.createElement(F.Z,le(ie({},f),{checked:m,disabled:s,tabIndex:i,onChange:({target:{checked:e}})=>null==d?void 0:d(e)}));case"switch":return q.createElement(Y.Z,le(ie({},f),{size:u,checked:m,disabled:s,tabIndex:i,onChange:e=>null==d?void 0:d(e)}));case"radio":return q.createElement($.ZP,le(ie({},f),{disabled:s,checked:m,onClick:y}));case"visible":return q.createElement(l.Z,le(ie({},f),{type:"text",size:u,disabled:s,tabIndex:i,icon:m?q.createElement(Q.Z,null):q.createElement(W.Z,null),onClick:y}));case"locked":return q.createElement(l.Z,le(ie({},f),{type:"text",size:u,disabled:s,tabIndex:i,icon:m?q.createElement(J.Z,null):q.createElement(K.Z,null),onClick:y}));case"enabled":return q.createElement(l.Z,le(ie({},f),{type:"text",size:u,danger:!m,disabled:s,tabIndex:i,icon:m?q.createElement(H.Z,null):q.createElement(G.Z,null),onClick:y}));default:return(0,n.Ak)(o)}},se=R(ce);var pe=r(26840),ue=r(80926),de=r(85071),fe=r(72299),me=r(5635),ye=r(92791),be=r(19104),he=Object.defineProperty,ge=Object.defineProperties,ve=Object.getOwnPropertyDescriptors,Oe=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable,Ee=(e,t,r)=>t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,we=(e,t)=>{for(var r in t||(t={}))ke.call(t,r)&&Ee(e,r,t[r]);if(Oe)for(var r of Oe(t))xe.call(t,r)&&Ee(e,r,t[r]);return e};const Pe=e=>{var t=e,{label:r,tooltip:a,extra:i,content:l,render:c,defaultActive:s=!0}=t,p=((e,t)=>{var r={};for(var n in e)ke.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Oe)for(var n of Oe(e))t.indexOf(n)<0&&xe.call(e,n)&&(r[n]=e[n]);return r})(t,["label","tooltip","extra","content","render","defaultActive"]);const u=l===n.jI,{token:d}=me.Z.useToken();return o.createElement(ye.Z,(m=we({},p),y={key:String(u),expandIcon:({isActive:e})=>o.createElement(de.Z,{rotate:e?90:0}),collapsible:u?"disabled":void 0,defaultActiveKey:!u||s?["1"]:[],className:(0,f.cx)((0,f.iv)({borderTop:`1px solid ${d.colorBorderSecondary}`,borderRadius:0,"&-no-header .ant-collapse-header":{display:"none !important"},".ant-collapse-header":{paddingBottom:"0!important",alignItems:"center",".ant-collapse-extra":{alignItems:"center",display:"flex",maxHeight:22}},".ant-collapse-content-box":{paddingBottom:"0!important"},".ant-collapse-item":{paddingBottom:0}}),!r&&(0,f.iv)({".ant-collapse-header":{display:"none !important"}})),ghost:!0},ge(m,ve(y))),o.createElement(ye.Z.Panel,{extra:i&&o.createElement("div",{onClick:e=>e.stopPropagation()},c(i)),header:o.createElement(o.Fragment,null,r,o.createElement(je,{title:a,message:r})),key:"1"},c(l)));var m,y},je=e=>{const{showImDialog:t}=(0,be.useImbot)();return e.title?o.createElement(pe.Z,we({},e)," ",o.createElement(fe.Z,{onClick:()=>{"string"==typeof e.message&&t(e.message)}})):null};var Se=Object.defineProperty,Ce=Object.defineProperties,Ie=Object.getOwnPropertyDescriptors,Ae=Object.getOwnPropertySymbols,Me=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable,De=(e,t,r)=>t in e?Se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Re=(e,t)=>{for(var r in t||(t={}))Me.call(t,r)&&De(e,r,t[r]);if(Ae)for(var r of Ae(t))_e.call(t,r)&&De(e,r,t[r]);return e},Ne=(e,t)=>Ce(e,Ie(t));const Ve=(0,f.iv)({display:"flex",position:"relative",minHeight:32,".ant-collapse-header &":{minHeight:0},".ant-input-number-input":{paddingLeft:0},"[disabled]":{pointerEvents:"auto"}}),Be=(0,f.iv)({position:"absolute",userSelect:"none",overflow:"hidden",transition:"2s",":hover":{overflow:"visible"},paddingLeft:8,left:0}),Ze=(0,f.iv)({cursor:"ew-resize","*":{pointerEvents:"none"}}),Te=({label:e,tooltip:t,width:r=64,content:n,reverse:a="boolean"===n.spark,render:i})=>{if(a){const r=(e,r)=>o.createElement("div",{className:(0,f.iv)({display:"flex",columnGap:4,minHeight:32,alignItems:"center"})},o.createElement("div",{className:(0,f.iv)({flex:"none"})},e),o.createElement("div",{className:(0,f.iv)({flex:"auto"})},r,t&&o.createElement(je,{title:t,message:r})));return"boolean"===n.spark?i({spark:"value",index:n.index,content(t=n.defaultValue,a){return{spark:"element",content(i){return r(i(Ne(Re({},n),{value:t,onChange:a})),o.createElement("span",{className:(0,f.iv)({cursor:"pointer"}),onClick:()=>a(!t)},e))}}}}):r(i(n),e)}const l=o.createElement("div",{style:{flex:"auto"}},i(n));return o.createElement("div",{className:(0,f.iv)({display:"flex",alignItems:"center",columnGap:4,minHeight:32})},Boolean(e)&&o.createElement("div",{style:{flex:`0 0  ${r}px`,paddingLeft:8,overflow:"hidden"}},o.createElement(pe.Z,{title:t,placement:"top"},o.createElement(ue.Z.Text,{type:"secondary"},e))),!e&&t?o.createElement(pe.Z,{title:t,placement:"top"},l):l)},ze=(e,t)=>(0,o.memo)((r=>{var n=r,{label:a,tooltip:i,width:l=64,align:c="center"}=n,s=((e,t)=>{var r={};for(var n in e)Me.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ae)for(var n of Ae(e))t.indexOf(n)<0&&_e.call(e,n)&&(r[n]=e[n]);return r})(n,["label","tooltip","width","align"]);const{cursor:p,onMouseDown:u}=(e=>!t||e.disabled||e.readOnly?{cursor:"pointer"}:{cursor:"ew-resize",onMouseDown(r){r.stopPropagation();let n=0;const o=t(e),a=()=>{for(const[e,t]of Object.entries(i))document.removeEventListener(e,t);document.body.classList.remove(Ze),o(n)},i={mouseleave:a,mouseup:a,mousemove({movementX:e}){o(n+=e,{before:!0})}};for(const[e,t]of Object.entries(i))document.addEventListener(e,t);document.body.classList.add(Ze)}})(s);return o.createElement("div",{className:(0,f.cx)(Ve),style:"center"===c?{alignItems:"center"}:{}},o.createElement(e,Ne(Re({},s),{style:{paddingLeft:a?l+4:4,width:"100%",zIndex:0}})),o.createElement("div",{style:{width:l,cursor:p,paddingTop:"center"===c?0:5,fontSize:Le(a,l)},className:Be,onMouseDown:u},o.createElement(pe.Z,{title:null!=i?i:a,placement:"top"},o.createElement(ue.Z.Text,{type:"secondary"},a))))}));function Le(e,t=64){return"string"==typeof e?[14,13,12].find((r=>r*e.length<=t))||12:14}var Ue=r(76631),Fe=r(22142),Ye=Object.defineProperty,$e=Object.getOwnPropertySymbols,Qe=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable,Je=(e,t,r)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ke=ze((e=>Fe.createElement(Ue.Z,((e,t)=>{for(var r in t||(t={}))Qe.call(t,r)&&Je(e,r,t[r]);if($e)for(var r of $e(t))We.call(t,r)&&Je(e,r,t[r]);return e})({},(0,n.yx)(e)))),(e=>(t,r)=>{const{defaultValue:n=0,step:o=1,min:a=Number.MIN_SAFE_INTEGER,max:i=Number.MAX_SAFE_INTEGER,onChange:l}=e;null==l||l(((e=n)=>Math.min(Math.max(e+Math.floor(t)*o,a),i)),r)})),He=R(Ke);var Ge=r(68961),qe=r(73760),Xe=r(22142),et=Object.defineProperty,tt=Object.defineProperties,rt=Object.getOwnPropertyDescriptors,nt=Object.getOwnPropertySymbols,ot=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable,it=(e,t,r)=>t in e?et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lt=(e,t)=>{for(var r in t||(t={}))ot.call(t,r)&&it(e,r,t[r]);if(nt)for(var r of nt(t))at.call(t,r)&&it(e,r,t[r]);return e},ct=(e,t)=>tt(e,rt(t)),st=(e,t)=>{var r={};for(var n in e)ot.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&nt)for(var n of nt(e))t.indexOf(n)<0&&at.call(e,n)&&(r[n]=e[n]);return r};const pt=ze((e=>{var t=e,{defaultValue:r,value:n=r,options:o=[],style:a={},required:i,onChange:l,input:c}=t,s=st(t,["defaultValue","value","options","style","required","onChange","input"]);const p=o.findIndex((e=>e.value===n||(0,qe.isEqual)(e.value,n)));if(c){const e=a,{paddingLeft:t}=e,r=st(e,["paddingLeft"]);return Xe.createElement(Ge.Z,ct(lt({},s),{showSearch:!0,style:r,className:(0,f.iv)({".ant-select-selection-search":{paddingLeft:`${t}px !important`,left:"0 !important"},".ant-select-selector":{paddingLeft:`${t}px !important`}}),value:n,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onChange:e=>{null==l||l(e)},onSearch:e=>{null==l||l(e)}}),Boolean(n)&&!o.find((({value:e})=>n===e))&&Xe.createElement(Ge.Z.Option,{value:n},n),o.map((({label:e,value:t},r)=>Xe.createElement(Ge.Z.Option,{key:r,value:t},e))))}const u=a,{paddingLeft:d}=u,m=st(u,["paddingLeft"]);return Xe.createElement("div",{key:o.length,className:(0,f.iv)(ct(lt({},m),{".ant-select-selector":{paddingLeft:`${d}px !important`}}))},Xe.createElement(Ge.Z,ct(lt({placeholder:"请选择"},s),{style:m,status:i&&p<0?"error":void 0,value:p>-1?p:void 0,onChange:e=>{null==l||l(o[Number(e)].value)}}),o.map((({label:e,value:t},r)=>Xe.createElement(Ge.Z.Option,{key:r,value:r},null!=e?e:t)))))})),ut=R(pt);var dt=r(22142),ft=Object.defineProperty,mt=Object.defineProperties,yt=Object.getOwnPropertyDescriptors,bt=Object.getOwnPropertySymbols,ht=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable,vt=(e,t,r)=>t in e?ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ot=(e,t)=>{for(var r in t||(t={}))ht.call(t,r)&&vt(e,r,t[r]);if(bt)for(var r of bt(t))gt.call(t,r)&&vt(e,r,t[r]);return e},kt=(e,t)=>mt(e,yt(t));const xt=(e,t,r,n=0)=>{if(r&&"string"!=typeof e)return"error";if("string"==typeof e&&e.length<n)return"error";try{if(t&&!new RegExp(t,"i").test(null!=e?e:""))return"error"}catch(e){console.error(e)}},Et=ze((e=>{var t=e,{onChange:r,style:n,type:a,min:i,max:l,value:c,defaultValue:p,required:u,accept:d,allowClear:m=!1}=t,y=((e,t)=>{var r={};for(var n in e)ht.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&bt)for(var n of bt(e))t.indexOf(n)<0&&gt.call(e,n)&&(r[n]=e[n]);return r})(t,["onChange","style","type","min","max","value","defaultValue","required","accept","allowClear"]);const b=(0,o.useRef)(null),[h,g]=(0,o.useState)(null!=c?c:""),[v,O]=(0,o.useState)(null!=c?c:""),k=(0,o.useRef)(!1);if((0,o.useEffect)((()=>{g(null!=c?c:""),O(null!=c?c:"")}),[c]),(0,o.useEffect)((()=>{const e=setTimeout((()=>{k.current?(g(v),null==r||r(v)):g((e=>(O(e),e)))}));return()=>{clearTimeout(e)}}),[v]),"area"===a){const e=(0,f.iv)({width:"100%",".ant-input":kt(Ot({},n),{minHeight:80}),"::after":{position:"absolute",bottom:0,right:12}});return dt.createElement(s.Z.TextArea,kt(Ot({},y),{allowClear:m,showCount:!0,ref:b,status:xt(c,d,u,i),key:null!=p?p:"",value:h,maxLength:l,className:e,defaultValue:p,onChange:({target:{value:e}})=>{g(e),null==r||r(e)}}))}return dt.createElement(s.Z,kt(Ot({},y),{allowClear:m,ref:b,style:n,status:xt(c,d,u,i),key:null!=p?p:"",value:h,maxLength:l,defaultValue:p,onChange:({target:{value:e}})=>{g(e),null==r||r(e)},onFocus:()=>{var e;null==(e=b.current)||e.select()}}))})),wt=R(Et);var Pt=r(71076),jt=r(22142),St=Object.defineProperty,Ct=Object.defineProperties,It=Object.getOwnPropertyDescriptors,At=Object.getOwnPropertySymbols,Mt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable,Dt=(e,t,r)=>t in e?St(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Rt=(e,t)=>{for(var r in t||(t={}))Mt.call(t,r)&&Dt(e,r,t[r]);if(At)for(var r of At(t))_t.call(t,r)&&Dt(e,r,t[r]);return e},Nt=(e,t)=>Ct(e,It(t));const Vt=ze((e=>{const t=(0,n.yx)(e,!0),{key:r,style:o,autoFocus:a,formatter:i,onFocus:l,onBlur:c,onChange:s,onBeforeChange:p}=t,u=((e,t)=>{var r={};for(var n in e)Mt.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&At)for(var n of At(e))t.indexOf(n)<0&&_t.call(e,n)&&(r[n]=e[n]);return r})(t,["key","style","autoFocus","formatter","onFocus","onBlur","onChange","onBeforeChange"]);return Array.isArray(e.value)?(u.value.some((e=>void 0===e))&&(u.value=void 0),jt.createElement("div",{style:o},jt.createElement(Pt.Z,Nt(Rt({},u),{range:!0,key:r.slice(2),onChange:p,onAfterChange:s,tooltip:{formatter:i}})))):(null!=u.value||(u.value=u.defaultValue),jt.createElement("div",{style:o,className:(0,f.iv)({display:"flex",columnGap:8})},jt.createElement(Pt.Z,Nt(Rt({style:{flex:"auto"}},u),{key:r.slice(2),onChange:p,onAfterChange:e=>{null==s||s(Array.isArray(e)?e[0]:e)},tooltip:{formatter:i}})),!1!==e.inputNumber&&jt.createElement(Ue.Z,Nt(Rt({style:{flex:"0 0 70px",padding:"0 5px"}},u),{key:r,autoFocus:a,formatter:i,onFocus:l,onBlur:c,onChange:s}))))})),Bt=R(Vt);var Zt=r(90352),Tt=r(78296),zt=r(22142),Lt=Object.defineProperty,Ut=Object.defineProperties,Ft=Object.getOwnPropertyDescriptors,Yt=Object.getOwnPropertySymbols,$t=Object.prototype.hasOwnProperty,Qt=Object.prototype.propertyIsEnumerable,Wt=(e,t,r)=>t in e?Lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Jt=ze((e=>{var t,r=e,{value:n,defaultValue:o,placeholder:a,disableAlpha:i,stretch:l,disabled:c,required:p,readOnly:u,style:d,onChange:m}=r,y=((e,t)=>{var r={};for(var n in e)$t.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Yt)for(var n of Yt(e))t.indexOf(n)<0&&Qt.call(e,n)&&(r[n]=e[n]);return r})(r,["value","defaultValue","placeholder","disableAlpha","stretch","disabled","required","readOnly","style","onChange"]);const b=null!=(t=null!=n?n:o)?t:"rgba(255, 255, 255, 1)",h=zt.createElement(Tt.Z,{destroyPopupOnHide:!0,trigger:["click"],disabled:c||u,overlay:zt.createElement(Zt.xS,{color:b,disableAlpha:i,onChange:({rgb:{r:e,g:t,b:r,a:n=1}})=>{null==m||m(`rgba(${e},${t},${r},${n})`)}})},zt.createElement(s.Z,{readOnly:!0,size:"small",disabled:c,placeholder:a,style:{width:l?"100%":"36px",height:"100%",background:b}}));return zt.createElement(s.Z,(g=((e,t)=>{for(var r in t||(t={}))$t.call(t,r)&&Wt(e,r,t[r]);if(Yt)for(var r of Yt(t))Qt.call(t,r)&&Wt(e,r,t[r]);return e})({},y),v={readOnly:!0,status:p&&!n?"error":void 0,disabled:c,prefix:h,style:d,className:(0,f.iv)({".ant-input-prefix":{width:"100%"}})},Ut(g,Ft(v))));var g,v})),Kt=R(Jt);var Ht=r(10839),Gt=r(22142),qt=Object.defineProperty,Xt=Object.getOwnPropertySymbols,er=Object.prototype.hasOwnProperty,tr=Object.prototype.propertyIsEnumerable,rr=(e,t,r)=>t in e?qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,nr=(e,t)=>{for(var r in t||(t={}))er.call(t,r)&&rr(e,r,t[r]);if(Xt)for(var r of Xt(t))tr.call(t,r)&&rr(e,r,t[r]);return e};const or=Gt.createElement(Ht.Z,{className:(0,f.iv)({marginTop:16}),description:"暂无内容"}),ar=(ir=e=>{const t=e.content(lr,e);return e.content===n.jI.content?or:t},e=>Gt.createElement(k,null,Gt.createElement(ir,nr({},e))));var ir;const lr=e=>{if(e.hidden)return null;switch(e.spark){case"boolean":return Gt.createElement(ce,nr({},e));case"number":return Gt.createElement(Ke,nr({},e));case"slider":return Gt.createElement(Vt,nr({},e));case"string":return Gt.createElement(Et,nr({},e));case"select":return Gt.createElement(pt,nr({},e));case"color":return Gt.createElement(Jt,nr({},e));default:return(0,n.Ak)(e)}};var cr=r(22142),sr=Object.defineProperty,pr=Object.defineProperties,ur=Object.getOwnPropertyDescriptors,dr=Object.getOwnPropertySymbols,fr=Object.prototype.hasOwnProperty,mr=Object.prototype.propertyIsEnumerable,yr=(e,t,r)=>t in e?sr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,br=(e,t)=>{for(var r in t||(t={}))fr.call(t,r)&&yr(e,r,t[r]);if(dr)for(var r of dr(t))mr.call(t,r)&&yr(e,r,t[r]);return e};const hr=R(ze((({defaultValue:e,value:t=e,onChange:r,options:n=[],style:o={},size:a="small"})=>{const i=o,{paddingLeft:l}=i,c=((e,t)=>{var r={};for(var n in e)fr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&dr)for(var n of dr(e))t.indexOf(n)<0&&mr.call(e,n)&&(r[n]=e[n]);return r})(i,["paddingLeft"]);return cr.createElement("div",{className:(0,f.iv)((s=br({},c),p={paddingLeft:`${l}px !important`,width:"100%"},pr(s,ur(p))))},cr.createElement($.ZP.Group,{className:(0,f.iv)({display:"flex"}),value:t,onChange:({target:{value:e}})=>{null==r||r(e)},size:a},n.map((({label:e,value:t},r)=>cr.createElement($.ZP.Button,{key:r,value:t,className:(0,f.iv)({flex:1,textAlign:"center"})},e)))));var s,p})));var gr=r(85870),vr=r(34450),Or=r.n(vr),kr=r(22142),xr=Object.defineProperty,Er=Object.defineProperties,wr=Object.getOwnPropertyDescriptors,Pr=Object.getOwnPropertySymbols,jr=Object.prototype.hasOwnProperty,Sr=Object.prototype.propertyIsEnumerable,Cr=(e,t,r)=>t in e?xr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ir=(e,t)=>{for(var r in t||(t={}))jr.call(t,r)&&Cr(e,r,t[r]);if(Pr)for(var r of Pr(t))Sr.call(t,r)&&Cr(e,r,t[r]);return e};const Ar=R(ze((({defaultValue:e,value:t=e,onChange:r,style:n={}})=>{const o=n,{paddingLeft:a}=o,i=((e,t)=>{var r={};for(var n in e)jr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Pr)for(var n of Pr(e))t.indexOf(n)<0&&Sr.call(e,n)&&(r[n]=e[n]);return r})(o,["paddingLeft"]);return kr.createElement("div",{className:(0,f.iv)((l=Ir({},i),c={paddingLeft:`${a}px !important`,width:"100%"},Er(l,wr(c))))},kr.createElement(gr.Z.RangePicker,{className:(0,f.iv)({width:"100%"}),value:null==t?void 0:t.filter(Boolean).map((e=>Or()(e))),onChange:(e,t)=>{null==r||r(t)}}));var l,c}))),Mr=(0,o.memo)((({index:e,content:t,render:r})=>{const{openKeys:a,useValue:i}=(0,o.useContext)(_),l=(0,o.useRef)([]);return r({spark:"context",content:t,provide:()=>({openKeys:(0,n.Jk)(a,e,t),useValue(r,o=n.pl){const{indexValue:a,indexEntries:c}=(0,n.k9)(r),{value:s,onChange:p}=i(e,((e,t)=>o((l.current=e).map(a),t.map(a))));return{value:s.map(a),onChange(e,r){(null==r?void 0:r.replace)?null==p||p(e,(0,qe.omit)(r,"replace")):null==p||p(e.map(((e,o)=>{var a,i,p;return(null==(a=null==r?void 0:r.ids)?void 0:a.length)?Object.entries(e):(0,n.sW)(null!=(p=null!=(i=l.current[o])?i:s[o])?p:(0,n.Pv)(t),c(e))})),r)}}}})})}));var _r=r(22142),Dr=Object.defineProperty,Rr=Object.getOwnPropertySymbols,Nr=Object.prototype.hasOwnProperty,Vr=Object.prototype.propertyIsEnumerable,Br=(e,t,r)=>t in e?Dr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Zr=({content:e,render:t,status:r,indices:a})=>{const{openKeys:{checking:i,enabled:l,openKeys:c,setOpenKeys:s}}=(0,o.useContext)(_);return"static"!==r&&i?_r.createElement(Tr,((e,t)=>{for(var r in t||(t={}))Nr.call(t,r)&&Br(e,r,t[r]);if(Rr)for(var r of Rr(t))Vr.call(t,r)&&Br(e,r,t[r]);return e})({},"required"===r||"closed"===r?{disabled:!0,enabled:l,checked:"required"===r}:(a||(a=(0,n.ji)(e,["required","recommended","optional"],!0)),{enabled:l,checked:c?a.every((e=>c.includes(e))):"recommended"===r,setChecked:e=>{null==s||s(e,a)}})),t({spark:"context",content:e,provide(){return{openKeys:{checking:!1}}}})):t(e)},Tr=({disabled:e,enabled:t,checked:r,children:n,topBottom:o=-4,leftRight:a=-2,setChecked:i,onClick:l})=>_r.createElement("div",{className:(0,f.iv)({position:"relative",flex:"auto"})},n,_r.createElement("div",{onClick:l,className:(0,f.iv)({top:o,right:a,bottom:o,left:a,zIndex:1,borderRadius:2,position:"absolute",background:!t||e&&!r?"rgba(51, 51, 51, 0.2)":"rgba(57, 85, 246, 0.2)",justifyContent:"flex-end",alignItems:"center",display:"flex",".ant-radio-wrapper":{marginRight:6}})},_r.createElement($.ZP,{disabled:e||!t,checked:r,onClick:e=>{null==i||i(!r),e.stopPropagation()}})));var zr=r(55762),Lr=r(22142),Ur=Object.defineProperty,Fr=Object.defineProperties,Yr=Object.getOwnPropertyDescriptors,$r=Object.getOwnPropertySymbols,Qr=Object.prototype.hasOwnProperty,Wr=Object.prototype.propertyIsEnumerable,Jr=(e,t,r)=>t in e?Ur(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Kr=(e,t)=>{for(var r in t||(t={}))Qr.call(t,r)&&Jr(e,r,t[r]);if($r)for(var r of $r(t))Wr.call(t,r)&&Jr(e,r,t[r]);return e},Hr=(e,t)=>Fr(e,Yr(t));const Gr=({index:e,label:t,content:r,extra:a,fallback:i,render:c})=>{const{visiting:{next:s=[e],prev:p=[],onVisit:u}}=(0,o.useContext)(_),d=(e,t)=>{switch(e.spark){case"flex":case"grid":const r=e.content.map((e=>d(e,t))).filter((e=>e!==n.jI));switch(r.length){case 0:return n.jI;case 1:return r[0];default:return{spark:"element",content:()=>Lr.createElement(Lr.Fragment,null,r.map(((e,t)=>Lr.createElement(o.Fragment,{key:t},c(e)))))}}case"context":case"enter":const a=d(e.content,t);return a!==n.jI?Hr(Kr({},e),{content:a}):n.jI;case"group":return(0,n.nY)(d(e.content,t),d(e.extra||n.jI,t));case"check":case"block":case"group":case"label":return d(e.content,t);case"visit":return e.index===t?e:n.jI;case"value":return e.visit?Hr(Kr({},e),{content(r,n){return d(e.content(r,n),t)}}):n.jI;default:return n.jI}};return c({spark:"context",content:s.length?s[0]!==e?n.jI:s.length>1?(0,n.nY)((0,n.nY)(d(r,s[1]),d(a||n.jI,s[1])),r):p.length?{spark:"grid",content:[{spark:"element",content:()=>Lr.createElement("div",{className:(0,f.iv)({padding:"16px 16px 0",display:"flex",justifyContent:"space-between",alignItems:"center"})},Lr.createElement(pe.Z,{title:`返回${p[p.length-1].label}`},Lr.createElement(l.Z,{type:"text",size:"small",className:(0,f.iv)({padding:0,overflow:"hidden",":hover":{background:"none"}}),icon:Lr.createElement(zr.Z,null),onClick:()=>{u(p.map((({index:e})=>e)))}},t)),a&&c(a))},r]}:r:(null==i?void 0:i((()=>u(p.map((({index:e})=>e)).concat(e)))))||n.jI,provide(){return{visiting:{next:s.slice(1),prev:p.concat({label:t,index:e}),onVisit:u}}}})},qr=({index:e,check:t,content:r,render:a})=>{const{value:i}=(0,o.useContext)(_).useValue(e,n.pl),l=Object.entries(t).map((([e,t])=>[e,t((0,n.it)(i))]));return a(Object.fromEntries(l))(r)};var Xr=r(22142),en=Object.defineProperty,tn=Object.defineProperties,rn=Object.getOwnPropertyDescriptors,nn=Object.getOwnPropertySymbols,on=Object.prototype.hasOwnProperty,an=Object.prototype.propertyIsEnumerable,ln=(e,t,r)=>t in e?en(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cn=(e,t)=>{for(var r in t||(t={}))on.call(t,r)&&ln(e,r,t[r]);if(nn)for(var r of nn(t))an.call(t,r)&&ln(e,r,t[r]);return e};const sn=({columns:e=6,columnGap:t=12,rowGap:r=16,content:n,render:o})=>{const a=(e,t,r=6,n=1)=>Xr.createElement("div",{key:t,style:{gridColumn:`span ${r}`,gridRow:`span ${n}`}},o(e));return Xr.createElement("div",{style:{display:"grid",gridTemplate:`auto / repeat(${e}, 1fr)`,columnGap:t,rowGap:r}},n.filter((({hidden:e})=>!e)).map(((e,t)=>{var r,n,o;return"check"!==e.spark?a(e,t,e.cols,e.rows):Xr.createElement(qr,(n=cn({},e),o={key:`${t}.${null!=(r=e.space)?r:`${String(e.index)}.${Object.keys(e.check)}`}`,render:e=>{var r=e,{hidden:n,cols:o,rows:i}=r,l=((e,t)=>{var r={};for(var n in e)on.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&nn)for(var n of nn(e))t.indexOf(n)<0&&an.call(e,n)&&(r[n]=e[n]);return r})(r,["hidden","cols","rows"]);return e=>n?null:a(cn(cn({},e),l),t,o,i)}},tn(n,rn(o))))})))};var pn=r(22142),un=Object.defineProperty,dn=Object.defineProperties,fn=Object.getOwnPropertyDescriptors,mn=Object.getOwnPropertySymbols,yn=Object.prototype.hasOwnProperty,bn=Object.prototype.propertyIsEnumerable,hn=(e,t,r)=>t in e?un(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gn=(e,t)=>{for(var r in t||(t={}))yn.call(t,r)&&hn(e,r,t[r]);if(mn)for(var r of mn(t))bn.call(t,r)&&hn(e,r,t[r]);return e};const vn=({content:e,columnGap:t=12,alignItems:r="center",render:n})=>{const o=(e,t,r=0,o=("auto"===r?0:1))=>pn.createElement("div",{key:t,style:{flex:`${o} ${o} ${"number"==typeof r?`${r}px`:r}`,overflow:"hidden"}},n(e));return pn.createElement("div",{className:(0,f.iv)({display:"flex",columnGap:t,alignItems:r})},e.filter((({hidden:e})=>!e)).map(((e,t)=>{var r,n,a;return"check"!==e.spark?o(e,t,e.basis,e.grow):pn.createElement(qr,(n=gn({},e),a={key:`${t}.${null!=(r=e.space)?r:`${String(e.index)}.${Object.keys(e.check)}`}`,render:r=>{var n=r,{hidden:a=e.hidden,basis:i=e.basis,grow:l=e.grow}=n,c=((e,t)=>{var r={};for(var n in e)yn.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&mn)for(var n of mn(e))t.indexOf(n)<0&&bn.call(e,n)&&(r[n]=e[n]);return r})(n,["hidden","basis","grow"]);return e=>a?null:o(gn(gn({},e),c),t,i,l)}},dn(n,fn(a))))})))};var On=r(22142),kn=Object.defineProperty,xn=Object.defineProperties,En=Object.getOwnPropertyDescriptors,wn=Object.getOwnPropertySymbols,Pn=Object.prototype.hasOwnProperty,jn=Object.prototype.propertyIsEnumerable,Sn=(e,t,r)=>t in e?kn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Cn=(e,t)=>{for(var r in t||(t={}))Pn.call(t,r)&&Sn(e,r,t[r]);if(wn)for(var r of wn(t))jn.call(t,r)&&Sn(e,r,t[r]);return e},In=(e,t)=>xn(e,En(t));const An=e=>{var t,r;if(e.hidden)return null;switch(e.spark){case"check":return On.createElement(qr,In(Cn({},e),{key:null!=(t=e.space)?t:`${String(e.index)}.${Object.keys(e.check)}`,render:e=>t=>An(Cn(Cn({},t),e))}));case"value":return On.createElement(D,In(Cn({},e),{key:null!=(r=e.space)?r:String(e.index),render:An}));case"element":return On.createElement(ar,Cn({key:e.space},e));case"context":return On.createElement(U,In(Cn({},e),{render:An}));case"block":return On.createElement(Zr,In(Cn({},e),{render:An}));case"label":return On.createElement(Te,In(Cn({},e),{render:An}));case"enter":return On.createElement(Mr,In(Cn({},e),{render:An}));case"visit":return On.createElement(Gr,In(Cn({},e),{render:An}));case"group":return On.createElement(Pe,In(Cn({},e),{render:An}));case"grid":return On.createElement(sn,In(Cn({},e),{render:An}));case"flex":return On.createElement(vn,In(Cn({},e),{render:An}));case"boolean":return On.createElement(se,Cn({},e));case"number":return On.createElement(He,Cn({},e));case"slider":return On.createElement(Bt,Cn({},e));case"string":return On.createElement(wt,Cn({},e));case"select":return On.createElement(ut,Cn({},e));case"radioGroup":return On.createElement(hr,Cn({},e));case"dateRange":return On.createElement(Ar,Cn({},e));case"color":return On.createElement(Kt,Cn({},e));default:return(0,n.Ak)(e)}};var Mn=An},58049:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{x:function(){return useCurrent},y:function(){return useRatioNumber}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(22142),__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__objRest=(e,t)=>{var r={};for(var n in e)__hasOwnProp.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&__getOwnPropSymbols)for(var n of __getOwnPropSymbols(e))t.indexOf(n)<0&&__propIsEnum.call(e,n)&&(r[n]=e[n]);return r};const useCurrent=e=>{const t=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(e);return t.current=e,t},useRatioNumber=(_a,onBeforeChange=!1)=>{var _b=_a,{ratio:ratio=1,unit:unit="",precision:precision,disabled:disabled,readOnly:readOnly,style:style,placeholder:placeholder}=_b,props=__objRest(_b,["ratio","unit","precision","disabled","readOnly","style","placeholder"]),_a2;const[committed,setCommitted]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!0),[focus,setFocus]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),newProps={style:style,precision:precision,controls:!1,disabled:disabled,readOnly:readOnly,placeholder:null!=placeholder?placeholder:String(null!=(_a2=props.defaultValue)?_a2:0)},onChange_=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>props.onChange),[focus]);let onChange=focus?onChange_:props.onChange;const into=e=>Array.isArray(e)?e.map(into):(void 0!==e&&(e=ratio>0?e*ratio:e/-ratio,0===precision&&(e=Math.round(e))),e),from=e=>Array.isArray(e)?e.map(from):1===ratio?e:ratio>0?e/ratio:e*-ratio,commit=useCurrent((()=>{var e;committed||void 0===props.value||null==onChange||onChange(null!=(e=props.defaultValue)?e:0)}));newProps.onChange=e=>{Array.isArray(e)?null==onChange||onChange(from(e)):"number"==typeof e?(null==onChange||onChange(from(e)),setCommitted(!0)):setCommitted(!1)},onBeforeChange&&(newProps.onBeforeChange=e=>null==onChange?void 0:onChange(from(e),{before:!0})),newProps.key=`${Number(focus)}:${props.defaultValue}`,newProps.onFocus=()=>setFocus(!0),newProps.onPressEnter=e=>{var _a3;const input=e.target.value;if(input&&/[^\d]/.test(input)){const value=eval(input);null==(_a3=newProps.onChange)||_a3.call(newProps,value)}},newProps.onBlur=()=>{onChange=props.onChange,setFocus(!1),commit.current()},newProps.autoFocus=focus;const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);newProps.ref=ref,(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{focus&&ref.current&&ref.current.select()}),[focus]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>()=>commit.current()),[commit]);const keys=["min","max","step","value","defaultValue"];for(const e of keys)newProps[e]=into(props[e]);return""!==unit&&(focus||(newProps.formatter=e=>void 0!==precision?`${Number(e).toFixed(precision)}${unit}`:`${e}${unit}`)),newProps}},55781:function(e,t,r){"use strict";r.d(t,{jI:function(){return o},uD:function(){return R},ji:function(){return k},Jk:function(){return v},X$:function(){return w},Gu:function(){return Q},pl:function(){return i},k9:function(){return g},l4:function(){return W},Q0:function(){return O},hK:function(){return E},Ak:function(){return l},EQ:function(){return c},nY:function(){return a},Un:function(){return N},it:function(){return V},Pv:function(){return _},Hh:function(){return x},sW:function(){return D},x3:function(){return K.x},yx:function(){return K.y},lb:function(){return J}});var n=r(73760);const o={spark:"element",content:()=>null},a=(e,t)=>e!==o?e:t,i=(e,t)=>(0,n.zip)(e,t).every((([e,t])=>Array.isArray(e)?Array.isArray(t)&&e.length===t.length&&e.every(((e,r)=>e===t[r])):e===t)),l=e=>{throw new Error(`Oops, not supposed to throw: ${e}`)},c=(...e)=>{throw new Error(`NotImplemented: ${e}`)};var s=Object.defineProperty,p=Object.defineProperties,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&y(e,r,t[r]);if(d)for(var r of d(t))m.call(t,r)&&y(e,r,t[r]);return e},h=(e,t)=>p(e,u(t));const g=(e,t=((e,t)=>null==e?void 0:e[t]))=>{const r=Array.isArray(e);return{indexValue:n=>r?e.map((e=>t(n,e))):t(n,e),indexEntries:t=>r?e.map(((e,r)=>[e,t[r]])):[[e,t]]}},v=(e,t,r)=>{const n=((e=[])=>{for(const r of e)if(Array.isArray(r)&&r[0]===t)return r[1]})(e.openKeys);return h(b({},e),{openKeys:n,setOpenKeys:(o,a,i)=>{var l;(null==i?void 0:i.length)||(a=[[t,x(null!=n?n:k(r,["required","recommended"]),o,a)]]),null==(l=e.setOpenKeys)||l.call(e,o,a,i)}})},O=(e,t)=>e.reduce(((e,r)=>{if(Array.isArray(r)){const n=t.find((e=>Array.isArray(e)&&e[0]===r[0]));n&&e.push([r[0],O(r[1],n[1])])}else t.some((e=>e===r))&&e.push(r);return e}),[]),k=(e,t,r=!1,o=[])=>{var a;if(e.hidden)return o;switch(e.spark){case"block":return r||t.includes(null!=(a=e.status)?a:"optional")?e.indices?(0,n.uniq)(o.concat(e.indices)):k(e.content,t,!0,o):o;case"grid":case"flex":return e.content.reduce(((e,n)=>k(n,t,r,e)),o);case"group":return e.extra?k(e.extra,t,r,k(e.content,t,r,o)):k(e.content,t,r,o);case"context":case"check":case"label":case"visit":return k(e.content,t,r,o);case"boolean":case"number":case"slider":case"select":case"string":case"enter":case"color":case"value":case"radioGroup":case"dateRange":return r?(0,n.uniq)(o.concat(e.index)):o;case"element":return o;default:return l(e)}},x=(e,t,r)=>{const n=e=>Array.isArray(e)?t=>Array.isArray(t)&&e[0]===t[0]:t=>!Array.isArray(t)&&e===t;if(t){const t=r.slice();for(const r of e)t.some(n(r))||t.push(r);return t}return e.reduce(((e,t)=>(r.some(n(t))||e.push(t),e)),r.filter(Array.isArray))},E=(e,t)=>w(e,k(t,["required","recommended","optional","closed","static"],!0),!1),w=(e,t=[],r=!0)=>{if(e.hidden)return o;switch(e.spark){case"context":case"check":case"visit":case"block":case"label":if("block"===e.spark&&r)return k(e,["required","recommended","optional"],!0).some((e=>!t.includes(e)))?o:e;const n=w(e.content,t,r);return n!==o?P(h(b({},e),{content:n})):o;case"group":const a=w(e.content,t,r),i=w(e.extra||o,t,r);return a===o&&i===o?o:P(h(b({},e),{content:a,extra:i===o?void 0:i}));case"flex":case"grid":const l=e.content.map((e=>w(e,t,r))).filter((e=>e!==o));return l.length?P(h(b({},e),{content:l})):o;default:return r||"element"===e.spark||[e.index].flat().some((e=>!t.includes(e)))?o:e}},P=e=>{switch(e.spark){case"grid":case"flex":if(1===e.content.length&&"check"===e.content[0].spark&&"hidden"in e.content[0].check){const{hidden:t}=e.content[0].check;return h(b({},e.content[0]),{check:{hidden:t},content:e})}return e;case"context":case"group":if("check"===e.content.spark&&"hidden"in e.content.check){const{hidden:t}=e.content.check;return h(b({},e.content),{check:{hidden:t},content:e})}return e;default:return e}};var j=Object.defineProperty,S=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const M=e=>{var t,r;switch(e.spark){case"select":return null==(r=null==(t=e.options)?void 0:t[0])?void 0:r.value;case"color":return"white";case"slider":case"number":return 0;case"boolean":return!1;case"string":return"";case"check":case"value":case"enter":case"visit":return;default:return l(e)}},_=e=>{const t=(e,r=[])=>{var n;switch(e.spark){case"grid":case"flex":return e.content.reduce(((e,r)=>t(r,e)),r);case"context":case"check":case"group":case"block":case"label":case"visit":const o="group"===e.spark&&e.extra;return t(e.content,o?t(o,r):r);case"element":return r;default:return"string"!=typeof e.index||e.required?"enter"===e.spark?[...r,[e.index,_(e.content)]]:Array.isArray(e.index)?e.index.reduce(((t,r,n)=>{var o;return"string"!=typeof r||e.required?[...t,[r,null==(o=e.defaultValue)?void 0:o[n]]]:t}),r):[...r,[e.index,null!=(n=e.defaultValue)?n:M(e)]]:r}};return(r=t(e)).length&&r.every((([e])=>"number"==typeof e))?(0,n.uniqBy)(r,0).sort((([e],[t])=>e-t)).map((e=>e[1])):Object.fromEntries(r);var r},D=(e,t)=>{const r=Array.isArray(e)?e.slice():((e,t)=>{for(var r in t||(t={}))C.call(t,r)&&A(e,r,t[r]);if(S)for(var r of S(t))I.call(t,r)&&A(e,r,t[r]);return e})({},e);for(const[e,n]of t)r[e]=n;return r},R=(e,t)=>(0,n.isFunction)(e)?e(t):e,N=({value:e,onChange:t})=>({value:V(e),onChange(r,n){t(e.map((e=>R(r,e))),n)}}),V=e=>{const[t]=e;if(e.length<2)return t;if(Array.isArray(t))return t.map(((t,r)=>V(e.map((e=>null==e?void 0:e[r])))));if(t&&"object"==typeof t)return Object.fromEntries(Object.keys(t).map((t=>[t,V(e.map((e=>null==e?void 0:e[t])))])));for(let r=1;r<e.length;r++)if(e[r]!==t)return;return t};var B=Object.defineProperty,Z=Object.defineProperties,T=Object.getOwnPropertyDescriptors,z=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,F=(e,t,r)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Y=(e,t)=>{for(var r in t||(t={}))L.call(t,r)&&F(e,r,t[r]);if(z)for(var r of z(t))U.call(t,r)&&F(e,r,t[r]);return e},$=(e,t)=>Z(e,T(t));const Q=e=>{if(e.hidden)return o;switch(e.spark){case"flex":case"grid":const t=e.content.map(Q).filter((e=>e!==o));return t.length?$(Y({},e),{content:t}):o;case"block":case"group":case"label":case"context":case"check":case"visit":case"enter":const r=$(Y({},e),{content:Q(e.content)});return r.content===o?o:r;case"select":case"slider":case"string":case"value":case"boolean":case"element":case"color":case"number":return e;default:return l(e)}},W=e=>{var t=e,{value:r,type:n,size:o,onChange:a}=t,i=((e,t)=>{var r={};for(var n in e)L.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&z)for(var n of z(e))t.indexOf(n)<0&&U.call(e,n)&&(r[n]=e[n]);return r})(t,["value","type","size","onChange"]);return{spark:"context",provide:()=>({useValue:()=>({value:[r],onChange([e],t){a(e,t)}})}),content:$(Y({},i),{content:{spark:"boolean",index:"value",type:n,size:o}})}},J=(e,t,r)=>({spark:"context",content:r,provide:()=>({useValue(r){const{indexValue:o,indexEntries:a}=g(r);return{value:[o(e)],onChange([r],o){(null==o?void 0:o.replace)?t(r,(0,n.omit)(o,"replace")):t(D(e,a(r)),o)}}}})});var K=r(58049)},87139:function(e,t,r){"use strict";r.d(t,{L:function(){return w}});var n=r(23530),o=r(55309),a=r(33058),i=r(24202),l=r(39583),c=r(64515),s=r(56238),p=r(64021),u=r(55781),d=r(73760),f=r(22142),m=r(70072),y=r(62732),b=r(22142),h=Object.defineProperty,g=Object.defineProperties,v=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const w=e=>{return b.createElement(P,(t=((e,t)=>{for(var r in t||(t={}))k.call(t,r)&&E(e,r,t[r]);if(O)for(var r of O(t))x.call(t,r)&&E(e,r,t[r]);return e})({},e),r={useDragHandle:!0,lockAxis:"y",distance:4,helperClass:(0,y.iv)({zIndex:2}),onSortEnd:({oldIndex:t,newIndex:r})=>{e.onChange((0,p.q)(e.array,t,r),{},t,r)}},g(t,v(r))));var t,r},P=(0,n.JN)((({array:e,label:t,labelRender:r,minLength:n,maxLength:a,defaultItem:i,sortable:l,addable:c=!0,addButtonProps:s,deletable:p=!0,defaultExpanded:y=!1,render:h,onChange:g,onDelete:v,onSelect:O})=>{var k;const x=(0,u.x3)((t=>g(e.concat([t])))),[E,w]=(0,f.useState)(null);return b.createElement("div",null,e.map(((o,a)=>{const i=h(o,((t,r)=>{g(e.map(((e,r)=>r===a?t:e)),r)}),a);return i&&b.createElement(j,{key:a,index:a,sortable:l,deletable:p&&(!n||e.length>n),defaultExpanded:y||a===e.length-1,label:r?r(o):`${t} ${a+1}`,onDelete:()=>{v?null==v||v(e[a]):g(e.filter(((e,t)=>t!==a)))},selectedIndex:E,onSelect:()=>{w(a),null==O||O(a)}},i)})),c&&b.createElement("div",{style:{padding:"0 16px",display:"flex",justifyContent:"center"}},b.createElement(m.Z,{ghost:!0,block:null==(k=null==s?void 0:s.block)||k,type:"primary",disabled:e.length>=(null!=a?a:Number.MAX_SAFE_INTEGER),onClick:()=>{(0,d.isFunction)(i)?i((e=>x.current(e))):x.current(i)}},b.createElement(o.Z,{style:{fontSize:16}}),b.createElement("span",{style:{lineHeight:"20px"}},t," ",a?`（${e.length}/${a}）`:""))))})),j=(0,n.W8)((({label:e,children:t,deletable:r,sortable:n=!0,onDelete:o,selectedIndex:s,onSelect:p,defaultExpanded:u})=>{const[d,h]=(0,f.useState)(u);return b.createElement("div",{className:(0,y.iv)({background:"rgb(250, 250, 250)",padding:d?"8px 12px":"8px 12px 0",borderRadius:4,marginBottom:16}),onClick:()=>{p()}},b.createElement("div",{className:(0,y.iv)({display:"flex",alignItems:"center",paddingBottom:8})},n&&b.createElement(S,null),b.createElement("div",{className:(0,y.iv)({flex:"auto",cursor:"pointer"}),onClick:()=>h(!d)},e," ",b.createElement(a.Z,{component:d?i.Z:l.Z})),r&&b.createElement(m.Z,{size:"small",type:"text",icon:b.createElement(c.Z,{style:{fontSize:16,lineHeight:0}}),onClick:o})),d&&b.createElement("div",null,t))})),S=(0,n.W6)((()=>b.createElement(m.Z,{type:"text",icon:b.createElement(a.Z,{component:s.Z}),className:(0,y.iv)({flex:"none",cursor:"row-resize"})})))},77073:function(e,t,r){"use strict";r.d(t,{w:function(){return s}});var n=r(40985),o=r(70072),a=r(16969),i=r(61754),l=r(62732),c=r(22142);function s({value:e,onChange:t}){return c.createElement("div",{className:(0,l.iv)({display:"flex",justifyContent:"center",margin:"0 16px"})},c.createElement(o.Z,{block:!0,className:(0,l.iv)({marginRight:16}),onClick:()=>{(0,n.lm)(new Blob([JSON.stringify(e)]),"config.json")}},"导出配置"),c.createElement(a.Z,{className:(0,l.iv)({".ant-upload":{width:"100%"},width:"100%"}),accept:".json",showUploadList:!1,beforeUpload:e=>(e.text().then((e=>{try{const r=JSON.parse(e);t(r)}catch(e){console.error(e),i.ZP.error("文件格式错误")}})),!1)},c.createElement(o.Z,{className:(0,l.iv)({width:"100%"})},"导入配置")))}},8907:function(e,t,r){"use strict";r.d(t,{H:function(){return n}});const n=(e,t)=>t?{spark:"check",index:"",check:t,content:e}:e},73946:function(e,t,r){"use strict";r.d(t,{I:function(){return u}});var n=r(11439),o=r.n(n),a=Object.defineProperty,i=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&s(e,r,t[r]);if(i)for(var r of i(t))c.call(t,r)&&s(e,r,t[r]);return e};const u=e=>function(e,t){const r=e,{defaultValue:n}=r,o=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&i)for(var n of i(e))t.indexOf(n)<0&&c.call(e,n)&&(r[n]=e[n]);return r})(r,["defaultValue"]);return{spark:"value",index:e.index,content(e,r){return{spark:"element",content(a){return a(p(p({},o),t({value:null!=e?e:n,onChange:r})))}}}}}(e,(({value:e,onChange:t})=>{const{color:r,isVector:n}=function(e){return Array.isArray(e)?{isVector:!0,color:o().fromRatio(Object.fromEntries(e.map(((e,t)=>[["r","g","b","a"][t],e])))).toRgbString()}:{isVector:!1,color:e}}(e);return{value:r,onChange(e){t(function(e,t){return t?Object.values(o()(e).toPercentageRgb()).map((e=>"number"==typeof e?e:Number(e.replace("%",""))/100)):o()(e).toRgbString()}(e,n))}}}))},26616:function(e,t,r){"use strict";r.d(t,{R:function(){return x}});var n=r(3207),o=r(60468),a=r(70072),i=r(80926),l=r(26840),c=r(1749),s=r(33058),p=r(22142),u=r(62732),d=r(19104),f=r(22142),m=Object.defineProperty,y=Object.defineProperties,b=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,k=(e,t)=>{for(var r in t||(t={}))g.call(t,r)&&O(e,r,t[r]);if(h)for(var r of h(t))v.call(t,r)&&O(e,r,t[r]);return e};const x=e=>{const{index:t,label:r,defaultValue:m}=e;return{spark:"value",index:t,content(t=m,h){const[g,v]=(0,p.useState)(!1),{enableBlueprint:O}=(0,d.useEditor)(0,"enableBlueprint"),x=null==t?void 0:t.type;return{spark:"flex",columnGap:4,alignItems:"start",content:[x?{spark:"element",content:()=>{const e=f.createElement(o.wH,{value:t});return f.createElement(a.Z,{block:!0,onClick:()=>v(!g),className:(0,u.iv)({display:"flex",padding:"0 8px",alignItems:"center",textAlign:"left"})},f.createElement("div",{className:(0,u.iv)({flex:"0 0 64px"})},f.createElement(i.Z.Text,{type:"secondary"},r)),f.createElement("div",{className:(0,u.iv)({flex:"auto",overflow:"hidden"})},f.createElement(l.Z,{title:e},f.createElement("span",null,e))))}}:{spark:"element",content:r=>{return r((n=k({},e),y(n,b({value:t,onChange:h}))));var n}},{spark:"element",basis:"auto",content:()=>f.createElement(f.Fragment,null,f.createElement(l.Z,{title:"使用动态数据"},f.createElement(a.Z,{type:x?"primary":"default",icon:f.createElement(s.Z,{component:c.Z}),onClick:()=>{var e,r;x?h(null!=(r=null==(e=t._editor)?void 0:e.value)?r:m):v(!0)}})),g&&f.createElement(n.TreeModal,{title:f.createElement(f.Fragment,null,f.createElement(s.Z,{component:c.Z})," ",r),children:(0,n.default)({spark:"group",content:(0,o.VX)(t,((e,r)=>{var n;return h((null==e?void 0:e.type)?k({_editor:{value:(null==t?void 0:t._editor)?null==(n=t._editor)?void 0:n.value:t}},e):e,r)}),(e=>O?e:e.filter((({value:e})=>"scene"!==e))))}),onCancel:()=>v(!1)}))}]}}}}},81306:function(e,t,r){"use strict";r.d(t,{$:function(){return a},b:function(){return o}});var n=r(42761);function o(e){return{spark:"check",space:"sceneSelectSpark",index:[],check:{options:()=>a()},content:e}}function a(){return(0,n.v9)((({project:{scenes:e,settings:t,editor:r}})=>{var n;const o=e.filter((({type:e,editor:t})=>"Scene"===e&&!t.loading)).map((({name:e="未命名场景",orderId:t})=>({label:e,value:t})));if(4===t.typeOfPlay){const{orderId:t}=null!=(n=e.find((({id:e})=>e===r.selectedSceneId)))?n:{};return o.filter((({value:e})=>e!==t))}return[{label:"上一个场景",value:-1},...o]}),n.wU)}},62834:function(e,t,r){"use strict";r.d(t,{SW:function(){return f},_x:function(){return u},r6:function(){return d}});var n=r(42761),o=Object.defineProperty,a=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=e=>({spark:"check",index:[],check:{options:()=>d()},content:e}),d=()=>{const e=f();return Object.keys(null!=e?e:{}).map((e=>({label:e,value:e})))},f=()=>{return e=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))s.call(t,r)&&p(e,r,t[r]);return e})({},(0,n.v9)((({project:e})=>{for(;e.editor.prevState;)e=e.editor.prevState;return e.settings.store}))),a(e,i({SceneLoadingProgress:0,SupportShake:!1}));var e}},52142:function(e,t,r){"use strict";r.d(t,{A8:function(){return g},AA:function(){return C},AN:function(){return l},BN:function(){return m},Be:function(){return v},DD:function(){return k},H5:function(){return x},Ih:function(){return p},Lp:function(){return S},RR:function(){return c},Rz:function(){return w},Z1:function(){return d},df:function(){return j},eV:function(){return y},fO:function(){return P},fn:function(){return E},hI:function(){return b},q7:function(){return O},ut:function(){return u},xZ:function(){return f},yM:function(){return h},zy:function(){return s}});var n=r(72299),o=r(79428),a=r(26840),i=r(22142);const l=[{label:"施加力",value:"force"},{label:"设置速度",value:"velocity"},{label:"施加扭矩",value:"torque"},{label:"移除物理",value:"destroy"}],c=[{label:"当前场景下",value:"scene"},{label:"当前节点下",value:"target"},{label:"指定节点下",value:"node"}],s=[{label:"自由移动",value:"none"},{label:"水平移动",value:"horizontal"},{label:"垂直移动",value:"vertical"}],p=[{label:"动态",value:"dynamic"},{label:"静态",value:"static"},{label:"运动",value:"kinematic"}],u=[{label:"矩形",value:"box"},{label:"圆",value:"circle"},{label:"多边形",value:"polygon"}],d=[{label:"立方体",value:"box3d"},{label:"球体",value:"sphere"},{label:"网格",value:"mesh"}],f=[{label:"粒子",value:"Particle"},{label:"序列帧",value:"FrameAnime"},{label:"Lottie",value:"Lottie"},{label:"Spine",value:"Spine"},{label:"龙骨",value:"DragonBones"}],m=[{label:"结束试玩",value:"playableEnd"},{label:"场景埋点",value:"enterSection"},{label:"点击区域",value:"clickArea"}],y=[{label:"上报完成埋点",value:"finishEvent"},{label:"正常关闭",value:"requestClose"},{label:"主动关闭",value:"requestCloseTrue"},{label:"互动抵时长成功",value:"playableDurationSuccess"},{label:"互动抵时长失败",value:"playableDurationFail"},{label:"互动抵时长关闭",value:"playableDurationClose"},{label:"显示Bar",value:"showBar"},{label:"隐藏Bar",value:"hideBar"},{label:"继续播放视频",value:"resumeVideoPlay"}],b=[{label:"竖版全屏 750 * 1334",value:[750,1334]},{label:"横版全屏 1334 * 750",value:[1334,750]},{label:"信息流 640 * 480",value:[640,480]},{label:"信息流 686 * 386",value:[686,386]}],h=[{label:"无动画",value:"none"},{label:"渐变",value:"alpha"},{label:"滑入",value:"move"}],g=[{label:"从左至右",value:"right"},{label:"从右至左",value:"left"},{label:"从上到下",value:"bottom"},{label:"从下到上",value:"top"}],v=[{label:"距离关节",value:"distance"},{label:"平移关节",value:"prismatic"},{label:"旋转关节",value:"revolute"},{label:"齿轮关节",value:"gear"},{label:"马达关节",value:"motor"},{label:"轮子关节",value:"wheel"},{label:"滑轮关节",value:"pulley"},{label:"焊接关节",value:"weld"},{label:"鼠标关节",value:"mouse"}],O=[{label:"本身",value:"self"},{label:"所有的子节点",value:"children"},{label:"所有的父节点",value:"parents"}],k=[{label:"默认碰撞组",value:0},{label:"碰撞组1",value:1},{label:"碰撞组2",value:2},{label:"碰撞组3",value:3},{label:"碰撞组4",value:4},{label:"碰撞组5",value:5},{label:"碰撞组6",value:6},{label:"碰撞组7",value:7},{label:"碰撞组8",value:8},{label:"碰撞组9",value:9}],x=[{label:"默认居中适配",value:1,reserved:{tooltip:"默认居中适配：在任何设备中，作品都会呈现在屏幕中央"}},{label:i.createElement("div",null,i.createElement("span",null,"自定义适配"),i.createElement(a.Z,{arrowPointAtCenter:!0,placement:"bottomRight",title:"使用教程"},i.createElement(n.Z,{style:{marginLeft:"4px"},onClick:e=>{e.stopPropagation(),window.open("https://magicplay.oceanengine.com/tutorials/primary/ten")}}))),value:0,reserved:{tooltip:"自定义适配：按照自身意愿，对作品进行适配。点击 ？查看如何适配各机型"}}],E=[{label:"节点",value:"node"},{label:"自身",value:"self"},{label:"当前场景",value:"scene"},{label:"当前互动组件",value:"root"}],w=[{label:"自由模式",value:"FREE"},{label:"相对模式",value:"RELATIVE"},{label:"组合模式",value:"GROUPED"}],P=[{label:"全局背景音乐",value:0},{label:"修改全局背景音乐音量",value:1},{label:"禁用动画或事件",value:2},{label:"启用动画或事件",value:3},{label:"淡出背景音乐",value:4}],j=[{label:"自动翻转屏幕",value:0},{label:"固定横竖屏幕",value:1}],S=o.d.map((e=>({label:e.name,value:e.key}))),C=[{label:"无",value:"none"},{label:"静态",value:"static"},{label:"动态",value:"dynamic"},{label:"运动学",value:"kinematic"}]},86750:function(e,t,r){"use strict";r.d(t,{hk:function(){return Nt},lu:function(){return Zt},kA:function(){return Vt},hz:function(){return Et},_v:function(){return Bt},KW:function(){return Tt}});var n={};r.r(n),r.d(n,{Panorama:function(){return k},PanoramaProduct:function(){return E},Space:function(){return w}});var o=r(3207),a=r(19104),i=r(40985),l=r(42761),c=r(22142),s=r(48837),p=r(77769),u=r(33058),d=r(95074),f=r(52695),m=r(53983),y=r(61754),b=r(68961),h=r(26840),g=r(70072),v=r(22669),O=r(22142);const k=({panorama:e,panoramaData:t})=>({spark:"grid",content:[{spark:"group",label:"基础设置",content:{spark:"grid",content:[{spark:"enter",index:"panoramas",content:{spark:"enter",index:t.panoramas.findIndex((t=>t.id===e.id)),content:{spark:"grid",content:[{spark:"block",content:{spark:"label",label:"id",content:{spark:"value",index:"id",content(e){return{spark:"element",content(){return O.createElement(O.Fragment,null,O.createElement("span",null,e),O.createElement(u.Z,{style:{marginLeft:"10px"},component:f.Z,onClick:t=>{t.stopPropagation(),navigator.clipboard.writeText(e),y.ZP.success("复制成功")}}))}}}}}},{spark:"block",content:{spark:"string",label:"名称",index:"name",required:!0}},{spark:"block",content:{spark:"label",label:"智能跳转",tooltip:"根据用户点击，智能跳转到最近全景",content:{spark:"value",index:"pathways",content(r,n){const o=t.panoramas.filter((e=>r.includes(e.id))).map((e=>({label:e.name,value:e.id,options:{}})));return{spark:"element",content(){return O.createElement(b.Z,{mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"选择可跳转全景",value:o,onChange:e=>{n(e)}},t.panoramas.filter((t=>t.id!==e.id)).map((e=>O.createElement(b.Z.Option,{key:e.id,value:e.id},e.name))))}}}}}},{spark:"block",content:{spark:"value",index:"fixedCameraView",content(e,t){return{spark:"label",label:"固定视角",tooltip:"跳转到该全景时展示的视角",content:{spark:"element",content(){return O.createElement(O.Fragment,null,O.createElement(h.Z,{title:"设置当前视图为固定视角"},O.createElement(g.Z,{type:e?"dashed":"primary",style:{marginLeft:"10px",marginRight:"10px"},onClick:()=>{t((0,s.getEditorCameraProps)().rotation),y.ZP.success("设置成功")}},e?"重设":"设置")),e&&O.createElement(h.Z,{title:"取消固定视角"},O.createElement(g.Z,{type:"dashed",style:{marginRight:"10px"},onClick:()=>{t(void 0)}},"取消")),e&&O.createElement(h.Z,{title:"定位"},O.createElement(g.Z,{type:"primary",style:{marginRight:"10px"},onClick:()=>{(0,s.setEditorCameraProps)({rotation:e})}},"定位")))}}}}}},{spark:"block",content:{spark:"label",label:"一次性固定视角",content:{spark:"boolean",index:"fixedCameraViewOnce"}}}]}}}]}},{spark:"group",label:"高级设置",defaultActive:!1,content:{spark:"enter",index:"panoramas",content:{spark:"enter",index:t.panoramas.findIndex((t=>t.id===e.id)),content:{spark:"grid",content:[{spark:"block",content:{spark:"label",label:"位置",tooltip:"视角位置",content:(0,d.J)("position")}},{spark:"block",content:{spark:"label",label:"旋转",tooltip:"视角旋转角度",content:(0,d.J)("rotation")}},{spark:"block",content:{spark:"label",label:"地面坐标",tooltip:"地面坐标",content:(0,d.J)("groundPosition")}},{spark:"block",content:{spark:"value",index:"cubemapUrl",content(e,t){return{spark:"element",content(){const{getState:r}=(0,l.oR)(),n=(0,v.PF)(),o=(0,i.Ng)(r().project,e);return O.createElement(m.r,{type:"Cubemaps",url:e,cover:null==o?void 0:o.cover,deletable:!0,onChange:e=>{e.orderId?t(e.orderId):t(0),n({cubemapUrl:null==e?void 0:e.orderId})}})}}}}}]}}}}]});var x=r(22142);const E=({panorama:e,panoramaData:t})=>({spark:"grid",content:[{spark:"group",label:"基础设置",content:{spark:"grid",content:[{spark:"enter",index:"panoramas",content:{spark:"enter",index:t.panoramas.findIndex((t=>t.id===e.id)),content:{spark:"grid",content:[{spark:"block",content:{spark:"string",label:"名称",index:"name",required:!0}},{spark:"block",content:{spark:"label",label:"智能跳转",tooltip:"根据用户点击，智能跳转到最近全景",content:{spark:"value",index:"pathways",content(r,n){const o=t.panoramas.filter((e=>r.includes(e.id))).map((e=>({label:e.name,value:e.id,options:{}})));return{spark:"element",content(){return x.createElement(b.Z,{mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"选择可跳转全景",value:o,onChange:e=>{n(e)}},t.panoramas.filter((t=>t.id!==e.id)).map((e=>x.createElement(b.Z.Option,{key:e.id,value:e.id},e.name))))}}}}}},{spark:"block",content:{spark:"value",index:"fixedCameraView",content(e,t){return{spark:"label",label:"固定视角",tooltip:"跳转到该全景时展示的视角",content:{spark:"element",content(){return x.createElement(x.Fragment,null,x.createElement(h.Z,{title:"设置当前视图为固定视角"},x.createElement(g.Z,{type:e?"dashed":"primary",style:{marginLeft:"10px",marginRight:"10px"},onClick:()=>{t((0,s.getEditorCameraProps)().rotation),y.ZP.success("设置成功")}},e?"重设":"设置")),e&&x.createElement(h.Z,{title:"取消固定视角"},x.createElement(g.Z,{type:"dashed",style:{marginRight:"10px"},onClick:()=>{t(void 0)}},"取消")),e&&x.createElement(h.Z,{title:"定位"},x.createElement(g.Z,{type:"primary",style:{marginRight:"10px"},onClick:()=>{(0,s.setEditorCameraProps)({rotation:e})}},"定位")))}}}}}},{spark:"block",content:{spark:"label",label:"一次性固定视角",tooltip:"固定视角效果仅触发一次",content:{spark:"boolean",index:"fixedCameraViewOnce"}}}]}}}]}}]}),w=({space:e,panoramaData:t})=>({spark:"group",label:"属性设置",content:{spark:"grid",content:[{spark:"enter",index:"spaces",content:{spark:"enter",index:t.spaces.findIndex((t=>t.id===e.id)),content:{spark:"grid",content:[{spark:"block",content:{spark:"string",label:"名称",index:"name",tooltip:"区域名称"}}]}}}]}});var P=r(73760),j=r(76566),S=(r(47681),r(52142)),C=r(40304),I=r(72458),A=r(20630),M=r(38193),_=r(92546),D=JSON.parse('[{"control":{"type":"phase","tooltip":"","preview":"https://lf3-static.bytednsdoc.com/obj/eden-cn/0000eh7nupsbfuhf/reward-qaa/ewqard-qaa_phase.png","label":"轻互动配置","children":[{"control":{"type":"section","tooltip":"","label":"基础配置","children":[{"control":{"type":"input","tooltip":"","default":"","maxLength":15,"label":"组件名称"},"attribute":{"type":"string","path":"project.name"}},{"control":{"type":"inputNumber","tooltip":"","default":3,"min":3,"max":25,"step":0.1,"precision":1,"unit":"秒","notes":"互动组件在视频播放至第n秒时出现, 请输入3.0～25.0之间的数字(单位: 秒)","label":"互动时间点"},"attribute":{"type":"string","path":"videoControl.time.activeTime"}}]}},{"control":{"type":"section","tooltip":"","label":"互动场景-问题","children":[{"control":{"type":"input","tooltip":"","default":"","placeholder":"填写希望用户回答的问题","required":true,"notes":"","maxLength":15,"label":"问题文案"},"attribute":{"type":"string","path":["ad_config.question"]}},{"control":{"type":"input","tooltip":"","default":"","placeholder":"填写引导用户交互的文案，例如：回答正确可提前5秒跳过视频","required":true,"notes":"","maxLength":15,"label":"引导文案"},"attribute":{"type":"string","path":["ad_config.skip_message"]}}]}},{"control":{"type":"section","tooltip":"","label":"互动场景-选项","children":[{"control":{"type":"input","tooltip":"","default":"","placeholder":"填写选项内容","required":true,"maxLength":8,"label":"选项一"},"attribute":{"type":"string","path":["ad_config.options[0].value"]}},{"control":{"type":"input","tooltip":"","default":"","placeholder":"填写选项内容","required":true,"maxLength":8,"label":"选项二"},"attribute":{"type":"string","path":["ad_config.options[1].value"]}},{"control":{"type":"radio","tooltip":"","default":0,"options":[{"value":0,"text":"选项一"},{"value":1,"text":"选项二"}],"label":"正确选项"},"attribute":{"type":"string","path":["ad_config.option_right_key"]}}]}},{"control":{"type":"section","tooltip":"","label":"奖励场景-抵扣时长","children":[{"control":{"type":"inputNumber","tooltip":"","default":5,"label":"抵扣时长","step":1,"precision":0,"max":25,"unit":"秒","notes":"设置用户可提前跳过广告播放的时长, 请输入5～25之间的数字(单位: 秒)","min":5},"attribute":{"type":"string","path":["ad_config.easy_playable_skip_duration","data.skip"]}}]}},{"control":{"type":"section","tooltip":"","label":"奖励场景-转化按钮","children":[{"control":{"type":"switch","tooltip":"","default":true,"notes":"开启个性化优选后，系统将根据投放场景为你自动选择最优文案展示","label":"按钮文案个性化优选"},"attribute":{"type":"string","path":"ad_config.preferred"}},{"control":{"type":"radio","tooltip":"","default":"立即下载领取","options":[{"value":"立即领取","text":"立即领取"},{"value":"立即下载领取","text":"立即下载领取"}],"label":"按钮文案"},"status":{"hidden":{"path":"ad_config.preferred","activeValue":true}},"attribute":{"type":"string","path":["pgc.ctaText"]}}]}}]}}]'),R=Object.defineProperty,N=Object.defineProperties,V=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,z=(e,t,r)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,L=(e=D,t={})=>{return r=((e,t)=>{for(var r in t||(t={}))Z.call(t,r)&&z(e,r,t[r]);if(B)for(var r of B(t))T.call(t,r)&&z(e,r,t[r]);return e})({},U(e,t)),N(r,V({_editor:{schema:e}}));var r};const U=(e=[],t,r={})=>{var n,o;for(const{control:a,attribute:i}of e)switch(a.type){case"phase":case"section":U(a.children,t,r);break;default:for(const e of[null!=(n=i.path)?n:[]].flat())(0,P.set)(r,e,null!=(o=(0,P.get)(t,e))?o:a.default)}return r};var F=r(14908),Y=r(16969),$=r(15252),Q=Object.defineProperty,W=Object.defineProperties,J=Object.getOwnPropertyDescriptors,K=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,q=(e,t,r)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,X=(e,t)=>{for(var r in t||(t={}))H.call(t,r)&&q(e,r,t[r]);if(K)for(var r of K(t))G.call(t,r)&&q(e,r,t[r]);return e},ee=(e,t)=>W(e,J(t));const te=(e=[],t=[])=>e.reduce(((e,r)=>{var n,o;switch(r.control.type){case"phase":case"section":const a=te(r.control.children,t);a.length&&e.push(ee(X({},r),{control:ee(X({},r.control),{children:a})}));break;default:const i=null!=(o=null==(n=r.attribute)?void 0:n.path)?o:[];(Array.isArray(i)?i:[i]).every((e=>t.includes(e)))&&e.push(r)}return e}),[]);var re=r(7910),ne=[{label:"文本",spark:"string",value:{type:"input",label:"字段名称",tooltip:"帮助提示",default:"默认值",notes:"详细帮助",maxLength:15}},{label:"数值",spark:"number",value:{type:"inputNumber",label:"字段名称",tooltip:"帮助提示",notes:"详细帮助",default:3,min:3,max:25,step:.1,precision:1,unit:"秒"}},{label:"开关",spark:"boolean",value:{type:"switch",label:"字段名称",tooltip:"帮助提示",notes:"详细帮助",default:!1}},{label:"文本选择器",spark:"select",value:{type:"radio",label:"字段名称",tooltip:"帮助提示",notes:"详细帮助",options:[{value:"立即领取",text:"立即领取"},{value:"立即下载领取",text:"立即下载领取"}]}},{label:"图片选择器",spark:"select",value:{type:"imageList",label:"字段名称",tooltip:"帮助提示",notes:"详细帮助",default:0,options:[{text:"卡片",url:"https://lf3-static.bytednsdoc.com/obj/eden-cn/0000eh7nupsbfuhf/schema/card0.png",value:0},{text:"宝箱",url:"https://lf3-static.bytednsdoc.com/obj/eden-cn/0000eh7nupsbfuhf/schema/card1.png",value:1}]}}],oe=r(22142),ae=Object.defineProperty,ie=Object.defineProperties,le=Object.getOwnPropertyDescriptors,ce=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,ue=(e,t,r)=>t in e?ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,de=(e,t)=>{for(var r in t||(t={}))se.call(t,r)&&ue(e,r,t[r]);if(ce)for(var r of ce(t))pe.call(t,r)&&ue(e,r,t[r]);return e},fe=(e,t)=>ie(e,le(t));const me=()=>({spark:"grid",content:[be(),{spark:"string",label:"字段名称",index:"label"},{spark:"string",label:"帮助提示",index:"tooltip"},{spark:"string",label:"详细帮助",index:"notes"},{spark:"string",label:"占位提示",index:"placeholder"},fe(de({},ye()),{cols:4}),{spark:"label",label:"是否必填",cols:2,content:{spark:"boolean",index:"required"}}]}),ye=()=>({spark:"value",index:["type","options"],content([e,t]){let r={spark:ne.find((({value:t})=>t.type===e)).spark,label:"默认值",index:"default"};return"boolean"===r.spark&&(r={spark:"label",content:r}),"select"===r.spark&&(r.options=null==t?void 0:t.map((({value:e,text:t})=>({value:e,label:t})))),fe(de({},r),{label:"默认值"})}}),be=()=>({spark:"value",index:"type",content(e,t){return{spark:"element",content:r=>r({spark:"select",label:"配置类型",options:ne.map((({label:e,value:t})=>({label:e,value:t.type}))),value:e,onChange(e){const{value:r}=ne.find((({value:t})=>t.type===e));t(r,{replace:!0})}})}}}),he=()=>({spark:"value",index:"path",content(e,t){return{spark:"element",content:()=>oe.createElement(o.ArrayCell,{label:"路径",array:Array.isArray(e)?e:[e],onChange:(e,r)=>t(1===e.length?e[0]:e,r),render:(e,t)=>(0,o.default)({spark:"element",content:r=>r({spark:"string",label:"路径",onChange:t,value:e})})})}}}),ge=e=>{switch(e){case"input":return{spark:"number",index:"maxLength",label:"最大长度",min:0,step:1,precision:0,unit:"字"};case"inputNumber":return{spark:"grid",content:[{spark:"number",label:"最小值",step:1,precision:0,index:"min",cols:3},{spark:"number",label:"最大值",step:1,precision:0,index:"max",cols:3},{spark:"number",label:"步长",index:"step",width:48,cols:2},{spark:"number",width:48,label:"精度",index:"precision",step:0,precision:0,cols:2},{spark:"string",width:48,label:"单位",index:"unit",cols:2}]};case"imageList":case"radio":return{spark:"value",index:"options",content(t=[],r){return{spark:"element",content:()=>oe.createElement(o.ArrayCell,{label:"选项",array:t,onChange:r,defaultItem:{},render:(t,r)=>(0,o.default)((0,o.withContext)(t,r,{spark:"grid",content:[fe(de({},ve("url","选项Image")),{hidden:"radio"===e}),{spark:"string",label:"选项Label",index:"text"},{spark:"number",label:"选项Value",index:"value"}]}))})}}};default:return o.NULL_SPARK}},ve=(e,t)=>({spark:"value",index:e,content(e,r){return{spark:"element",content:()=>oe.createElement(m.r,{name:t,url:e,type:"Sprite",onChange:({url:e})=>{r((0,re.GR)(e))}})}}});var Oe=r(22142);var ke=r(60440),xe=r(80926),Ee=r(22142),we=Object.defineProperty,Pe=Object.defineProperties,je=Object.getOwnPropertyDescriptors,Se=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable,Ae=(e,t,r)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Me=(e,t)=>{for(var r in t||(t={}))Ce.call(t,r)&&Ae(e,r,t[r]);if(Se)for(var r of Se(t))Ie.call(t,r)&&Ae(e,r,t[r]);return e},_e=(e,t)=>Pe(e,je(t));function*De(e=[],t,r,n=!0){for(const[l,{control:c={},attribute:s={},status:p={}}]of e.entries()){const{type:u,children:d,label:f,tooltip:m,required:y,maxLength:b,precision:v,default:O,placeholder:k,min:x,max:E,unit:w,step:P,notes:j,options:S}=c,{path:C}=s,I=r=>(n,o)=>{const a=e.slice();a[l]=r(n,a[l]),t(a,o)};if("phase"===u)yield*De(d,I(((e,t)=>_e(Me({},t),{control:_e(Me({},t.control),{children:e})}))),r,n);else if("section"===u){const t=Array.from(De(d,I(((e,t)=>_e(Me({},t),{control:_e(Me({},t.control),{children:e})}))),r,n));yield{spark:"group",tooltip:m||j,label:f||Ee.createElement(xe.Z.Text,{type:"secondary"},"分组名称"),hidden:!t.length,content:{spark:"grid",content:t},extra:{spark:"visit",index:l,hidden:r,label:"编辑分组信息",content:(a=e[l],i=I((e=>e)),(0,o.withContext)(a,i,{spark:"enter",index:"control",content:{spark:"grid",content:[{spark:"group",label:"编辑基础信息",content:{spark:"grid",content:[{spark:"string",label:"分组名称",index:"label"},{spark:"string",label:"帮助提示",index:"tooltip"}]}},{spark:"group",label:"编辑字段列表",content:{spark:"value",index:"children",content(e,t){return{spark:"element",content:()=>oe.createElement(o.ArrayCell,{label:"字段",array:e,onChange:t,defaultItem:{attribute:{type:"string",path:"res.storage.path"},control:ne[0].value},render:(e,t)=>(0,o.default)((0,o.withContext)(e,t,(0,o.filterSpark)({spark:"grid",content:[{spark:"enter",index:"control",content:me()},{spark:"enter",index:"control",content:ge(e.control.type)},{spark:"enter",index:"attribute",content:he()}]})))})}}}}]}})),fallback(e){return{spark:"element",content:()=>Ee.createElement(h.Z,{title:"编辑分组信息"},Ee.createElement(g.Z,{size:"small",type:"text",icon:Ee.createElement(_.Z,null),onClick:e}))}}}}}else(n||[].concat(C).some((e=>e.startsWith("res."))))&&("input"===u?yield Ne(p,Re(C,{spark:"string",label:f,tooltip:m||j,placeholder:k,required:y,width:96,max:b,defaultValue:O})):"inputNumber"===u?yield Ne(p,Re(C,{spark:"number",tooltip:m||j,required:y,width:96,placeholder:k,precision:v,unit:w,defaultValue:O,label:f,min:x,max:E,step:P})):"switch"===u?yield Ne(p,{spark:"label",tooltip:m||j,width:96,label:f,content:Re(C,{spark:"boolean",required:y,defaultValue:O})}):"imageList"===u?yield Ne(p,{spark:"value",index:C,content(e,t){return{spark:"element",content:()=>Ee.createElement(ke.y,{label:f,tooltip:m||j,value:Array.isArray(C)?e[0]:e,onChange:(e,r)=>{t(Array.isArray(C)?C.map((()=>e)):e,r)},options:S.map((({value:e,text:t,url:r})=>({type:"Sprite",value:e,label:t,cover:r})))})}}}):"radio"===u?yield Ne(p,Re(C,{spark:"select",tooltip:m||j,placeholder:k,required:y,width:96,label:f,defaultValue:O,options:S.map((({value:e,text:t})=>({value:e,label:t})))})):console.error("Unknown scheme type:",u))}var a,i}const Re=(e,t)=>Array.isArray(e)?{spark:"value",index:e,content(r,n){return{spark:"element",content:a=>a(_e(Me({},t),{value:r[0],onChange(t,r){n(e.map((()=>(0,o.callValue)(t,t[0]))),r)}}))}}}:_e(Me({},t),{index:e}),Ne=({hidden:e={}},t)=>{const{path:r,activeValue:n}=e;return r?{spark:"check",index:r,check:{hidden:e=>e!==n},content:{spark:"block",content:t}}:{spark:"block",content:t}};var Ve=r(48916),Be=r(22142);function Ze({value:e=JSON.stringify({},null,4),onChange:t}){return Be.createElement(Ve.ZP,{width:"100%",height:"600px",language:"json",value:e,onChange:t,options:{folding:!0,foldingHighlight:!0,automaticLayout:!0,formatOnPaste:!0,formatOnType:!0,tabSize:2,lineDecorationsWidth:0,fontSize:12,padding:{top:10,bottom:10},lightbulb:{enabled:!0},minimap:{enabled:!1}}})}var Te=r(62732),ze=r(22142),Le=Object.defineProperty,Ue=Object.getOwnPropertySymbols,Fe=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable,$e=(e,t,r)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Qe=(e,t)=>{for(var r in t||(t={}))Fe.call(t,r)&&$e(e,r,t[r]);if(Ue)for(var r of Ue(t))Ye.call(t,r)&&$e(e,r,t[r]);return e};const We=()=>({spark:"value",index:"LightPlay",visit:!0,content(e=L(),t){const{schema:r,openKeys:n,hidden:l}=(({schema:e=[],openKeys:t=[]}={})=>{const{propsMode:r}=(0,a.useEditor)(0,"propsMode");return"Product"===r?{schema:te(e,t),hidden:!0,openKeys:t}:{schema:e,hidden:!1,openKeys:t}})(e._editor),s=(r,o)=>{const a=L(r,e);t((0,P.set)(a,"_editor.openKeys",n.filter((e=>(0,P.has)(a,e)))),o)},[p,u]=(0,c.useState)(!0),[d,f]=(0,c.useState)(!1);return{spark:"context",provide({openKeys:{checking:r,enabled:a}}){return{openKeys:{enabled:a,checking:r,openKeys:n,setOpenKeys(r,a){t((0,P.set)(Qe({},e),"_editor.openKeys",(0,o.updateIndices)(n,r,a)))}},useValue(r){const{indexValue:n,indexEntries:a}=(0,o.getIndexer)(r,P.get);return r?{value:[n(e)],onChange([r],n){t(a(r).reduce(((e,[t,r])=>(0,P.set)(e,t,r)),Qe({},e)),n)}}:{value:[e],onChange([e],r){t(e,r)}}}}},content:{spark:"visit",index:"light_play",label:"轻互动设置",content:d?{spark:"value",index:"",content(e,t){return{spark:"element",content(){return ze.createElement(Ze,{value:JSON.stringify(e,null,4),onChange:e=>{try{if(e){const r=JSON.parse(e);t(r)}}catch(e){}}})}}}}:{spark:"grid",content:Array.from(De(r,s,l,p))},extra:{spark:"visit",hidden:l,index:"play_page",label:"编辑分页信息",content:(m=r[0],b=(e,t)=>s([e],t),(0,o.withContext)(m,b,{spark:"enter",index:"control",content:{spark:"grid",content:[{spark:"group",label:"编辑基础信息",content:{spark:"grid",content:[ve("preview","分页封面"),{spark:"string",label:"分组名称",index:"label"},{spark:"string",label:"帮助提示",index:"tooltip"}]}},{spark:"group",label:"编辑分组列表",content:{spark:"value",index:"children",content(e,t){return{spark:"element",content:()=>Oe.createElement(o.ArrayCell,{label:"分组",array:e,onChange:t,defaultItem:{control:{type:"section",tooltip:"帮助提示",label:"分组名称",children:[]}},render:(e,t)=>(0,o.default)((0,o.withContext)(e,t,{spark:"enter",index:"control",content:{spark:"grid",content:[{spark:"string",label:"分组名称",index:"label"},{spark:"string",label:"帮助提示",index:"tooltip"}]}}))})}}}}]}})),extra:{spark:"element",content(){return ze.createElement(F.Z,null,ze.createElement(h.Z,{title:"导出配置"},ze.createElement(g.Z,{size:"small",type:"text",icon:ze.createElement(I.Z,null),onClick:()=>{(0,i.lm)(new Blob([JSON.stringify(r)]),"config.json")}})),ze.createElement(h.Z,{title:"导入配置"},ze.createElement(Y.Z,{accept:"json",showUploadList:!1,beforeUpload:e=>{return t=this,null,r=function*(){try{const t=yield e.text(),r=JSON.parse(t);s(r)}catch(e){y.ZP.error(e)}return!1},new Promise(((e,n)=>{var o=e=>{try{i(r.next(e))}catch(e){n(e)}},a=e=>{try{i(r.throw(e))}catch(e){n(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,a);i((r=r.apply(t,null)).next())}));var t,r}},ze.createElement(g.Z,{size:"small",type:"text",icon:ze.createElement(A.Z,null)}))))}},fallback(e){return{spark:"element",content:()=>ze.createElement(F.Z,null,ze.createElement(h.Z,{title:p?"只展示自定配置":"展示所有"},ze.createElement($.Z,{size:"small",checked:p,onChange:e=>{u(e)}})),ze.createElement(h.Z,{title:"JSON编辑"},ze.createElement(M.Z,{className:(0,Te.iv)({cursor:"pointer"}),onClick:()=>{f((e=>!e))}})),ze.createElement(h.Z,{title:"编辑分页信息"},ze.createElement(g.Z,{size:"small",type:"text",icon:ze.createElement(_.Z,null),onClick:e})))}}},fallback(e){return{spark:"group",content:{spark:"element",content:()=>ze.createElement(g.Z,{type:"primary",onClick:e,style:{width:"100%"}},"轻互动设置")}}}}};var m,b}});var Je=r(99535),Ke=r(32078),He=r(68373),Ge=r(85870),qe=r(22142),Xe=Object.defineProperty,et=Object.defineProperties,tt=Object.getOwnPropertyDescriptors,rt=Object.getOwnPropertySymbols,nt=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,at=(e,t,r)=>t in e?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,it=(e,t)=>{for(var r in t||(t={}))nt.call(t,r)&&at(e,r,t[r]);if(rt)for(var r of rt(t))ot.call(t,r)&&at(e,r,t[r]);return e};const lt={spark:"group",label:"穿山甲设置",content:{spark:"grid",content:[{spark:"label",tooltip:"有无视频坑位",label:"视频坑位",content:{spark:"boolean",index:"play_with_video"}},{spark:"select",index:"playable_video_orientation",label:"横竖屏",options:["横竖屏均可","仅竖屏","仅横屏"].map(((e,t)=>({label:e,value:t}))),defaultValue:0},{spark:"label",label:"打开App",content:{spark:"boolean",index:"is_playable_landpage_openApp"}},{spark:"value",index:"playable_dpa_list",content:(e=[],t)=>({spark:"element",content:()=>{const{propsMode:r}=(0,a.useEditor)(0,"propsMode");return qe.createElement(o.ArrayCell,{label:"动态商品",array:e,onChange:t,defaultItem:{dpa_id:"",shop_num:0,product_num:0,price:0,style_id:1},render:(e,t)=>(0,o.default)({spark:"context",provide(){return{useValue(r){const n=r,o=e=>["product_num","shop_num","style_id"].includes(n)?(0,P.floor)(e):e;return{value:[o(e[n])],onChange:([r])=>{return t((a=it({},e),i={[n]:o(r)},et(a,tt(i))));var a,i}}}}},content:{spark:"grid",content:[{spark:"string",label:"动态商品ID",index:"dpa_id",width:80},..."Product"===r?[]:[{spark:"number",label:"商铺数量",index:"shop_num",min:0},{spark:"number",label:"商品数量",index:"product_num",min:0},{spark:"select",label:"商品价格",index:"price",options:["不限制价格","仅限1元商品"].map(((e,t)=>({label:e,value:t})))},{spark:"number",label:"样式ID",index:"style_id",min:0}]]}})})}})}].map((e=>({spark:"block",content:e})))}};var ct=r(34450),st=r.n(ct),pt=r(44547),ut=r(22142),dt=Object.defineProperty,ft=Object.defineProperties,mt=Object.getOwnPropertyDescriptors,yt=Object.getOwnPropertySymbols,bt=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable,gt=(e,t,r)=>t in e?dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vt=(e,t)=>{for(var r in t||(t={}))bt.call(t,r)&&gt(e,r,t[r]);if(yt)for(var r of yt(t))ht.call(t,r)&&gt(e,r,t[r]);return e},Ot=(e,t)=>ft(e,mt(t));const kt={spark:"grid",content:[{spark:"check",index:[],check:{hidden(){const{openKeys:{checking:e}}=(0,c.useContext)(o.CellContext);return!e}},content:{spark:"element",content:()=>ut.createElement(Je.K2,{className:(0,Te.iv)({height:40,padding:"16px 16px 0"})})}},{spark:"group",label:"画布尺寸与适配",content:{spark:"block",status:"closed",content:{spark:"grid",content:[{spark:"check",index:[],check:{hidden:()=>3===(0,a.useSettings)("typeOfPlay")},content:{spark:"value",index:["width","height","_editor"],content([e=750,t=1334,r={}],n){const{customSize:o}=r;return{spark:"flex",content:[{spark:"element",content:a=>a({spark:"select",label:"画布尺寸",tooltip:"设置中央画布的尺寸大小",options:S.hI.map((({label:e},t)=>({label:e,value:t}))).concat([{value:-1,label:"自定义尺寸"}]),value:o?-1:S.hI.findIndex((({value:[r,n]})=>r===e&&n===t)),onChange:o=>{if(-1===o)return n([e,t,Ot(vt({},r),{customSize:!0})]);const[a,i]=S.hI[o].value;if(a===e&&i===t)return n([e,t,Ot(vt({},r),{customSize:!1})]);Ke.Z.confirm({title:"修改全局画布尺寸",content:"此操作将同步全部场景，是否继续",okText:"确定",cancelText:"取消",onOk:()=>{n([...S.hI[o].value,Ot(vt({},r),{customSize:!1})])}})}})}]}}}},{spark:"check",index:"_editor",check:{hidden:(e={})=>!e.customSize},content:{spark:"flex",content:[{spark:"number",label:"宽度",index:"width"},{spark:"number",label:"高度",index:"height"}]}},{spark:"select",index:"scaleMode",label:"适配方式",tooltip:"选择作品的适配方式，以适应不同设备下的显示",options:S.H5,defaultValue:1},{spark:"select",index:"screenMode",label:"屏幕适配",tooltip:"屏幕适配",options:S.df,defaultValue:0}]}}},{spark:"group",label:"背景填充",content:{spark:"grid",content:[{spark:"block",status:"required",content:{spark:"value",index:"bgImage",content(e="",t){return{spark:"element",content(){return ut.createElement(m.r,{deletable:!0,type:"Sprite",name:"全局背景图",tips:["建议尺寸：最佳为 750*1334"],url:e,onChange:({url:e})=>{t(e)}})}}}}},{spark:"block",status:"required",content:(0,C.C)({index:"bgColor",label:"背景",defaultValue:"#ffffff"})}]}},{spark:"group",label:"背景音乐",content:{spark:"grid",content:[{spark:"block",status:"required",content:{spark:"value",index:["bgMusic","_editor"],content([e="",t={}],r){const{name:n}=t;return{spark:"element",content(){return ut.createElement(m.r,{type:"Sound",name:n,deletable:!0,url:e,onChange:({url:e,name:n})=>{r([e,Ot(vt({},t),{name:n})])}})}}}}},{spark:"block",status:"required",content:{spark:"slider",index:"bgMusicVoice",label:"音量",defaultValue:1,tooltip:"音量",precision:0,step:.01,ratio:100,min:0,max:2,unit:"%"}}]}},{spark:"group",label:"高级",content:{spark:"grid",content:[{spark:"block",status:"closed",cols:3,content:{spark:"label",label:"多点触控",tooltip:"是否开启多点触控",content:{spark:"boolean",index:"multiTouchEnabled",defaultValue:!1}}},{spark:"block",status:"closed",cols:3,content:{spark:"label",label:"手动上报埋点",tooltip:"开启后只上报手动埋点，不上报其他自动埋点",content:{spark:"boolean",index:"enableManualEvent",defaultValue:!1}}}]}},{spark:"check",index:"typeOfPlay",check:{hidden:e=>0!==e&&2!==e},content:{spark:"block",status:"static",content:{spark:"value",index:"typeOfPlay",visit:!0,content(e){var t;return{spark:"enter",index:"store",content:null!=(t={0:{spark:"value",index:"chuanshanjia",visit:!0,content(e={},t){const{propsMode:r}=(0,a.useEditor)(0,"propsMode"),n="_editor.openKeys";return{spark:"context",provide:({openKeys:{enabled:r,checking:a}})=>{var i;const l=null!=(i=(0,P.get)(e,n))?i:[];return{openKeys:{enabled:r,checking:a,openKeys:l,setOpenKeys(r,a){t((0,P.set)(it({},e),n,(0,o.updateIndices)(l,r,a)))}},useValue(r){const{indexValue:n,indexEntries:a}=(0,o.getIndexer)(r);return{value:[n(e)],onChange([r],n){t(Object.assign({},e,Object.fromEntries(a(r))),n)}}}}},content:"Product"===r?(0,o.filterIndices)(lt,(0,P.get)(e,n)):lt}}},2:We()}[e])?t:o.NULL_SPARK}}}}},{spark:"check",index:"typeOfPlay",check:{hidden:e=>3!==e},content:{spark:"block",status:"static",content:{spark:"enter",index:"hyruleJson",content:{spark:"enter",index:"mask",content:{spark:"group",label:"结束蒙层",content:{spark:"grid",content:[{spark:"string",index:"title",label:"icon主标题"},{spark:"string",index:"subtitle",label:"icon副标题"},{spark:"enter",index:"reward_info",content:{spark:"grid",content:[{spark:"value",index:"reward_type",content(e=0,t){return{spark:"label",label:"奖励类型",content:{spark:"element",content(){const{dispatch:r,getState:n}=(0,l.oR)();return(0,pt.Z)((()=>{var t;const o=n().project.settings.hyruleJson||{};r(e?(0,a.setSettings)({hyruleJson:Ot(vt({},o),{mask:Ot(vt({},o.mask),{reward_info:Ot(vt({},null==(t=o.mask)?void 0:t.reward_info),{reward_type:e,before:{icon:{url_list:[["https://case-cdn.oceanplayable.com/obj/union-fe/feed-playable/icon/libao_icon_before.png"],["https://case-cdn.oceanplayable.com/obj/union-fe/feed-playable/icon/quan_icon_before.png"]][e-1]},title:""},after:{icon:{url_list:[["https://case-cdn.oceanplayable.com/obj/union-fe/feed-playable/icon/libao_icon_after.png"],["https://case-cdn.oceanplayable.com/obj/union-fe/feed-playable/icon/quan_icon_after.png"]][e-1]},title:"",value:"",unit:""}})})})}):(0,a.setSettings)({hyruleJson:Ot(vt({},o),{mask:Ot(vt({},o.mask),{reward_info:void 0})})}))}),[e]),ut.createElement(He.ZP.Group,{options:[{label:"礼包码",value:1},{label:"优惠券",value:2},{label:"无",value:0}],value:e,onChange:({target:{value:e}})=>{t(e)}})}}}}},{spark:"check",index:"reward_type",check:{hidden:e=>!e||0===e,content:e=>1===e?[{spark:"enter",index:"before",content:{spark:"string",index:"title",label:"领取前标题",placeholder:"如：领取价值20元的礼包码"}},{spark:"enter",index:"after",content:{spark:"string",index:"title",label:"领取后标题",placeholder:"如：价值20元的礼包码"}},{spark:"enter",index:"after",content:{spark:"string",index:"value",label:"礼包码",placeholder:"如：666666"}},{spark:"enter",index:"after",content:{spark:"string",index:"unit",label:"复制文案",placeholder:"如：复制"}}]:[{spark:"enter",index:"before",content:{spark:"string",index:"title",label:"领取前标题",placeholder:"如：限时优惠券"}},{spark:"flex",content:[{spark:"enter",index:"before",content:{spark:"string",index:"value",label:"优惠券折扣",placeholder:"如：7"}},{spark:"enter",index:"before",content:{spark:"string",index:"unit",label:"折扣单位",placeholder:"如：折"}}]},{spark:"enter",index:"after",content:{spark:"string",index:"title",label:"领取后标题",placeholder:"如：新人优惠券"}},{spark:"flex",content:[{spark:"enter",index:"after",content:{spark:"string",index:"value",label:"优惠卷面值",placeholder:"如：99"}},{spark:"enter",index:"after",content:{spark:"string",index:"unit",label:"优惠券单位",placeholder:"如：元"}}]},{spark:"enter",index:"after",content:{spark:"value",index:["start_time","end_time"],content(e=[],t){return{spark:"label",label:"优惠券生效时间",content:{spark:"element",content(){return ut.createElement(Ge.Z.RangePicker,{value:e.map((e=>e?st()(e):e)),onChange:e=>{t(e?e.map((e=>e.format("YYYY-MM-DD"))):[void 0,void 0])},placeholder:["开始时间","结束时间"]})}}}}}}]},content:{spark:"grid",content:[]}}]}},{spark:"enter",index:"picture_info",content:{spark:"grid",content:[{spark:"string",index:"title",label:"结束蒙层title"},{spark:"value",index:"picture_list",content(e=[],t){return{spark:"element",content(){return ut.createElement(o.ArrayCell,{defaultItem:{url_list:[]},array:e,onChange:e=>{t(e.length?e:void 0)},label:"结束蒙层滚动图",maxLength:3,defaultExpanded:!0,render:(e,t)=>{const{url_list:r}=e,n=r[0];return ut.createElement(m.r,{deletable:!0,required:!0,type:"Sprite",url:n,name:"蒙层",onChange:e=>{return r=this,n=[e],o=function*({url:e}){t({url_list:[e?(0,re.GR)(e):e]})},new Promise(((e,t)=>{var a=e=>{try{l(o.next(e))}catch(e){t(e)}},i=e=>{try{l(o.throw(e))}catch(e){t(e)}},l=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,i);l((o=o.apply(r,n)).next())}));var r,n,o}})}})}}}}]}}]}}}}}}]},xt={spark:"grid",content:[{spark:"check",index:[],check:{hidden(){const{openKeys:{checking:e}}=(0,c.useContext)(o.CellContext);return!e}},content:{spark:"element",content:()=>ut.createElement(Je.K2,{className:(0,Te.iv)({height:40,padding:"16px 16px 0"})})}},{spark:"group",label:"画布尺寸与适配",content:{spark:"block",status:"closed",content:{spark:"grid",content:[{spark:"check",index:[],check:{},content:{spark:"value",index:["width","height","_editor"],content([e=750,t=1334,r={}],n){const{customSize:o}=r;return{spark:"flex",content:[{spark:"element",content:a=>a({spark:"select",label:"画布尺寸",tooltip:"设置中央画布的尺寸大小",options:S.hI.map((({label:e},t)=>({label:e,value:t}))).concat([{value:-1,label:"自定义尺寸"}]),value:o?-1:S.hI.findIndex((({value:[r,n]})=>r===e&&n===t)),onChange:o=>{if(-1===o)return n([e,t,Ot(vt({},r),{customSize:!0})]);const[a,i]=S.hI[o].value;if(a===e&&i===t)return n([e,t,Ot(vt({},r),{customSize:!1})]);Ke.Z.confirm({title:"修改全局画布尺寸",content:"此操作将同步全部场景，是否继续",okText:"确定",cancelText:"取消",onOk:()=>{n([...S.hI[o].value,Ot(vt({},r),{customSize:!1})])}})}})},Ot(vt({},blueprintSpark({type:"Project"})),{basis:"auto"})]}}}},{spark:"check",index:"_editor",check:{hidden:(e={})=>!e.customSize},content:{spark:"flex",content:[{spark:"number",label:"宽度",index:"width"},{spark:"number",label:"高度",index:"height"}]}},{spark:"select",index:"scaleMode",label:"适配方式",tooltip:"选择作品的适配方式，以适应不同设备下的显示",options:S.H5,defaultValue:1},{spark:"select",index:"screenMode",label:"屏幕适配",tooltip:"屏幕适配",options:S.df,defaultValue:0}]}}},{spark:"group",label:"背景填充",content:{spark:"grid",content:[{spark:"block",status:"required",content:{spark:"value",index:"bgImage",content(e="",t){return{spark:"element",content(){return ut.createElement(m.r,{deletable:!0,type:"Sprite",name:"全局背景图",tips:["建议尺寸：最佳为 750*1334"],url:e,onChange:({url:e})=>{t(e)}})}}}}},{spark:"block",status:"required",content:(0,C.C)({index:"bgColor",label:"背景",defaultValue:"#ffffff"})}]}},{spark:"group",label:"背景音乐",content:{spark:"grid",content:[{spark:"block",status:"required",content:{spark:"value",index:["bgMusic","_editor"],content([e="",t={}],r){const{name:n}=t;return{spark:"element",content(){return ut.createElement(m.r,{type:"Sound",name:n,deletable:!0,url:e,onChange:({url:e,name:n})=>{r([e,Ot(vt({},t),{name:n})])}})}}}}},{spark:"block",status:"required",content:{spark:"slider",index:"bgMusicVoice",label:"音量",defaultValue:1,tooltip:"音量",precision:0,step:.01,ratio:100,min:0,max:2,unit:"%"}}]}},{spark:"group",label:"高级",content:{spark:"grid",content:[{spark:"block",status:"closed",content:{spark:"label",label:"陀螺仪",tooltip:"是否开启陀螺仪",content:{spark:"boolean",index:"gyroscope",defaultValue:!0}}},{spark:"block",status:"closed",content:{spark:"label",label:"触摸",tooltip:"是否开启触摸",content:{spark:"boolean",index:"touch",defaultValue:!0}}},{spark:"block",status:"required",content:{spark:"slider",index:"sensitivity",label:"灵敏度",defaultValue:1,tooltip:"灵敏度",precision:0,step:.01,ratio:100,min:0,max:2,unit:"%"}}]}}]},Et=()=>{const e=(({dispatch:e})=>(t,r)=>{const{indexValue:n,indexEntries:i}=(0,o.getIndexer)(t);return{value:(0,l.v9)((({project:e})=>[n(e.settings)]),r),onChange([t]){e((0,a.setSettings)(Object.fromEntries(i(t)),!0))}}})((0,l.oR)()),[t,r]=(0,c.useState)([0]),n=(0,l.v9)((e=>e.project.editor.propsMode)),{typeOfPlay:i,category:s}=(0,a.useProject)("settings");return{spark:"context",content:{spark:"visit",index:0,label:"全局设置",content:"Product"===n?(0,o.filterIndices)(kt,(0,o.collectIndices)(kt,["recommended","required","static"])):3===i&&3===s?xt:kt},provide:()=>{const{value:[a=!0],onChange:i}=e("enabled",o.flatEqual);return{openKeys:{checking:"Template"===n,enabled:a,setEnabled(e){i([e])}},useValue:e,visiting:{next:t,onVisit:r}}}}};var wt=Object.defineProperty,Pt=Object.defineProperties,jt=Object.getOwnPropertyDescriptors,St=Object.getOwnPropertySymbols,Ct=Object.prototype.hasOwnProperty,It=Object.prototype.propertyIsEnumerable,At=(e,t,r)=>t in e?wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Mt=(e,t)=>{for(var r in t||(t={}))Ct.call(t,r)&&At(e,r,t[r]);if(St)for(var r of St(t))It.call(t,r)&&At(e,r,t[r]);return e},_t=(e,t)=>Pt(e,jt(t)),Dt=(e,t)=>{var r={};for(var n in e)Ct.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&St)for(var n of St(e))t.indexOf(n)<0&&It.call(e,n)&&(r[n]=e[n]);return r};function Rt(e,t){const r=t||{},{state:n}=r,o=Dt(r,["state"]);if(e){let t=Mt({},o);if(n&&n[e]){const r=n[e];t=Mt(Mt({},t),r)}const{compProps:r}=t;return r&&(t.compProps=r.map((t=>{const r=t,{props:n,state:o}=r,a=Dt(r,["props","state"]);if(o&&o[e]){const t=o[e];return _t(Mt({},a),{props:n.map((e=>{var r;const{key:n,value:o}=e;return _t(Mt({},e),{value:null!=(r=t[n])?r:o})}))})}return t}))),t}return t}function Nt(e,t){return Object.fromEntries(Object.entries(t).map((([t,r])=>[t,Rt(e,r)])))}const Vt=(e,{dispatch:t},r=((e,t)=>t))=>(n,c)=>{const{indexValue:p,indexEntries:u}=(0,o.getIndexer)(n);return{value:(0,l.v9)((({project:t})=>{const{editor:{stateId:a},props:l}=(0,i.zh)(t),c=Nt(a,l);if("id"===n)return e;if(c[e[0]])return["Script","Effect","Controller"].includes(c[e[0]].type)?[p(c[e[0]])]:"compProps"===n&&e.length>1&&void 0===(0,o.sameValue)(e.map((e=>c[e].url)))?e.map((()=>[])):e.map((e=>p(r(n,c[e]))));const[s]=(0,i.Nf)(c,e[0]);return[p(null==s?void 0:s.props)]}),c),onChange(r,{before:n,after:o,replace:i=!1,ids:l=[]}={}){const c={flag:n?s.ActionFlag.Continuous:o?s.ActionFlag.SideEffect:void 0,replace:i},p=r.map(((t,r)=>(0,a.changeProps)([e[r],...l],l.length||i?t:Object.fromEntries(u(t)),c)));t(1===p.length?p[0]:(0,a.groupActions)(p,c.flag))}}},Bt=()=>{const e=(0,l.oR)(),{ids:t,props:r,envs:n}=(0,l.v9)((({project:e})=>{const{ids:t,props:r,type:n,id:a}=Ut(e),{propsMode:i}=e.editor;for(;e.editor.prevState;)e=e.editor.prevState;const{scaleMode:l,typeOfPlay:c,category:s}=e.settings,p=void 0===(0,o.sameValue)(t.map((e=>r[e].type))),u=t.length>1;return{ids:t,props:t.map((e=>{const{type:t}=r[e];return{id:e,type:t,multiple:u,multiType:p}})),envs:{propsMode:i,rootType:n,isRoot:t[0]===a&&"Product"!==i,scaleMode:l,typeOfPlay:c,category:s}}}),P.isEqual),a=r.map((e=>p[e.type](e,n))).reduce(((e,t)=>(0,o.mergeSpark)(e,t))),i=zt(a),c=Lt(t[0]);return{spark:"context",content:{spark:"visit",index:0,label:"节点",content:a},provide:()=>({openKeys:i,visiting:c,useValue:Vt(t,e)})}},Zt=({dispatch:e,getState:t})=>t=>{const{indexValue:r,indexEntries:n}=(0,o.getIndexer)(t),{value:c,id:s}=(0,l.v9)((({project:e})=>{const t=e.editor.panoramaEdit,n=(0,i.HE)(e).find((e=>e.orderId===t.panoramaDataOrderId));return{value:[r(null!=n?n:{})],id:null==n?void 0:n.id}}),l.wU);return{value:c,onChange:t=>{return void 0,r=[t],o=function*([t]){e((0,a.updatePanoramaData)(s,Object.fromEntries(n(t))))},new Promise(((e,t)=>{var n=e=>{try{i(o.next(e))}catch(e){t(e)}},a=e=>{try{i(o.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,a);i((o=o.apply(undefined,r)).next())}));var r,o}}},Tt=()=>{var e,t;const r=Zt((0,l.oR)()),[a,s]=(0,c.useState)([0]),{panorama:p,panoramaData:u,space:d,selected:f,propsMode:m}=(0,l.v9)((({project:e})=>{const t=e.editor.panoramaEdit,r=(0,i.HE)(e).find((e=>e.orderId===t.panoramaDataOrderId)),n=null==r?void 0:r.panoramas.find((e=>e.id===t.panoramaId)),o=null==r?void 0:r.spaces.find((e=>e.id===t.spaceId));let a;return"panorama"===t.type&&(a=n),"space"===t.type&&(a=o),{panorama:n,panoramaData:r,space:o,selected:a,propsMode:e.editor.propsMode}}),l.wU),y=null==f?void 0:f.type,b="Product"===m&&null!=(e=n[`${y}Product`])?e:n[y];return{spark:"context",content:{spark:"visit",index:0,label:"全景编辑",content:null!=(t=null==b?void 0:b({panorama:p,space:d,panoramaData:u}))?t:o.NULL_SPARK},provide:()=>({openKeys:{},useValue:r,visiting:{next:a,onVisit:s}})}},zt=e=>{const{dispatch:t}=(0,l.oR)();return(0,l.v9)((({project:r})=>{var n;if("Template"!==r.editor.propsMode)return{};const{ids:l,isScript:c,nodes:s,id:p,type:u}=Ut(r),d=c?l.slice(0,1):l,f=d.map((e=>{var t,r,n;const[o]=(0,i.qC)(s,e,c),{openKeys:a,enabled:l="Scene"===u}=c?null!=(r=null==(t=null==o?void 0:o.scripts.find((t=>t.id===e)))?void 0:t.editor)?r:{}:null!=(n=null==o?void 0:o.editor)?n:{};return{id:e,enabled:l&&e!==p,openKeys:a}}));return{enabled:null!=(n=(0,o.sameValue)(f.map((({enabled:e})=>e))))&&n,checking:!0,openKeys:f.map((({openKeys:e})=>e)).reduce(((e=[],t=[])=>(0,o.mergeOpenKeys)(e,t))),setEnabled:(e,r=[])=>{t((0,a.groupActions)(d.map((t=>(0,a.setOpenKeys)([t,...r],{enabled:e})))))},setOpenKeys:(r,n,i=[])=>{t((0,a.groupActions)(f.map((({id:t,openKeys:l})=>(i.length||(n=(0,o.updateIndices)(null!=l?l:(0,o.collectIndices)(e,["required","recommended"]),r,n)),(0,a.setOpenKeys)([t,...i],{openKeys:n}))))))}}}),l.wU)},Lt=e=>{const[t,r]=(0,c.useState)(void 0);return(0,c.useEffect)((()=>{r(void 0)}),[e]),{next:t,onVisit:r}},Ut=e=>{const{editor:{propsMode:t},settings:{typeOfPlay:r}}=e,{editor:{edit3d:n}}=(0,i.zh)(e),o=(0,i.zh)(e),{nodeIds:a,scriptIds:l}=(0,i.bN)(o.editor.selected),c="Product"===t?(0,j.Yt)(e)&&n?[l,a,[o.id]].find((e=>e.length)):[o.id]:4===r?[a,[o.id]].find((e=>e.length)):[l,a,[o.id]].find((e=>e.length));return _t(Mt({},o),{nodes:(0,i.v$)(o),ids:c,isScript:c===l})}},13404:function(e,t,r){"use strict";var n=r(3197),o=r(19104),a=r(42761),i=r(23247),l=r.n(i),c=r(7910),s=r(40985),p=r(50815),u=r(48837),d=Object.defineProperty,f=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&b(e,r,t[r]);if(f)for(var r of f(t))y.call(t,r)&&b(e,r,t[r]);return e},g=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));t.Z=e=>{const{getState:t,dispatch:r}=(0,a.oR)(),{texture2D:i,projectId:d}=(0,a.v9)((({project:t})=>({projectId:t.id,texture2D:(0,s.o$)(t).texture2Ds.find((t=>t.orderId===e))})),a.wU),f=e=>g(void 0,null,(function*(){const{id:r,orderId:o}=yield(0,n.aY)({projectId:t().project.id,name:"texture2D",sceneContent:JSON.stringify({props:h({},e),type:"Texture2D"})});return{id:r,orderId:o,name:"texture2D",type:"Texture2D",props:e}})),m=e=>(0,s.o$)(t().project).texture2Ds.find((t=>t.orderId===e));return{texture2D:i,createTexture2D:f,addTexture2D:(e,...t)=>g(void 0,[e,...t],(function*(e,t={},n=!0){const a=e?yield(e=>g(void 0,null,(function*(){const{data:t}=yield l().get((0,c.GR)(e));return t.props.type="Texture2D",yield f(t.props)})))(e):n?yield(e=>g(void 0,null,(function*(){var t;const r=yield(0,p.E)(yield(0,u.createAsset)(null!=(t=e.name)?t:"Texture2D","Texture2D",e.url)),n=r.files[r.entry];return n.props.type="Texture2D",yield f(n.props)})))(t):yield f(t);return r((0,o.addTexture2D)(a)),a})),getTexture2D:m,updateTexture2D:(e,t)=>g(void 0,null,(function*(){const a=m(e);a&&(yield(0,n.aq)({sceneContent:JSON.stringify({type:"Texture2D",props:h(h({},a.props),t)}),name:a.name||"Texture2D",id:a.id,projectId:d}),r((0,o.updateTexture2D)(e,t)))}))}}},46641:function(e,t,r){"use strict";r.d(t,{D4:function(){return se},Cr:function(){return ue},nm:function(){return ce}});var n={};r.r(n),r.d(n,{EffectMaterial:function(){return R},MobileBumpedDiffuseMaterial:function(){return A},MobileBumpedSpecularMaterial:function(){return B},PBRSpecularMaterial:function(){return V},PBRStandardMaterial:function(){return N},ShurikenParticleMaterial:function(){return T},TrailMaterial:function(){return Z},UnlitMaterial:function(){return D},WaterOceanMaterial:function(){return M}});var o=r(3197),a=r(7910),i=r(38499),l=r(92546),c=r(31618),s=r(48837),p=r(19104),u=r(3207),d=r(58022),f=r(60406),m=r(26840),y=r(70072),b=r(62255),h=r(32078),g=r(22142),v=r(42761);const O={anisoLevel:1,filterMode:1,format:0,height:0,mipmaps:!0,url:"",width:0,wrapModeU:0,wrapModeV:0},k={anisoLevel:1,filterMode:1,format:1,height:0,mipmaps:!0,url:"",width:0,wrapModeU:0,wrapModeV:0},x=[{id:1,label:"草地",value:{type:"MobileBumpedDiffuseMaterial",props:{albedoColor:[1,1,1,1],albedoTexture:{type:"Texture2D",props:{anisoLevel:1,filterMode:1,format:0,height:0,mipmaps:!0,url:"https://creativelab-proxy.bytedance.com/api/upload/bucket/material/a8302c2a11d18a55341214d220ae3fa1.jpg",width:0,wrapModeU:0,wrapModeV:0}},textureCube:{type:"Cubemap",props:{anisoLevel:1,filterMode:1,format:0,height:0,mipmaps:!0,textures:["https://creativelab-proxy.bytedance.com/api/upload/bucket/material/a8302c2a11d18a55341214d220ae3fa1.jpg"],width:0,wrapModeU:0,wrapModeV:0}},normalTexture:O,tilingOffset:[1,1,0,0],name:"草地",cull:2,blend:0,srcBlend:1,dstBlend:771,depthWrite:!0,depthTest:513,renderQueue:2e3}}},{id:2,label:"砖块",value:{type:"MobileBumpedDiffuseMaterial",props:{albedoColor:[1,1,1,1],albedoTexture:{anisoLevel:1,filterMode:1,format:0,height:0,mipmaps:!0,url:"https://creativelab-proxy.bytedance.com/api/upload/bucket/material/457bb4ec8db3757b761f30b931349c19.jpg",width:0,wrapModeU:0,wrapModeV:0},normalTexture:O,tilingOffset:[1,1,0,0],name:"砖块",cull:2,blend:0,srcBlend:1,dstBlend:771,depthWrite:!0,depthTest:513,renderQueue:2e3}}},{id:3,label:"木纹",value:{type:"MobileBumpedDiffuseMaterial",props:{albedoColor:[1,1,1,1],albedoTexture:{anisoLevel:1,filterMode:1,format:0,height:0,mipmaps:!0,url:"https://creativelab-proxy.bytedance.com/api/upload/bucket/material/b16b325d1ad4a92bb290b9be94195963.jpg",width:0,wrapModeU:0,wrapModeV:0},normalTexture:O,tilingOffset:[1,1,0,0],name:"木纹",cull:2,blend:0,srcBlend:1,dstBlend:771,depthWrite:!0,depthTest:513,renderQueue:2e3}}},{id:4,label:"海面",value:{type:"WaterOceanMaterial",props:{colorA:[.01,.1,.2],colorB:[.137,.66,.87],normalTitling:.3,normalStrength:.6,normalSpeed:2,waveTiling:1,waveScale:16,waveSpeed:-1.3,waveStrength:.35,renderQueue:3001,normalTexture:{anisoLevel:1,filterMode:1,format:0,height:0,mipmaps:!1,url:"https://creativelab-proxy.bytedance.com/api/upload/bucket/material/50df1dfaf409a6226f6faeb4468046d5.jpg",width:0,wrapModeU:0,wrapModeV:0},name:"水面",cull:0,blend:1,srcBlend:770,dstBlend:771,depthWrite:!1,depthTest:513}}},{id:5,label:"无光照",value:{type:"UnlitMaterial",props:{renderMode:0,albedoTexture:k,albedoColor:[1,1,1,1],tilingOffset:[1,1,0,0],albedoIntensity:1,enableVertexColor:!1,name:"无光照"}}},{id:6,label:"特效",value:{type:"EffectMaterial",props:{renderMode:0,texture:k,color:[1,1,1,1],tilingOffset:[1,1,0,0],name:"特效"}}},{id:7,label:"PBR",value:{type:"PBRStandardMaterial",props:{renderMode:0,albedoTexture:O,normalTexture:O,parallaxTexture:O,occlusionTexture:O,emissionTexture:O,metallicGlossTexture:O,albedoColor:[1,1,1,1],emissionColor:[1,1,1,1],tilingOffset:[1,1,0,0],smoothness:.5,smoothnessTextureScale:1,smoothnessSource:0,normalTextureScale:1,parallaxTextureScale:.01,occlusionTextureStrength:1,enableEmission:!1,metallic:0,name:"PBR",alphaTestValue:.5}}},{id:10,label:"漫反射",value:{type:"MobileBumpedDiffuseMaterial",props:{albedoColor:[1,1,1,1],albedoTexture:O,normalTexture:O,tilingOffset:[1,1,0,0],name:"漫反射",cull:2,blend:0,srcBlend:1,dstBlend:771,depthWrite:!0,depthTest:513,renderQueue:2e3}}}];var E=r(73946),w={spark:"group",label:"材质名称与内容",content:{spark:"string",index:"name",defaultValue:"material"}},P={spark:"enter",index:"tilingOffset",content:{spark:"grid",content:[{spark:"number",index:0,cols:3,label:"缩放X",step:.03,precision:2},{spark:"number",index:1,cols:3,label:"缩放Y",step:.03,precision:2},{spark:"number",index:2,cols:3,label:"偏移X",step:.03,precision:2},{spark:"number",index:3,cols:3,label:"偏移Y",step:.03,precision:2}]}},j=r(13404),S=r(53983),C=r(22142),I=(e,t)=>({spark:"value",index:e,content(e,r){const{texture2D:n}=(0,j.Z)(e);return{spark:"element",content(){return C.createElement(S.r,{type:"Texture2D",name:t,url:null==n?void 0:n.props.url,deletable:!0,onChange:e=>{return t=this,n=[e],o=function*({orderId:e}){r(e)},new Promise(((e,r)=>{var a=e=>{try{l(o.next(e))}catch(e){r(e)}},i=e=>{try{l(o.throw(e))}catch(e){r(e)}},l=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,i);l((o=o.apply(t,n)).next())}));var t,n,o}})}}}});const A={spark:"grid",content:[w,{spark:"group",label:"材质设置",content:{spark:"grid",content:[(0,E.I)({spark:"color",index:"albedoColor",label:"基础颜色",defaultValue:[0,0,0]}),I("albedoTextureUrl","漫反射贴图"),I("normalTextureUrl","法线贴图"),P]}}]},M={spark:"grid",content:[w,{spark:"group",label:"材质设置",content:{spark:"grid",content:[(0,E.I)({spark:"color",index:"colorA",label:"颜色A",defaultValue:[0,0,0]}),(0,E.I)({spark:"color",index:"colorB",label:"颜色B",defaultValue:[0,0,0]}),I("normalTextureUrl","法线贴图"),{spark:"number",index:"normalTitling",label:"法线重复",defaultValue:1,step:.03,precision:2},{spark:"number",index:"normalStrength",label:"法线强度",defaultValue:1,min:0,step:.03,precision:2},{spark:"number",index:"normalSpeed",label:"法线速度",defaultValue:1,step:.03,precision:2},{spark:"number",index:"waveTiling",label:"波浪重复",defaultValue:1,step:.03,precision:2},{spark:"number",index:"waveScale",label:"波浪缩放",defaultValue:1},{spark:"number",index:"waveSpeed",label:"波浪速度",defaultValue:1,step:.03,precision:2},{spark:"number",index:"waveStrength",label:"波浪强度",defaultValue:1,min:0,step:.03,precision:2}]}}]};var _=e=>({spark:"select",index:"renderMode",label:"渲染模式",tooltip:"渲染模式",options:e,defaultValue:0});const D={spark:"grid",content:[w,{spark:"group",label:"材质设置",content:{spark:"grid",content:[_([{label:"不透明",value:0},{label:"镂空",value:1},{label:"透明",value:2}]),(0,E.I)({spark:"color",index:"albedoColor",label:"颜色",defaultValue:[0,0,0]}),I("albedoTextureUrl","漫反射贴图"),P]}}]},R={spark:"grid",content:[w,{spark:"group",label:"材质设置",content:{spark:"grid",content:[(0,E.I)({spark:"color",index:"color",label:"颜色",defaultValue:[0,0,0]}),I("textureUrl","纹理贴图"),P]}}]},N={spark:"grid",content:[w,{spark:"group",label:"材质设置",content:{spark:"grid",content:[_([{label:"不透明",value:0},{label:"镂空",value:1},{label:"淡入淡出",value:2},{label:"透明",value:3}]),{spark:"check",index:"renderMode",check:{hidden:e=>1!==e},content:{spark:"number",index:"alphaTestValue",label:"镂空值",tooltip:"镂空透明度",step:.03,precision:2,min:0,max:1,defaultValue:.5}},I("albedoTextureUrl","漫反射贴图"),(0,E.I)({spark:"color",index:"albedoColor",label:"反照颜色",defaultValue:[0,0,0]}),I("metallicGlossTextureUrl","金属平滑贴图"),{spark:"check",index:"metallicGlossTextureUrl",check:{hidden:e=>null==e?void 0:e.url},content:{spark:"number",index:"metallic",label:"金属值",tooltip:"金属值",min:0,max:1,defaultValue:.5,step:.03,precision:3}},{spark:"select",index:"smoothnessSource",label:"平滑来源",tooltip:"来源对应贴图的Alpha通道",options:[{label:"金属平滑贴图",value:0},{label:"反照率贴图",value:1}],defaultValue:0},{spark:"check",index:["smoothnessSource","metallicGlossTextureUrl"],check:{hidden:([e,t])=>0===e&&(null==t?void 0:t.url)||1===e},content:{spark:"number",index:"smoothness",label:"平滑值",tooltip:"平滑值",defaultValue:.5,min:0,max:1,step:.03,precision:3}},{spark:"check",index:["smoothnessSource","metallicGlossTextureUrl"],check:{hidden:([e,t])=>0===e&&!(null==t?void 0:t.url)},content:{spark:"number",index:"smoothnessTextureScale",label:"平滑强度",tooltip:"平滑强度",defaultValue:.5,min:0,max:1,step:.03,precision:3}},I("normalTextureUrl","法线贴图"),{spark:"check",index:"normalTextureUrl",check:{hidden:e=>!(null==e?void 0:e.url)},content:{spark:"number",index:"normalTextureScale",label:"法线强度",tooltip:"法线强度",defaultValue:1,step:.03,precision:2}},I("occlusionTextureUrl","遮挡贴图"),{spark:"check",index:"occlusionTextureUrl",check:{hidden:e=>!(null==e?void 0:e.url)},content:{spark:"number",index:"occlusionTextureStrength",label:"遮挡强度",tooltip:"遮挡强度",defaultValue:1,min:0,max:1,step:.03,precision:3}},I("parallaxTextureUrl","高度贴图"),{spark:"check",index:"parallaxTextureUrl",check:{hidden:e=>!(null==e?void 0:e.url)},content:{spark:"number",index:"parallaxTextureScale",label:"高度强度",tooltip:"高度强度",defaultValue:.02,min:.005,max:.08,step:.001,precision:3}},{spark:"label",label:"开启发光",tooltip:"开启发光",content:{spark:"boolean",index:"enableEmission",defaultValue:!0}},{spark:"check",index:"enableEmission",check:{hidden:e=>!e},content:{spark:"grid",content:[I("emissionTextureUrl","发光贴图"),(0,E.I)({spark:"color",index:"emissionColor",label:"反光颜色",defaultValue:[0,0,0]})]}},P]}}]},V={spark:"grid",content:[w,{spark:"group",label:"材质设置",content:{spark:"grid",content:[_([{label:"不透明",value:0},{label:"镂空",value:1},{label:"淡入淡出",value:2},{label:"透明",value:3}]),{spark:"check",index:"renderMode",check:{hidden:e=>1!==e},content:{spark:"number",index:"alphaTestValue",label:"镂空值",tooltip:"镂空透明度",precision:3,step:.03,min:0,max:1,defaultValue:.5}},I("albedoTextureUrl","反照率贴图"),(0,E.I)({spark:"color",index:"albedoColor",label:"反照颜色",defaultValue:[0,0,0]}),I("specularTextureUrl","高光平滑贴图"),{spark:"check",index:"specularTextureUrl",check:{hidden:e=>null==e?void 0:e.url},content:{spark:"color",index:"specularColor",label:"高光颜色",tooltip:"高光颜色"}},{spark:"select",index:"smoothnessSource",label:"平滑来源",tooltip:"平滑来源",options:[{label:"高光平滑贴图",value:0},{label:"反照率贴图",value:1}],defaultValue:0},{spark:"check",index:["smoothnessSource","specularTexture"],check:{hidden:([e,t])=>0===e&&(null==t?void 0:t.url)||1===e},content:{spark:"number",index:"smoothness",label:"平滑值",tooltip:"平滑值",defaultValue:.5,min:0,max:1,precision:3,step:.03}},{spark:"check",index:["smoothnessSource","specularTextureUrl"],check:{hidden:([e,t])=>0===e&&!(null==t?void 0:t.url)},content:{spark:"number",index:"smoothnessTextureScale",label:"平滑强度",tooltip:"平滑强度",defaultValue:.5,min:0,max:1,precision:3,step:.03}},I("normalTextureUrl","法线贴图"),{spark:"check",index:"normalTextureUrl",check:{hidden:e=>!(null==e?void 0:e.url)},content:{spark:"number",index:"normalTextureScale",label:"法线强度",tooltip:"法线强度",defaultValue:1,precision:2,step:.03}},I("occlusionTextureUrl","遮挡贴图"),{spark:"check",index:"occlusionTextureUrl",check:{hidden:e=>!(null==e?void 0:e.url)},content:{spark:"number",index:"occlusionTextureStrength",label:"遮挡强度",tooltip:"遮挡强度",defaultValue:1,min:0,max:1,step:.03,precision:3}},I("parallaxTextureUrl","高度贴图"),{spark:"check",index:"parallaxTextureUrl",check:{hidden:e=>!(null==e?void 0:e.url)},content:{spark:"number",index:"parallaxTextureScale",label:"高度强度",tooltip:"高度强度",defaultValue:.02,min:.005,max:.08,step:.03,precision:3}},{spark:"label",label:"开启发光",tooltip:"开启发光",content:{spark:"boolean",index:"enableEmission",defaultValue:!0}},{spark:"check",index:"enableEmission",check:{hidden:e=>!e},content:{spark:"grid",content:[I("emissionTextureUrl","发光贴图"),{spark:"color",index:"emissionColor",label:"发光颜色",tooltip:"发光颜色"}]}},P]}}]},B={spark:"grid",content:[w,{spark:"group",label:"材质设置",content:{spark:"grid",content:[(0,E.I)({spark:"color",index:"albedoColor",label:"基础颜色",defaultValue:[0,0,0]}),{spark:"slider",index:"shininess",label:"光泽度",tooltip:"光泽度",defaultValue:.078,min:0,max:1,step:.03,precision:3},I("albedoTextureUrl","漫反射贴图"),I("normalTextureUrl","法线贴图"),P]}}]},Z={spark:"grid",content:[w,{spark:"group",label:"材质设置",content:{spark:"grid",content:[{spark:"select",index:"renderMode",defaultValue:1,options:[{label:"叠加",value:1},{label:"混合",value:0}]},(0,E.I)({spark:"color",index:"color",label:"基础颜色",defaultValue:[0,0,0]}),I("textureUrl","纹理贴图"),P]}}]},T=Z;var z=r(23247),L=r.n(z),U=r(40985),F=r(61754),Y=r(73760),$=r(22142),Q=Object.defineProperty,W=Object.defineProperties,J=Object.getOwnPropertyDescriptors,K=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,q=(e,t,r)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,X=(e,t)=>{for(var r in t||(t={}))H.call(t,r)&&q(e,r,t[r]);if(K)for(var r of K(t))G.call(t,r)&&q(e,r,t[r]);return e},ee=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const te=[{id:100,label:"拖尾",value:{type:"TrailMaterial",props:{color:[1,1,1,1],tilingOffset:[1,1,0,0],name:"拖尾",texture:""}}},...x],re=te.map((e=>({name:e.label,type:e.value.type}))),ne=(e,t,r="material",n=!1)=>ee(void 0,null,(function*(){const a=te.find((t=>t.id===e)),{id:i,orderId:l}=yield(0,o.aY)({projectId:t,name:r,sceneContent:JSON.stringify({type:"Material",material:a,_originUrl:"",isCustom:n})});return{id:i,orderId:l,name:r,type:"Material",isCustom:n,_originUrl:"",material:null==a?void 0:a.value}})),oe=(e,t,r,n)=>ee(void 0,null,(function*(){n&&(e.props.name=n);const{id:a,orderId:i}=yield(0,o.aY)({projectId:t,name:"material",sceneContent:JSON.stringify({type:"Material",material:{value:e},_originUrl:"string"==typeof r?r:""})});return{id:a,orderId:i,name:"material",type:"Material",isCustom:!0,cover:"",_originUrl:"string"==typeof r?r:void 0,originOrderId:"string"==typeof r?void 0:r,material:e}})),ae=({item:e,orderId:t,url:r})=>{var n;const[o,a]=(0,g.useState)("");return(0,g.useEffect)((()=>{e?(0,s.captureMaterial)(null!=t?t:r,24,24,.1).then((e=>{a(e)})).catch((e=>{console.log("captureMaterial Error:",e)})):a("")}),[e,t,r]),$.createElement("div",{style:{display:"flex",alignItems:"center",flex:1}},o?$.createElement("img",{src:o,style:{width:"24px",height:"24px",marginRight:"10px"}}):$.createElement(d.Z,{theme:"outline",style:{width:"24px",height:"24px",marginRight:"10px"},size:"24",fill:"#333"}),null!=(n=null==e?void 0:e.name)?n:"默认材质")},ie=(le=ae,e=>{var t=e,{onDelete:r}=t,n=((e,t)=>{var r={};for(var n in e)H.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&K)for(var n of K(e))t.indexOf(n)<0&&G.call(e,n)&&(r[n]=e[n]);return r})(t,["onDelete"]);const[o,a]=(0,g.useState)(!1);return $.createElement("div",{style:{display:"flex",alignItems:"center"},onMouseLeave:()=>{a(!1)},onMouseEnter:()=>{a(!0)}},$.createElement(le,X({},n)),r&&o&&$.createElement(i.Z,{style:{justifySelf:"end"},onClick:e=>{e.stopPropagation(),r()}}))});var le;const ce=()=>{const{dispatch:e,getState:t}=(0,v.oR)(),r=(0,p.useProject)("id"),{addTexture2D:n}=(0,j.Z)();return()=>ee(void 0,null,(function*(){if(!t().project.editor.readOnly&&!t().project.materials.some((e=>!1===e.isCustom))){const t=yield Promise.all(re.map((e=>ee(this,null,(function*(){return(0,s.createAsset)(e.name,e.type,"")}))))),o=[];for(let e=0;e<t.length;e++){const{entry:r,files:a}=t[e],i=a[r];for(let e=0,t=Object.entries(i.props);e<t.length;e++){const[r,o]=t[e];if(r.endsWith("Url")&&a[o]){const e=yield n(void 0,a[o].props,!1);i.props[r]=e.orderId}}o.push(i)}te.forEach((e=>{const t=o.find((t=>t.props.name===e.label&&t.type===e.value.type));t&&(e.value=t)}));const a=yield((e,t)=>ee(void 0,null,(function*(){const r=[];for(let n=0;n<t.length;n++){const o=t[n],a=yield ne(o.id,e);r.push(a)}return r})))(r,te);a.forEach((t=>{e((0,p.addMaterial)(t))}))}}))},se=({type:e,orderId:t,copyLoading:r,onCopy:n,onChange:o,onDelete:i,editable:s=!0})=>{var d;const{dispatch:b}=(0,v.oR)(),{readOnly:h}=(0,p.useProject)("editor"),O=(0,p.useProject)("id"),k=(0,v.v9)((({project:e})=>e.materials)),[x,E]=(0,g.useState)(),{addTexture2D:w}=(0,j.Z)();(0,g.useEffect)((()=>{"string"==typeof t&&""!==t?L().get((0,a.GR)(t)).then((({data:e})=>{E(e)})):E(void 0)}),[t]);const P=k.find((e=>e.orderId===t)),S=t=>{var r,n;return!e||void 0!==(null==t?void 0:t.material)&&("Trail3D"===e?"TrailMaterial"===(null==(r=null==t?void 0:t.material)?void 0:r.type):"TrailMaterial"!==(null==(n=null==t?void 0:t.material)?void 0:n.type))},C=t=>{var r;return!e||void 0!==(null==t?void 0:t.material)&&"Skybox6SidedMaterial"!==(null==(r=null==t?void 0:t.material)?void 0:r.type)},I=k.filter((e=>!1===e.isCustom)).filter(S).filter(C),A=k.filter((e=>!0===e.isCustom)).filter(S).filter(C),{visiting:{prev:M=[],onVisit:_}}=(0,g.useContext)(u.CellContext),D=[{value:"preset",label:"内置材质",children:I.map((e=>{var t;return{value:e.orderId,label:$.createElement(ae,{item:null==(t=null==e?void 0:e.material)?void 0:t.props,orderId:e.orderId})}}))},...A.map((e=>{var t;return{value:e.orderId,label:$.createElement(ie,X({item:null==(t=null==e?void 0:e.material)?void 0:t.props,orderId:null==e?void 0:e.orderId},i?{onDelete:()=>{null==i||i(e.id)}}:{}))}}))],R="string"==typeof t&&""!==t;return $.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},$.createElement(f.Z,{style:{width:"100%",marginRight:"20px"},dropdownMenuColumnStyle:{width:"180px"},value:[t],options:D,disabled:h,onChange:e=>ee(void 0,null,(function*(){if(2===e.length){const t=e[1];o(t)}else{const t=e[0];o(t)}})),placeholder:"请选择材质"},$.createElement("div",{style:{flex:"1",border:"1px solid #f0f0f0",borderRadius:"5px",padding:"3px",marginRight:"20px"}},$.createElement(ae,{item:"string"==typeof t?null==x?void 0:x.props:null==(d=null==P?void 0:P.material)?void 0:d.props,orderId:t}))),s&&$.createElement(m.Z,{title:h?"只读模式不可编辑":void 0===P?"默认材质不可编辑":"编辑材质"},$.createElement(y.Z,{style:{marginRight:"5px"},onClick:()=>ee(void 0,null,(function*(){var e;if("string"==typeof t){let e;for(let t=0,r=Object.entries(x.props);t<r.length;t++){const[n,o]=r[t];n.endsWith("Url")&&"string"==typeof o&&(e=yield w(o),x.props[n]=e.orderId)}const r=yield oe(x,O,t);b((0,p.addMaterial)(r)),o(null==r?void 0:r.orderId),_(M.map((({index:e})=>e)).concat(null==r?void 0:r.id))}else if(P&&!1===P.isCustom){const r=yield oe(P.material,O,t);b((0,p.addMaterial)(r)),r.orderId&&o(null==r?void 0:r.orderId),_(M.map((({index:e})=>e)).concat(null!=(e=null==r?void 0:r.id)?e:P.id))}else P&&_(M.map((({index:e})=>e)).concat(null==P?void 0:P.id))})),disabled:!(void 0!==P||R)||h},$.createElement(l.Z,null))),n&&$.createElement(m.Z,{title:h?"只读模式不可复制":void 0===P?"默认材质不可复制":"复制材质"},$.createElement(y.Z,{disabled:h||!P,loading:r,onClick:n},$.createElement(c.Z,null))))},pe=({name:e,onChange:t})=>{const[r,n]=(0,g.useState)(e);return $.createElement(b.Z,{placeholder:"材质命名",value:r,onChange:e=>{n(e.target.value),t(e.target.value)}})},ue=e=>({spark:"block",status:"static",content:{spark:"value",index:"materialUrls",visit:!0,content(t=[],r){var i,l,c;const{visiting:{next:s=[]}}=(0,g.useContext)(u.CellContext),{dispatch:d,getState:f}=(0,v.oR)(),{deleteMaterial:m}=(()=>{const{getState:e,dispatch:t}=(0,v.oR)();return{deleteMaterial:r=>{return n=function*(){var n;const a=null==(n=e().project.materials.find((e=>e.id===r)))?void 0:n.orderId;return a&&(0,U.QH)(e().project,a)?void F.ZP.error("材质正在使用，无法删除"):(t((0,p.deleteMaterial)(r)),(0,o.r4)(r),a)},new Promise(((e,t)=>{var r=e=>{try{a(n.next(e))}catch(e){t(e)}},o=e=>{try{a(n.throw(e))}catch(e){t(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,o);a((n=n.apply(void 0,null)).next())}));var n}}})(),[y,b]=(0,g.useState)(!1);if(s.length>=1){const e=f().project.materials.find((({id:e})=>e===s[0]));if(e)return{spark:"context",content:{spark:"visit",index:e.id,label:null!=(c=`${null==(l=null==(i=null==e?void 0:e.material)?void 0:i.props)?void 0:l.name}`)?c:"material",content:n[null==e?void 0:e.material.type]},provide(){return{useValue(e,n){const{indexValue:o,indexEntries:a}=(0,u.getIndexer)(e);return{value:(0,v.v9)((({project:{materials:e}})=>{const t=e.find((({id:e})=>e===s[0])),{material:r}=t;return[o(r.props)]}),n),onChange:e=>ee(this,[e],(function*([e]){if(Object.keys(e).includes("url")){const t=""===e.url?{width:0,height:0,isAlpha:0}:yield(0,U.n$)(e.url);e.width=t.width,e.height=t.height,e.format=t.isAlpha?1:0}const n=f().project.materials.find((({id:e})=>e===s[0]));var o,i;n&&(d((0,p.updateMaterial)(n.id,(o=X({},n.material),i={props:X(X({},n.material.props),Object.fromEntries(a(e)))},W(o,J(i))))),r([...t]),(0,U.Ry)(f().project,n.orderId).forEach((({id:e,materialUrls:t})=>{d((0,p.changeProps)([e],{materialUrls:[...t]}))})))}))}}}}}}return{spark:"group",label:"材质",content:{spark:"grid",content:t.map(((n,o)=>{const i=()=>ee(this,null,(function*(){var e;b(!0);const t="string"==typeof n?yield L().get((0,a.GR)(n)):null,r=t?t.data:null==(e=f().project.materials.find((({orderId:e})=>e===n)))?void 0:e.material;let o=r.props.name;r?h.Z.confirm({title:"复制材质",content:$.createElement(pe,{name:o,onChange:e=>{o=e}}),cancelText:"取消",onOk:()=>ee(this,null,(function*(){const e=yield oe((0,Y.cloneDeep)(r),f().project.id,n,o);d((0,p.addMaterial)(e)),b(!1)})),onCancel:()=>{b(!1)}}):(F.ZP.error("没有找到材质"),b(!1))}));return{spark:"element",content(){return $.createElement(se,{type:e.type,orderId:n,copyLoading:y,onCopy:i,onDelete:e=>{const n=m(e);if(n){const e=t.slice();e[e.indexOf(n)]="",r(e)}},onChange:e=>{const n=t.slice();n[o]=e,r(n)}})}}}))}}}}})},21004:function(e,t,r){"use strict";r.d(t,{u:function(){return p}});var n=r(38499),o=r(63150),a=r(70072),i=r(52142),l=r(22142);const c=e=>{switch(e){case"sphere":return{localOffset:[0,0,0],radius:.5,type:"sphere"};case"staticPlane":return{localOffset:[0,0,0],type:"staticPlane",normal:[0,1,0]};case"capsule":return{length:1.25,localOffset:[0,0,0],orientation:1,radius:.5,type:"capsule"};case"cylinder":return{length:1,localOffset:[0,0,0],orientation:1,radius:.5,type:"cylinder"};case"mesh":return{localOffset:[0,0,0],type:"mesh"};case"cone":return{type:"cone",radius:.5,length:1,orientation:1};default:return{type:"box3d",localOffset:[0,0,0],size3d:[1,1,1]}}},s={staticPlane:()=>({spark:"grid",content:[]}),box3d:e=>({spark:"label",label:"尺寸大小",content:{spark:"enter",index:"colliders",content:{spark:"enter",index:e,content:{spark:"enter",index:"size3d",content:{spark:"grid",content:[{spark:"number",index:"0",label:"X",cols:2,width:16,defaultValue:0,step:.03,precision:2},{spark:"number",index:"1",label:"Y",cols:2,width:16,defaultValue:0,step:.03,precision:2},{spark:"number",index:"2",label:"Z",cols:2,width:16,defaultValue:0,step:.03,precision:2}]}}}}}),sphere:e=>({spark:"enter",index:"colliders",content:{spark:"enter",index:e,content:{spark:"number",index:"radius",label:"半径",min:0,defaultValue:0,step:.03,precision:2}}}),capsule:e=>({spark:"enter",index:"colliders",content:{spark:"enter",index:e,content:{spark:"grid",content:[{spark:"number",index:"radius",label:"半径",min:0,defaultValue:0,step:.03,precision:2},{spark:"number",index:"length",label:"长度",min:0,defaultValue:0,step:.03,precision:2},{spark:"select",index:"orientation",options:[{label:"x轴",value:0},{label:"y轴",value:1},{label:"z轴",value:2}]}]}}}),cylinder:e=>({spark:"enter",index:"colliders",content:{spark:"enter",index:e,content:{spark:"grid",content:[{spark:"number",index:"radius",label:"半径",min:0,defaultValue:0,step:.03,precision:2},{spark:"number",index:"length",label:"高度",min:0,defaultValue:0,step:.03,precision:2},{spark:"select",index:"orientation",options:[{label:"x轴",value:0},{label:"y轴",value:1},{label:"z轴",value:2}]}]}}}),mesh:()=>({spark:"grid",content:[]}),cone:e=>({spark:"enter",index:"colliders",content:{spark:"enter",index:e,content:{spark:"grid",content:[{spark:"number",index:"radius",label:"半径",min:0,step:.03,precision:2,defaultValue:0},{spark:"number",index:"length",label:"高度",min:0,step:.03,precision:2,defaultValue:0},{spark:"select",index:"orientation",options:[{label:"x轴",value:0},{label:"y轴",value:1},{label:"z轴",value:2}]}]}}})},p=e=>({spark:"group",label:"碰撞体",hidden:e.multiple,content:{spark:"block",content:{spark:"enter",index:"physics",content:{spark:"grid",content:[{spark:"value",index:"colliders",content(e=[],t){return{spark:"grid",content:e.map(((r,o)=>{var a;const p=r=>{const n=e.slice();n[o]=c(r),t(n)},u=()=>{const r=e.slice();r.splice(o,1),t(r)};return{spark:"grid",content:[{spark:"element",content:()=>l.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},l.createElement("span",null,"碰撞体",o+1),l.createElement(n.Z,{onClick:u}))},{spark:"element",content:e=>e({spark:"select",label:"类型",options:i.Z1,value:r.type,onChange:p})},{spark:"label",label:"偏移量",content:{spark:"enter",index:"colliders",content:{spark:"enter",index:o,content:{spark:"enter",index:"localOffset",content:{spark:"grid",content:[{spark:"number",index:"0",label:"X",cols:2,width:16,defaultValue:0,step:.03,precision:2},{spark:"number",index:"1",label:"Y",cols:2,width:16,defaultValue:0,step:.03,precision:2},{spark:"number",index:"2",label:"Z",cols:2,width:16,defaultValue:0,step:.03,precision:2}]}}}}},null==(a=s[r.type])?void 0:a.call(s,o)]}}))}}},{spark:"value",index:"colliders",content(e=[],t){return{spark:"element",content:()=>l.createElement(a.Z,{block:!0,onClick:()=>{const r=e.slice();r.push(c()),t(r)},icon:l.createElement(o.Z,null)},"新增")}}}]}}}})},48001:function(e,t,r){"use strict";r.d(t,{c:function(){return c}});var n=r(52142),o=r(70072),a=r(42761),i=r(43825),l=r(22142);const c=()=>({spark:"group",label:"物理",content:{spark:"grid",content:[{spark:"check",index:"physics",check:{hidden:e=>["none",void 0].includes(null==e?void 0:e.type)},content:{spark:"grid",content:[{spark:"value",index:"layer",cols:5,content(){return{spark:"select",index:"layer",label:"碰撞组",defaultValue:0,options:(0,a.v9)((({project:{settings:{layerCollisionName:e=[]}}})=>e)).map((({name:e,key:t})=>({label:e,value:Number(t)})))}}},{spark:"element",cols:1,content(){return l.createElement(o.Z,{onClick:i.H.showModal},"设置")}}]}},{spark:"enter",index:"physics",content:{spark:"grid",content:[{spark:"select",index:"type",label:"物理类型",tooltip:"物理类型",width:96,options:n.AA,defaultValue:"none"},{spark:"check",index:"type",check:{hidden:e=>["none",void 0].includes(e)},content:{spark:"grid",content:[{spark:"label",label:"传感器",tooltip:"是否是传感器，传感器能够触发碰撞事件，但不会产生碰撞反应",content:{spark:"boolean",index:"isTrigger",defaultValue:!1}},{spark:"check",index:"type",check:{hidden:e=>"dynamic"!==e},content:{spark:"grid",content:[{spark:"number",index:"mass",label:"质量",tooltip:"物体质量",min:1,defaultValue:1,step:.03,precision:2},{spark:"number",index:"linearDamping",label:"线性阻尼",tooltip:"线性速度阻尼系数",min:0,max:10,defaultValue:0,step:.03,precision:2},{spark:"number",index:"angularDamping",label:"旋转阻尼",tooltip:"旋转速度阻尼系数",min:0,max:1,defaultValue:0,step:.03,precision:2},{spark:"enter",index:"linearVelocity",content:{spark:"label",label:"线速度",tooltip:"物体线速度",content:{spark:"grid",content:[{spark:"number",index:0,label:"X",cols:2,width:16,defaultValue:0,step:.03,precision:2},{spark:"number",index:1,label:"Y",cols:2,width:16,defaultValue:0,step:.03,precision:2},{spark:"number",index:2,label:"Z",cols:2,width:16,defaultValue:0,step:.03,precision:2}]}}},{spark:"enter",index:"angularVelocity",content:{spark:"label",label:"角速度",tooltip:"物体角速度",content:{spark:"grid",content:[{spark:"number",index:0,label:"X",cols:2,width:16,defaultValue:0,step:.03,precision:2},{spark:"number",index:1,label:"Y",cols:2,width:16,defaultValue:0,step:.03,precision:2},{spark:"number",index:2,label:"Z",cols:2,width:16,defaultValue:0,step:.03,precision:2}]}}}]}},{spark:"slider",index:"restitution",label:"弹性系数",tooltip:"弹性系数",defaultValue:0,precision:0,min:0,max:1,unit:"%",ratio:100,inputNumber:!0},{spark:"slider",index:"friction",label:"摩擦系数",tooltip:"摩擦系数",defaultValue:.2,min:0,max:1,unit:"%",ratio:100,precision:0,inputNumber:!0}]}}]}}]}})},39139:function(e,t,r){"use strict";r.d(t,{EP:function(){return v},GD:function(){return k},sf:function(){return O}});var n=r(33058),o=r(72458),a=r(22669),i=r(40985),l=r(16969),c=r(61754),s=r(70072),p=r(26840),u=r(22142),d=r(42761),f=r(99535),m=r(59356),y=r(57558),b=r(76566),h=r(19104),g=r(22142);const v=[{label:"无",value:0},{label:"淡入步入",value:1},{label:"镜头拉近",value:2}],O={spark:"group",label:"VR 效果设置",content:{spark:"grid",content:[{spark:"label",label:"配置文件",content:{spark:"value",index:["dataUrl","startPanoramaId"],content([e],t){return{spark:"element",content:()=>{const{getState:r}=(0,d.oR)(),[i,f]=(0,u.useState)(!1),{initialPanoramaState:v,replaceDataInPanoramaEdit:O}=(0,a.KW)(),{uploadXingfuliAsset:k}=(0,a.Yj)(),{onChange:x}=(0,h.useEditor)(0,"loading");return g.createElement(g.Fragment,null,e&&g.createElement(g.Fragment,null,g.createElement(n.Z,{style:{marginLeft:"10px",color:"green"},component:m.Z}),g.createElement("span",{style:{margin:"0 10px"}},"已配置")),g.createElement(l.Z,{disabled:i,showUploadList:!1,accept:".json,.zip",beforeUpload:e=>{return n=this,null,o=function*(){try{f(!0),x(!0);const n=r().project.editor.panoramaEdit,o=yield k(e);if((0,b.Yt)(r().project))t([,-1]),yield O(o,n.panoramaSpaceId);else{const[e]=yield v(o);e&&t([e,-1])}}catch(e){c.ZP.error(e.message)}finally{return f(!1),x(!1),!1}},new Promise(((e,t)=>{var r=e=>{try{i(o.next(e))}catch(e){t(e)}},a=e=>{try{i(o.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,a);i((o=o.apply(n,null)).next())}));var n,o}},g.createElement(s.Z,{icon:g.createElement(o.Z,null),loading:i,type:e?"dashed":"primary"},e?"替换数据":"导入数据",e&&g.createElement(p.Z,{title:"原有数据将被覆盖"},g.createElement(n.Z,{component:y.Z,style:{color:"#f5a623"}})))))}}}}},{spark:"label",label:"初始全景",content:{spark:"value",index:"dataUrl",content(e){var t,r;const{getState:n}=(0,d.oR)();return{spark:"select",options:(null!=(r=null==(t=(0,i.HE)(n().project).find((t=>t.orderId===e)))?void 0:t.panoramas)?r:[]).map((e=>({label:e.name,value:e.id}))),index:"startPanoramaId"}}}},{spark:"label",label:"进场动画",content:{spark:"select",index:"enterAnimationType",options:v,defaultValue:0}},{spark:"label",label:"开启陀螺仪",content:{spark:"boolean",index:"gyroscopeEnabled",defaultValue:!1}}]}},k=(e,t)=>({spark:"grid",content:[f.pb].map((r=>r(e,t))).concat([O])})},24596:function(e,t,r){"use strict";r.d(t,{G:function(){return It}});var n,o=r(24202),a=r(26840),i=r(26750),l=r(50969),c=r(62732),s=r(73760),p=r(22142),u=["title","titleId"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}var f,m=function(e,t){var r=e.title,o=e.titleId,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,u);return p.createElement("svg",d({className:"bezier-line",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 125 85",ref:t,"aria-labelledby":o},a),r?p.createElement("title",{id:o},r):null,n||(n=p.createElement("path",{d:"M1 84C85 136 40-51 124 1"})))},y=(0,p.forwardRef)(m),b=(r.p,["title","titleId"]);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}var g,v=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,b);return p.createElement("svg",h({className:"bezier-line",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 125 85",ref:t,"aria-labelledby":n},o),r?p.createElement("title",{id:n},r):null,f||(f=p.createElement("path",{d:"M1 84c44 1 81.5 48.6 123-83"})))},O=(0,p.forwardRef)(v),k=(r.p,["title","titleId"]);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x.apply(this,arguments)}var E,w=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,k);return p.createElement("svg",x({className:"bezier-line",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 125 85",ref:t,"aria-labelledby":n},o),r?p.createElement("title",{id:n},r):null,g||(g=p.createElement("path",{d:"M1 84C42.5-47.6 80 0 124 1"})))},P=(0,p.forwardRef)(w),j=(r.p,["title","titleId"]);function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S.apply(this,arguments)}var C,I=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,j);return p.createElement("svg",S({className:"bezier-line",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 125 85",ref:t,"aria-labelledby":n},o),r?p.createElement("title",{id:n},r):null,E||(E=p.createElement("path",{d:"M1 84l.24-.45 1.24-.2 1.24.06 1.24.31 1.24-.22 1.24-.91 1.24-.66 1.24-.4 1.24-.15 1.24.1 1.24.36 1.24.61 1.24.87 1.24-.14 1.24-2.09 1.24-1.84 1.24-1.58 1.24-1.33 1.24-1.07 1.24-.83 1.24-.56 1.24-.31 1.24-.06 1.24.2 1.24.45 1.24.7 1.24.96 1.24 1.21 1.24 1.47 1.24 1.72 1.24 1.98 1.24.96 1.24-4.44 1.24-4.2 1.24-3.93 1.24-3.69 1.24-3.43 1.24-3.17 1.24-2.93 1.24-2.67 1.24-2.41 1.24-2.16 1.24-1.9 1.24-1.66 1.24-1.39 1.24-1.15 1.24-.89 1.24-.63 1.24-.38L62 42l1.24-.13 1.24-.38 1.24-.63 1.24-.89 1.24-1.15 1.24-1.39 1.24-1.66 1.24-1.9 1.24-2.16 1.24-2.42 1.24-2.66 1.24-2.93 1.24-3.17 1.24-3.43 1.24-3.69 1.24-3.93 1.24-4.2L84.32.84l1.24.96 1.24 1.98 1.24 1.72 1.24 1.47 1.24 1.21 1.24.96 1.24.7 1.24.45 1.24.2 1.24-.06 1.24-.31 1.24-.57 1.24-.82 1.24-1.07 1.24-1.33 1.24-1.58 1.24-1.84 1.24-2.09 1.24-.14 1.24.87 1.24.61 1.24.36 1.24.1 1.24-.15 1.24-.4 1.24-.66L117.8.5l1.24-.22 1.24.31 1.24.06 1.24-.2"})))},A=(0,p.forwardRef)(I),M=(r.p,["title","titleId"]);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(this,arguments)}var D,R=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,M);return p.createElement("svg",_({className:"bezier-line",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 125 85",ref:t,"aria-labelledby":n},o),r?p.createElement("title",{id:n},r):null,C||(C=p.createElement("path",{d:"M1 84l.24-.51 1.24-.39 1.24-.26 1.24-.13 1.24-.01 1.24.12 1.24.25 1.24.38 1.24.5L12.4 83l1.24-.97 1.24-.85 1.24-.72 1.24-.6 1.24-.47 1.24-.34 1.24-.21 1.24-.09 1.24.04 1.24.17 1.24.29 1.24.43 1.24.54 1.24.68 1.24.8 1.24.93 1.24 1.06 1.24-1.34 1.24-2.15 1.24-2.03 1.24-1.9 1.24-1.77 1.24-1.65 1.24-1.52 1.24-1.39 1.24-1.26 1.24-1.14 1.24-1.01 1.24-.88 1.24-.76 1.24-.63 1.24-.5 1.24-.38 1.24-.25 1.24-.12 1.24.01 1.24.13 1.24.26 1.24.39 1.24.51 1.24.64 1.24.77 1.24.9 1.24 1.02 1.24 1.15 1.24 1.27 1.24 1.41L71.92 73l1.24 1.66 1.24 1.78 1.24 1.91 1.24 2.04 1.24 2.17 1.24-.23 1.24-4.51 1.24-4.39 1.24-4.25 1.24-4.13 1.24-4 1.24-3.88 1.24-3.75 1.24-3.62 1.24-3.49 1.24-3.37L93 39.7l1.24-3.11 1.24-2.99 1.24-2.85 1.24-2.74 1.24-2.6 1.24-2.48 1.24-2.35 1.24-2.22 1.24-2.1 1.24-1.97 1.24-1.84 1.24-1.71 1.24-1.59 1.24-1.46 1.24-1.34 1.24-1.2 1.24-1.08 1.24-.96 1.24-.82 1.24-.7 1.24-.57 1.24-.45 1.24-.32 1.24-.19"})))},N=(0,p.forwardRef)(R),V=(r.p,["title","titleId"]);function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B.apply(this,arguments)}var Z,T=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,V);return p.createElement("svg",B({className:"bezier-line",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 125 85",ref:t,"aria-labelledby":n},o),r?p.createElement("title",{id:n},r):null,D||(D=p.createElement("path",{d:"M1 84l.24-.06 1.24-.19 1.24-.32 1.24-.45 1.24-.57 1.24-.7 1.24-.82 1.24-.96 1.24-1.08 1.24-1.2 1.24-1.34 1.24-1.46 1.24-1.59 1.24-1.71 1.24-1.84 1.24-1.97 1.24-2.1 1.24-2.22 1.24-2.35 1.24-2.48 1.24-2.6 1.24-2.74 1.24-2.85 1.24-2.99L31 44.3l1.24-3.24 1.24-3.37 1.24-3.49 1.24-3.62 1.24-3.75 1.24-3.88 1.24-4 1.24-4.13 1.24-4.25 1.24-4.39 1.24-4.51 1.24-.23 1.24 2.17 1.24 2.04 1.24 1.91 1.24 1.78L52.08 11l1.24 1.53 1.24 1.41 1.24 1.27 1.24 1.15 1.24 1.02 1.24.9 1.24.77 1.24.64 1.24.51 1.24.39 1.24.26 1.24.13 1.24.01 1.24-.12 1.24-.25 1.24-.38 1.24-.5 1.24-.63 1.24-.76 1.24-.88 1.24-1.01 1.24-1.14 1.24-1.26 1.24-1.39 1.24-1.52 1.24-1.65 1.24-1.77 1.24-1.9 1.24-2.03 1.24-2.15L90.52.31l1.24 1.06L93 2.3l1.24.8 1.24.68 1.24.54 1.24.43 1.24.29 1.24.17 1.24.04 1.24-.09 1.24-.21 1.24-.34 1.24-.47 1.24-.6 1.24-.72 1.24-.85L111.6 1l1.24-.95 1.24.5 1.24.38 1.24.25 1.24.12 1.24-.01 1.24-.13 1.24-.26 1.24-.39"})))},z=(0,p.forwardRef)(T),L=(r.p,["title","titleId"]);function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U.apply(this,arguments)}var F,Y=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,L);return p.createElement("svg",U({className:"bezier-line",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 125 85",ref:t,"aria-labelledby":n},o),r?p.createElement("title",{id:n},r):null,Z||(Z=p.createElement("path",{d:"M1 84C81.25 85 43.75 0 124 1"})))},$=(0,p.forwardRef)(Y),Q=(r.p,["title","titleId"]);function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W.apply(this,arguments)}var J,K=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Q);return p.createElement("svg",W({className:"bezier-line",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 125 85",ref:t,"aria-labelledby":n},o),r?p.createElement("title",{id:n},r):null,F||(F=p.createElement("path",{d:"M1 84c39 1 82.75 1 123-83"})))},H=(0,p.forwardRef)(K),G=(r.p,["title","titleId"]);function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q.apply(this,arguments)}var X,ee=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,G);return p.createElement("svg",q({className:"bezier-line",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 125 85",ref:t,"aria-labelledby":n},o),r?p.createElement("title",{id:n},r):null,J||(J=p.createElement("path",{d:"M1 84C41.25 0 85 0 124 1"})))},te=(0,p.forwardRef)(ee),re=(r.p,["title","titleId"]);function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ne.apply(this,arguments)}var oe,ae=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,re);return p.createElement("svg",ne({className:"bezier-line",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 125 85",ref:t,"aria-labelledby":n},o),r?p.createElement("title",{id:n},r):null,X||(X=p.createElement("path",{d:"M1 84l.24-.02 1.24-.02 1.24-.01 1.24-.02 1.24-.01 1.24-.01h1.24l1.24.01 1.24.02 1.24.03 1.24.05 1.24.06 1.24.07 1.24.08 1.24.08 1.24.07 1.24.04 1.24.02 1.24-.03 1.24-.08 1.24-.15 1.24-.21 1.24-.28 1.24-.33 1.24-.37 1.24-.37 1.24-.33 1.24-.26 1.24-.12 1.24.08 1.24.32 1.24.62 1.24.93 1.24 1.25 1.24 1.52 1.24 1.71 1.24 1.78 1.24 1.66 1.24 1.34 1.24.75 1.24-.11 1.24-1.23 1.24-2.57 1.24-4.05 1.24-5.56 1.24-6.92 1.24-7.97 1.24-8.45 1.24-8.16L62 42l1.24-6.85 1.24-8.16 1.24-8.45 1.24-7.97 1.24-6.92 1.24-5.56 1.24-4.05 1.24-2.57 1.24-1.23 1.24-.11 1.24.75 1.24 1.34 1.24 1.66 1.24 1.78 1.24 1.72 1.24 1.51L83.08.14l1.24.93 1.24.62 1.24.32 1.24.08 1.24-.12 1.24-.26 1.24-.33L93 1.01l1.24-.37 1.24-.33 1.24-.28 1.24-.21 1.24-.15 1.24-.08 1.24-.03 1.24.02 1.24.04 1.24.07 1.24.08 1.24.08 1.24.07 1.24.06 1.24.05 1.24.03 1.24.02 1.24.01h1.24l1.24-.01 1.24-.01 1.24-.02 1.24-.01 1.24-.02"})))},ie=(0,p.forwardRef)(ae),le=(r.p,["title","titleId"]);function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ce.apply(this,arguments)}var se,pe=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,le);return p.createElement("svg",ce({className:"bezier-line",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 125 85",ref:t,"aria-labelledby":n},o),r?p.createElement("title",{id:n},r):null,oe||(oe=p.createElement("path",{d:"M1 84l.24.03 1.24-.02 1.24-.02 1.24-.02 1.24-.03 1.24-.02 1.24-.03 1.24-.02 1.24-.02 1.24-.01 1.24-.01h1.24l1.24.01 1.24.02 1.24.02 1.24.04 1.24.05 1.24.06 1.24.06 1.24.07 1.24.08 1.24.06 1.24.07 1.24.05 1.24.04 1.24.03h1.24l1.24-.03 1.24-.05 1.24-.08 1.24-.11 1.24-.14 1.24-.16 1.24-.19 1.24-.19 1.24-.21 1.24-.19 1.24-.18 1.24-.16 1.24-.11 1.24-.07h1.24l1.24.07 1.24.15 1.24.23 1.24.32 1.24.39 1.24.46 1.24.52 1.24.55 1.24.57 1.24.56 1.24.51 1.24.44 1.24.32 1.24.18 1.24.01 1.24-.2 1.24-.42 1.24-.66 1.24-.88 1.24-1.11 1.24-1.31 1.24-1.46 1.24-1.57 1.24-1.61 1.24-1.58 1.24-1.45 1.24-1.23 1.24-.92 1.24-.51 1.24-.01 1.24.56 1.24 1.19L93 76.58l1.24 2.5 1.24 3.14 1.24 3.69 1.24 4.14 1.24 4.45 1.24 4.56 1.24 4.46 1.24 4.1 1.24 3.48 1.24 2.6 1.24 1.43 1.24.04 1.24-1.59 1.24-3.36 1.24-5.22 1.24-7.09 1.24-8.87 1.24-10.44 1.24-11.73 1.24-12.57 1.24-12.9 1.24-12.6 1.24-11.6 1.24-9.86"})))},ue=(0,p.forwardRef)(pe),de=(r.p,["title","titleId"]);function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fe.apply(this,arguments)}var me,ye=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,de);return p.createElement("svg",fe({className:"bezier-line",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 125 85",ref:t,"aria-labelledby":n},o),r?p.createElement("title",{id:n},r):null,se||(se=p.createElement("path",{d:"M1 84l.24-7.34 1.24-9.86 1.24-11.6 1.24-12.6L6.2 29.7l1.24-12.57L8.68 5.4 9.92-5.04l1.24-8.87L12.4-21l1.24-5.22 1.24-3.36 1.24-1.59 1.24.04 1.24 1.43 1.24 2.6 1.24 3.48 1.24 4.1 1.24 4.46 1.24 4.56 1.24 4.45 1.24 4.14 1.24 3.69 1.24 3.14L31 7.42l1.24 1.85 1.24 1.19 1.24.56 1.24-.01 1.24-.51 1.24-.92 1.24-1.23 1.24-1.45 1.24-1.58 1.24-1.61 1.24-1.57L45.88.68l1.24-1.31 1.24-1.11 1.24-.89 1.24-.65 1.24-.42 1.24-.2 1.24.01 1.24.18 1.24.32 1.24.44 1.24.51 1.24.56 1.24.57 1.24.55 1.24.52 1.24.46 1.24.39 1.24.32 1.24.23 1.24.15 1.24.07h1.24l1.24-.07 1.24-.11 1.24-.16 1.24-.18 1.24-.19L80.6.46l1.24-.19 1.24-.19 1.24-.16 1.24-.14 1.24-.11 1.24-.08 1.24-.05 1.24-.03h1.24L93-.46l1.24.04 1.24.05 1.24.07 1.24.06 1.24.08 1.24.07 1.24.06 1.24.06 1.24.05 1.24.04 1.24.02 1.24.02 1.24.01h1.24l1.24-.01 1.24-.01 1.24-.02 1.24-.02 1.24-.03 1.24-.02 1.24-.03 1.24-.02 1.24-.02 1.24-.02"})))},be=(0,p.forwardRef)(ye),he=(r.p,["title","titleId"]);function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ge.apply(this,arguments)}var ve=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,he);return p.createElement("svg",ge({className:"bezier-line",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 125 85",ref:t,"aria-labelledby":n},o),r?p.createElement("title",{id:n},r):null,me||(me=p.createElement("path",{d:"M1 84 L 124 1"})))},Oe=(0,p.forwardRef)(ve);r.p;const ke={BackIn:O,BackOut:P,BackInOut:y,BounceIn:N,BounceOut:z,BounceInOut:A,CubicIn:H,CubicOut:te,CubicInOut:$,ElasticIn:ue,ElasticOut:be,ElasticInOut:ie,LinearNone:Oe};var xe=r(76193),Ee=r(64623),we=r(70072),Pe=r(80926),je=r(22142);const Se=({previewDisable:e,previewHelpVisible:t,resetVisible:r,onHelp:n,onPreview:o,onReset:a})=>je.createElement(je.Fragment,null,t&&je.createElement("div",{style:{display:"flex",alignItems:"center"}},je.createElement(we.Z,{className:(0,c.iv)({fontSize:"12px",cursor:"pointer","& .anticon + span":{marginLeft:"4px"},"&:hover":{color:"#3955F6"}}),type:"text",size:"small",disabled:e,icon:je.createElement(xe.Z,null),onClick:o},"预览效果"),je.createElement(Pe.Z.Link,{style:{fontSize:"12px",color:"#3955F6"},target:"_blank",onClick:n},"帮助")),r&&je.createElement(we.Z,{className:(0,c.iv)({fontSize:"12px",cursor:"pointer","& .anticon + span":{marginLeft:"4px"},"&:hover":{color:"#3955F6"}}),type:"text",size:"small",icon:je.createElement(Ee.Z,null),onClick:a},"恢复默认"));var Ce=r(2961),Ie=r(62255),Ae=r(22142),Me=Math.pow,_e=({value:e,onChange:t})=>{const[r,n]=(0,p.useState)(""),[o,a]=(0,p.useState)(De(e).join(",")),i=(0,p.useRef)(e);return(0,p.useEffect)((()=>{i.current.some(((t,r)=>De(t)!==De(e[r])))&&(a(De(e).join(",")),n(""))}),[e]),Ae.createElement(Ce.Z.Item,{label:"当前值",validateStatus:r&&"error",help:r,className:(0,c.iv)({padding:"0 7px",".ant-input":{height:20,paddingLeft:5,paddingRight:5},".ant-form-item-label > label":{fontSize:"12px",height:"auto"},".ant-form-item-explain-error":{fontSize:"12px"}})},Ae.createElement(Ie.Z,{value:o,onChange:({currentTarget:{value:e}})=>{try{a(e);const r=e.trim().split(",").map(Number);if(i.current=r,4!==r.length||r.some((e=>!(0,s.isFinite)(e))))throw new Error("数值不合法");if(r.some(((e,t)=>t%2==0&&(e<0||e>1))))throw new Error("x值必须在 [0,1] 范围内");n(""),t(r)}catch(e){n(e.message)}}}))};const De=e=>{const t=e=>{const t=Me(10,2);return Math.round(e*t)/t};return(0,s.isArray)(e)?e.map(t):t(e)};var Re=r(40985),Ne=r(18356);const Ve=114.91,Be=[25,5,25,5];var Ze={main:(0,c.iv)({position:"absolute",bottom:"-4px",right:"-4px",width:"8px",height:"8px",zIndex:10,background:"#7dc757",opacity:0,transitionProperty:"opacity, transform",transitionDelay:"0s, 0.4s",transitionDuration:"0.3s, 0.6s",animationDelay:"0.4s",animationDuration:"1s",animationFillMode:"both"}),top:(0,c.iv)({position:"absolute",top:0,left:0,border:"4px solid transparent",borderRightColor:"#7dc757",transform:"translateX(-100%)"}),animate:(0,c.iv)({opacity:1}),cubicInOut:(0,c.iv)({transform:"translateY(-114.91px)",transitionTimingFunction:"cubic-bezier(0.65, 0, 0.35, 1)"}),cubicIn:(0,c.iv)({transform:"translateY(-114.91px)",transitionTimingFunction:"cubic-bezier(0.32, 0, 0.67, 0)"}),cubicOut:(0,c.iv)({transform:"translateY(-114.91px)",transitionTimingFunction:"cubic-bezier(0.61, 1, 0.88, 1)"}),backInOut:(0,c.iv)({transform:"translateY(-114.91px)",transitionTimingFunction:"cubic-bezier(0.68, -0.6, 0.32, 1.6)"}),backIn:(0,c.iv)({transform:"translateY(-114.91px)",transitionTimingFunction:"cubic-bezier(0.36, 0, 0.66, -0.56)"}),backOut:(0,c.iv)({transform:"translateY(-114.91px)",transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1)"}),linearNone:(0,c.iv)({transform:"translateY(-114.91px)",transitionTimingFunction:"linear"}),elasticIn:(0,c.iv)({animationName:c.F4`
      0% {
        transform: translateY(0);
      }
    
      4% {
        transform: translateY(-${.045964}px);
      }
    
      8% {
        transform: translateY(-${.183856}px);
      }
    
      14% {
        transform: translateY(-${.195347}px);
      }
    
      18% {
        transform: translateY(${.045964}px);
      }
    
      26% {
        transform: translateY(${.6664779999999999}px);
      }
    
      28% {
        transform: translateY(${.6320049999999999}px);
      }
    
      40% {
        transform: translateY(-${1.7925959999999999}px);
      }
    
      42% {
        transform: translateY(-${1.884524}px);
      }
    
      56% {
        transform: translateY(${5.320333}px);
      }
    
      58% {
        transform: translateY(${5.056039999999999}px);
      }
    
      72% {
        transform: translateY(-${15.076192}px);
      }
    
      86% {
        transform: translateY(${42.585646}px);
      }
    
      100% {
        transform: translateY(-${Ve}px);
      }
    }`}),elasticOut:(0,c.iv)({animationName:c.F4`
    0% {
      transform: translateY(0);
    }
  
    16% {
      transform: translateY(-${151.991457}px);
    }
  
    28% {
      transform: translateY(-${99.833808}px);
    }
  
    44% {
      transform: translateY(-${120.230333}px);
    }
  
    59% {
      transform: translateY(-${113.025476}px);
    }
  
    73% {
      transform: translateY(-${115.576478}px);
    }
  
    88% {
      transform: translateY(-${114.68018}px);
    }
  
    100% {
      transform: translateY(-${Ve}px);
    }`}),elasticInOut:(0,c.iv)({animationName:c.F4`
    0% {
      transform: translateY(0);
    }

    4% {
      transform: translateY(-${.091928}px);
    }

    8% {
      transform: translateY(-${.11491}px);
    }

    18% {
      transform: translateY(${.597532}px);
    }

    20% {
      transform: translateY(${.44814899999999996}px);
    }

    28% {
      transform: translateY(-${2.700385}px);
    }

    30% {
      transform: translateY(-${2.746349}px);
    }

    38% {
      transform: translateY(${10.652157}px);
    }

    40% {
      transform: translateY(${13.501924999999998}px);
    }

    60% {
      transform: translateY(-${128.411925}px);
    }

    62% {
      transform: translateY(-${125.562157}px);
    }

    70% {
      transform: translateY(-${112.16365099999999}px);
    }

    72% {
      transform: translateY(-${112.209615}px);
    }

    80% {
      transform: translateY(-${115.358149}px);
    }

    82% {
      transform: translateY(-${115.50753200000001}px);
    }

    90% {
      transform: translateY(-${114.875527}px);
    }

    92% {
      transform: translateY(-${114.79509}px);
    }

    100% {
      transform: translateY(-${Ve}px);
    }
  `}),bounceIn:(0,c.iv)({animationName:c.F4`
      0% {
        transform: translateY(0);
      }
    
      4% {
        transform: translateY(-${1.769614}px);
      }
    
      8% {
        transform: translateY(-${.758406}px);
      }
    
      18% {
        transform: translateY(-${7.181875}px);
      }
    
      26% {
        transform: translateY(-${1.8730329999999997}px);
      }
    
      46% {
        transform: translateY(-${28.704518}px);
      }
    
      64% {
        transform: translateY(-${2.286709}px);
      }
    
      76% {
        transform: translateY(-${64.855204}px);
      }
    
      88% {
        transform: translateY(-${102.396301}px);
      }
    
      100% {
        transform: translateY(-${Ve}px);
      }
    `}),bounceOut:(0,c.iv)({animationName:c.F4`
      0% {
        transform: translateY(0);
      }
      12% {
        transform: translateY(-${12.513698999999999}px);
      }
    
      24% {
        transform: translateY(-${50.054795999999996}px);
      }
    
      36% {
        transform: translateY(-${112.623291}px);
      }
    
      54% {
        transform: translateY(-${86.20548199999999}px);
      }
    
      74% {
        transform: translateY(-${113.036967}px);
      }
    
      82% {
        transform: translateY(-${107.72812499999999}px);
      }
    
      92% {
        transform: translateY(-${114.15159399999999}px);
      }
    
      96% {
        transform: translateY(-${113.140386}px);
      }
    
      100% {
        transform: translateY(-${Ve}px);
      }
    `}),bounceInOut:(0,c.iv)({animationName:c.F4`
      0% {
        transform: translateY(0);
      }
    
      2% {
        transform: translateY(-${.884807}px);
      }
    
      4% {
        transform: translateY(-${.379203}px);
      }
    
      10% {
        transform: translateY(-${3.4473}px);
      }
    
      14% {
        transform: translateY(-${1.126118}px);
      }
    
      22% {
        transform: translateY(-${14.271822}px);
      }
    
      32% {
        transform: translateY(-${1.1491}px);
      }
    
      42% {
        transform: translateY(-${46.331711999999996}px);
      }
    
      50% {
        transform: translateY(-${57.455}px);
      }
    
      58% {
        transform: translateY(-${68.578288}px);
      }
    
      68% {
        transform: translateY(-${113.772391}px);
      }
    
      78% {
        transform: translateY(-${100.638178}px);
      }
    
      86% {
        transform: translateY(-${113.78388199999999}px);
      }
    
      90% {
        transform: translateY(-${111.4627}px);
      }
    
      96% {
        transform: translateY(-${114.530797}px);
      }
    
      98% {
        transform: translateY(-${114.02519299999999}px);
      }
    
      100% {
        transform: translateY(-${Ve}px);
      }   
    `})},Te=r.p+"d4571315d3f64b2026ed953dfd0759a3.svg",ze=r(22142),Le=Object.defineProperty,Ue=Object.defineProperties,Fe=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,$e=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable,We=(e,t,r)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Je=(e,t)=>{for(var r in t||(t={}))$e.call(t,r)&&We(e,r,t[r]);if(Ye)for(var r of Ye(t))Qe.call(t,r)&&We(e,r,t[r]);return e};const Ke=({selVal:e,animating:t,onAnimationEnd:r,onEditorChange:n,pointerRef:o,onTransitionEnd:a,previewSvg:i,bezierValue:l})=>{const u=(0,p.useMemo)((()=>(0,c.iv)({transform:"translateY(-114.91px)",transitionTimingFunction:"cubic-bezier("+l.join(",")+")"})),[l]),d={width:170,height:115.91};return ze.createElement("div",{style:(f=Je({},d),m={display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:8,background:"#F0F0F0",boxSizing:"content-box",padding:Be.map((e=>`${e}px`)).join(" ")},Ue(f,Fe(m)))},(0,s.isNil)(e)?ze.createElement(ze.Fragment,null,ze.createElement("img",{src:Te}),ze.createElement("div",{style:{paddingTop:"10px",fontSize:"14px",lineHeight:"22px",color:"#C1C1C1"}},"无相关动效曲线")):ze.createElement(ze.Fragment,null,ze.createElement("div",{className:(0,c.iv)({position:"relative",width:"100%",height:"100%",borderLeft:"1px solid #ccc",borderBottom:"1px solid #ccc","& .bezier-line":{width:"100%",display:"block",fill:"none",stroke:"#666",strokeWidth:"1px",strokeLinecap:"round",overflow:"visible"}})},ze.createElement("div",{style:{position:"absolute",bottom:"2px",right:0,fontSize:"12px",color:"#ccc"}},"t"),ze.createElement("div",{style:{position:"absolute",top:"-5px",left:"2px",fontSize:"12px",color:"#ccc"}},"x"),ze.createElement("div",{ref:o,className:(0,Re.xG)({[Ze.main]:1,[Ze.animate]:t,[(0,s.isString)(e)?Ze[e]:u]:t}),onTransitionEnd:a,onAnimationEnd:r},ze.createElement("div",{className:Ze.top})),(0,s.isString)(e)&&i),(0,s.isObject)(e)&&ze.createElement(Ne.Z,Je({},{style:{position:"absolute"},textStyle:{fontSize:"0",fill:"#222"},background:"transparent",curveColor:"#666",curveWidth:1,gridColor:"transparent",handleColor:"#3955F6",handleStroke:1,width:d.width+Be[1]+Be[3],height:d.height+Be[0]+Be[2],value:l,padding:Be,onChange:n}))));var f,m};var He=r(22142);const Ge=({onItemClick:e,currentValue:t})=>He.createElement("div",{style:{flex:"0 0 111px",padding:"8px 0",borderRight:"1px solid #F4F4F4"}},qe.map(((r,n)=>{var o;return He.createElement("div",{key:r.value||n,className:(0,c.iv)({padding:"6px 6px 6px 16px",fontSize:"14px",lineHeight:"20px",cursor:"default"},t===r.value?{backgroundColor:"#EEF3FE",color:"#3955F6"}:{"&:hover":{color:"#333"}}),onClick:()=>e(r)},r.label,(null==(o=r.reserved)?void 0:o.enLabel)&&He.createElement("span",null,"(",r.reserved.enLabel,")"))}))),qe=[{label:"默认",value:void 0},{label:"自定义",value:"custom"},{label:"线性",value:"linearNone",reserved:{enLabel:"Linear"}},{label:"缓动",value:"cubic",reserved:{enLabel:"Ease"},children:[{label:"进出",value:"cubicInOut"},{label:"进入",value:"cubicIn"},{label:"退出",value:"cubicOut"}]},{label:"弹性",value:"elastic",reserved:{enLabel:"Spring"},children:[{label:"在前",value:"elasticIn"},{label:"在后",value:"elasticOut"},{label:"双边",value:"elasticInOut"}]},{label:"弹跳",value:"bounce",reserved:{enLabel:"Bounce"},children:[{label:"在前",value:"bounceIn"},{label:"在后",value:"bounceOut"},{label:"双边",value:"bounceInOut"}]},{label:"惯性",value:"back",reserved:{enLabel:"Back"},children:[{label:"在前",value:"backIn"},{label:"在后",value:"backOut"},{label:"双边",value:"backInOut"}]}];var Xe=r(22142);const et=({children:e,onItemClick:t,currentValue:r})=>e?Xe.createElement("div",{style:{display:"flex"}},e.map((e=>Xe.createElement("div",{key:e.value,className:(0,c.iv)({paddingTop:"8px",margin:"0 8px",fontSize:"12px",lineHeight:"20px",color:"#999999",overflow:"hidden",cursor:"pointer"},e.value===r?{borderBottom:"1px solid #3955F6",color:"#3955F6"}:{"&:hover":{color:"#333"}}),onClick:()=>t(e)},e.label)))):null;var tt=Object.defineProperty,rt=Object.getOwnPropertySymbols,nt=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,at=(e,t,r)=>t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function it({activeGroup:e,onChange:t,selVal:r,isNormalValue:n}){const o=(0,p.useRef)(null),[a,i]=(0,p.useState)(!1),[l,c]=(0,p.useState)(lt),u=(0,p.useRef)(lt),d=(0,p.useCallback)((()=>{i(!1),o.current&&(o.current.style.transform="none",o.current.style.transition="none"),setTimeout((()=>{o.current&&(o.current.style.transform="",o.current.style.transition="",o.current.style.opacity="",i(!0))}),100)}),[]);return(0,p.useEffect)((()=>{if((0,s.isObject)(r)){const{x1:e,y1:t,x2:n,y2:o}=r;c([e,t,n,o]),u.current=[e,t,n,o]}}),[r]),(0,p.useEffect)(d,[]),p.createElement("div",{style:{display:"flex"}},p.createElement(Ge,{currentValue:null==e?void 0:e.value,onItemClick:e=>{const r={};if((0,s.isArray)(e.children)){const t=e.children[0];r.ease=t.value}else if("custom"===e.value){const[e,t,n,o]=u.current;r.ease={x1:e,y1:t,x2:n,y2:o}}else r.ease=e.value;t(r.ease),d()}}),p.createElement("div",{style:{flex:1,width:0}},p.createElement(et,{currentValue:r,children:null==e?void 0:e.children,onItemClick:e=>{t(e.value),d()}}),p.createElement(Ke,{selVal:r,animating:a,pointerRef:o,bezierValue:l,onEditorChange:e=>{u.current=e,c(e),ct(e,t)},previewSvg:(0,s.isString)(r)&&n&&p.createElement(ke[(0,s.upperFirst)(r)]),onTransitionEnd:e=>{"opacity"===e.propertyName&&"0"===e.currentTarget.style.opacity&&i(!1),"transform"===e.propertyName&&(e.currentTarget.style.opacity=a?"0":"")},onAnimationEnd:e=>{e.currentTarget.style.opacity="0",setTimeout((()=>{o.current&&(o.current.style.opacity="")}),400)}}),p.createElement(Se,{previewHelpVisible:Boolean(r),resetVisible:(0,s.isObject)(r),previewDisable:a,onPreview:d,onReset:()=>{c(lt),ct(lt,t)},onHelp:()=>{let e="https://easings.net/";const t={backIn:"easeInBack",backOut:"easeOutBack",backInOut:"easeInOutBack",bounceIn:"easeInBounce",bounceOut:"easeOutBounce",bounceInOut:"easeInOutBounce",cubicIn:"easeInCubic",cubicOut:"easeOutCubic",cubicInOut:"easeInOutCubic",elasticIn:"easeInElastic",elasticOut:"easeOutElastic",elasticInOut:"easeInOutElastic"};"string"==typeof r&&t[r]&&(e+=`#${t[r]}`),window.open(e)}}),(0,s.isObject)(r)&&p.createElement(_e,((e,t)=>{for(var r in t||(t={}))nt.call(t,r)&&at(e,r,t[r]);if(rt)for(var r of rt(t))ot.call(t,r)&&at(e,r,t[r]);return e})({},{value:[r.x1,r.y1,r.x2,r.y2],onChange:([e,r,n,o])=>t({x1:e,y1:r,x2:n,y2:o})}))))}const lt=[.37,0,.63,1],ct=(0,s.debounce)(((e,t)=>{const[r,n,o,a]=e;t({x1:r,y1:n,x2:o,y2:a})}),500);var st=r(93379),pt=r.n(st),ut=r(7795),dt=r.n(ut),ft=r(90569),mt=r.n(ft),yt=r(3565),bt=r.n(yt),ht=r(19216),gt=r.n(ht),vt=r(44589),Ot=r.n(vt),kt=r(85381),xt={};xt.styleTagTransform=Ot(),xt.setAttributes=bt(),xt.insert=mt().bind(null,"head"),xt.domAPI=dt(),xt.insertStyleElement=gt(),pt()(kt.Z,xt),kt.Z&&kt.Z.locals&&kt.Z.locals;var Et=Object.defineProperty,wt=Object.getOwnPropertySymbols,Pt=Object.prototype.hasOwnProperty,jt=Object.prototype.propertyIsEnumerable,St=(e,t,r)=>t in e?Et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ct=(e,t)=>{for(var r in t||(t={}))Pt.call(t,r)&&St(e,r,t[r]);if(wt)for(var r of wt(t))jt.call(t,r)&&St(e,r,t[r]);return e};const It=({label:e,value:t,onChange:r})=>{const[n,u]=(0,p.useState)(!1),d=(0,p.useRef)(0),f=t||void 0,m=qe.find((e=>(0,s.isObject)(f)?"custom"===e.value:(f||"").startsWith(e.value))),y=!(0,s.isString)(f)||!!ke[(0,s.upperFirst)(f)],b=(0,p.useMemo)((()=>{var t;const r=y,i=(null==m?void 0:m.label)||"默认",l=m&&(0,s.isArray)(m.children)?null==(t=m.children.find((e=>e.value===f)))?void 0:t.label:"";return p.createElement("div",{className:(0,c.iv)({paddingLeft:"68px",paddingRight:"16px",height:"32px",border:"1px solid #f0f0f0",color:"#191919",borderRadius:"4px",cursor:"pointer",transition:"all 0.3s",position:"relative"},n?{borderColor:"#3955F6",boxShadow:"0 0 0 2px rgb(57 85 246 / 20%)"}:{"&:hover":{borderColor:"#3955F6"}}),style:{cursor:r?"pointer":"not-allowed"}},p.createElement(a.Z,{title:"动画的缓动曲线，决定动画的运动速度",placement:"topLeft",mouseEnterDelay:.5},p.createElement("h4",{className:"editor-property-label"},e||"缓动曲线")),p.createElement("div",{style:{lineHeight:"32px"}},i,l&&`-${l}`),p.createElement(o.Z,{style:{position:"absolute",top:"50%",right:"11px",transform:"translateY(-50%)",lineHeight:"11px"},theme:"outline",size:"16",fill:"#555"}))}),[y,m,e,n,f]);return p.createElement(i.Z,null,p.createElement("div",{style:{flex:1},ref:e=>{e&&(d.current=d.current||e.offsetWidth)}},y?p.createElement(l.Z,{placement:"bottom",trigger:"click",onOpenChange:e=>u(e),overlayClassName:(0,c.iv)({width:d.current,marginTop:"-8px",paddingTop:"0",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.08)","& .ant-popover-arrow":{display:"none"},"& .ant-popover-inner":{padding:"0"}}),content:p.createElement(it,Ct({},{activeGroup:m,selVal:f,isNormalValue:y,onChange:r}))},b):b))}},42014:function(e,t,r){"use strict";r.d(t,{Q:function(){return De}});var n=r(3207),o=r(38499),a=r(88551),i=r(22142),l=r(62255),c=r(26840),s=r(70072),p=r(2119),u=r(62732),d=r(79565);const f=(0,r(96193).Z)(),m={wrapper:(0,u.iv)({display:"flex",width:"100%",height:"48px",border:"1px solid #ebebeb",borderRadius:"4px"}),poster:(0,u.iv)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flex:"0 0 48px",height:"100%",borderRight:"1px solid #ebebeb",background:"#fafafa",lineHeight:"11px",borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px",cursor:"pointer"}),content:(0,u.iv)({flex:1,display:"flex",alignItems:"center",justifyContent:"space-between"}),name:(0,u.iv)({padding:"0 8px",fontSize:"14px",lineHeight:"20px","> input":{flex:1,height:"100%",padding:0,border:"none",borderRadius:0,color:"#333",lineHeight:"17px",boxShadow:"none!important"},"> input:hover":{boxShadow:"none!important"}}),ops:(0,u.iv)({display:"flex",alignItems:"center",height:"100%","& .ant-btn":{height:"100%"},"& .ant-btn:hover":{color:"#3955f6",backgroundColor:"transparent"}})},y=({name:e,effectInfo:t,onChange:r,onReplace:n})=>{const[o,a]=(0,i.useState)(!1),u=(0,d.Gt)(t);return i.createElement(i.Fragment,null,i.createElement("div",{className:m.wrapper,style:o?{borderColor:"#3955f6"}:{}},i.createElement("div",{className:m.poster,onClick:()=>{a(!0)}},i.createElement("img",{src:u.default})),i.createElement("div",{className:m.content},i.createElement("div",{className:m.name},i.createElement(l.Z,{value:e,onChange:({target:{value:e}})=>{r(e)}})),i.createElement("div",{className:m.ops},i.createElement(c.Z,{title:"更换",placement:"bottom"},i.createElement(s.Z,{type:"text",size:"large",icon:i.createElement(p.Z,null),onClick:()=>{a(!0)}}))))),o&&i.createElement(f,{__script:t,title:"更换动画",onClose:()=>a(!1),onChange:({props:e})=>{n(e)}}))};var b=r(19104),h=r(9308),g=r(32817),v=r(84648),O=r(36683),k=r(78903),x=r(34326),E=r(24648),w=r(94580),P=r(60730);function*j(e){for(const{list:t}of[...v,...O,...k,...x,...E,...w,...P])for(const r of t)yield*e(r)}var S=r(22142),C=Object.defineProperty,I=Object.defineProperties,A=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,R=(e,t,r)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,N=(e,t)=>{for(var r in t||(t={}))_.call(t,r)&&R(e,r,t[r]);if(M)for(var r of M(t))D.call(t,r)&&R(e,r,t[r]);return e},V=(e,t)=>I(e,A(t));const B=({id:e},{rootType:t,enableBlueprint:r})=>({spark:"group",label:"动画效果",extra:{spark:"flex",columnGap:0,hidden:"PlayEffect"===t||"useEffect"===t,content:[(0,a.I)(),{spark:"element",content:()=>{const{onDelete:e}=(0,b.useOnDelete)();return S.createElement(c.Z,{title:"删除"},S.createElement(s.Z,{type:"text",size:"small",icon:S.createElement(o.Z,null),onClick:()=>e()}))}}]},content:{spark:"grid",content:[{spark:"value",index:"name",content(e,t){return{spark:"value",index:["nodeId","_editor","__script","time","duration","loop","loopInterval","loopTimes"],content([r,n,o,a,i,l,c,s]){return{spark:"element",content(){return S.createElement(y,{name:e,onChange:t,effectInfo:o,onReplace:o=>{const p=Array.from(j((function*(e){yield e.name}))),u=l&&o.loop?{loopInterval:null!=c?c:0,loopTimes:null!=s?s:-1}:{};t(V(N(V(N({},o),{nodeId:r,time:a,duration:i}),u),{_editor:n,name:p.every((t=>t!==e))?e:o.name}),{replace:!0})}})}}}}}},{spark:"grid",hidden:"PlayEffect"!==t,content:[V(N({},g.D9),{hidden:r}),V(N({},g.am),{hidden:!r}),{spark:"element",content(){return S.createElement(h.Q,{id:e})}}]}]}});var Z=r(73760),T=r(24596),z=r(22142);const L={loop:{hidden:!1,defaultValue:!1},ease:{hidden:!1},hasFadeEffect:{hidden:!1,defaultValue:!1}},U=(e,t,r={})=>{const n=(0,Z.merge)({},L,r);return{spark:"group",label:"循环与过渡效果",content:{spark:"grid",content:[{spark:"label",label:"循环播放",tooltip:"是否循环播放",content:{spark:"boolean",index:"loop",defaultValue:!1}},{spark:"check",index:"loop",check:{hidden:e=>!e},content:{spark:"grid",content:[{spark:"number",index:"loopInterval",label:"循环间隔",cols:3,defaultValue:0,tooltip:"每次循环的停顿间隔时间",min:0,step:10,precision:2,unit:"s",ratio:-1e3},{spark:"number",index:"loopTimes",label:"循环次数",cols:3,tooltip:"循环次数，-1代表一直循环",min:-1,defaultValue:-1,precision:0}]}},{spark:"value",index:"ease",hidden:n.ease.hidden,content(e,t){return{spark:"element",content(){return z.createElement(T.G,{value:e,onChange:t})}}}},{spark:"label",label:"透明度渐变",width:90,tooltip:"是否叠加渐变效果",hidden:n.hasFadeEffect.hidden,content:{spark:"boolean",index:"hasFadeEffect",defaultValue:!0}}]}}};var F=r(99045),Y=r(26616),$=r(30470),Q=r(8907),W=Object.defineProperty,J=Object.defineProperties,K=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,X=(e,t,r)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ee=(e,t)=>{for(var r in t||(t={}))G.call(t,r)&&X(e,r,t[r]);if(H)for(var r of H(t))q.call(t,r)&&X(e,r,t[r]);return e};const te={stayTime:{hidden:!0}},re=(e,t,r={})=>{const n=(0,Z.merge)({},te,r);return{spark:"group",label:"时间",content:{spark:"grid",content:["PlayEffect"===t.rootType?{spark:"grid",content:[(0,Q.H)((0,Y.R)((o=ee({},F.J4),a={tooltip:"脚本或者动画的开始时间"},J(o,K(a)))),{hidden:$.Vg}),(0,Y.R)(F.Pr)]}:{spark:"flex",content:[(0,Q.H)(ee(ee({},F.J4),{label:"开始时间",tooltip:"开始时间"}),{hidden:$.Vg}),F.Pr]},{spark:"label",label:"不受场景播放状态影响",hidden:"PlayEffect"===t.rootType,tooltip:"动画是否受场景播放状态影响，设置为开启后，即使当前场景停止播放，动画依然会继续运行，用来实现场景停止播放，但一些动画依然继续播放的效果",content:{spark:"boolean",index:"playBySelf",defaultValue:!1}},{spark:"number",index:"stayTime",hidden:n.stayTime.hidden,label:"停留时间",tooltip:"在两端停留的时间",min:0,step:.01,precision:2,defaultValue:0,unit:"s",ratio:-1e3}]}};var o,a},ne={distanceX:{defaultValue:0,hidden:!1},distanceY:{defaultValue:0,hidden:!1}},oe=(e,t,r={})=>{const n=(0,Z.merge)({},ne,r);return{spark:"group",label:"位移",content:{spark:"flex",content:[(0,Y.R)({spark:"number",index:"distanceX",hidden:n.distanceX.hidden,label:"水平位移",tooltip:"水平位移",defaultValue:n.distanceX.defaultValue,step:1,precision:2}),(0,Y.R)({spark:"number",index:"distanceY",hidden:n.distanceY.hidden,label:"垂直位移",tooltip:"垂直位移",defaultValue:n.distanceY.defaultValue,step:1,precision:2})]}}},ae={presetAnchor:{hidden:!0}},ie=(e,t,r={})=>({spark:"group",label:"锚点",content:{spark:"grid",content:[{spark:"label",label:"预设锚点",tooltip:"预设锚点",hidden:(0,Z.merge)({},ae,r).presetAnchor.hidden,content:{spark:"boolean",index:"presetAnchor",defaultValue:!0}},{spark:"check",index:"presetAnchor",check:{hidden:e=>void 0!==e&&!e},content:{spark:"grid",content:[{spark:"number",index:"anchorX",label:"锚点 X",cols:3,defaultValue:.5,tooltip:"锚点X，会影响旋转缩放的中心",min:-10,max:10,step:.01,precision:0,ratio:100,unit:"%"},{spark:"number",index:"anchorY",label:"锚点 Y",cols:3,defaultValue:.5,tooltip:"锚点Y，会影响旋转缩放的中心",min:-10,max:10,step:.01,precision:0,ratio:100,unit:"%"}]}}]}}),le={startScale:{defaultValue:1.2,hidden:!1},scaleRange:{min:-1,max:1,defaultValue:0,hidden:!1},scaleRangeX:{defaultValue:.2,hidden:!0},scaleRangeY:{defaultValue:.2,hidden:!0},scaleX:{defaultValue:1,hidden:!0},scaleY:{defaultValue:1,hidden:!0}},ce=(e,t,r={})=>{const n=(0,Z.merge)({},le,r);return{spark:"group",label:"缩放",content:{spark:"grid",content:[{spark:"number",index:"startScale",label:"缩放倍数",hidden:n.startScale.hidden,defaultValue:n.startScale.defaultValue,tooltip:"初始缩放倍数",step:.01,precision:0,ratio:100,unit:"%"},{spark:"slider",index:"scaleRange",label:"缩放倍数",tooltip:"缩放倍数",hidden:n.scaleRange.hidden,defaultValue:n.scaleRange.defaultValue,min:n.scaleRange.min,max:n.scaleRange.max,step:.01,precision:0,ratio:100,unit:"%"},{spark:"grid",content:[{spark:"number",index:"scaleRangeX",cols:3,hidden:n.scaleRangeX.hidden,defaultValue:n.scaleRangeX.defaultValue,label:"水平缩放幅度",tooltip:"水平缩放幅度",step:.01,precision:0,ratio:100,unit:"%"},{spark:"number",index:"scaleRangeY",cols:3,hidden:n.scaleRangeY.hidden,defaultValue:n.scaleRangeY.defaultValue,label:"垂直缩放幅度",tooltip:"垂直缩放幅度",step:.01,precision:0,ratio:100,unit:"%"}]},{spark:"grid",content:[{spark:"number",index:"scaleX",cols:3,hidden:n.scaleX.hidden,defaultValue:n.scaleX.defaultValue,label:"水平缩放倍数",tooltip:"水平缩放倍数",step:.01,precision:0,ratio:100,unit:"%"},{spark:"number",index:"scaleY",cols:3,hidden:n.scaleY.hidden,defaultValue:n.scaleY.defaultValue,label:"垂直缩放倍数",tooltip:"垂直缩放倍数",step:.01,precision:0,ratio:100,unit:"%"}]}]}}},se={startAngle:{defaultValue:0,hidden:!1},rotateRange:{defaultValue:360,hidden:!1},rotation:{defaultValue:0,hidden:!0}},pe=(e,t,r={})=>{const n=(0,Z.merge)({},se,r);return{spark:"group",label:"角度",content:{spark:"flex",content:[{spark:"number",index:"startAngle",label:"初始角度",hidden:n.startAngle.hidden,defaultValue:n.startAngle.defaultValue,tooltip:"初始角度",precision:0,step:1,unit:"°"},{spark:"number",index:"rotateRange",label:"旋转角度",hidden:n.rotateRange.hidden,defaultValue:n.rotateRange.defaultValue,tooltip:"旋转角度",precision:0,step:1,unit:"°"},{spark:"number",index:"rotation",label:"目标角度",hidden:n.rotation.hidden,defaultValue:n.rotation.defaultValue,tooltip:"旋转角度",precision:0,step:1,unit:"°"}]}}};var ue={ImmediateIO:{specialConfig:{hasFadeEffect:{hidden:!0}}},FadeIO:{specialConfig:{hasFadeEffect:{hidden:!0}}},Toast:{},MoveIO:{groups:[oe]},ScaleIO:{groups:[ie]},SmallIO:{groups:[ce],specialConfig:{scaleRange:{hidden:!0}}},RotateIO:{groups:[ie,pe]},TurnIO:{groups:[ie,pe],specialConfig:{rotateRange:{hidden:!0}}},RotateScaleIO:{groups:[ie,pe],specialConfig:{startAngle:{defaultValue:-180},rotateRange:{defaultValue:540}}},SkewIO:{groups:[ie,()=>({spark:"group",label:"倾斜",content:{spark:"grid",content:[{spark:"slider",index:"scaleRange",label:"斜切幅度",tooltip:"斜切幅度",defaultValue:0,step:.01,min:-1,max:1,precision:0,unit:"%",ratio:100},{spark:"label",label:"水平倾斜",tooltip:"水平轴是否倾斜",cols:3,content:{spark:"boolean",index:"enableX",defaultValue:!1}},{spark:"label",label:"垂直倾斜",tooltip:"垂直轴是否倾斜",cols:3,content:{spark:"boolean",index:"enableY",defaultValue:!1}}]}})]},RotateMoveIO:{groups:[ie,oe,pe],specialConfig:{startAngle:{defaultValue:-180},rotateRange:{defaultValue:540}}},TurnSmallIO:{groups:[ie,ce,pe],specialConfig:{startScale:{defaultValue:1.5},rotateRange:{hidden:!0},scaleRange:{hidden:!0}}},TurnScaleIO:{groups:[ie,pe],specialConfig:{startAngle:{defaultValue:30},rotateRange:{hidden:!0}}},RotateSmallIO:{groups:[ie,ce,pe],specialConfig:{startAngle:{defaultValue:-180},rotateRange:{defaultValue:540},scaleRange:{hidden:!0},startScale:{defaultValue:2}}},RotateBlurIO:{groups:[ie,pe]},RotateDropIO:{groups:[ie,oe,pe],specialConfig:{ease:{hidden:!0},distanceX:{hidden:!0}}}},de=["CircularMask","ClockMask","DownToUpMask","UpToDownMask","LeftToRightMask","RightToLeftMask","SkewMask","TriangleMask","SquareMask","DiamondMask","PentagonMask","OctagonMask","PentagramMask","StarMask","OctagramMask","HeartMask","BlindsMask","DiagonalMask","MultiPotMask","WiperMask","SpreadMask","WindmillMask"].reduce(((e,t)=>(e[t]={specialConfig:{hasFadeEffect:{hidden:!0}}},e)),{}),fe=r(45963),me=r(22142);const ye={x:{defaultValue:0,hidden:!1},y:{defaultValue:0,hidden:!1}},be=()=>({spark:"group",label:"位移",content:{spark:"grid",content:[{spark:"label",label:"位置",content:{spark:"enter",index:"offsetPos",content:{spark:"grid",content:[{spark:"number",index:0,cols:2,width:16,label:"X",tooltip:"X",defaultValue:0,precision:2},{spark:"number",index:1,cols:2,width:16,label:"Y",tooltip:"Y",defaultValue:0,precision:2},{spark:"number",index:2,cols:2,width:16,label:"Z",tooltip:"Z",defaultValue:0,precision:2}]}}}]}});var he={Breathe:{groups:[ie,ce],specialConfig:{ease:{hidden:!0},hasFadeEffect:{hidden:!0},startScale:{hidden:!0},scaleRange:{defaultValue:.1}}},Heartbeat:{groups:[ie,ce],specialConfig:{ease:{hidden:!0},hasFadeEffect:{hidden:!0},startScale:{hidden:!0},scaleRange:{defaultValue:.2}}},Pulse:{groups:[ie,ce],specialConfig:{ease:{hidden:!0},hasFadeEffect:{hidden:!0},startScale:{hidden:!0},scaleRange:{defaultValue:.15}}},Wave:{groups:[ce],specialConfig:{ease:{hidden:!0},hasFadeEffect:{hidden:!0},startScale:{hidden:!0},scaleRange:{defaultValue:.5,min:-1,max:10}}},Float:{groups:[oe],specialConfig:{ease:{hidden:!0},hasFadeEffect:{hidden:!0}}},GoAndBack:{groups:[oe],specialConfig:{hasFadeEffect:{hidden:!0},stayTime:{hidden:!1}}},Jelly:{groups:[()=>({spark:"group",label:"振动",content:{spark:"grid",content:[{spark:"number",index:"amplitudeX",label:"水平振幅",cols:3,defaultValue:.2,tooltip:"水平振幅",step:.01,precision:0,unit:"%",ratio:100},{spark:"number",index:"amplitudeY",label:"垂直振幅",cols:3,defaultValue:-.2,tooltip:"垂直振幅",step:.01,precision:0,unit:"%",ratio:100}]}})],specialConfig:{hasFadeEffect:{hidden:!0},ease:{hidden:!0}}},Bounce:{groups:[oe],specialConfig:{hasFadeEffect:{hidden:!0},ease:{hidden:!0}}},Rotate:{groups:[ie,pe],specialConfig:{hasFadeEffect:{hidden:!0},startAngle:{hidden:!0},presetAnchor:{hidden:!1}}},Swing:{groups:[pe],specialConfig:{hasFadeEffect:{hidden:!0},ease:{hidden:!0},startAngle:{hidden:!0},rotateRange:{defaultValue:15}}},Twinkle:{specialConfig:{hasFadeEffect:{hidden:!0},ease:{hidden:!0}}},Flash:{specialConfig:{hasFadeEffect:{hidden:!0},ease:{hidden:!0}}},Jolty:{specialConfig:{hasFadeEffect:{hidden:!0},ease:{hidden:!0}}},Shake:{groups:[ie,oe,pe],specialConfig:{hasFadeEffect:{hidden:!0},startAngle:{hidden:!0},rotateRange:{defaultValue:10}}},Vibrate:{specialConfig:{hasFadeEffect:{hidden:!0},ease:{hidden:!0}}},RotateScale:{groups:[ce,pe],specialConfig:{startScale:{hidden:!0},scaleRange:{defaultValue:.5},hasFadeEffect:{hidden:!0},startAngle:{hidden:!0}}},ShakeScale:{groups:[ce,pe],specialConfig:{startScale:{hidden:!0},scaleRange:{defaultValue:.2},hasFadeEffect:{hidden:!0},startAngle:{hidden:!0},rotateRange:{defaultValue:5}}},Breathe3D:{groups:[ce],specialConfig:{startScale:{hidden:!0},hasFadeEffect:{hidden:!0}}},Heartbeat3D:{groups:[ce],specialConfig:{startScale:{hidden:!0},hasFadeEffect:{hidden:!0}}},Float3D:{groups:[be],specialConfig:{hasFadeEffect:{hidden:!0}}},Jelly3D:{groups:[()=>({spark:"group",label:"振动",content:{spark:"value",index:"amplitudeVector",content(e,t){return{spark:"element",content(){return me.createElement(fe.O,{value:e,onChange:t,label:"振幅",steps:[.1,.1,.1]})}}}}})],specialConfig:{hasFadeEffect:{hidden:!0}}}};const ge={alpha:{defaultValue:1,hidden:!1}},ve={width:{defaultValue:0,hidden:!1},height:{defaultValue:0,hidden:!1}},Oe={from:{defaultValue:100,hidden:!1},to:{defaultValue:0,hidden:!1}},ke=(e,t,r={})=>{const n=(0,Z.merge)({},Oe,r);return{spark:"group",label:"亮度",content:{spark:"grid",content:[{spark:"slider",index:"from",hidden:n.from.hidden,label:"开始值",tooltip:"开始值",defaultValue:n.from.defaultValue,min:-100,max:100,precision:0,step:1},{spark:"slider",index:"to",hidden:n.to.hidden,label:"结束值",tooltip:"结束值",defaultValue:n.to.defaultValue,min:-100,max:100,precision:0,step:1}]}}},xe={axisX:{defaultValue:1,hidden:!1},axisY:{defaultValue:0,hidden:!1}},Ee={flipX:{defaultValue:!0,hidden:!1},flipY:{defaultValue:!1,hidden:!1}};var we={AlphaTo:{groups:[(e,t,r)=>{const n=(0,Z.merge)({},ge,r);return{spark:"group",label:"目标透明度",content:{spark:"grid",content:[{spark:"slider",index:"alpha",label:"透明度",hidden:n.alpha.hidden,defaultValue:n.alpha.defaultValue,tooltip:"透明度",min:0,max:1,step:.01,precision:0,ratio:100,unit:"%"}]}}}],specialConfig:{hasFadeEffect:{hidden:!0},alpha:{defaultValue:0}}},Move:{groups:[oe],specialConfig:{hasFadeEffect:{hidden:!0}}},MoveTo:{groups:[(e,t,r={})=>{const n=(0,Z.merge)({},ye,r);return{spark:"group",label:"位移",content:{spark:"flex",content:[(0,Y.R)({width:32,spark:"number",index:"x",hidden:n.x.hidden,label:"X",tooltip:"X 轴坐标",defaultValue:n.x.defaultValue,step:1,precision:0}),(0,Y.R)({width:32,spark:"number",index:"y",hidden:n.y.hidden,label:"Y",tooltip:"Y 轴坐标",defaultValue:n.y.defaultValue,step:1,precision:0})]}}}],specialConfig:{hasFadeEffect:{hidden:!0}}},RotateTo:{groups:[ie,pe],specialConfig:{hasFadeEffect:{hidden:!0},presetAnchor:{hidden:!1},startAngle:{hidden:!0},rotateRange:{hidden:!0},rotation:{hidden:!1}}},Scale:{groups:[ie,ce],specialConfig:{hasFadeEffect:{hidden:!0},presetAnchor:{hidden:!1},startScale:{hidden:!0},scaleRange:{hidden:!0},scaleRangeX:{hidden:!1},scaleRangeY:{hidden:!1}}},ScaleTo:{groups:[ie,ce],specialConfig:{hasFadeEffect:{hidden:!0},presetAnchor:{hidden:!1},startScale:{hidden:!0},scaleRange:{hidden:!0},scaleX:{hidden:!1},scaleY:{hidden:!1}}},SizeTo:{groups:[(e,t,r={})=>{const n=(0,Z.merge)({},ve,r);return{spark:"group",label:"尺寸",content:{spark:"grid",content:[{spark:"number",index:"width",cols:3,hidden:n.width.hidden,defaultValue:n.width.defaultValue,label:"宽度",tooltip:"宽度",min:0},{spark:"number",index:"height",cols:3,hidden:n.height.hidden,defaultValue:n.height.defaultValue,label:"高度",tooltip:"高度",min:0}]}}}],specialConfig:{hasFadeEffect:{hidden:!0}}},Path:{specialConfig:{hasFadeEffect:{hidden:!0}}},Typing:{specialConfig:{hasFadeEffect:{hidden:!0}}},CountDown:{specialConfig:{hasFadeEffect:{hidden:!0}}},Brightness:{groups:[ke],specialConfig:{hasFadeEffect:{hidden:!0}}},Contrast:{groups:[ke],specialConfig:{hasFadeEffect:{hidden:!0}}},Saturation:{groups:[ke],specialConfig:{hasFadeEffect:{hidden:!0}}},Anchor:{groups:[(e,t,r={})=>{const n=(0,Z.merge)({},xe,r);return{spark:"group",label:"锚点位移",content:{spark:"grid",content:[{spark:"number",index:"axisX",cols:3,hidden:n.axisX.hidden,defaultValue:n.axisX.defaultValue,label:"锚点 X 位移",tooltip:"锚点 X 位移"},{spark:"number",index:"axisY",cols:3,hidden:n.axisY.hidden,defaultValue:n.axisY.defaultValue,label:"锚点 Y 位移",tooltip:"锚点 Y 位移"}]}}}],specialConfig:{hasFadeEffect:{hidden:!0}}},Flip:{groups:[(e,t,r={})=>{const n=(0,Z.merge)({},Ee,r);return{spark:"group",label:"翻转动画",content:{spark:"grid",content:[{spark:"label",label:"水平翻转",tooltip:"水平翻转",cols:3,hidden:n.flipX.hidden,content:{spark:"boolean",index:"flipX",defaultValue:n.flipX.defaultValue}},{spark:"label",label:"垂直翻转",tooltip:"垂直翻转",cols:3,hidden:n.flipY.hidden,content:{spark:"boolean",index:"flipY",defaultValue:n.flipY.defaultValue}}]}}}],specialConfig:{hasFadeEffect:{hidden:!0}}},Move3D:{groups:[be],specialConfig:{hasFadeEffect:{hidden:!0}}},MoveTo3D:{groups:[()=>({spark:"group",label:"位移到",content:{spark:"grid",content:[{spark:"label",label:"目标位置",tooltip:"目标位置",content:{spark:"enter",index:"destPos",content:{spark:"grid",content:[{spark:"number",index:0,cols:2,width:16,label:"X",tooltip:"X",defaultValue:0,precision:2},{spark:"number",index:1,cols:2,width:16,label:"Y",tooltip:"Y",defaultValue:0,precision:2},{spark:"number",index:2,cols:2,width:16,label:"Z",tooltip:"Z",defaultValue:0,precision:2}]}}}]}})],specialConfig:{hasFadeEffect:{hidden:!0}}},Rotate3D:{groups:[()=>({spark:"group",label:"旋转",content:{spark:"label",label:"旋转角度",tooltip:"旋转角度",content:{spark:"enter",index:"offsetAngle",content:{spark:"grid",content:[{spark:"number",index:0,cols:2,width:16,label:"X",tooltip:"X",defaultValue:0,precision:0,step:1,unit:"°"},{spark:"number",index:1,cols:2,width:16,label:"Y",tooltip:"Y",defaultValue:0,precision:0,step:1,unit:"°"},{spark:"number",index:2,cols:2,width:16,label:"Z",tooltip:"Z",defaultValue:0,precision:0,step:1,unit:"°"}]}}}})],specialConfig:{hasFadeEffect:{hidden:!0}}},RotateTo3D:{groups:[()=>({spark:"group",label:"旋转到",content:{spark:"label",label:"目标旋转值",tooltip:"目标旋转值",width:80,content:{spark:"enter",index:"destAngle",content:{spark:"grid",content:[{spark:"number",index:0,cols:2,width:16,label:"X",tooltip:"X",defaultValue:0,step:1,unit:"°",precision:0},{spark:"number",index:1,cols:2,width:16,label:"Y",tooltip:"Y",defaultValue:0,step:1,unit:"°",precision:0},{spark:"number",index:2,cols:2,width:16,label:"Z",tooltip:"Z",defaultValue:0,step:1,unit:"°",precision:0}]}}}})],specialConfig:{hasFadeEffect:{hidden:!0}}},Scale3D:{groups:[()=>({spark:"group",label:"缩放",content:{spark:"label",label:"缩放",tooltip:"缩放",content:{spark:"enter",index:"offsetScale",content:{spark:"grid",content:[{spark:"number",index:0,cols:2,width:16,label:"X",tooltip:"X",defaultValue:0,precision:0,step:.01,ratio:100,unit:"%"},{spark:"number",index:1,cols:2,width:16,label:"Y",tooltip:"Y",defaultValue:0,precision:0,step:.01,ratio:100,unit:"%"},{spark:"number",index:2,cols:2,width:16,label:"Z",tooltip:"Z",defaultValue:0,precision:0,step:.01,ratio:100,unit:"%"}]}}}})],specialConfig:{hasFadeEffect:{hidden:!0}}},ScaleTo3D:{groups:[()=>({spark:"group",label:"缩放",content:{spark:"label",label:"目标缩放值",tooltip:"目标缩放值",width:80,content:{spark:"enter",index:"destScale",content:{spark:"grid",content:[{spark:"number",index:0,cols:2,width:16,label:"X",tooltip:"X",defaultValue:0,precision:2},{spark:"number",index:1,cols:2,width:16,label:"Y",tooltip:"Y",defaultValue:0,precision:2},{spark:"number",index:2,cols:2,width:16,label:"Z",tooltip:"Z",defaultValue:0,precision:2}]}}}})],specialConfig:{hasFadeEffect:{hidden:!0}}}},Pe=Object.assign({},ue,de,he,we),je=Object.defineProperty,Se=Object.defineProperties,Ce=Object.getOwnPropertyDescriptors,Ie=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,_e=(e,t,r)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const De=(e,t)=>(0,n.filterSpark)({spark:"value",index:"script",content(r){var n,o;return{spark:"grid",content:[B,U,re].concat(null!=(o=null==(n=Pe[r])?void 0:n.groups)?o:[]).map((n=>{var o;const a=n(e,t,null==(o=Pe[r])?void 0:o.specialConfig);return i=((e,t)=>{for(var r in t||(t={}))Ae.call(t,r)&&_e(e,r,t[r]);if(Ie)for(var r of Ie(t))Me.call(t,r)&&_e(e,r,t[r]);return e})({},a),l={content:{spark:"block",status:"closed",content:a.content}},Se(i,Ce(l));var i,l}))}}})},62780:function(e,t,r){"use strict";r.d(t,{q:function(){return ne}});var n=r(22142),o=r(33058),a=r(55309),i=r(3207),l=r(23530),c=r(19104),s=r(72299),p=r(78296),u=r(5635),d=r(14908),f=r(26840),m=r(42761),y=r(20469),b=r(40985),h=r(7910),g=r(99045),v=r(62732),O=Object.defineProperty,k=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(e,t,r)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,P=(e,t)=>{for(var r in t||(t={}))x.call(t,r)&&w(e,r,t[r]);if(k)for(var r of k(t))E.call(t,r)&&w(e,r,t[r]);return e};function j(e){var t=e,{children:r,onSelect:o,context:a}=t,i=((e,t)=>{var r={};for(var n in e)x.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&k)for(var n of k(e))t.indexOf(n)<0&&E.call(e,n)&&(r[n]=e[n]);return r})(t,["children","onSelect","context"]);const{state:l,toggle:c,setFalse:s}=(0,y.Z)(!1);return n.createElement(p.Z,P({overlay:n.createElement(S,{onSelect:o,onClose:s,context:a}),trigger:["click"],placement:"bottomLeft",open:l,onOpenChange:c},i),r)}function S({onSelect:e,onClose:t,context:r="Script"}){const{enableBlueprint:o}=(0,c.useEditor)(0,"enableBlueprint"),{showImDialog:a}=(0,c.useImbot)(),l=(0,m.v9)((({project:e})=>e.settings.typeOfPlay)),p=Object.entries(g.FP).filter((([e])=>{switch(e){case"CustomScript":return"useEvent"!==r;case"PlayableComponentEvent":return(0,h.cM)({release:!1})&&2===l;default:return!0}})).reduce(((e,[t,r])=>(r.category&&(e[r.category]=(e[r.category]||[]).concat({value:t,item:r})),e)),{"常用":[],"播放控制":[],"逻辑修改":[],"辅助操作":[],"高级":[]}),{token:y}=u.Z.useToken();return n.createElement("div",{className:(0,v.iv)({boxShadow:"rgb(240 241 242) 0px 2px 8px",background:y.colorBgContainer,width:283,zIndex:99999,borderRadius:4})},n.createElement("div",{className:(0,v.iv)({maxHeight:520,display:"flex",flexDirection:"column",flexWrap:"wrap","& > div:nth-child(3)":{borderLeft:"1px solid rgb(235, 235, 235)",borderRight:"1px solid rgb(235, 235, 235)"},"& > div:nth-child(4)":{borderLeft:"1px solid rgb(235, 235, 235)"},"& > div:nth-child(5)":{borderLeft:"1px solid rgb(235, 235, 235)"}})},Object.entries(p).map((([r,l])=>n.createElement("div",{key:r,className:(0,v.iv)({padding:"2px 0"})},n.createElement("div",{key:r,className:(0,v.iv)({padding:"4px 0 4px 16px",fontSize:12,color:"rgb(153, 153, 153)"})},r),l.map((({value:r,item:{name:l,label:c=l,link:p,content:u,extraProps:m}})=>n.createElement("div",{key:r,className:(0,v.iv)({padding:"4px 0 4px 16px",cursor:"pointer","&:hover":{background:"rgb(235, 235, 235)"}}),onClick:()=>{const n=u?(0,i.sparkValue)(u):{},a=(0,b.xv)();e({id:a,type:"Effect"===r?"Effect":"Script",editor:{},props:P(P({name:g.FP[r].name,script:"Effect"===r?"AlphaTo":"ModifyProperty"===r?"ModifyData":r},n),(null==m?void 0:m({enableBlueprint:o}))||{})}),t()}},n.createElement(d.Z,null,c,"string"==typeof p&&n.createElement(f.Z,{title:"使用教程"},n.createElement(s.Z,{onClick:e=>{e.stopPropagation(),p?window.open(p):a(l)}})))))))))),n.createElement("div",{className:(0,v.iv)({borderTop:"1px solid rgb(235, 235, 235)",textAlign:"right",padding:"2px 10px",textDecorationLine:"underline"})},n.createElement("a",{href:"#",onClick:e=>{e.preventDefault(),a("触发方式")}},"如何使用触发方式?")))}var C=r(66254),I=Object.defineProperty,A=Object.defineProperties,M=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,N=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,V=(e,t)=>{for(var r in t||(t={}))D.call(t,r)&&N(e,r,t[r]);if(_)for(var r of _(t))R.call(t,r)&&N(e,r,t[r]);return e},B=(e,t)=>A(e,M(t)),Z=r(64021),T=r(70072),z=r(71092),L=r(3799),U=r.p+"images/c11fff33a5589b29252f.png",F=r(43047),Y=r(64515),$=r(22142),Q=Object.defineProperty,W=Object.defineProperties,J=Object.getOwnPropertyDescriptors,K=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,q=(e,t,r)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,X=(e,t)=>{for(var r in t||(t={}))H.call(t,r)&&q(e,r,t[r]);if(K)for(var r of K(t))G.call(t,r)&&q(e,r,t[r]);return e},ee=(e,t)=>W(e,J(t));const te=(0,n.createContext)({selected:0,setSelected:i.notImplemented}),re=(e,t)=>$.createElement("div",{style:{display:"flex",alignItems:"center",columnGap:4}},$.createElement(o.Z,{className:(0,v.iv)({color:t,fontSize:16,"svg *":{strokeWidth:3}}),component:(0,F.F)(e)}),$.createElement("span",null," ","Effect"===e.type?"动画效果":e.props.name));function ne({scripts:e=[],checking:t,enabled:r,checked:o,desc:a,onChange:i,context:l}){const[s,p]=(0,n.useState)(0),[u,d]=(0,n.useState)(-1);return(0,c.useProvideEvent)(s,e,i),$.createElement(te.Provider,{value:{selected:s,checking:t,enabled:r,checked:o,desc:a,setSelected:p,context:l}},$.createElement(oe,{key:s,distance:4,dragged:u,scripts:e,onChange:i,onSortStart:({index:e})=>{d(e)},onSortEnd:({oldIndex:t,newIndex:r})=>{const n=[];let o=null;const a=(e=[])=>{for(const t of e)n.push(t),u!==n.length-1?"Conditions"===t.props.script&&(a(t.props.scripts),n.push(1),a(t.props.elseScripts)):o=t;n.push(0)};a(e),(0,Z.Y)(n,t,r);const l=n[Symbol.iterator](),c=(e=-1)=>{const t=[];for(const r of l)if("number"!=typeof r)r!==o&&"Conditions"===r.props.script?t.push(ee(X({},r),{props:ee(X({},r.props),{scripts:c(1),elseScripts:c(0)})})):t.push(r);else if(r===e)return t;return t};i(c()),d(-1)}}))}const oe=(0,l.JN)((({scripts:e=[],dragged:t,onChange:r})=>$.createElement("div",{style:{borderRadius:4,overflow:"hidden"}},Array.from(ae(0,t,e,r)))));function*ae(e=0,t,r=[],n,o={current:0},a=!0){for(const[a,i]of r.entries()){const l=$.createElement(ie,{key:o.current,index:o.current++,depth:e,children:$.createElement(ce,{script:i,depth:e,key:i.props.script,onChange:(e,t)=>{const o=r.slice();o[a]=e,n(o,t)},onDelete:()=>{n(r.filter(((e,t)=>t!==a)))}})});if(yield l,"Conditions"===i.props.script){if(t===o.current-1)continue;yield*ae(e+1,t,i.props.scripts,((e,t)=>{const o=r.slice();o[a]=ee(X({},i),{props:ee(X({},i.props),{scripts:e})}),n(o,t)}),o,!1),yield $.createElement(ie,{disabled:!0,key:o.current,index:o.current++,depth:e,children:$.createElement("div",{className:(0,v.iv)({height:"100%",display:"flex",alignItems:"center",padding:`0 ${0===e?12:6}px`})},"否则")}),yield*ae(e+1,t,i.props.elseScripts,((e,t)=>{const o=r.slice();o[a]=ee(X({},i),{props:ee(X({},i.props),{elseScripts:e})}),n(o,t)}),o)}}yield $.createElement(ie,{disabled:!0,key:o.current,index:o.current++,depth:e,last:a,children:$.createElement(se,{depth:e,onAdd:e=>{n(r.concat(e))}})})}const ie=(0,l.W8)((({children:e,depth:t,last:r})=>{const{token:n}=u.Z.useToken();return $.createElement("div",{className:(0,v.cx)((0,v.iv)({background:n.colorBgLayout,height:34,display:"flex",":not(:first-child)":{borderTop:`1px solid ${n.colorBorderSecondary}`,height:35}}))},le(t,r,`1px solid ${n.colorBorderSecondary}`),e)})),le=(e,t,r)=>Array.from({length:e}).map(((o,a)=>a===e-1?$.createElement(n.Fragment,{key:a},$.createElement("div",{className:(0,v.iv)({paddingLeft:18,height:"100%",borderRight:t?void 0:r})}),$.createElement("div",{className:(0,v.iv)({paddingLeft:6,height:"50%",borderLeft:t?r:void 0,borderBottom:r})})):$.createElement("div",{key:a,className:(0,v.iv)({paddingLeft:18,height:"100%",borderRight:r})}))),ce=({script:e,onChange:t,onDelete:r,depth:o})=>{var a,l;const{checking:s,enabled:p,selected:d,checked:y,setSelected:b}=(0,n.useContext)(te),{getState:h,dispatch:O}=(0,m.oR)(),{trigger:k}=(0,z.Z)("editorSender");(0,n.useEffect)((()=>{if(d===e.id){const t=(0,c.changeEditor)(0,{openPanel:e.props.script});return k(t),O(t),()=>{const e=(0,c.changeEditor)(0,{openPanel:"closePanel"});O(e),k(e)}}}),[O,h,e.id,e.props.script,d,k]);const x=g.FP["Effect"===e.type?"Effect":e.props.script],{Summary:E}=x,w=(0,c.useScriptError)(e.props)||E&&$.createElement(E,X({},e))||void 0,{token:P}=u.Z.useToken(),j=(0,v.iv)({position:"absolute",right:8,opacity:0}),{enabled:S=!0}=e.props,I=$.createElement($.Fragment,null,$.createElement("div",{onClick:()=>{b(d===e.id?0:e.id)},className:(0,v.cx)((0,v.iv)({display:"flex",alignItems:"center",height:"100%",flex:"auto",whiteSpace:"nowrap",color:"string"==typeof w?P.colorErrorText:void 0,overflow:"hidden",padding:`0 ${0===o?12:6}px`,position:"relative",[`:hover .${j}`]:{opacity:1,position:"relative",right:-6}}),e.id===d&&(0,v.iv)({background:"rgb(238, 243, 254)"}),!S&&(0,v.iv)({filter:"grayscale(1)",background:"rgb(217, 217, 217)",[`.${j}`]:{opacity:1}}))},re(e,P.colorPrimary),$.createElement("div",{className:(0,v.iv)({margin:"0 8px",width:1,height:20,background:"rgb(235, 235, 235)"})}),$.createElement(f.Z,{title:w},$.createElement("div",{className:(0,v.iv)({flex:"auto",overflow:"hidden",textOverflow:"ellipsis",fontSize:12,opacity:.62})},w)),$.createElement("div",{className:j,onClick:e=>e.stopPropagation()},$.createElement(i.BooleanBase,{type:"enabled",size:"small",value:S,onChange:r=>{t(ee(X({},e),{props:ee(X({},e.props),{enabled:r})}))}}),$.createElement(T.Z,{type:"text",size:"small",icon:$.createElement(Y.Z,null),onClick:r}))),e.id===d&&$.createElement(i.TreeModal,{title:re(e,P.colorPrimary),onCancel:()=>b(0)},function(e,t,r){const{type:n,props:{script:o}}=e,a="Effect"===n?C.Effect.content:C[o].content;if(a){const{openKeys:n=[],enabled:o=!1}=e.editor||{};return(0,i.default)({spark:"context",content:a,provide:()=>({openKeys:{checking:r,enabled:o,openKeys:n,setOpenKeys(r,o){t(B(V({},e),{editor:B(V({},e.editor),{openKeys:(0,i.updateIndices)(n,r,o)})}))}},useValue:r=>{const{indexValue:n,indexEntries:o}=(0,i.getIndexer)(r);return r in e?{value:[e[r]],onChange([n],o){t(B(V({},e),{[r]:n}),o)}}:{value:[n(e.props)],onChange([r],n){t(B(V({},e),{props:V(V({},e.props),Object.fromEntries(o(r)))}),n)}}}})})}return null}(e,t,s)));return s?$.createElement(i.BlockBase,{topBottom:0,leftRight:0,checked:null!=(l=null==(a=e.editor)?void 0:a.enabled)?l:y&&"CustomScript"!==e.props.script,enabled:p&&["CustomScript","CopyText","PlaySound","PlayEffect"].includes(e.props.script),setChecked:r=>{t(ee(X({},e),{editor:ee(X({},e.editor),{enabled:r})}),{after:!0})},onClick:()=>{b(d===e.id?0:e.id)}},I):I},se=({depth:e,onAdd:t})=>{const{desc:r,setSelected:o,context:i}=(0,n.useContext)(te);return $.createElement(j,{onSelect:e=>{(0,b.r3)(b.GM.UserAddEventScript,{name:e.props.name}),o(e.id),t(e)},context:i},$.createElement(T.Z,{type:"link",block:!0,style:{textAlign:"left",padding:`0 ${0===e?12:6}px`}},$.createElement(L.HY,{id:"straight.playable.new.event1",head:"响应事件增加了2个新功能",placement:"leftTop",body:$.createElement("div",null,$.createElement("div",null,$.createElement("strong",null,"震动反馈："),"为你的互动素材提供更多可能性，增加更多有趣的效果！",$.createElement("br",null),$.createElement("br",null),$.createElement("strong",null,"调起下载组件："),"用于互动结尾触发如图所示下载组件，整个素材至少有1个“调起下载组件”响应事件"),$.createElement("img",{src:U,style:{width:"100%",objectFit:"contain",display:"block",margin:"16px 0 0"}}))},$.createElement("span",null,$.createElement(a.Z,null)," ",0===e&&$.createElement($.Fragment,null,"响应事件",r&&$.createElement(f.Z,{title:r},"（查看触发时机）"))))))}},71331:function(e,t,r){"use strict";r.d(t,{C:function(){return i},g:function(){return l}});var n=r(22142),o=r(62732),a=r(60468);function i(e){return["node","func","res","event","store","mouse","scene"].includes(null==e?void 0:e.type)||Array.isArray(e)?n.createElement(a.wH,{value:e}):n.createElement("span",{className:(0,o.iv)({fontWeight:"bold",opacity:.62})},e)}function l(e){return e&&e>0?n.createElement(n.Fragment,null,"延迟",i((e/1e3).toFixed(2)),"s "):null}},32817:function(e,t,r){"use strict";r.d(t,{$n:function(){return h},Ad:function(){return s},CE:function(){return p},CH:function(){return i.C},D9:function(){return f},J4:function(){return u},LB:function(){return b},P4:function(){return c},Pr:function(){return m},V2:function(){return g},V6:function(){return y},am:function(){return d},re:function(){return v}});var n=r(26616),o=r(52142),a=r(34808),i=r(71331),l=r(22142);const c=(0,n.R)({index:"radius",spark:"number",label:"半径",defaultValue:10,tooltip:"半径",max:99999}),s={index:"width",spark:"number",label:"宽度",defaultValue:0,tooltip:"宽度"},p=((0,n.R)(s),{index:"height",spark:"number",label:"高度",defaultValue:0,tooltip:"高度"}),u=((0,n.R)(p),{spark:"number",index:"time",label:"延迟开始",tooltip:"事件延迟开始时间",defaultValue:0,required:!0,precision:2,ratio:-1e3,unit:"s",step:10,min:0}),d={spark:"value",index:"nodeId",content(e,t){return{spark:"element",content:()=>l.createElement(a.Du,{value:e,onChange:t,label:"目标节点"})}}},f={spark:"value",index:"targetId",content(e,t){return{spark:"element",content:()=>l.createElement(a.Du,{value:e,onChange:t,label:"目标节点"})}}},m={spark:"number",index:"duration",label:"持续时长",tooltip:"持续时长",defaultValue:1e3,required:!0,ratio:-1e3,unit:"s",step:10,min:0,precision:2},y={index:"x",spark:"number",label:"X",tooltip:"X 轴坐标",defaultValue:0,required:!0},b=((0,n.R)(y),{index:"y",spark:"number",label:"Y",tooltip:"Y 轴坐标",defaultValue:0,required:!0}),h=((0,n.R)(b),{index:"scaleX",spark:"number",label:"水平缩放",defaultValue:1,step:.1,tooltip:"水平缩放的倍数",required:!0}),g=((0,n.R)(h),{index:"scaleY",spark:"number",label:"垂直缩放",defaultValue:1,step:.1,tooltip:"垂直缩放的倍数",required:!0}),v=((0,n.R)(g),{spark:"select",index:"targetNodeFilterType",defaultValue:"self",label:"发送对象",tooltip:"要把事件发送给哪些节点: 本身，所有的子节点，所有的父节点",options:o.q7})},9308:function(e,t,r){"use strict";r.d(t,{Q:function(){return c}});var n=r(99350),o=r(19104),a=r(70072),i=r(42761),l=r(22142);function c({id:e}){const{dispatch:t}=(0,i.oR)();return l.createElement(a.Z,{block:!0,onClick:()=>{t((0,o.playScript)({scriptId:Number(e)}))},icon:l.createElement(n.Z,null)},"预览")}},27625:function(e,t,r){"use strict";r.d(t,{E:function(){return P},g:function(){return j}});var n=r(23398),o=r(3207),a=r(60468),i=r(22142),l=r(5635),c=r(26840),s=r(62732),p=r(62834),u=r(42761),d=r(19104),f=r(22142),m=Object.defineProperty,y=Object.defineProperties,b=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,k=(e,t)=>{for(var r in t||(t={}))g.call(t,r)&&O(e,r,t[r]);if(h)for(var r of h(t))v.call(t,r)&&O(e,r,t[r]);return e},x=(e,t)=>y(e,b(t));const E={main:(0,s.iv)({boxSizing:"border-box",width:"100%",height:"48px",backgroundColor:"#f0f0f0",border:"1px solid #ebebeb",padding:"4px 8px",borderRadius:"4px",display:"flex",alignItems:"center",flexWrap:"wrap",fontSize:"14px",color:"#000","> p":{margin:0,height:"100%",borderRadius:"4px",textAlign:"center",paddingLeft:"8px",paddingRight:"8px",cursor:"pointer"}}),val:(0,s.iv)({flex:1,width:0,"> span":{display:"inline-block",width:"100%",lineHeight:"38px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),placeholder:(0,s.iv)({color:"#999"}),operate:(0,s.iv)({lineHeight:"38px",fontSize:"16px!important"}),options:(0,s.iv)({width:"100%",height:"34px",border:"1px solid #f0f0f0",display:"flex",alignItems:"center",marginTop:"16px",overflow:"hidden",borderRadius:"4px","> div":{flex:1,height:"100%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"16px!important"}})};function w({options:e,render:t}){var r,n,o;const{token:a}=l.Z.useToken(),[p,u]=(0,i.useState)(null!=(n=null==(r=e.find((e=>e.operator&&"mode"!==e.value)))?void 0:r.value)?n:"");return f.createElement("div",{className:(0,s.iv)({display:"flex",flexDirection:"column",rowGap:16})},f.createElement("div",{className:E.main},e.map((({label:e,value:t,tooltip:r,operator:n,error:o})=>f.createElement(c.Z,{key:t,title:null!=r?r:e,placement:"top",mouseEnterDelay:.5},f.createElement("p",{className:(0,s.cx)(n?E.operate:E.val,t===p&&(0,s.iv)({color:a.colorPrimaryText,background:a.colorBgContainer,span:{color:a.colorPrimaryText}}),o&&(0,s.iv)({color:a.colorErrorText,span:{color:a.colorErrorText}})),onClick:()=>{u(p!==t?t:void 0)}},f.createElement("span",null,e)))))),t(null!=(o=e.find((({value:e})=>e===p)))?o:{}))}const P=(e,t,r,i,l)=>({spark:"element",content(){const c=(0,p.SW)(),{getState:s}=(0,u.oR)();return f.createElement(w,{options:r.map((t=>{var r,o;return t===i?x(k({},(0,n.Uo)(e[t],t)),{value:t,operator:!0}):{value:t,label:f.createElement(a.wH,{value:null!=(r=e[t])?r:0}),error:""!==(0,d.checkOperandError)(null!=(o=e[t])?o:0,s().project)}})),render:({value:r,operator:s})=>{var p;return r?s?(0,o.default)((0,n.K_)(e[r],((n,o)=>t(x(k({},e),{[r]:n}),o)),r)):(0,o.default)((0,a.VX)(null!=(p=e[r])?p:0,((o,a)=>{if("from"===r){if(("store"!==o.type||"object"!=typeof(null==c?void 0:c[o.key]))&&((0,n.dr)(e[i])||(0,n.Gr)(e[i])))return t(x(k({},e),{[r]:o,[i]:"="}),a);if("store"===(null==o?void 0:o.type)&&o.key){if(Array.isArray(null==c?void 0:c[o.key]))return t(x(k({},e),{[r]:o,[i]:"array.insert",index:0}),a);if("object"==typeof(null==c?void 0:c[o.key])&&null!==(null==c?void 0:c[o.key]))return t(x(k({},e),{[r]:o,[i]:"object.update",index:0}),a)}}t(x(k({},e),{[r]:o}),a)}),l&&(e=>l(e,i,r)))):null}})}}),j=({expression:e,keys:t,operator:r,depth:o=0})=>{const l=e[r];return f.createElement(f.Fragment,null,t.length>1&&o>0&&"(",t.map(((o,c)=>{var s;return o===r?f.createElement(i.Fragment,{key:o},(0,n.Uo)(l,r).label):!(["array.clear","object.clear"].includes(l)&&"to"===o)&&f.createElement(i.Fragment,{key:o},0!==c&&t[t.length-1]===r&&("math.random"===l?"到":"与"),f.createElement(a.wH,{key:o,value:null!=(s=e[o])?s:0}))})),t.length>1&&o>0&&")")}},60468:function(e,t,r){"use strict";r.d(t,{wH:function(){return I},Gr:function(){return _},VX:function(){return A}});var n=r(34808),o=r(40985),a=r(42761);const i={name:"名称",url:"链接地址",x:"X坐标",y:"Y坐标",width:"宽度",height:"高度",rotation:"旋转角度",alpha:"透明度",visible:"是否可见",mouseEnabled:"是否可点击",anchorX:"锚点X",anchorY:"锚点Y",scaleX:"水平缩放比",scaleY:"垂直缩放比",data:"自定数据",enabled:"是否启用",animName:"动画片段",fillColor:"填充颜色",lineColor:"描边颜色",strokeColor:"描边颜色",color:"颜色",text:"文本",fontSize:"字号",volume:"音量",position:"位置",scale:"缩放",castShadows:"开启模型阴影",receiveShadows:"接收阴影",meshType:"模型类型",clearFlag:"清除模式",clearColor:"背景颜色",projection:"投影类型",fieldOfView:"垂直角度",nearClip:"正切面",farClip:"远切面",normalizedViewport:"视口",lightType:"光照类型",range:"范围",spotAngle:"角度",intensity:"光照强度",shadowType:"阴影类型",shadowDistance:"阴影距离",shadowResolution:"阴影分辨率",shadowBias:"阴影偏移",shadowNormalBias:"阴影法线偏移",ambientMode:"环境模式",ambientColor:"环境光颜色",flogMode:"雾模式",flogStart:"开始距离",flogEnd:"结束距离",flogColor:"雾颜色"},l=["name","url","x","y","width","height","rotation","alpha","visible","mouseEnabled","anchorX","anchorY","scaleX","scaleY","data","enabled"],c=["enabled","position","rotation","scale"],s={Container:l,Sprite:l,Shape:["name","fillColor","lineColor","x","y","width","height","rotation","alpha","visible","mouseEnabled","anchorX","anchorY","scaleX","scaleY","data","enabled"],Button:["name","text","fontSize","color","x","y","width","height","rotation","enabled"],Text:["name","text","fontSize","color","strokeColor","x","y","width","height","rotation","alpha","visible","mouseEnabled","anchorX","anchorY","scaleX","scaleY","data","enabled"],Sound:["name",{value:"url",label:"背景音乐"},"volume","enabled"],Video:["name","volume","x","y","width","height","rotation","alpha","visible","mouseEnabled","anchorX","anchorY","scaleX","scaleY","data","enabled"],Animation:l,Particle:["name","x","y","scaleX","scaleY","enabled"],FrameAnime:l,Lottie:l,DragonBones:["name","x","y","width","height","rotation","alpha","visible","mouseEnabled","anchorX","anchorY","scaleX","scaleY","data","animName","enabled"],Spine:["name","x","y","width","height","rotation","alpha","visible","mouseEnabled","anchorX","anchorY","scaleX","scaleY","data","animName","enabled"],Live2d:["name","x","y","width","height","rotation","alpha","visible","mouseEnabled","anchorX","anchorY","scaleX","scaleY","data","animName","enabled"],Light:["lightType",{value:"color",label:"光颜色"},"range","spotAngle","intensity","shadowType","shadowDistance","shadowResolution","shadowBias"],Camera:["enabled","position","rotation","scale","clearFlag","clearColor","projection","fieldOfView","nearClip","farClip","normalizedViewport"],MeshSprite3D:["enabled","position","rotation","scale","meshType","castShadows","receiveShadows"],Scene3D:["enabled","ambientMode","ambientColor","flogMode","flogStart","flogEnd","flogColor"],Model:c,Particle3D:c};var p=r(53983),u=r(62834),d=r(27625),f=r(3207),m=r(23398),y=r(22142),b=r(26840),h=r(80926),g=r(7891),v=r(22142),O=Object.defineProperty,k=Object.defineProperties,x=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,j=(e,t,r)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&j(e,r,t[r]);if(E)for(var r of E(t))P.call(t,r)&&j(e,r,t[r]);return e},C=(e,t)=>k(e,x(t));const I=({value:e,depth:t=0})=>{var r;const a=(0,n.Am)();switch(typeof e){case"number":case"string":case"boolean":return v.createElement(v.Fragment,null,JSON.stringify(e));case"object":if(Array.isArray(e))return v.createElement(v.Fragment,null,"[",e.map(((e,t)=>v.createElement(y.Fragment,{key:t},0===t?"":", ",v.createElement(I,{value:e})))),"]");switch(e.type){case"event":return v.createElement(v.Fragment,null,"事件对象的$",e.key);case"node":{const t=a.find((t=>{var r,n;return t.value===(null!=(n=null==(r=e.ids)?void 0:r[0])?n:-1)}));return v.createElement(v.Fragment,null,(null==t?void 0:t.label)||"素材节点","的",null!=(r=i[e.key])?r:"?")}case"store":return v.createElement(v.Fragment,null,e.key||"?");case"func":return v.createElement(d.g,{depth:t+1,expression:e,keys:M(e.key),operator:"key"});case"res":{const{_editor:{name:t}={name:""}}=e;return v.createElement(v.Fragment,null,t||"?")}case"mouse":{const{key:t="x"}=e;return v.createElement(v.Fragment,null,"鼠标","x"===t?"横坐标":"纵坐标")}case"scene":return v.createElement(v.Fragment,null,e.key);default:return(0,o.Ak)(e)}}},A=(e,t,r)=>{switch(typeof e){case"boolean":return{spark:"grid",content:[R(e,t,r),N(typeof e,t),{spark:"label",label:"值",content:{spark:"element",content:r=>r({spark:typeof e,value:e,onChange:t})}}]};case"number":case"string":return{spark:"grid",content:[R(e,t,r),N(typeof e,t),{spark:"element",content:r=>r({spark:typeof e,value:e,onChange(r,n){t((0,f.callValue)(r,e),n)},label:"值"})}]};case"object":if(Array.isArray(e))return{spark:"grid",content:[R(e,t,r),N("array",t),{spark:"label",content:{spark:"element",content:()=>v.createElement(f.ArrayCell,{label:"值",array:e,defaultItem:0,onChange:t,render:(e,t)=>(0,f.default)(A(null!=e?e:0,t))})}}]};switch(e.type){case"node":return{spark:"grid",content:[R(e,t,r),{spark:"element",content:()=>{var r;return v.createElement(n.Du,{value:null==(r=e.ids)?void 0:r[0],label:"素材节点",onChange:r=>t(C(S({},e),{ids:[r]}))})}},{spark:"element",space:"node",content:r=>{var c,p;const u=(0,n.jt)(),{getState:d}=(0,a.oR)(),f=(0,o.zh)(d().project),{props:m}=f,y=(null==(c=null==e?void 0:e.ids)?void 0:c[0])||u,{compProps:b=[]}=m[y]||{},h=b.filter((({type:e})=>!e.startsWith("Script_"))).reduce(((e,{props:t,ids:r,name:n})=>[...e,...t.map((({key:e})=>({value:`${e}:${r.join(":")}`,label:`${n}的${e}`,key:e,ids:r})))]),[]),g=function(e){const{targetId:t}=e;return(0,a.v9)((({project:e})=>{const r=(0,o.zh)(e),n=(0,o.v$)(r),{editor:{selected:a}}=r,{nodeIds:c}=(0,o.bN)(a),[p]=(0,o.qC)(n,-1===t?null==c?void 0:c[0]:t);return p?(u=p.type,(s[u]||l).map((e=>"string"==typeof e?{value:e,label:i[e]}:e))):[];var u}),a.wU)}({targetId:y});return r({spark:"select",value:(null==(p=e.ids)?void 0:p.length)>1?`${e.key}:${e.ids.slice(1).join(":")}`:e.key,label:"素材属性",onChange(r){const n=h.find((e=>e.value===r));if(n){const{ids:r,key:o}=n,a=e.ids[0];t(C(S({},e),{key:o,ids:[a,...r]}))}else{const n=e.ids[0];t(C(S({},e),{key:r,ids:[n]}))}},options:[...h,...g]})}}]};case"res":return{spark:"grid",content:[R(e,t,r),{spark:"element",content:()=>{var r;return v.createElement(p.r,{deletable:!0,type:"Sprite",url:e.url,name:null==(r=e._editor)?void 0:r.name,onChange:({url:r,name:n})=>{t(C(S({},e),{url:r,_editor:C(S({},e._editor),{name:n})}))}})}}]};case"store":return{spark:"grid",content:[R(e,t,r),{spark:"element",space:"store",content:r=>{const n=(0,u.r6)();return r({spark:"select",value:e.key,label:"变量名",options:n,onChange(r){t(C(S({},e),{key:r}))}})}}]};case"func":const c=M(e.key);return{spark:"grid",content:[R(e,t,r),c.length>1?(0,d.E)(e,t,c,"key",r):(0,m.K_)(e.key,((r,n)=>t(C(S({},e),{key:r}),n)),"key")]};case"event":return{spark:"grid",content:[R(e,t,r)]};case"mouse":return{spark:"grid",content:[R(e,t,r),{spark:"element",content(r){return r({spark:"select",label:"坐标",options:[{value:"x",label:"水平坐标"},{value:"y",label:"垂直坐标"}],value:e.key||"x",onChange(r,n){t(C(S({},e),{key:r}),n)}})}},{spark:"element",content(r){var n;return r({spark:"boolean",children:v.createElement(b.Z,{title:"局部坐标表示鼠标相对于父对象的偏移量，否则相对于场景",placement:"top"},v.createElement(h.Z.Text,{type:"secondary"},"是否为局部坐标")),value:null==(n=e.isLocal)||n,onChange(r,n){t(C(S({},e),{isLocal:r}),n)}})}}]};case"scene":return{spark:"grid",content:[R(e,t,r),{spark:"element",content(r){return r({spark:"select",label:"场景数值",options:(0,g.v)(),value:e.key,onChange(r,n){t(C(S({},e),{key:r}),n)}})}}]};default:return(0,o.Ak)(e)}default:return{spark:"grid",content:[R(e,t,r)]}}},M=e=>{switch(e){case"array.length":case"math.round":case"math.floor":case"array.pop":case"math.ceil":case"math.sin":case"math.cos":return["source","key"];case"math.fixed":case"array.push":return["key","source","value"];case"math.random":case"math.min":case"math.max":return["source","value","key"];case"array.get":case"object.get":return["source","key","index"];case"math.now":return["key"];case"array.update":case"array.insert":return["source","index","key","value"];case"array.delete":return["source","index","key","len"];default:return["source","key","value"]}},_=(e,t)=>{const{from:r,mode:n,compare:o}=e;if(o)return["from","compare","to"];if(n&&"store"===(null==r?void 0:r.type)&&r.key){const e=null==t?void 0:t[r.key];if(Array.isArray(e))switch(n){case"array.insert":case"array.update":default:return["from","index","mode","to"];case"array.delete":return["from","index","mode"];case"array.clear":return["from","mode"]}else if("object"==typeof e&&null!==e)switch(n){case"object.update":default:return["from","index","mode","to"];case"object.delete":return["from","index","mode"];case"object.clear":return["from","mode"]}}return["from","mode","to"]},D=[{label:"固定数值",value:"simple"},{label:"节点属性",value:"node"},{label:"场景数值",value:"scene"},{label:"全局变量",value:"store"},{label:"计算数据",value:"func"},{label:"鼠标位置",value:"mouse"},{label:"素材资源",value:"res"}],R=(e,t,r)=>{var n;const o=null!=(n=null==r?void 0:r(D))?n:D;return{spark:"element",hidden:1===o.length,content:r=>{var n;return r({spark:"select",label:"数据类型",value:"object"!=typeof e||Array.isArray(e)?"simple":null==(n=o.find((t=>t.value===(null==e?void 0:e.type))))?void 0:n.value,options:o,onChange(e){switch(e){case"simple":return t(0);case"node":return t({type:e,ids:[-1]});case"func":return t({type:e,key:"math.plus",source:0,value:0});case"mouse":return t({type:e,key:"x",isLocal:!0});case"scene":return t({type:e,value:""});default:return t({type:e})}}})}}},N=(e,t)=>({spark:"element",content:r=>r({spark:"select",label:"数值类型",options:[{label:"数字",value:"number"},{label:"字符",value:"string"},{label:"布尔",value:"boolean"},{label:"数组",value:"array"}],value:e,onChange(e){switch(e){case"number":return t(0);case"string":return t("");case"boolean":return t(!1);case"array":return t([])}}})})},23398:function(e,t,r){"use strict";r.d(t,{Gr:function(){return u},K_:function(){return l},Uo:function(){return c},dr:function(){return p}});var n=r(68373),o=r(26840),a=r(62732),i=r(22142);const l=(e,t,r)=>{const l=s(r,e);return"key"===r?{spark:"element",content:r=>r({spark:"select",options:l.map((({value:e,label:t,tooltip:r})=>({value:e,label:r?`${t}(${r})`:t.replace(/^的/g,"")}))),value:null!=e?e:l[0].value,label:"计算方式",onChange(e,r){t(e,r)}})}:{spark:"element",content:()=>i.createElement(n.ZP.Group,{value:null!=e?e:l[0].value,onChange:({target:{value:e}})=>t(e),className:(0,a.iv)({width:"100%",display:"flex",">*":{flex:"auto",textAlign:"center"}}),buttonStyle:"solid"},l.map((({label:e,value:t,tooltip:r})=>i.createElement(o.Z,{key:t,title:r},i.createElement(n.ZP.Button,{value:t},e)))))}},c=(e,t)=>{var r;const n=s(t,e);return null!=(r=n.find((t=>t.value===e)))?r:n[0]},s=(e,t)=>{switch(e){case"mode":return p(t)?[{label:"插入",value:"array.insert",tooltip:"插入"},{label:"更新",value:"array.update",tooltip:"更新"},{label:"删除",value:"array.delete",tooltip:"删除"},{label:"清空",value:"array.clear",tooltip:"清空"}]:u(t)?[{label:"更新",value:"object.update",tooltip:"更新"},{label:"删除",value:"object.delete",tooltip:"删除"},{label:"清空",value:"object.clear",tooltip:"清空"}]:[{label:"=",value:"=",tooltip:"等于"},{label:"+=",value:"+",tooltip:"加等于"},{label:"-=",value:"-",tooltip:"减等于"},{label:"×=",value:"x",tooltip:"乘等于"},{label:"÷=",value:"÷",tooltip:"除等于"}];case"key":return[{label:"+",value:"math.plus",tooltip:"加"},{label:"-",value:"math.subtract",tooltip:"减"},{label:"×",value:"math.multiply",tooltip:"乘"},{label:"÷",value:"math.divide",tooltip:"除"},{label:"%",value:"math.remain",tooltip:"取余数"},{label:"的四舍五入",value:"math.round"},{label:"的向下取整",value:"math.floor"},{label:"的向上取整",value:"math.ceil"},{label:"的随机数",value:"math.random"},{label:"当前时间",value:"math.now"},{label:"的较大值",value:"math.max"},{label:"的较小值",value:"math.min"},{label:"的正弦",value:"math.sin"},{label:"的余弦",value:"math.cos"},{label:"的长度",value:"array.length"},{label:"数组取值",value:"array.get"},{label:"对象取值",value:"object.get"}];case"compare":return[{label:"==",value:"=",tooltip:"等于"},{label:"≠",value:"!=",tooltip:"不等于"},{label:"<",value:"<",tooltip:"小于"},{label:"≤",value:"<=",tooltip:"小于等于"},{label:">",value:">",tooltip:"大于"},{label:"≥",value:">=",tooltip:"大于等于"}];default:return[]}};function p(e){return["array.insert","array.update","array.delete","array.clear"].includes(e)}function u(e){return["object.update","object.delete","object.clear"].includes(e)}},44372:function(e,t,r){"use strict";r.d(t,{xN:function(){return F},rM:function(){return L},qY:function(){return z},pL:function(){return U}});var n=r(40068),o=r(92546),a=r(31618),i=r(22258),l=r(2119),c=r(93605),s=r(19104),p=r(36263),u=r(66445),d=r(18725),f=r(40985),m=r(26750),y=r(62255),b=r(70072),h=r(61754),g=r(16969),v=r(73760),O=r(22142);const k=(e,t)=>{(0,f.r3)(f.GM.CodeMode,null);const r=new URLSearchParams(location.search);r.set("project",String(e)),r.set("tab",String(t)),window.open(`/ide?${r}`,`webIdeWindow${e}`)};var x=r(1707),E=r(42761),w=r(23247),P=r.n(w),j=r(62732),S=r(64515),C=r(22142),I=Object.defineProperty,A=Object.defineProperties,M=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,N=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,V=(e,t)=>{for(var r in t||(t={}))D.call(t,r)&&N(e,r,t[r]);if(_)for(var r of _(t))R.call(t,r)&&N(e,r,t[r]);return e},B=(e,t)=>A(e,M(t)),Z=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const T={box:(0,j.iv)({display:"flex",width:"100%"}),boxLeft:(0,j.iv)({flex:"0 0 72px",display:"flex",alignItems:"center",justifyContent:"center",height:"72px",backgroundColor:"#F0F0F0"}),boxRight:(0,j.iv)({flex:1,display:"flex",flexDirection:"column",justifyContent:"center",paddingLeft:"12px",backgroundColor:"#FAFAFA"}),readonlyTips:(0,j.iv)({lineHeight:"32px",color:"#777",fontSize:"12px",borderRadius:"4px"})};function z(e,t){return Object.fromEntries(Object.entries(t).map((([t,r])=>[t,U(e[t],r)])))}function L(e,t,r){const n=t?(0,x.b)(t,r):{},o=Object.fromEntries(Object.entries(n||{}).map((([e,t])=>{if(!(0,f.cG)(t))throw new Error(`不支持${t.callee}`);return[`$${e}`,t]}))),{oldProps:a,rest:i}=Object.entries(e).reduce(((e,[t,r])=>(t.startsWith("$")?e.oldProps[t]=r:e.rest[t]=r,e)),{oldProps:{},rest:{}});return V(V({},i),z(a,o))}function U(e,t){if(!e)return t;if(!t)return e;if(e.callee!==t.callee)return t;switch(e.callee){case"Riko.useObject":case"object":return B(V({},t),{value:Object.fromEntries(Object.entries(t.value||{}).map((([t,r])=>[t,U(e.value[t],r)]))),_editor:e._editor||{}});case"Riko.useArray":return B(V({},t),{value:e.value.map(((r,n)=>(0,f.Xm)(U((0,f.a$)(e.defaultItem,r),(0,f.a$)(t.defaultItem,t.value[n]))))),_editor:e._editor||{}});default:return B(V({},t),{value:e.value,_editor:e._editor||{}})}}const F=({props:e,onChange:t})=>{var r;const{dispatch:x,getState:w}=(0,E.oR)(),{url:I,_editor:{name:A}={},_resName:M,jsCode:_,tsCode:D}=e,{readOnly:R}=(0,s.useEditor)(0,"readOnly"),N=(0,s.useProject)("id"),[z,U]=(0,O.useState)(!1),[F,$]=(0,O.useState)(!1),Q=(0,s.useOnAddCustomScript)(),{updated:W,setUpdated:J}=function(e=2e3){const[t,r]=(0,O.useState)(Number(localStorage.getItem(d.Y))||(new Date).getTime()),n=(0,O.useRef)(t);n.current=t;const[o,a]=(0,O.useState)(!1);return(0,O.useEffect)((()=>{let t=null;return function o(){t=setTimeout((()=>{const e=Number(localStorage.getItem(d.Y));n.current!==e&&(r(e),a(!0)),o()}),e)}(),()=>{t&&clearTimeout(t)}}),[e]),{updated:o,setUpdated:a}}();return(0,O.useEffect)((()=>{J(!0)}),[J,I]),(0,O.useEffect)((()=>{try{const r=P().CancelToken.source();if(W)if(e.url){const r=void 0!==(0,f.o$)(w().project).settings.jsCode?L(e,(0,f.o$)(w().project).settings.jsCode,e.url):L(e,(0,f.se)(w().project,e.url).jsCode);t(r),J(!1)}else t(L(e)),J(!1);return()=>{r.cancel()}}catch(e){}}),[w,t,e,J,W]),C.createElement(m.Z,null,C.createElement("div",{className:T.box},C.createElement("div",{className:T.boxLeft},C.createElement(n.Z,{className:(0,j.iv)({fontSize:32,color:"#999"})})),C.createElement("div",{className:T.boxRight},I&&C.createElement(y.Z,{className:(0,j.iv)({paddingLeft:0,marginTop:8}),bordered:!1,prefix:C.createElement(o.Z,null),value:null==(r=A||M)?void 0:r.replace(/\.(ts|js)$/g,""),onChange:r=>t(B(V({},e),{_editor:{name:r.currentTarget.value}}))}),R&&(0,v.isNumber)(I)?C.createElement("div",null,C.createElement(b.Z,{className:(0,j.cx)(Y,(0,j.iv)({width:"auto !important"})),type:"link",icon:C.createElement(o.Z,null),onClick:()=>{k(N,I)}},"查看")):R||!I&&_&&D?C.createElement(b.Z,{className:(0,j.cx)(Y,(0,j.iv)({width:"auto !important"})),type:"link",icon:C.createElement(a.Z,null),onClick:()=>{navigator.clipboard.writeText(String(D||_)).then((()=>{h.ZP.success("复制源码成功")}),(()=>{h.ZP.error("复制源码失败")}))}},"复制源码"):C.createElement("div",{className:(0,j.iv)({display:"flex",columnGap:8})},C.createElement(b.Z,{className:(0,j.cx)(Y,(0,j.iv)({width:"auto !important"})),type:"link",icon:C.createElement(i.Z,null),onClick:()=>U(!0)},"选择"),C.createElement(g.Z,{accept:".ts,.js",multiple:!1,showUploadList:!1,beforeUpload:e=>{const t=new FileReader;return t.readAsText(e),t.onload=()=>Z(void 0,null,(function*(){const r="text/javascript"===e.type?"javascript":"typescript";if((0,v.isString)(t.result)){const n={type:"CustomScript",jsCode:"",ideCode:t.result,language:r},{id:o,orderId:a}=yield(0,s.createScriptComponent)(N,e.name,n);x((0,s.addCustomScript)(V({id:o,orderId:a,name:e.name},n))),setTimeout((()=>{k(N,a)}),300)}})),!1}},C.createElement(b.Z,{className:(0,j.cx)(Y,(0,j.iv)({width:"auto !important"})),type:"link",icon:C.createElement(l.Z,null)},"上传")),I&&"number"==typeof I?C.createElement(b.Z,{className:(0,j.cx)(Y,(0,j.iv)({width:"auto !important"})),type:"link",icon:C.createElement(o.Z,null),onClick:()=>{k(N,I)}},"编辑"):C.createElement(b.Z,{className:(0,j.cx)(Y,(0,j.iv)({width:"auto !important"})),type:"link",icon:C.createElement(c.Z,null),onClick:()=>Z(void 0,null,(function*(){$(!0)}))},"创建"),I&&C.createElement(b.Z,{className:(0,j.cx)(Y,(0,j.iv)({width:"auto !important"})),style:{color:"#f65656"},type:"link",icon:C.createElement(S.Z,{className:(0,j.iv)({lineHeight:0,"+ span":{marginLeft:4}})}),onClick:()=>t({name:e.name,script:e.script,url:null})},"删除")))),z&&C.createElement(p.O,{eleType:"CustomScript",title:I?"更换脚本":"选择脚本",onChange:({url:r,name:n})=>{t(B(V({},e),{url:r,_editor:{name:n}})),U(!1)},onClose:()=>U(!1)}),F&&C.createElement(u.I,{onConfirm:(r,n)=>Z(void 0,null,(function*(){const o=r+("typescript"===n?".ts":".js"),{orderId:a,projectId:i}=yield Q(o,n);t(B(V({},e),{url:a,_editor:B(V({},e._editor),{name:o})})),$(!1),setTimeout((()=>{k(i,a)}),300)})),onCancel:()=>{$(!1)}}))},Y=(0,j.iv)({padding:0,fontSize:12,display:"flex",alignItems:"center","&.ant-btn > .anticon + span":{marginLeft:4}})},1707:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{b:function(){return parseScript}});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(73760),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))__hasOwnProp.call(t,r)&&__defNormalProp(e,r,t[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(t))__propIsEnum.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__objRest=(e,t)=>{var r={};for(var n in e)__hasOwnProp.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&__getOwnPropSymbols)for(var n of __getOwnPropSymbols(e))t.indexOf(n)<0&&__propIsEnum.call(e,n)&&(r[n]=e[n]);return r};class PropConfig{constructor(e,t={}){this.config=__spreadValues({callee:e},t)}}PropConfig.Script=class{};const parseScript=(jsCode,orderId)=>{const Riko=getProxy("Riko"),Riko3D=getProxy("Riko3D");if(!orderId){const exports={default:PropConfig.Script};return eval(jsCode),parse(filter(new exports.default))}{const exports={default:e=>PropConfig.Script};eval(jsCode);const script=exports.default(orderId);if(script)return parse(filter(new script))}},getProxy=e=>new Proxy(PropConfig,{get(t,r){var n;return null!=(n=Reflect.get(t,r))?n:getProxy(`${e}.${r}`)},apply(t,r,n){return Reflect.construct(t,[e,...n])},construct(t,r){return{callee:`new ${e}`,args:r}},getPrototypeOf(){return null}}),filter=e=>(0,lodash__WEBPACK_IMPORTED_MODULE_0__.pickBy)(e,(e=>null!=e&&!Array.isArray(e)&&null!==Object.getPrototypeOf(e)&&("object"!=typeof e||(e.callee?e.callee.startsWith("Riko.use")||e.callee.startsWith("Riko3D.use"):Object.keys(e).length===Object.keys(filter(e)).length)))),parse=(e={},t=0)=>Object.fromEntries(Object.entries(e).reduce(((e,[r,n])=>{if(!r||r.startsWith("_"))return e;const{config:o}=n instanceof PropConfig?n:new PropConfig(typeof n,{default:n});switch(o.callee){case"Riko.useObject":case"object":{const n=o,{default:a}=n,i=__objRest(n,["default"]),l=parse(filter(a),t);Object.keys(l).length&&e.push([r,__spreadProps(__spreadValues({orderIndex:t++},i),{value:l})]);break}case"Riko.useArray":{const{defaultItem:n}=parse(filter(o),t);n&&e.push([r,__spreadProps(__spreadValues({orderIndex:t++},o),{defaultItem:n,value:[]})]);break}case"Riko.useEffect":e.push([r,__spreadProps(__spreadValues({orderIndex:t++},o),{default:{name:"透明动画",script:"AlphaTo",__script:["baseEffect","AlphaTo_透明动画"],targetId:-1,loop:!1,time:0,duration:1e3,alpha:0}})]);break;case"Riko.useEvent":e.push([r,__spreadProps(__spreadValues({orderIndex:t++},o),{value:[]})]);break;default:e.push([r,__spreadValues({orderIndex:t++},o)])}return e}),[]))},66254:function(e,t,r){"use strict";r.r(t),r.d(t,{ChangeScene:function(){return d},ChangeState:function(){return v},CloneComponent:function(){return Wr},Conditions:function(){return ve},CopyText:function(){return Ke},CustomScript:function(){return Rr},Destroy:function(){return k},DirectDownload:function(){return Kr},DownloadApp:function(){return qr},Effect:function(){return D},EmitEvent:function(){return Ne},FollowMouse:function(){return Vr},GotoAndPlay:function(){return se},GotoAndStop:function(){return ue},ModifyData:function(){return we},ModifyProperty:function(){return _e},OpenURL:function(){return m},PhysicsBehavior:function(){return vr},Play:function(){return le},PlayEffect:function(){return ne},PlaySound:function(){return Y},PlayableComponentEvent:function(){return it},Print:function(){return Ge},Quake:function(){return rt},RemoveScene:function(){return en},Replay:function(){return tn},RigidBody:function(){return hr},Settings:function(){return We},Stop:function(){return ae},Track:function(){return ot}});var n=r(19104),o=r(30470),a=r(8907),i=r(26616),l=r(81306),c=r(52142),s=r(32817),p=r(71331),u=r(22142);const d={name:"切换场景",category:"常用",checkError:({sceneId:e})=>{const t=n.default.getState().project;return"number"!=typeof e?"未设置切换目标场景":e>0&&t.scenes.every((({type:t,orderId:r})=>"Scene"!==t||r!==e))?"切换目标场景不存在":""},Summary:({props:e})=>{const{time:t,sceneId:r}=e,n=(0,l.$)().find((e=>e.value===r));return u.createElement(u.Fragment,null,(0,p.g)(t)," 切换至 ",(0,p.C)(null==n?void 0:n.label))},content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg}),(0,l.b)({spark:"select",index:"sceneId",label:"切换至",tooltip:"切换至某个场景",placeholder:"请选择",defaultValue:void 0,required:!0}),{spark:"value",index:["destroyLastScene","relation"],content([e=!0,t=1],r){const n=[{label:"替换当前场景",value:[!0,1]},{label:"叠加到顶层",value:[!1,0]},{label:"叠加到上面",value:[!1,1]},{label:"叠加到下面",value:[!1,2]}];return{spark:"element",content:o=>o({spark:"select",label:"切换方式",value:n.findIndex((({value:[r,n]})=>r===e&&n===t)),options:n.map((({label:e},t)=>({label:e,value:t}))),onChange(e,t){r(n[e].value,t)}})}}},{spark:"select",index:"transition",label:"转场效果",tooltip:"转场效果",defaultValue:"none",options:c.yM,required:!0},{spark:"check",index:"transition",check:{hidden:e=>"move"!==e},content:{spark:"select",index:"direction",label:"滑入方向",tooltip:"滑入方向",defaultValue:"right",options:c.A8}}]}}};var f=r(22142);const m={name:"跳转链接",category:"常用",content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg}),{spark:"string",index:"url",label:"链接地址"}]}},Summary:({props:{time:e}})=>e?f.createElement(f.Fragment,null,(0,p.g)(e),"执行"):f.createElement(f.Fragment,null,"立即执行")};var y=r(40985),b=r(42761),h=r(34808),g=r(22142);const v={name:"切换状态",category:"常用",checkRef:({targetId:e},t)=>t.includes(e),checkError:({targetId:e,value:t})=>void 0===e?"未设置目标节点":void 0===t?"未设置目标状态":"",Summary:({props:{targetId:e}})=>{const t=(0,h.Am)().find((t=>t.value===e));return t?g.createElement(g.Fragment,null,"切换 ",(0,p.C)(null==t?void 0:t.label)," ",(0,y.W6)(t.type)?"状态":"动画片段"):g.createElement(g.Fragment,null,"请选择目标节点")},content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg}),{spark:"grid",content:[s.D9,{spark:"check",index:"targetId",check:{options:e=>(0,b.v9)((({project:t})=>{var r,n,o,a,i,l;const c=(0,h.jt)(),s=(0,y.zh)(t),p=(0,y.v$)(s),[u]=(0,y.qC)(p,-1===e?c:e);if(u){if((0,y.W6)(u.type)){const e=null==(n=null==(r=u.editor)?void 0:r.state)?void 0:n.map((({name:e,id:t})=>({label:e,value:t})));return(null==e?void 0:e.every((e=>-1!==e.value)))&&e.push({label:"默认状态",value:-1}),e}return u.scripts.some((e=>"Controller"===e.type))&&(null==(l=(null==(o=u.editor)?void 0:o.animations)||(null==(i=null==(a=u.editor)?void 0:a.layerAnimations)?void 0:i[0]))?void 0:l.map((([e])=>({label:e,value:String(e)}))))||[]}return[]}),b.wU),label:e=>(0,b.v9)((({project:t})=>{const r=(0,y.zh)(t),n=(0,y.v$)(r),[o]=(0,y.qC)(n,e);return o?(0,y.W6)(o.type)?"组件状态":o.scripts.some((e=>"Controller"===e.type))?"动画片段":"状态":"状态"}))},content:{spark:"select",label:"状态",index:"value"}}]}]}}};var O=r(22142);const k={name:"销毁对象",category:"常用",Summary:({props:e})=>{var t;const{time:r,targetType:n}=e,o=null==(t=c.fn.find((e=>e.value===n)))?void 0:t.label;return n?O.createElement(O.Fragment,null,(0,p.g)(r)," 销毁 ",(0,p.C)(o)):null},content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg}),{spark:"check",index:"",check:{options:()=>{const{enableBlueprint:e}=(0,n.useEditor)(0,"enableBlueprint");return e?c.fn.filter((({value:e})=>"self"!==e)):c.fn.filter((({value:e})=>"node"!==e))}},content:{index:"targetType",spark:"select",label:"销毁对象",defaultValue:"self",tooltip:"销毁对象",required:!0}},{spark:"check",index:"targetType",check:{hidden:e=>"node"!==e},content:s.D9}]}}};var x=r(3207),E=r(42014),w=r(22142),P=Object.defineProperty,j=Object.defineProperties,S=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,M=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_=(e,t)=>{for(var r in t||(t={}))I.call(t,r)&&M(e,r,t[r]);if(C)for(var r of C(t))A.call(t,r)&&M(e,r,t[r]);return e};const D={name:"动画效果",category:"常用",extraProps:({enableBlueprint:e}={})=>({__script:["baseEffect","AlphaTo_透明动画"],name:"透明动画",alpha:0,time:0,loop:!1,duration:1e3,targetId:e?void 0:-1}),checkRef:({targetId:e},t)=>t.includes(e),Summary:({props:{name:e,targetId:t}})=>{const r=(0,h.jt)(),n=(0,h.uc)(-1===t?r:t);return e?w.createElement(w.Fragment,null,n&&(0,s.CH)(n.name)," 播放 ",(0,s.CH)(e)):null},content:{spark:"value",index:"props",content(e,t){return{spark:"value",index:"id",content(r){return{spark:"context",content:{spark:"element",content(){const{enableBlueprint:e}=(0,n.useEditor)(0,"enableBlueprint");return(0,x.default)((0,E.Q)({id:r,type:"Effect"},{rootType:"PlayEffect",isRoot:!1,propsMode:"Project",enableBlueprint:e}))}},provide:()=>({useValue:r=>{const{indexValue:n,indexEntries:o}=(0,x.getIndexer)(r);return{value:[n(e)],onChange([r],n={}){var a,i,l=n,{replace:c}=l,s=((e,t)=>{var r={};for(var n in e)I.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&C)for(var n of C(e))t.indexOf(n)<0&&A.call(e,n)&&(r[n]=e[n]);return r})(l,["replace"]);t(c?(a=_({},r),i={targetId:e.targetId},j(a,S(i))):_(_({},e),Object.fromEntries(o(r))),s)}}}})}}}}}};var R=r(53983),N=r(22142),V=Object.defineProperty,B=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,U=(e,t,r)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,F=(e,t)=>{for(var r in t||(t={}))z.call(t,r)&&U(e,r,t[r]);if(T)for(var r of T(t))L.call(t,r)&&U(e,r,t[r]);return e};const Y={name:"播放声音",category:"常用",checkError({url:e}){return e?"":"未设置声音"},Summary:({props:e})=>{const{time:t,_editor:r,_vName:n}=e,{name:o=n}=r||{};return o?N.createElement(N.Fragment,null,(0,p.g)(t),"播放 ",(0,p.C)(o)," 音效"):N.createElement(N.Fragment,null,"未设置声音")},content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg}),{spark:"block",status:"required",content:{spark:"grid",content:[{spark:"value",index:["url","_editor"],content([e,t={}],r){return{spark:"value",index:"name",content(n){return{spark:"element",content(){return N.createElement(R.r,{deletable:!0,type:"Sound",url:e,name:t.name||n,cover:t.cover,onChange:({url:n=e,name:o,cover:a})=>{var i,l;r([n,(i=F({},t),l={name:o,cover:a},B(i,Z(l)))])}})}}}}}},{spark:"slider",index:"volume",label:"音量",tooltip:"音量",defaultValue:1,precision:0,ratio:100,unit:"%",step:.01,min:0,max:2}]}}]}}};var $=r(9308),Q=r(73760),W=r(22142),J=Object.defineProperty,K=Object.defineProperties,H=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,ee=(e,t,r)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,te=(e,t)=>{for(var r in t||(t={}))q.call(t,r)&&ee(e,r,t[r]);if(G)for(var r of G(t))X.call(t,r)&&ee(e,r,t[r]);return e},re=(e,t)=>K(e,H(t));const ne={name:"播放动效",category:"常用",checkError({url:e}){return void 0===e?"未设置动效":""},Summary:({props:{time:e,_editor:t}})=>{const{name:r}=t||{};return r?W.createElement(W.Fragment,null,(0,p.g)(e)," 播放 ",(0,p.C)(r)):W.createElement(W.Fragment,null,"未设置动效")},content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg}),{spark:"block",status:"required",content:{spark:"value",index:["effectType","url","_editor"],defaultValue:["Particle"],required:!0,content([e,t,r={}],n){const{name:o,cover:a}=r;return{spark:"grid",content:[{spark:"element",content:t=>t({spark:"select",label:"动效类型",tooltip:"动效类型",options:c.xZ,value:e,onChange(e){n([e,void 0,(0,Q.omit)(r,"name","cover")])}})},{spark:"element",content(){return W.createElement(R.r,{type:e,cover:a,name:o,url:t,concise:!0,onChange:({url:t,name:o,cover:a})=>{n([e,t,re(te({},r),{name:o,cover:a})])}})}}]}}}},(0,i.R)(re(te({},s.Pr),{defaultValue:2e3,tooltip:"最大播放持续时长，如果动效本身时长过长则直接剪掉"})),{spark:"flex",content:[(0,i.R)(re(te({},s.V6),{label:"水平位置偏移",tooltip:"水平位置偏移"})),(0,i.R)(re(te({},s.LB),{label:"垂直位置偏移",tooltip:"垂直位置偏移"}))]},{spark:"flex",content:[(0,i.R)(s.$n),(0,i.R)(s.V2)]},{spark:"check",index:"",check:{options:()=>{const{enableBlueprint:e}=(0,n.useEditor)(0,"enableBlueprint");return e?c.RR.filter((({value:e})=>"target"!==e)):c.RR.filter((({value:e})=>"node"!==e))}},content:{index:"parent",spark:"select",label:"克隆到",defaultValue:"scene",tooltip:"克隆到哪里",options:c.RR,required:!0}},{spark:"check",index:"parent",check:{hidden:e=>"node"!==e},content:s.D9},{spark:"value",index:"id",content(e){return{spark:"element",content(){return W.createElement($.Q,{id:e})}}}}]}}};var oe=r(22142);const ae={name:"暂停播放",category:"播放控制",content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg})]}},Summary:({props:{time:e}})=>e?oe.createElement(oe.Fragment,null,(0,p.g)(e),"执行"):oe.createElement(oe.Fragment,null,"立即执行")};var ie=r(22142);const le={name:"继续播放",category:"播放控制",content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg})]}},Summary:({props:{time:e}})=>e?ie.createElement(ie.Fragment,null,(0,p.g)(e),"执行"):ie.createElement(ie.Fragment,null,"立即执行")};var ce=r(22142);const se={name:"跳转播放",category:"播放控制",Summary:({props:{time:e,startTime:t=0}})=>ce.createElement(ce.Fragment,null,(0,p.g)(e)," 跳转到 ",(0,s.CH)(`${(t/1e3).toFixed(2)}s`)," 播放"),content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg}),(0,i.R)({spark:"number",index:"startTime",label:"跳转时间",tooltip:"动画跳转的时间点",defaultValue:0,required:!0,precision:2,ratio:-1e3,unit:"s",step:10,min:0})]}}};var pe=r(22142);const ue={name:"跳转停止",category:"播放控制",Summary:({props:{time:e,stopTime:t=0}})=>pe.createElement(pe.Fragment,null,(0,p.g)(e)," 跳转到 ",(0,s.CH)(`${(t/1e3).toFixed(2)}s`)," 停止"),content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg}),(0,i.R)({spark:"number",index:"stopTime",label:"结束时间",tooltip:"动画跳转的时间点",defaultValue:0,required:!0,precision:2,ratio:-1e3,unit:"s",step:10,min:0})]}}};r(99045),Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const de=(e,t)=>{if("object"==typeof e)if(Array.isArray(e)){for(const r of e)if(de(r,t))return!0}else switch(e.type){case"node":return e.ids.some((e=>t.includes(e)));case"store":case"res":case"func":case"mouse":case"event":case"scene":return!1;default:return(0,y.Ak)(e)}return!1};var fe=r(87139),me=r(22142),ye=r(62834),be=r(27625),he=r(60468),ge=r(22142);const ve={name:"条件判断",category:"逻辑修改",link:"https://magicplay.oceanengine.com/tutorials/middle/four",extraProps:({enableBlueprint:e}={})=>({conditions:[{from:e?{ids:[void 0],type:"scene",key:void 0}:{ids:[-1],key:"alpha",type:"node"},to:1,compare:"="}],scripts:[],elseScripts:[]}),checkRef({conditions:e=[]},t){for(const{from:r,to:n}of e){const e=de(r,t)||de(n,t);if(e)return e}return!1},checkError({conditions:e,scripts:t,elseScripts:r},{deep:o}){const a=n.default.getState().project,{editor:{enableBlueprint:i}}=a;if(!(null==e?void 0:e.length))return"未设置判断条件";if(i)return"";for(const{from:t,to:r}of e){const e=(0,n.checkOperandError)(t,a)||(0,n.checkOperandError)(r,a);if(e)return e}return(null==t?void 0:t.length)||(null==r?void 0:r.length)?(0,n.checkScripts)(t,a,o)||(0,n.checkScripts)(r,a,o):"未设置执行事件"},Summary({props:{time:e,conditions:t=[]}}){return ge.createElement(ge.Fragment,null,(0,p.g)(e),t.map(((e,t)=>ge.createElement(me.Fragment,{key:t},0===t?"":"且",ge.createElement(be.g,{expression:e,keys:["from","compare","to"],operator:"compare"})))))},content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg}),{spark:"value",index:"conditions",content(e=[],t){return{spark:"element",content(){const r=(0,ye.SW)(),{enableBlueprint:o}=(0,n.useEditor)(0,"enableBlueprint");return ge.createElement(fe.L,{label:"条件判断",array:e,defaultItem:{from:{ids:[-1],key:"alpha",type:"node"},compare:"=",to:1},onChange:t,render:(e,t)=>{const n=(0,he.Gr)(e,r);return(0,x.default)((0,be.E)(e,t,n,"compare",(e=>o?e:e.filter((e=>"scene"!==e.value)))))}})}}}}]}}};var Oe=r(12672),ke=r(71092),xe=r(70072),Ee=r(22142);const we={name:"修改数据",category:"逻辑修改",link:"https://magicplay.oceanengine.com/tutorials/middle/four",extraProps:({enableBlueprint:e}={})=>({expression:{from:{type:e?"scene":"store"},to:1,mode:"="}}),checkRef({expression:{from:e,to:t}={}},r){return de(e,r)||de(t,r)},checkError({expression:{from:e,to:t}={}}){const r=n.default.getState().project;return(0,n.checkOperandError)(e,r)||(0,n.checkOperandError)(t,r)||""},Summary({props:{time:e,expression:t={}}}){return Ee.createElement(Ee.Fragment,null,(0,p.g)(e),Ee.createElement(be.g,{expression:t,keys:["from","mode","to"],operator:"mode"}))},content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg}),{spark:"value",index:"expression",content(e,t){const r=(0,ye.SW)(),o=(0,he.Gr)(e,r),{enableBlueprint:a}=(0,n.useEditor)(0,"enableBlueprint");return(0,be.E)(e,t,o,"mode",((e,t,r)=>"from"===r?e.filter((e=>a?"scene"===e.value:"store"===e.value)):a?e.filter((e=>"store"!==e.value)):e.filter((e=>"scene"!==e.value))))}},{spark:"element",content(){const{trigger:e}=(0,ke.Z)("RikoLog"),{enableBlueprint:t}=(0,n.useEditor)(0,"enableBlueprint");return t?null:Ee.createElement(xe.Z,{block:!0,icon:Ee.createElement(Oe.Z,null),onClick:()=>e("globalVar")},"全局变量")}}]}}};var Pe=Object.defineProperty,je=Object.defineProperties,Se=Object.getOwnPropertyDescriptors,Ce=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable,Me=(e,t,r)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const _e=(De=((e,t)=>{for(var r in t||(t={}))Ie.call(t,r)&&Me(e,r,t[r]);if(Ce)for(var r of Ce(t))Ae.call(t,r)&&Me(e,r,t[r]);return e})({},we),je(De,Se({name:"修改属性",extraProps:({enableBlueprint:e}={})=>({expression:{from:{ids:[e?void 0:-1],key:"alpha",type:"node"},to:1,mode:"="}}),content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg}),{spark:"value",index:"expression",content(e,t){const r=(0,ye.SW)(),{enableBlueprint:o}=(0,n.useEditor)(0,"enableBlueprint"),a=(0,he.Gr)(e,r);return(0,be.E)(e,t,a,"mode",((e,t,r)=>"mode"===t&&"from"===r?e.filter((e=>"node"===e.value)):o?e.filter((e=>"store"!==e.value)):e.filter((e=>"scene"!==e.value))))}}]}}})));var De,Re=r(22142);const Ne={name:"发送消息",category:"逻辑修改",link:"",checkError({event:e}){return e?"":"未填写事件名称"},Summary:({props:{time:e,event:t}})=>t?Re.createElement(Re.Fragment,null,(0,p.g)(e)," 发送 ",(0,p.C)(t)," 事件"):Re.createElement(Re.Fragment,null,"未填写事件名称"),extraProps:()=>({targetNodeFilterType:"self"}),content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg}),(0,i.R)({index:"event",spark:"string",label:"事件名称",defaultValue:"",tooltip:"事件名称",required:!0}),{spark:"check",index:"",check:{hidden:()=>{const{enableBlueprint:e}=(0,n.useEditor)(0,"enableBlueprint");return e}},content:{spark:"label",label:"全局广播事件",tooltip:"是否是全局广播事件，否则是针对自身派发的事件（点击？查看详细解释）",content:{spark:"boolean",index:"isGlobal",defaultValue:!0,required:!0}}},{spark:"check",index:"isGlobal",check:{hidden:e=>e},content:{spark:"grid",content:[s.D9,s.re]}}]}}};function Ve(e,t){return{spark:"check",index:[],check:{options:()=>function(e){const{targetId:t,includeTypes:r,excludeTypes:n,returnScriptId:o=!0}=e;return(0,b.v9)((({project:e})=>{const a=(0,y.zh)(e),i=(0,y.v$)(a),{editor:{selected:l}}=a,{scriptIds:c,nodeIds:s}=(0,y.bN)(l),[p]=(0,y.qC)(i,-1===t?null==s?void 0:s[0]:t);return p?(r?p.scripts.filter((e=>r.includes(e.type))):n?p.scripts.filter((e=>!n.includes(e.type))):p.scripts).map((e=>({label:(null==c?void 0:c[0])===e.id?`${e.name}(自身)`:e.name,value:o?(null==c?void 0:c[0])===e.id?-1:e.id:e.name}))):[]}),b.wU)}(t)},content:e}}var Be=r(22142),Ze=Object.defineProperty,Te=Object.defineProperties,ze=Object.getOwnPropertyDescriptors,Le=Object.getOwnPropertySymbols,Ue=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable,Ye=(e,t,r)=>t in e?Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$e=(e,t)=>{for(var r in t||(t={}))Ue.call(t,r)&&Ye(e,r,t[r]);if(Le)for(var r of Le(t))Fe.call(t,r)&&Ye(e,r,t[r]);return e},Qe=(e,t)=>Te(e,ze(t));const We={name:"其他设置",category:"逻辑修改",checkRef({targetId:e},t){return t.includes(e)},checkError({settingType:e,targetId:t,value:r}){return 0!==e||r?2===e||3===e?void 0===t?"未设置目标节点":void 0===r?"未设置动画或事件":"":"":"未设置全局背景音乐"},Summary:({props:e})=>{var t;const{settingType:r}=e,n=null==(t=c.fO.find((e=>e.value===r)))?void 0:t.label;return n?Be.createElement(Be.Fragment,null,n):null},content:{spark:"group",content:{spark:"value",index:["settingType","targetId","value","_editor"],content([e,t,r,n={}],o){const{name:a,cover:i}=n;let l;switch(e){case 0:l={spark:"element",content(){return Be.createElement(R.r,{deletable:!0,type:"Sound",url:r,name:a||"背景音乐",cover:i,onChange:({url:r,name:a,cover:i})=>{o([e,t,r,Qe($e({},n),{name:a,cover:i})])}})}};break;case 1:l={index:"value",spark:"slider",label:"音量",defaultValue:1,tooltip:"音量",precision:0,ratio:100,unit:"%",step:.01,min:0,max:2};break;case 2:case 3:l={spark:"grid",content:[s.D9,Ve({spark:"select",index:"value",width:72,label:"动画/事件"},{targetId:t,excludeTypes:["Controller"],returnScriptId:!1})]};break;case 4:l=Qe($e({},x.NULL_SPARK),{hidden:!0});break;default:throw new Error("数据异常")}return{spark:"grid",content:[{spark:"element",content(t){return t({spark:"select",value:e,label:"类型",defaultValue:0,options:c.fO,tooltip:"类型",onChange(e){o([e,void 0,void 0,void 0])}})}},l]}}}},extraProps:()=>({settingType:0})};var Je=r(22142);const Ke={name:"复制文本",category:"辅助操作",link:"",checkError({text:e}){return e?"":"未填写文本"},Summary:({props:e})=>{const{text:t=""}=e;return Je.createElement(Je.Fragment,null,"复制文本 ",(0,p.C)(t))},content:{spark:"group",content:{spark:"grid",content:[{spark:"block",status:"required",content:(0,i.R)({index:"text",spark:"string",type:"area",label:"文本",defaultValue:"",align:"top",tooltip:"文本",required:!0})}]}}};var He=r(22142);const Ge={name:"打印日志",category:"辅助操作",checkError({value:e}){return e?"":"未填写日志"},Summary:({props:e})=>{const{value:t=""}=e;return He.createElement(He.Fragment,null,"打印 ",(0,p.C)(t)," 日志")},content:{spark:"group",content:{spark:"grid",content:[(0,i.R)({spark:"string",index:"value",label:"打印内容",tooltip:"打印内容",required:!0,defaultValue:""})]}}};var qe=r(55658),Xe=r(22142);const et=e=>Xe.createElement(Xe.Fragment,null,e,Xe.createElement("img",{style:{width:20,height:12},src:qe}));var tt=r(22142);const rt={name:"震动反馈",label:et("震动反馈"),category:"常用",content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg})]}},Summary:({props:{time:e}})=>tt.createElement(tt.Fragment,null,e?(0,p.g)(e):"立即","执行")};var nt=r(22142);const ot={name:"埋点事件",category:"辅助操作",Summary:({props:e})=>{var t;const{eventType:r}=e,n=null==(t=c.BN.find((e=>e.value===r)))?void 0:t.label;return nt.createElement(nt.Fragment,null,(0,p.C)(n))},content:{spark:"group",content:{spark:"grid",content:[s.J4,{spark:"check",index:[],check:{options:()=>3!==(0,n.useSettings)("typeOfPlay")?c.BN:c.BN.filter((({value:e})=>"playableEnd"!==e))},content:{index:"eventType",spark:"select",label:"埋点类型",tooltip:"埋点类型",required:!0}},{spark:"check",index:"eventType",check:{hidden:e=>"enterSection"!==e},content:{spark:"grid",content:[(0,i.R)({spark:"number",index:"section",label:"场景ID",tooltip:"场景唯一标识",defaultValue:1,precision:0,min:1}),(0,i.R)({spark:"string",index:"sectionRemark",label:"场景名称",defaultValue:"场景1",tooltip:"场景名称"})]}}]}}};var at=r(22142);const it={name:"轻互动事件",category:"辅助操作",Summary:({props:{event:e}})=>{var t;const r=null==(t=c.eV.find((t=>t.value===e)))?void 0:t.label;return at.createElement(at.Fragment,null,(0,p.C)(r))},content:{spark:"group",content:{index:"event",spark:"select",label:"触发事件",tooltip:"触发事件",defaultValue:"finishEvent",options:c.eV,required:!0}}};var lt=r(69580),ct=r(22142);function st({onChange:e}){const{getState:t}=(0,b.oR)(),{selected:{nodeIds:r}}=(0,n.useSelected)(0);return ct.createElement(xe.Z,{block:!0,disabled:1!==r.length,onClick:()=>{const{props:n}=(0,y.zh)(t().project),{width:o,height:a}=n[r[0]];e({width:o,height:a})}},"同步节点尺寸")}var pt=r(22142),ut=Object.defineProperty,dt=Object.defineProperties,ft=Object.getOwnPropertyDescriptors,mt=Object.getOwnPropertySymbols,yt=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,ht=(e,t,r)=>t in e?ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gt=(e,t)=>{for(var r in t||(t={}))yt.call(t,r)&&ht(e,r,t[r]);if(mt)for(var r of mt(t))bt.call(t,r)&&ht(e,r,t[r]);return e},vt=(e,t)=>dt(e,ft(t)),Ot=r(22142);const kt={spark:"select",index:"type",defaultValue:"distance",options:c.Be,label:"类型",tooltip:"关节类型"},xt={spark:"value",index:"otherNodeId",content(e,t){return{spark:"element",content:()=>Ot.createElement(h.Du,{includeSelf:!1,value:e||0,onChange:t,label:"连接关节的节点",tooltip:"连接关节的另一个节点"})}}},Et=(0,i.R)({index:"otherAnchorX",spark:"number",label:"另一刚体的锚点X",defaultValue:0,tooltip:"连接关节的另一刚体的锚点X距离左上角的偏移量"}),wt=(0,i.R)({index:"otherAnchorY",spark:"number",label:"另一刚体的锚点Y",defaultValue:0,tooltip:"连接关节的另一刚体的锚点Y距离左上角的偏移量"}),Pt={index:"selfAnchorX",spark:"number",label:"自身刚体锚点X",defaultValue:0,tooltip:"自身节点的刚体锚点X距离左上角的偏移量"},jt=(0,i.R)(Pt),St={index:"selfAnchorY",spark:"number",label:"自身刚体锚点Y",defaultValue:0,tooltip:"自身节点的刚体锚点Y距离左上角的偏移量"},Ct=(0,i.R)(St),It=(0,i.R)({index:"frequency",spark:"number",label:"弹性系数",defaultValue:1,tooltip:"弹簧系统的震动频率，可以视为弹簧的弹性系数",min:0}),At=(0,i.R)({index:"damping",spark:"number",label:"刚体阻尼",defaultValue:0,tooltip:"刚体在回归到节点过程中受到的阻尼，建议取值0~1",min:0,max:10}),Mt=(0,i.R)({index:"minLength",spark:"number",label:"最小距离",defaultValue:-1,tooltip:"自身刚体与另一刚体的最小距离",min:-1}),_t=(0,i.R)({index:"maxLength",spark:"number",label:"最大距离",defaultValue:-1,tooltip:"自身刚体与另一刚体的最大距离",min:-1}),Dt=(0,i.R)({index:"jointLength",spark:"number",label:"静止长度",defaultValue:0,tooltip:"约束目标的静止长度",min:0}),Rt={spark:"label",label:"是否可碰撞",tooltip:"两个刚体是否可以发生碰撞",content:{spark:"boolean",index:"collideConnected",defaultValue:!1}},Nt=(0,i.R)({spark:"number",index:"axisX",defaultValue:1,label:"运动方向X",tooltip:"运动方向X,比如1,0是沿X轴向右"}),Vt=(0,i.R)({spark:"number",index:"axisY",defaultValue:0,label:"运动方向Y",tooltip:"运动方向Y,比如0,1是沿y轴向上"}),Bt={spark:"label",label:"开启马达",tooltip:"是否开启马达，开启马达可使目标刚体运动",content:{spark:"boolean",index:"enableMotor",defaultValue:!1}},Zt={spark:"number",index:"motorSpeed",defaultValue:0,label:"马达最大速度",tooltip:"启用马达后，在axis轴上移动可以达到的最大速度或者最大旋转速度"},Tt=(0,i.R)(Zt),zt={spark:"number",index:"maxMotorForce",defaultValue:1e4,label:"马达最大作用力",tooltip:"启用马达后，可以施加的最大作用力"},Lt=(0,i.R)(zt),Ut={spark:"label",label:"开启约束范围",tooltip:"是否对刚体的移动或旋转范围加以约束",content:{spark:"boolean",index:"enableLimit",defaultValue:!1}},Ft={spark:"number",index:"lowerTranslation",defaultValue:0,label:"刚体移动下限",tooltip:"启用约束后，刚体移动范围的下限，是距离anchor的偏移量"},Yt={spark:"number",index:"upperTranslation",defaultValue:0,label:"刚体移动上限",tooltip:"启用约束后，刚体移动范围的上限，是距离anchor的偏移量"},$t={spark:"select",index:"firstNodeId",defaultValue:void 0,label:"第一个节点",options:[],tooltip:"连接关节的第一个节点，必须要有RevoluteJoint或者PrismaticJoint"},Qt={spark:"select",index:"secondNodeId",label:"第二个节点",options:[],tooltip:"连接关节的第二个节点，必须要有RevoluteJoint或者PrismaticJoint"},Wt=((0,i.R)({spark:"number",index:"ratio",defaultValue:1,label:"速度比例",tooltip:"两个齿轮角速度比例或者移动距离比例"}),(0,i.R)({spark:"number",index:"linearOffsetX",defaultValue:0,label:"X偏移",tooltip:"X偏移量"})),Jt=(0,i.R)({spark:"number",index:"linearOffsetY",defaultValue:0,label:"Y偏移",tooltip:"Y偏移量"}),Kt=(0,i.R)({spark:"number",index:"angularOffset",defaultValue:0,label:"角度偏移",tooltip:"角度偏移"}),Ht=(0,i.R)({spark:"number",index:"maxForce",defaultValue:1e3,label:"最大作用力",tooltip:"最大作用力"}),Gt=(0,i.R)({spark:"number",index:"maxTorque",defaultValue:1e3,label:"最大扭力",tooltip:"最大扭力"}),qt=(0,i.R)({spark:"number",index:"correctionFactor",defaultValue:.3,label:"缓动因子",step:.1,tooltip:"缓动因子",max:1}),Xt={spark:"number",index:"lowerAngle",defaultValue:0,label:"刚体旋转角度下限",tooltip:"启用约束后，刚体旋转范围的下限角度"},er={spark:"number",index:"upperAngle",defaultValue:0,label:"刚体旋转角度上限",tooltip:"启用约束后，刚体旋转范围的上限角度"},tr=(0,i.R)({spark:"number",index:"ratio",defaultValue:1,label:"速度比例",tooltip:"两个齿轮角速度比例或者移动距离比例"}),rr=(0,i.R)({spark:"number",index:"selfGroundPointX",defaultValue:0,label:"滑轮与自身位置偏移X",tooltip:"滑轮上与节点selfAnchor相连接的节点，是相对于自身刚体的左上角位置偏移X"}),nr=(0,i.R)({spark:"number",index:"selfGroundPointY",defaultValue:0,label:"滑轮与自身位置偏移Y",tooltip:"滑轮上与节点selfAnchor相连接的节点，是相对于自身刚体的左上角位置偏移Y"}),or=(0,i.R)({spark:"number",index:"otherGroundPointX",defaultValue:0,label:"滑轮与其他位置偏移X",tooltip:"滑轮上与节点otherAnchor相连接的节点，是相对于otherBody的左上角位置偏移X"}),ar=(0,i.R)({spark:"number",index:"otherGroundPointY",defaultValue:0,label:"滑轮与其他位置偏移Y",tooltip:"滑轮上与节点otherAnchor相连接的节点，是相对于otherBody的左上角位置偏移Y"});function ir(e,t){return r=>{const{indexValue:n,indexEntries:o}=(0,x.getIndexer)(r);return{value:[n(e)],onChange([e]){t(Object.fromEntries(o(e)))}}}}var lr=r(22142),cr=Object.defineProperty,sr=Object.defineProperties,pr=Object.getOwnPropertyDescriptors,ur=Object.getOwnPropertySymbols,dr=Object.prototype.hasOwnProperty,fr=Object.prototype.propertyIsEnumerable,mr=(e,t,r)=>t in e?cr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,yr=(e,t)=>{for(var r in t||(t={}))dr.call(t,r)&&mr(e,r,t[r]);if(ur)for(var r of ur(t))fr.call(t,r)&&mr(e,r,t[r]);return e},br=(e,t)=>sr(e,pr(t));const hr={name:"启用物理",category:"高级",link:"https://magicplay.oceanengine.com/tutorials/senior/one",content:{spark:"grid",content:[{spark:"value",index:"",content(){const{blueprint:e}=(0,me.useContext)(x.CellContext);return Object.assign({spark:"group",content:{spark:"grid",content:[br(yr({},s.am),{hidden:!e}),(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg}),{index:"rigidBodyType",spark:"select",label:"刚体类型",defaultValue:"dynamic",options:c.Ih,tooltip:"刚体类型",required:!0},{spark:"check",index:"rigidBodyType",check:{hidden:e=>"dynamic"!==e},content:{spark:"flex",content:[(0,i.R)({index:"linearDamping",spark:"number",label:"线性阻尼",defaultValue:0,step:.1,tooltip:"线性速度阻尼系数",min:0,max:1,required:!0}),(0,i.R)({index:"angularDamping",spark:"number",label:"旋转阻尼",defaultValue:0,step:.1,tooltip:"旋转速度阻尼系数",min:0,max:1,required:!0})]}},{spark:"check",index:"rigidBodyType",check:{hidden:e=>"static"===e},content:{spark:"flex",content:[{spark:"check",index:"rigidBodyType",check:{hidden:e=>"dynamic"!==e},content:(0,i.R)({index:"gravityScale",spark:"number",label:"重力系数",defaultValue:1,tooltip:"重力缩放系数",required:!0})},{spark:"check",index:"rigidBodyType",check:{hidden:e=>"static"===e},content:(0,i.R)({index:"angularVelocity",spark:"number",label:"角速度",defaultValue:0,tooltip:"角速度",required:!0})}]}},{spark:"check",index:"rigidBodyType",check:{hidden:e=>"static"===e},content:{spark:"flex",content:[(0,i.R)({index:"linearVelocityX",spark:"number",label:"水平速度",defaultValue:0,tooltip:"水平速度",required:!0}),(0,i.R)({index:"linearVelocityY",spark:"number",label:"垂直速度",defaultValue:0,tooltip:"垂直速度",required:!0})]}},{spark:"check",index:"rigidBodyType",check:{hidden:e=>"velocity"!==e},content:{spark:"grid",content:[(0,i.R)({index:"linearVelocityX",spark:"number",label:"水平速度",defaultValue:0,tooltip:"水平速度",required:!0}),(0,i.R)({index:"linearVelocityY",spark:"number",label:"垂直速度",defaultValue:0,tooltip:"垂直速度",required:!0})]}},{spark:"check",index:"rigidBodyType",check:{hidden:e=>"torque"!==e},content:{index:"torque",spark:"number",label:"扭矩",defaultValue:0,tooltip:"扭矩",required:!0}},{index:"collideGroup",spark:"select",label:"碰撞组",tooltip:"设置所属碰撞组， 不同的碰撞组不发生碰撞，默认碰撞组与其他碰撞组都可以发生碰撞。",defaultValue:0,options:c.DD,required:!0},{index:"rigidBodyCategory",spark:"string",label:"刚体类别",tooltip:"刚体类别，方便在碰撞触发方式那里进行筛选",defaultValue:""},{spark:"check",index:"rigidBodyType",check:{hidden:e=>"static"===e},content:{spark:"flex",content:[{spark:"label",label:"旋转",tooltip:"是否允许旋转",content:{index:"allowRotation",spark:"boolean",defaultValue:!0,required:!0}},{spark:"label",label:"休眠",tooltip:"是否允许休眠",content:{index:"allowSleep",spark:"boolean",defaultValue:!0,required:!0}},{spark:"label",label:"防止高速穿透",tooltip:"是否高速移动的物体，设置为true，可以防止高速穿透",content:{index:"bullet",spark:"boolean",defaultValue:!1,required:!0}}]}}]}},e&&{label:"启用物理",extra:lt.MF})}},{spark:"value",index:"colliders",content(e=[],t){return{spark:"group",label:"碰撞体",content:{spark:"element",content(){return lr.createElement(x.ArrayCell,{label:"碰撞体",array:e,onChange:t,defaultItem:{type:"box",density:10,friction:.2,restitution:0,isSensor:!1,x:0,y:0,width:0,height:0},render:(e,t)=>(0,x.default)(function(e,t){return{spark:"context",provide:()=>({useValue(r){const{indexValue:n,indexEntries:o}=(0,x.getIndexer)(r);return{value:[n(e)],onChange([r],n){(null==n?void 0:n.replace)?t(r,(0,Q.omit)(n,"replace")):t(gt(gt({},e),Object.fromEntries(o(r))),n)}}}}),content:{spark:"grid",content:[{spark:"value",index:"type",content(t="box",r){return{spark:"element",content(o){const{getState:a}=(0,b.oR)(),{selected:{nodeIds:i}}=(0,n.useSelected)(0);return o({spark:"select",label:"类型",value:t,onChange(t){const{props:n}=(0,y.zh)(a().project),{width:o,height:l,x:c,y:s}=n[i[0]];r(Object.assign(vt(gt({},e),{type:t}),"polygon"===t&&[o,l,c,s].every((e=>void 0!==e))?{points:[{x:+(o/2).toFixed(1),y:0},{x:0,y:l},{x:o,y:l}]}:{}),{replace:!0})},options:c.ut,tooltip:"碰撞类型"})}}}},{spark:"flex",content:[{spark:"check",index:"type",check:{hidden:e=>"polygon"===e},content:{spark:"label",label:"自动大小",tooltip:"自动计算大小",content:{index:"autoSize",spark:"boolean",defaultValue:!1}}},{spark:"label",label:"传感器",tooltip:"是否是传感器，传感器能够触发碰撞事件，但不会产生碰撞反应",content:{index:"isSensor",spark:"boolean",defaultValue:!1}}]},{spark:"check",index:"type",check:{hidden:e=>"polygon"!==e},content:{spark:"value",index:"points",content(e=[],t){return{spark:"element",content(){return pt.createElement(x.ArrayCell,{label:"顶点",array:e,onChange:t,defaultItem:t=>{if(e.length){const r=e[e.length-1];return t({x:r.x+100,y:r.y+100})}return t({x:0,y:0})},render:(e,t)=>{const{x:r,y:n}=e||{};return(0,x.default)({spark:"flex",content:[{spark:"element",content(n){return n({spark:"number",label:"横坐标",value:r,onChange(r){t(vt(gt({},e),{x:r}))}})}},{spark:"element",content(r){return r({spark:"number",label:"纵坐标",value:n,onChange(r){t(vt(gt({},e),{y:r}))}})}}]})}})}}}}},{spark:"check",index:"autoSize",check:{hidden:e=>e},content:{spark:"grid",content:[{spark:"flex",content:[(0,i.R)(vt(gt({},s.V6),{width:48})),(0,i.R)(vt(gt({},s.LB),{width:48}))]},{spark:"check",index:"type",check:{hidden:e=>"box"!==e},content:{spark:"flex",content:[(0,i.R)(vt(gt({},s.Ad),{width:48})),(0,i.R)(vt(gt({},s.CE),{width:48}))]}},{spark:"check",index:"type",check:{hidden:e=>"circle"!==e},content:s.P4},{spark:"value",index:["type","width","height","radius"],content([e,t,r,n],o){return{spark:"element",content(){return pt.createElement(st,{onChange:({width:a=t,height:i=r})=>{if("box"===e&&o([e,a,i,n]),"circle"===e){const n=Math.min(a,i)/2;o([e,t,r,n])}}})}}}}]}},(0,i.R)({index:"density",spark:"number",label:"密度",defaultValue:10,tooltip:"密度"}),{index:"friction",spark:"slider",label:"摩擦系数",defaultValue:.2,tooltip:"摩擦系数",min:0,max:1,step:.01,ratio:100,unit:"%",precision:0},{index:"restitution",spark:"slider",label:"弹性系数",defaultValue:0,tooltip:"弹性系数",min:0,max:1,step:.01,ratio:100,unit:"%",precision:0}]}}}(e,t))})}}}}},{spark:"value",index:"joints",content(e=[],t){return{spark:"group",label:"物理关节",content:{spark:"element",content(){return lr.createElement(x.ArrayCell,{label:"节点",array:e,onChange:t,defaultItem:{type:"distance",otherAnchorX:0,otherAnchorY:0,selfAnchorX:0,selfAnchorY:0,frequency:1,damping:0,length:0,collideConnected:!1},render:(e,t)=>{const r=function(e,t){let r=[];switch(e.type){case"distance":r=[kt,xt,{spark:"flex",content:[Et,wt]},{spark:"flex",content:[jt,Ct]},{spark:"flex",content:[It,At]},{spark:"flex",content:[Mt,_t]},Dt,Rt];break;case"prismatic":r=[kt,xt,{spark:"flex",content:[jt,Ct]},{spark:"flex",content:[Nt,Vt]},Bt,{spark:"check",index:"enableMotor",check:{hidden:e=>!e},content:{spark:"flex",content:[Zt,zt]}},Ut,{spark:"check",index:"enableLimit",check:{hidden:e=>!e},content:{spark:"flex",content:[Ft,Yt]}},Rt];break;case"revolute":r=[kt,xt,{spark:"flex",content:[Pt,St]},Bt,{spark:"check",index:"enableMotor",check:{hidden:e=>!e},content:{spark:"flex",content:[Zt,zt]}},Ut,{spark:"check",index:"enableLimit",check:{hidden:e=>!e},content:{spark:"flex",content:[Xt,er]}},Rt];break;case"gear":r=[kt,$t,Qt,Rt,tr];break;case"motor":r=[kt,xt,{spark:"flex",content:[Wt,Jt]},{spark:"flex",content:[Kt,Ht]},{spark:"flex",content:[Gt,qt]},Rt];break;case"wheel":r=[kt,xt,{spark:"flex",content:[jt,Ct]},{spark:"flex",content:[Nt,Vt]},Bt,{spark:"check",index:"enableMotor",check:{hidden:e=>!e},content:{spark:"flex",content:[Tt,Lt]}},It,At,Rt];break;case"pulley":r=[kt,xt,{spark:"flex",content:[jt,Ct]},{spark:"flex",content:[Et,wt]},{spark:"flex",content:[rr,nr]},{spark:"flex",content:[or,ar]},tr,Rt];break;case"weld":r=[kt,xt,{spark:"flex",content:[jt,Ct]},{spark:"flex",content:[It,At]},Rt];break;case"rope":r=[kt,xt,{spark:"flex",content:[jt,Ct]},{spark:"flex",content:[Et,wt]},_t,Rt];break;case"mouse":r=[kt,{spark:"flex",content:[jt,Ct]},{spark:"flex",content:[Ht,It]},At];break;default:throw new Error("数据异常")}return{spark:"context",content:{spark:"grid",content:r},provide:()=>({useValue:ir(e,t)})}}(e,(r=>{t(yr(yr({},e),r))}));return(0,x.default)(r)}})}}}}}]},extraProps:()=>({rigidBodyType:"dynamic",colliders:[{density:10,friction:.2,height:0,isSensor:!1,restitution:0,type:"box",width:0,x:0,y:0,autoSize:!0}]}),checkRef({joints:e=[]},t){return e.some((({otherNodeId:e})=>t.includes(e)))},Summary:({props:{time:e}})=>lr.createElement(lr.Fragment,null,(0,p.g)(e)," 启用元素物理属性")};var gr=r(22142);const vr={name:"物理行为",category:"高级",link:"https://magicplay.oceanengine.com/tutorials/senior/two",extraProps:({enableBlueprint:e}={})=>({targetId:e?void 0:-1}),checkRef({targetId:e},t){return t.includes(e)},Summary:({props:{time:e,targetId:t,behaviorType:r}})=>{var n;const o=(0,h.Am)().find((e=>e.value===t)),a=null==(n=c.AN.find((e=>e.value===r)))?void 0:n.label;return gr.createElement(gr.Fragment,null,(0,p.g)(e)," ",(0,p.C)(null==o?void 0:o.label)," ",(0,p.C)(a))},content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg}),s.D9,{index:"behaviorType",spark:"select",label:"物理行为",defaultValue:"force",tooltip:"物理行为",options:c.AN,required:!0},{spark:"check",index:"behaviorType",check:{hidden:e=>"force"!==e},content:{spark:"grid",content:[(0,i.R)({index:"forceX",spark:"number",label:"水平力",defaultValue:0,tooltip:"水平力",required:!0}),(0,i.R)({index:"forceY",spark:"number",label:"垂直力",defaultValue:0,tooltip:"垂直力",required:!0})]}},{spark:"check",index:"behaviorType",check:{hidden:e=>"velocity"!==e},content:{spark:"grid",content:[(0,i.R)({index:"velocityX",spark:"number",label:"水平速度",defaultValue:0,tooltip:"水平速度",required:!0}),(0,i.R)({index:"velocityY",spark:"number",label:"垂直速度",defaultValue:0,tooltip:"垂直速度",required:!0})]}},{spark:"check",index:"behaviorType",check:{hidden:e=>"torque"!==e},content:(0,i.R)({index:"torque",spark:"number",label:"扭矩",defaultValue:0,tooltip:"扭矩",required:!0})}]}}};var Or=r(93671),kr=r(44372),xr=r(8385),Er=r(77073),wr=r(51514),Pr=r(22142),jr=Object.defineProperty,Sr=Object.defineProperties,Cr=Object.getOwnPropertyDescriptors,Ir=Object.getOwnPropertySymbols,Ar=Object.prototype.hasOwnProperty,Mr=Object.prototype.propertyIsEnumerable,_r=(e,t,r)=>t in e?jr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Dr=(e,t)=>{for(var r in t||(t={}))Ar.call(t,r)&&_r(e,r,t[r]);if(Ir)for(var r of Ir(t))Mr.call(t,r)&&_r(e,r,t[r]);return e};const Rr={name:"自定义脚本",category:"高级",link:"https://magicplay.oceanengine.com/tutorials/senior/three",checkError({url:e,jsCode:t}){return e||t?"":"请上传或创建脚本"},Summary:({props:{url:e,jsCode:t,_editor:{name:r=""}={}}})=>{const{getState:n}=(0,b.oR)();if(e&&"number"==typeof e)try{const t=(0,y.se)(n().project,e),o=(0,xr.V)(t.name)===(0,xr.V)(r)?r:`${r}(脚本名：${t.name})`;return Pr.createElement(Pr.Fragment,null," ",o?(0,p.C)(o):"点击查看脚本")}catch(e){return Pr.createElement(Pr.Fragment,null,"点击查看脚本")}return t?Pr.createElement(Pr.Fragment,null,"点击查看脚本"):Pr.createElement(Pr.Fragment,null,"请上传或创建脚本")},content:{spark:"value",index:"props",content(e,t){const{blueprint:r}=(0,me.useContext)(x.CellContext),n=(0,wr.FJ)();return{spark:"grid",content:[{spark:"group",hidden:null==r?void 0:r.enabled,content:{spark:"element",content(){return Pr.createElement(kr.xN,{props:e,onChange:e=>{t(e)}})}}},{spark:"element",hidden:!e.url||!n,content(){return Pr.createElement(Er.w,{value:Object.fromEntries(Object.entries(e).filter((([e])=>e.startsWith("$")))),onChange:r=>t(Dr(Dr({},e),(0,kr.qY)(r,Object.fromEntries(Object.entries(e).filter((([e])=>e.startsWith("$")))))))})}},{spark:"grid",content:(0,Or.S)({callee:"Riko.useObject",default:Object.fromEntries(Object.entries(e).filter((([e])=>e.startsWith("$")))),name:"自定义属性"},((r,n,o)=>{t(((e,t)=>Sr(e,Cr(t)))(Dr({},e),{[r]:n}),o)}))}]}}},extraProps:()=>({url:void 0})};var Nr=r(22142);const Vr={name:"跟随手指",category:"高级",checkRef({targetId:e},t){return t.includes(e)},Summary:({props:{targetId:e,followMode:t}})=>{var r;const n=(0,h.Am)().find((t=>t.value===e)),o=null==(r=c.zy.find((e=>e.value===t)))?void 0:r.label;return Nr.createElement(Nr.Fragment,null,(0,s.CH)(null==n?void 0:n.label)," ",(0,s.CH)(o))},content:{spark:"group",content:{spark:"grid",content:[s.D9,{index:"followMode",spark:"select",label:"跟随模式",defaultValue:"none",tooltip:"跟随模式",options:c.zy},{spark:"label",label:"始终在鼠标下面",tooltip:"是否始终在鼠标下面",content:{spark:"boolean",index:"isUnderMouse",defaultValue:!0,required:!0}}]}},extraProps:({enableBlueprint:e}={})=>({targetId:e?void 0:-1})};var Br=r(22142),Zr=Object.defineProperty,Tr=Object.defineProperties,zr=Object.getOwnPropertyDescriptors,Lr=Object.getOwnPropertySymbols,Ur=Object.prototype.hasOwnProperty,Fr=Object.prototype.propertyIsEnumerable,Yr=(e,t,r)=>t in e?Zr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$r=(e,t)=>{for(var r in t||(t={}))Ur.call(t,r)&&Yr(e,r,t[r]);if(Lr)for(var r of Lr(t))Fr.call(t,r)&&Yr(e,r,t[r]);return e},Qr=(e,t)=>Tr(e,zr(t));const Wr={name:"克隆组件",category:"高级",link:"https://magicplay.oceanengine.com/tutorials/middle/five",checkError:({url:e})=>void 0===e?"未设置目标组件":"",Summary:({props:{time:e,_editor:t}})=>{const{name:r}=t||{};return r?Br.createElement(Br.Fragment,null,(0,p.g)(e)," 克隆 ",(0,p.C)(r)):Br.createElement(Br.Fragment,null,"请选择组件")},content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg}),{spark:"value",index:["url","_editor"],content([e,t={}],r){const{name:n}=t;return{spark:"element",content(){return Br.createElement(R.r,{concise:!0,url:e,name:n,type:"Animation",onChange:({url:o=e,name:a=n})=>r([o,Qr($r({},t),{name:a})])})}}}},{spark:"flex",content:[(0,i.R)(Qr($r({},s.V6),{label:"X偏移",tooltip:"水平位置偏移"})),(0,i.R)(Qr($r({},s.LB),{label:"Y偏移",tooltip:"垂直位置偏移"}))]},{spark:"check",index:"",check:{options:()=>{const{enableBlueprint:e}=(0,n.useEditor)(0,"enableBlueprint");return e?c.RR.filter((({value:e})=>"target"!==e)):c.RR.filter((({value:e})=>"node"!==e))}},content:{index:"parent",spark:"select",label:"克隆到",defaultValue:"scene",tooltip:"克隆到哪里",options:c.RR,required:!0}},{spark:"check",index:"parent",check:{hidden:e=>"node"!==e},content:s.D9},{spark:"value",index:"id",content(e){return{spark:"element",content(){return Br.createElement($.Q,{id:e})}}}}]}}};var Jr=r(22142);const Kr={name:"调起下载组件",label:et("调起下载组件"),category:"常用",content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg}),{spark:"label",label:"5秒后自动触发",content:{spark:"boolean",index:"autoTrigger",defaultValue:!0}}]}},Summary:({props:{time:e}})=>e?Jr.createElement(Jr.Fragment,null,(0,p.g)(e),"执行"):Jr.createElement(Jr.Fragment,null,"立即执行")};var Hr=r(74860),Gr=r(22142);const qr={name:"下载APP",category:(0,Hr.C)("script","DownloadApp")?"常用":void 0,content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg})]}},Summary:({props:{time:e}})=>Gr.createElement(Gr.Fragment,null,(0,p.g)(e),"下载APP")};var Xr=r(22142);const en={name:"移除场景",content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg})]}},Summary:({props:{time:e}})=>Xr.createElement(Xr.Fragment,null,(0,p.g)(e),"移除场景")},tn={name:"重玩",category:(0,r(7910).cM)({release:!1})?"播放控制":void 0,content:{spark:"group",content:{spark:"grid",content:[(0,a.H)((0,i.R)(s.J4),{hidden:o.Vg})]}}}},99045:function(e,t,r){"use strict";r.d(t,{$n:function(){return u.$n},FP:function(){return p},J4:function(){return u.J4},LB:function(){return u.LB},Pr:function(){return u.Pr},V2:function(){return u.V2},V6:function(){return u.V6},am:function(){return u.am},yf:function(){return m}});var n=r(3207),o=r(73547),a=r(62780),i=r(26840),l=r(70072),c=r(22142),s=r(7910),p=r(66254),u=r(32817),d=r(22142);const f=e=>{if(Array.isArray(e))return e.every(f);if(!e||"object"!=typeof e)return!0;const{script:t,url:r}=e;return"CustomScript"===t||!r&&f(Object.values(e))},m=(e,t)=>({spark:"group",label:"响应事件",extra:{spark:"check",index:"scripts",hidden:(0,s.cM)({release:!0}),check:{hidden:f},content:{spark:"value",index:"preload",content(e=!1,t){return{spark:"element",content(){return d.createElement(i.Z,{title:e?"已设置预加载":"设置预加载"},d.createElement(l.Z,{size:"small",type:e?"link":"text",icon:d.createElement(o.Z,null),onClick:()=>t(!e)}))}}}}},content:{spark:"value",index:"scripts",content:(e,r)=>{const{openKeys:{checking:o,enabled:i}}=(0,c.useContext)(n.CellContext);return{spark:"element",content:()=>d.createElement(a.q,{checking:o,enabled:i,checked:"Scene"===t.rootType,scripts:e,onChange:r})}}}})},13564:function(e,t,r){"use strict";r.d(t,{p_:function(){return ft},Mq:function(){return Dt}});var n=r(3207),o=r(88551),a=r(38499),i=r(33058),l=r(2119),c=r(5635),s=r(62255),p=r(76631),u=r(26840),d=r(70072),f=r(19104),m=r(20469),y=r(22142),b=r(62732),h=r(40985),g=r(34808),v=r(22998);const O={spark:"label",label:"是否生效一次",tooltip:"默认事件可以被多次执行，勾选后，则事件只会被执行一次",content:{spark:"boolean",index:"once",defaultValue:!1}},k={spark:"label",label:"持续触发",tooltip:"是否持续触发",content:{spark:"boolean",index:"continuous",defaultValue:!1}},x={spark:"label",label:"自动触发",tooltip:"当设备不支持摇一摇时，是否自动触发脚本",content:{spark:"boolean",index:"autoTrigger",defaultValue:!0}},E=({title:e})=>{const{showImDialog:t}=(0,f.useImbot)();return y.createElement(u.Z,{title:y.createElement(y.Fragment,null,"点击 ",y.createElement(v.bHJ,null)," 查看详情"),placement:"top",mouseEnterDelay:.5},y.createElement(v.bHJ,{style:{marginLeft:"4px"},onClick:r=>{r.stopPropagation(),t(e)}}))};var w=r(99045),P=Object.defineProperty,j=Object.defineProperties,S=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,M=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_=(e,t)=>{for(var r in t||(t={}))I.call(t,r)&&M(e,r,t[r]);if(C)for(var r of C(t))A.call(t,r)&&M(e,r,t[r]);return e};const D={name:"单击",content:({blueprint:e})=>{return{spark:"grid",content:[(t=_({},w.am),r={hidden:!e},j(t,S(r))),O]};var t,r},checkError(e,{project:t}){const{editor:{enableBlueprint:r}}=t,n=(0,h.zh)(t),o=(0,h.v$)(n),a=Array.from((0,g.bp)(o)).map((({id:e})=>e)).concat(n.id);return r&&!a.includes(e.nodeId)?"缺少目标节点":""}};var R=Object.defineProperty,N=Object.defineProperties,V=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,z=(e,t,r)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,L=(e,t)=>{for(var r in t||(t={}))Z.call(t,r)&&z(e,r,t[r]);if(B)for(var r of B(t))T.call(t,r)&&z(e,r,t[r]);return e};const U={name:"滑动",content:({blueprint:e})=>{return{spark:"grid",content:[(t=L({},w.am),r={hidden:!e},N(t,V(r))),{spark:"select",index:"gestureType",label:"滑动方向",tooltip:"滑动方向",defaultValue:1,options:[{label:"左滑",value:0},{label:"右滑",value:1},{label:"上滑",value:2},{label:"下滑",value:3}],required:!0},{spark:"number",index:"distance",label:"滑动长度",step:1,precision:0,defaultValue:100,tooltip:"滑动的长度",min:0},{spark:"slider",index:"minRate",width:96,label:"滑动生效长度",min:0,max:1,step:.01,ratio:100,precision:0,defaultValue:1,unit:"%",tooltip:"滑动成功触发比率"},O]};var t,r}};var F=r(22142),Y=Object.defineProperty,$=Object.defineProperties,Q=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,H=(e,t,r)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,G=(e,t)=>{for(var r in t||(t={}))J.call(t,r)&&H(e,r,t[r]);if(W)for(var r of W(t))K.call(t,r)&&H(e,r,t[r]);return e};const q={name:"拖动",content:({blueprint:e})=>{return{spark:"grid",content:[(t=G({},w.am),r={hidden:!e},$(t,Q(r))),{spark:"value",index:"targetId",content(e,t){return{spark:"element",content:()=>F.createElement(g.Du,{value:e,onChange:t,label:"拖动到",tooltip:"把当前节点拖动到目标节点上面则成功"})}}}]};var t,r}};var X=Object.defineProperty,ee=Object.defineProperties,te=Object.getOwnPropertyDescriptors,re=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,ae=(e,t,r)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ie=(e,t)=>{for(var r in t||(t={}))ne.call(t,r)&&ae(e,r,t[r]);if(re)for(var r of re(t))oe.call(t,r)&&ae(e,r,t[r]);return e};const le={name:"长按",content:({blueprint:e})=>{return{spark:"grid",content:[(t=ie({},w.am),r={hidden:!e},ee(t,te(r)))]};var t,r}};var ce=Object.defineProperty,se=Object.defineProperties,pe=Object.getOwnPropertyDescriptors,ue=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,me=(e,t,r)=>t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ye=(e,t)=>{for(var r in t||(t={}))de.call(t,r)&&me(e,r,t[r]);if(ue)for(var r of ue(t))fe.call(t,r)&&me(e,r,t[r]);return e};const be={name:"按下",content:({blueprint:e})=>{return{spark:"grid",content:[(t=ye({},w.am),r={hidden:!e},se(t,pe(r))),{spark:"flex",content:[O,k]},{spark:"check",index:"continuous",check:{hidden:e=>!e},content:{spark:"number",index:"interval",defaultValue:500,label:"触发间隔",tooltip:"每次定时的间隔时间",unit:"s",ratio:-1e3,precision:2,step:10,min:0}}]};var t,r}};var he=Object.defineProperty,ge=Object.defineProperties,ve=Object.getOwnPropertyDescriptors,Oe=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable,Ee=(e,t,r)=>t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,we=(e,t)=>{for(var r in t||(t={}))ke.call(t,r)&&Ee(e,r,t[r]);if(Oe)for(var r of Oe(t))xe.call(t,r)&&Ee(e,r,t[r]);return e};const Pe={name:"抬起",content:({blueprint:e})=>{return{spark:"grid",content:[(t=we({},w.am),r={hidden:!e},ge(t,ve(r))),O,{spark:"check",index:"continuous",check:{hidden:e=>!e},content:{spark:"number",index:"interval",defaultValue:500,label:"触发间隔",tooltip:"每次定时的间隔时间"}}]};var t,r}};var je=Object.defineProperty,Se=Object.defineProperties,Ce=Object.getOwnPropertyDescriptors,Ie=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,_e=(e,t,r)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,De=(e,t)=>{for(var r in t||(t={}))Ae.call(t,r)&&_e(e,r,t[r]);if(Ie)for(var r of Ie(t))Me.call(t,r)&&_e(e,r,t[r]);return e};const Re={name:"自动触发",content:({blueprint:e})=>{return{spark:"grid",content:[(t=De({},w.am),r={hidden:!e},Se(t,Ce(r)))]};var t,r}};var Ne=Object.defineProperty,Ve=Object.defineProperties,Be=Object.getOwnPropertyDescriptors,Ze=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,Le=(e,t,r)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ue=(e,t)=>{for(var r in t||(t={}))Te.call(t,r)&&Le(e,r,t[r]);if(Ze)for(var r of Ze(t))ze.call(t,r)&&Le(e,r,t[r]);return e};const Fe={name:"摇一摇",content:({blueprint:e})=>{return{spark:"grid",content:[(t=Ue({},w.am),r={hidden:!e},Ve(t,Be(r))),{spark:"flex",content:[O,x]}]};var t,r}};var Ye=r(26616);const $e={name:"定时循环",tooltip:r(22142).createElement(E,{title:"定时循环"}),content:()=>({spark:"grid",content:[(0,Ye.R)({spark:"number",index:"interval",label:"触发间隔",defaultValue:1e3,precision:2,ratio:-1e3,step:10,unit:"s",tooltip:"每次定时的间隔时间",min:0}),{spark:"label",label:"不受场景播放状态影响",tooltip:"动画是否受场景播放状态影响，设置为开启后，即使当前场景停止播放，动画依然会继续运行，用来实现场景停止播放，但一些动画依然继续播放的效果",content:{index:"playBySelf",spark:"boolean",defaultValue:!1}}]})},Qe={name:"监听事件",tooltip:r(22142).createElement(E,{title:"监听事件"}),content:()=>({spark:"grid",content:[{index:"event",spark:"string",label:"事件名称",defaultValue:"",tooltip:"事件名称",required:!0,min:1},{spark:"flex",content:[O,{spark:"check",index:"",check:{hidden:()=>{const{enableBlueprint:e}=(0,f.useEditor)(0,"enableBlueprint");return e}},content:{spark:"label",label:"全局广播事件",tooltip:"是否是全局广播事件，否则是针对自身派发的事件（点击？查看详细解释）",content:{index:"isGlobal",spark:"boolean",defaultValue:!0}}}]}]})};var We=r(62834),Je=r(22142),Ke=Object.defineProperty,He=Object.defineProperties,Ge=Object.getOwnPropertyDescriptors,qe=Object.getOwnPropertySymbols,Xe=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable,tt=(e,t,r)=>t in e?Ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rt=(e,t)=>{for(var r in t||(t={}))Xe.call(t,r)&&tt(e,r,t[r]);if(qe)for(var r of qe(t))et.call(t,r)&&tt(e,r,t[r]);return e};const nt={name:"监听变量变化",tooltip:Je.createElement(E,{title:"监听全局变量变化"}),content:({blueprint:e})=>{return{spark:"grid",content:[(t=rt({},w.am),r={hidden:!e},He(t,Ge(r))),(0,We._x)({index:"key",label:"变量名",tooltip:"监听全局变量的变化",spark:"select",required:!0}),O]};var t,r}};var ot=r(22142),at=Object.defineProperty,it=Object.defineProperties,lt=Object.getOwnPropertyDescriptors,ct=Object.getOwnPropertySymbols,st=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,ut=(e,t,r)=>t in e?at(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dt=(e,t)=>{for(var r in t||(t={}))st.call(t,r)&&ut(e,r,t[r]);if(ct)for(var r of ct(t))pt.call(t,r)&&ut(e,r,t[r]);return e},ft={Click:D,Gesture:U,Drag:q,LongPress:le,MouseDown:be,MouseUp:Pe,Auto:Re,Shaken:Fe,Loop:$e,EventListener:Qe,DataListener:nt,PhysicsCollide:{name:"物理碰撞",tooltip:ot.createElement(E,{title:"物理碰撞"}),content:({blueprint:e})=>{return{spark:"grid",content:[(t=dt({},w.am),r={hidden:!e},it(t,lt(r))),{index:"when",spark:"select",label:"碰撞时机",defaultValue:"enter",tooltip:"碰撞时机：开始碰撞，持续碰撞，和结束碰撞",options:[{label:"碰撞开始",value:"enter"},{label:"碰撞持续",value:"stay"},{label:"碰撞结束",value:"exit"}]},{index:"filterCategory",spark:"string",label:"刚体类别",tooltip:"能被碰撞的刚体类别，只有被设定的刚体类别碰撞后，才能触发此碰撞事件，多个类别用逗号隔开，比如“敌人,陷阱”，如果留空，则任意类别均可触发此碰撞事件",defaultValue:"",placeholder:"留空表示任一类别都可以生效"},O]};var t,r},checkError(e,{project:t}){const{editor:{enableBlueprint:r}}=t,n=(0,h.zh)(t),o=(0,h.v$)(n),a=Array.from((0,g.bp)(o)).map((({id:e})=>e)).concat(n.id);return r&&!a.includes(e.nodeId)?"缺少目标节点":""}}},mt=r(43047),yt=r(22142),bt=Object.defineProperty,ht=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,Ot=(e,t,r)=>t in e?bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const kt={evt:(0,b.iv)({width:"100%",boxSizing:"border-box",position:"relative"}),main:(0,b.iv)({width:"100%",display:"flex",alignItems:"center",height:"48px",border:"1px solid #EBEBEB",borderRadius:"4px","> div":{height:"100%"}}),icon:(0,b.iv)({width:"48px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"," svg":{width:"28px",height:"28px",transformOrigin:"50% 50%"}}),info:(0,b.iv)({flex:"1",width:0,margin:"0 8px",display:"flex",flexDirection:"column",justifyContent:"center",rowGap:2,"> :nth-child(1)":{margin:0,padding:0,height:"20px"},"> :nth-child(2)":{height:"16px"}}),name:(0,b.iv)({marginBottom:"2px","> input":{flex:1,height:"100%",padding:0,border:"none",borderRadius:0,color:"#333",fontWeight:"bold",lineHeight:"17px",boxShadow:"none!important"},"> input:hover":{boxShadow:"none!important"}}),time:(0,b.iv)({display:"flex","> span":{fontSize:"12px",color:"#999",marginRight:"7px"}," .ant-input-number":{flex:1,border:"none",boxShadow:"none"}," .ant-input-number-handler-wrap":{display:"none"}," .ant-input-number-input-wrap":{height:"100%",fontSize:"0","> input":{fontSize:"12px",color:"#999",height:"100%",lineHeight:"17px"},"> input:hover":{color:"#333"}}}),btns:(0,b.iv)({display:"flex",alignItems:"center","> *":{cursor:"pointer"},"> * : hover":{color:"#3955f6"}}),list:(0,b.iv)({width:"100%",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.08)",borderRadius:"4px",position:"absolute",paddingTop:"2px",paddingBottom:"2px",zIndex:120}),item:(0,b.iv)({width:"100%",height:"36px",display:"flex",alignItems:"center",cursor:"pointer",":hover":{backgroundColor:"#f5f5f5"}}),itemIcon:(0,b.iv)({marginLeft:"8px",display:"flex",alignItems:"center"," svg":{width:"18px",height:"18px",transformOrigin:"50% 50%"}}),itemName:(0,b.iv)({fontSize:"14px",flex:"1",width:"0",display:"flex",alignItems:"center",marginLeft:"4px",marginRight:"4px","> *":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})},xt=({script:e,name:t,time:r,onChange:o,onReplace:a})=>{const{state:g,toggle:v,setFalse:O}=(0,m.Z)(!1),{showImDialog:k}=(0,f.useImbot)(),x=Object.entries(ft).map((([e,t])=>({value:e,label:t.name,tooltip:t.tooltip})));(0,y.useEffect)((()=>{const e=()=>{g&&O()};return window.addEventListener("click",e),window.addEventListener("resize",e),()=>{window.removeEventListener("click",e),window.addEventListener("resize",e)}}),[g,O]);const{token:E}=c.Z.useToken();return yt.createElement("div",{className:kt.evt},yt.createElement("div",{className:kt.main},yt.createElement("div",{className:(0,b.cx)(kt.icon,(0,b.iv)({background:E.colorBgLayout})),onClick:e=>{e.stopPropagation(),v()}},yt.createElement(i.Z,{component:mt.P[e]})),yt.createElement("div",{className:kt.info},yt.createElement("p",{className:kt.name},yt.createElement(s.Z,{value:t,onChange:e=>o({name:e.currentTarget.value})})),yt.createElement("div",{className:kt.time},yt.createElement("span",null,"开始时间"),yt.createElement(p.Z,((e,t)=>{for(var r in t||(t={}))gt.call(t,r)&&Ot(e,r,t[r]);if(ht)for(var r of ht(t))vt.call(t,r)&&Ot(e,r,t[r]);return e})({},(0,n.useRatioNumber)({ratio:-1e3,unit:"s",value:r,min:0,precision:2,step:10,onChange(e){o({time:(0,n.callValue)(e,r)})}}))))),yt.createElement("div",{className:kt.btns},yt.createElement(u.Z,{title:"更换",placement:"bottom"},yt.createElement(d.Z,{type:"text",size:"large",icon:yt.createElement(l.Z,null),style:{backgroundColor:E.colorBgLayout,borderRadius:0,height:"100%"},onClick:e=>{e.stopPropagation(),v()}})))),g&&yt.createElement("div",{className:(0,b.cx)(kt.list,(0,b.iv)({background:E.colorBgContainer})),onClick:e=>{e.stopPropagation()}},x.map(((e,t)=>yt.createElement("div",{className:kt.item,key:t,onClick:()=>{(0,h.r3)(h.GM.UserSelectEventTrigger,{name:e.label}),a(e.value),O()}},yt.createElement("div",{className:kt.itemIcon},yt.createElement(i.Z,{component:mt.P[e.value]})),yt.createElement("div",{className:kt.itemName},yt.createElement("span",null,e.label),e.tooltip)))),yt.createElement(d.Z,{type:"link",style:{display:"block",marginLeft:"auto",padding:0},onClick:e=>{e.preventDefault(),k("互动方式")}},"如何使用互动方式？")))};var Et=r(22142),wt=Object.defineProperty,Pt=Object.defineProperties,jt=Object.getOwnPropertyDescriptors,St=Object.getOwnPropertySymbols,Ct=Object.prototype.hasOwnProperty,It=Object.prototype.propertyIsEnumerable,At=(e,t,r)=>t in e?wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Mt=(e,t)=>{for(var r in t||(t={}))Ct.call(t,r)&&At(e,r,t[r]);if(St)for(var r of St(t))It.call(t,r)&&At(e,r,t[r]);return e},_t=(e,t)=>Pt(e,jt(t));const Dt=()=>({spark:"group",label:"互动行为",extra:{spark:"flex",columnGap:0,content:[(0,o.I)(),{spark:"element",content:()=>{const{onDelete:e}=(0,f.useOnDelete)();return Et.createElement(u.Z,{title:"删除"},Et.createElement(d.Z,{type:"text",size:"small",icon:Et.createElement(a.Z,null),onClick:()=>e()}))}}]},content:{spark:"value",index:"script",content(e){const{content:t}=ft[e],{enableBlueprint:r}=(0,f.useEditor)(0,"enableBlueprint");return{spark:"block",status:"required",content:{spark:"grid",content:[{spark:"value",index:["name","time","nodeId"],content([t,o,a],i){return{spark:"value",index:"scripts",content(l){return{spark:"element",content(){return Et.createElement(xt,{name:t,time:o,script:e,onChange:({name:e=t,time:r=o})=>{i([e,r,a])},onReplace:e=>{const{content:t,name:c}=ft[e],s=(0,n.sparkValue)(t({blueprint:r}));i(_t(Mt({},s),{name:c,script:e,time:o,scripts:l,nodeId:a}),{replace:!0})}})}}}}}},_t(Mt({},t({blueprint:r})),{hidden:t({blueprint:r})===n.NULL_SPARK})]}}}}})},71734:function(e,t,r){"use strict";r.d(t,{a:function(){return O}});var n=r(5635),o=r(70072),a=r(96193),i=r(3207),l=r(92546),c=r(22142),s=r(77769),p=r(62732),u=r(22142),d=Object.defineProperty,f=Object.defineProperties,m=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))b.call(t,r)&&g(e,r,t[r]);if(y)for(var r of y(t))h.call(t,r)&&g(e,r,t[r]);return e};const O=({value:e,onChange:t})=>{var r,d;const{token:y}=n.Z.useToken(),[b,h]=(0,c.useState)(!1),g=(0,a.G)(null==e?void 0:e.__script);return u.createElement(u.Fragment,null,u.createElement("div",{className:(0,p.iv)({display:"flex",alignItems:"center",borderRadius:4,paddingRight:8,columnGap:8,border:`1px solid ${y.colorBorder}`,background:y.colorBgContainer})},u.createElement("img",{className:(0,p.iv)({width:46,height:46,objectFit:"none",background:y.colorBgLayout,borderRight:`1px solid ${y.colorBorder}`,borderRadius:"4px 0 0 4px"}),src:g.default}),u.createElement("div",{className:(0,p.iv)({flex:"auto"})},null!=(r=null==e?void 0:e.name)?r:"请选择"),u.createElement(o.Z,{type:"text",icon:u.createElement(l.Z,null),onClick:()=>h(!b)})),b&&u.createElement(i.TreeModal,{title:u.createElement("div",{className:(0,p.iv)({display:"flex",alignItems:"center",columnGap:4})},u.createElement("img",{className:(0,p.iv)({width:"1em",height:"1em"}),src:g.default}),null!=(d=null==e?void 0:e.name)?d:"动画效果"),children:(0,i.default)({spark:"context",content:(0,s.Effect)(null!=e?e:{},{rootType:"useEffect",isRoot:!1,propsMode:"Project"}),provide(){return{useValue(r){const{indexValue:n,indexEntries:o}=(0,i.getIndexer)(r);return{value:[n(e)],onChange([r],n){var a,i;(null==n?void 0:n.replace)?t((a=v({},r),i={time:null==e?void 0:e.time},f(a,m(i)))):t(v(v({},e),Object.fromEntries(o(r))),n)}}}}}}),onCancel:()=>h(!1)}))}},98290:function(e,t,r){"use strict";r.d(t,{P:function(){return d}});var n=r(3207),o=r(22142),a=Object.defineProperty,i=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(e){var t,r=e,{value:a=[],onChange:d,label:f}=r,m=((e,t)=>{var r={};for(var n in e)s.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(r,["value","onChange","label"]);return o.createElement(n.ArrayCell,(t=((e,t)=>{for(var r in t||(t={}))s.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))p.call(t,r)&&u(e,r,t[r]);return e})({},m),i(t,l({label:f,array:a,onChange:d,defaultExpanded:!0,render:(e,t)=>(0,n.default)({spark:"element",content(r){return r({spark:"string",value:e,label:"名称",onChange:t})}})}))))}},60440:function(e,t,r){"use strict";r.d(t,{y:function(){return s}});var n=r(12587),o=r(68961),a=r(80926),i=r(26840),l=r(62732),c=r(22142);const s=({value:e,label:t,tooltip:r,options:s,deletable:p,invalidLabel:u,onChange:d,disabled:f=!1})=>{const m=s.findIndex((t=>t.value===e));return c.createElement("div",{className:(0,l.cx)((0,l.iv)({height:48}),m<0&&"ant-form-item-has-error")},c.createElement(o.Z,{disabled:f,showSearch:!0,value:m,allowClear:p,status:m<0?"error":void 0,optionFilterProp:"label",onChange:e=>{var t;return d(null==(t=s[Number(e)])?void 0:t.value)},className:(0,l.iv)({width:"100%",".ant-select-selector":{padding:"0 !important",height:"48px !important"},".ant-select-selection-search":{display:"flex",alignItems:"center",paddingLeft:40}})},s.map((({type:e,label:s,cover:p},u)=>c.createElement(o.Z.Option,{key:u,value:u,label:s},c.createElement("div",{className:(0,l.iv)({display:"flex",alignItems:"center",columnGap:4})},c.createElement(n.Y,{size:46,type:e,url:p}),c.createElement(a.Z.Text,{type:"secondary"},c.createElement(i.Z,{title:r},t)),s)))),m<0&&c.createElement(o.Z.Option,{disabled:!0,key:m,value:m},c.createElement("div",{className:(0,l.iv)({display:"flex",alignItems:"center",columnGap:4})},c.createElement(n.Y,{size:46,invalid:!0}),(null==u?void 0:u(e))||"请选择",c.createElement(a.Z.Text,{type:"secondary"},c.createElement(i.Z,{title:r},t))))))}},34808:function(e,t,r){"use strict";r.d(t,{Am:function(){return h},Du:function(){return b},bp:function(){return g},jt:function(){return v},uc:function(){return O}});var n=r(40985),o=r(71331),a=r(60440),i=r(19104),l=r(42761),c=r(22142),s=Object.defineProperty,p=Object.defineProperties,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const b=({isType:e,value:t,label:r,tooltip:n,deletable:o,includeSelf:i,onChange:l,disabled:s})=>{const p=h(e,i);return c.createElement(a.y,{disabled:s,label:r,value:t,tooltip:n,options:p,deletable:o,onChange:l,invalidLabel:e=>void 0!==e?"素材不存在，请重新选择":"请选择"})};function h(e=(e=>!0),t=!0){const{enableBlueprint:r}=(0,i.useEditor)(0,"enableBlueprint"),{blueprintState:a}=(0,i.useEditor)(0,"blueprintState");return(0,l.v9)((({project:i})=>{const l=(0,n.zh)(i),s=(0,n.v$)(l),{props:b,editor:{selected:h}}=l,{nodeIds:[v]}=(0,n.bN)(h);let O=[];if(r&&"Node"===(null==a?void 0:a.type)){const[e]=(0,n.qC)(s,a.id);e&&(O=Array.from(g([e])))}else O=Array.from(g(s));const k=O.filter((r=>e(r.type)&&(t||r.id!==v))).map((({id:e,type:t,name:r})=>{var n,o;return{type:t,value:e,label:r,cover:null!=(o=null==(n=b[e]._editor)?void 0:n.cover)?o:"Sprite"===t?b[e].url:""}})),x=k.find((({value:e})=>e===v));var E,w;return!x||r&&"Node"!==(null==a?void 0:a.type)||k.splice(0,0,(E=((e,t)=>{for(var r in t||(t={}))f.call(t,r)&&y(e,r,t[r]);if(d)for(var r of d(t))m.call(t,r)&&y(e,r,t[r]);return e})({},x),w={value:-1,label:c.createElement(c.Fragment,null,"自身(",(0,o.C)(x.label),")")},p(E,u(w)))),r&&"Node"!==(null==a?void 0:a.type)&&k.splice(0,0,{value:-1,type:"Scene",label:"当前场景",cover:""}),k}),l.wU)}function*g(e){for(const t of e)yield t,t.nodes&&(yield*g(t.nodes))}function v(){return(0,l.v9)((({project:e})=>{const t=(0,n.zh)(e),{editor:{selected:r}}=t,{nodeIds:[o]}=(0,n.bN)(r);return o}))}function O(e){return(0,l.v9)((({project:t})=>{if(e){const r=(0,n.zh)(t),o=(0,n.v$)(r),[a]=(0,n.qC)(o,e);return a}}))}},40413:function(e,t,r){"use strict";r.d(t,{z:function(){return f}});var n=r(3207),o=r(73946),a=Object.defineProperty,i=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))p.call(t,r)&&u(e,r,t[r]);return e};function f({value:e={props:{}},onChange:t}){return(0,n.default)({spark:"context",provide:()=>({useValue(r){const{indexValue:o,indexEntries:a}=(0,n.getIndexer)(r);return{value:[o(e.props)],onChange([r]){var n,o;t((n=d({},e),o={props:d(d({},e.props),Object.fromEntries(a(r)))},i(n,l(o))))}}}}),content:{spark:"block",content:{spark:"grid",content:[{spark:"string",index:"text",label:"文本"},{spark:"number",index:"fontSize",defaultValue:50,label:"字号",min:8,max:160},(0,o.I)({spark:"color",index:"color",label:"颜色",defaultValue:"#000"})]}}})}},93671:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{S:function(){return customGroups}});var _byted_riko__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(48837),_byted_riko__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_byted_riko__WEBPACK_IMPORTED_MODULE_0__),_editor_Editor_Property_cells__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3207),_Effect_groups_loopGroup_CubicBezierEle__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24596),_editor_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(40985),lodash__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(73760),lodash__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_4__),_resourceSpark_ResourceBox__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(53983),_Script_Event_EventList__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(62780),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(22142),_editor_aStore__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(19104),react_redux__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(42761),_EffectCell__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(71734),_NodeCell__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(34808),_resourceSpark_ResourceBox_Actions__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(36263),axios__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(23247),axios__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_13__),_shared_utils__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(7910),_vector__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(45963),_TextBox__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(40413),emotion__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(62732),_Script_Event__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(99045),_transformGroup_widthHeightSpark__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(53936),_editor_Preview__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(60439),_editor_Editor_Blueprint_hooks_useSymbols__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(7891),_3D_Materials__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(46641),_ExtraSignals__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(98290),React=__webpack_require__(22142),__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))__hasOwnProp.call(t,r)&&__defNormalProp(e,r,t[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(t))__propIsEnum.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__restKey=e=>"symbol"==typeof e?e:e+"",__objRest=(e,t)=>{var r={};for(var n in e)__hasOwnProp.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&__getOwnPropSymbols)for(var n of __getOwnPropSymbols(e))t.indexOf(n)<0&&__propIsEnum.call(e,n)&&(r[n]=e[n]);return r},__async=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));function customGroups(e,t,r){const{callee:n,name:o,default:a,value:i=a,tooltip:l}=e;r=null!=r?r:valueFromHook(e);const c=Array.from(function*(){const e=Object.entries(i).sort(((e,t)=>e[1].orderIndex-t[1].orderIndex)),a=e.filter((e=>!["Riko.useArray","Riko.useObject"].includes(e[1].callee)));if(a.length){const e=hooksToGroup(t,a,o,l,r);"object"==n&&"group"==e.spark?yield e.content:yield e}for(const[n,o]of e)if(!isHidden(r,o.hidden))if("Riko.useArray"===o.callee)yield hooksToGroup(t,[[n,o]],o.name,o.tooltip,r);else if("Riko.useObject"===o.callee)for(const e of customGroups(o,((e,r)=>{t(n,__spreadProps(__spreadValues({},o),{value:__spreadProps(__spreadValues({},o.value),{[e]:r})}))}),r))"group"===e.spark?yield __spreadProps(__spreadValues({},e),{content:{spark:"block",indices:[n],content:e.content}}):yield{spark:"block",indices:[n],content:e}}()).filter((e=>e!==_editor_Editor_Property_cells__WEBPACK_IMPORTED_MODULE_1__.NULL_SPARK));return c.length>0?c:[_editor_Editor_Property_cells__WEBPACK_IMPORTED_MODULE_1__.NULL_SPARK]}const hooksToGroup=(e,t,r,n,o)=>(0,_editor_Editor_Property_cells__WEBPACK_IMPORTED_MODULE_1__.filterSpark)({spark:"group",label:r,tooltip:n,content:{spark:"grid",content:t.map((([t,r])=>({spark:"block",indices:[t],cols:r.colSpan&&Math.floor(r.colSpan/4),content:hookToSpark(t,r,((n,o)=>{e(t,(0,lodash__WEBPACK_IMPORTED_MODULE_4__.isFunction)(n)?n(r):__spreadProps(__spreadValues({},r),{value:n}),o)}),o)})))}}),isHidden=(vars,hidden)=>{var _a;if("string"==typeof hidden)try{const i=null!=(_a=null==vars?void 0:vars._index)?_a:0,$=new Proxy(vars,{get(e,t){return(0,lodash__WEBPACK_IMPORTED_MODULE_4__.get)(e,"$"+t)}});return eval(hidden.slice("eval:".length))}catch(e){}return hidden},hookToSpark=(e,t,r,n)=>{var o=t,{callee:a,min:i,max:l,unit:c,step:s,type:p,ratio:u,cover:d,tooltip:f,options:m,precision:y,defaultItem:b,required:h,defaultExpanded:g=!0,minLength:v,maxLength:O,placeholder:k,name:x=e,default:E,value:w=E,concise:P,hidden:j,desc:S,accept:C,labels:I,width:A,_editor:M}=o,_=__objRest(o,["callee","min","max","unit","step","type","ratio","cover","tooltip","options","precision","defaultItem","required","defaultExpanded","minLength","maxLength","placeholder","name","default","value","concise","hidden","desc","accept","labels","width","_editor"]);if(isHidden(n,j))return _editor_Editor_Property_cells__WEBPACK_IMPORTED_MODULE_1__.NULL_SPARK;switch(x=x.replace(/^\$/g,""),a){case"Riko.useSlider":case"Riko.useNumber":case"number":return{spark:"element",space:a,content:()=>{const t=(0,react_redux__WEBPACK_IMPORTED_MODULE_9__.v9)((({project:t})=>{var r;if(!_.tempSolution)return;const n=(0,_editor_utils__WEBPACK_IMPORTED_MODULE_3__.zh)(t),{props:o}=n,a=o,{[r=n.id]:i}=a,l=__objRest(a,[__restKey(r)]),c=Array.from(findSameKey(l,e)).reduce(((e,t)=>e+(null!=t?t:0)),0);return`抽中概率：${(Number(w)/c*100).toFixed(1)}%`}));return(0,_editor_Editor_Property_cells__WEBPACK_IMPORTED_MODULE_1__.default)({spark:"flex",content:[{spark:"element",space:a,content(e){return e({spark:"Riko.useSlider"===a?"slider":"number",label:x,min:i,max:l,step:s,unit:c,ratio:u,value:w,width:A,precision:y,required:h,tooltip:f,placeholder:k,onChange(e,t){r((0,_editor_Editor_Property_cells__WEBPACK_IMPORTED_MODULE_1__.callValue)(e,w),t)},inputNumber:!0})}},{spark:"element",space:a,hidden:!t,content(){return React.createElement("div",null,t)}}]})}};case"Riko.useSymbol":return{spark:"element",space:a,content:e=>{const t=(0,_editor_Editor_Blueprint_hooks_useSymbols__WEBPACK_IMPORTED_MODULE_21__.v)();return e({spark:"select",value:w,width:A,onChange:r,options:t,required:h,label:x,tooltip:f,placeholder:k,input:!0})}};case"Riko.useString":case"Riko.useColor":case"string":return{spark:"element",space:a,content:e=>e(__spreadValues({spark:"Riko.useColor"===a?"color":"string",label:x,max:l,accept:C,value:w,type:p,required:h,width:A,tooltip:f,placeholder:k,onChange:r},"Riko.useString"===a&&p?{type:p}:{}))};case"Riko.useBoolean":case"boolean":return(0,_editor_Editor_Property_cells__WEBPACK_IMPORTED_MODULE_1__.labelBooleanSpark)({spark:"label",label:x,tooltip:f,required:h,value:w,onChange:r});case"Riko.useSelect":case"Riko.useMode":return{spark:"element",space:a,content:e=>e({spark:"select",label:x,width:A,value:w,required:h,tooltip:f,options:m,placeholder:k,onChange:r})};case"Riko.useRes":return{spark:"element",space:a,content:()=>{var e;const{getState:t}=(0,react_redux__WEBPACK_IMPORTED_MODULE_9__.oR)();return React.createElement(_resourceSpark_ResourceBox__WEBPACK_IMPORTED_MODULE_5__.r,{deletable:!0,type:typeAlias(p||"Sprite"),url:w,label:x,required:h,name:(null==M?void 0:M.name)||x,cover:null!=(e=null==M?void 0:M.cover)?e:d,concise:null!=P?P:!["Sound","Sprite","Video"].includes(typeAlias(p||"Sprite")),onChange:e=>__async(void 0,[e],(function*({url:e,name:n,cover:o}){var a;let i=e;if("Cubemap"===p&&e){const r=yield handleCubeMap(e,t().project);i=null==(a=null==r?void 0:r.props)?void 0:a.textureCube}r((e=>{var t=e,{cover:r}=t,a=__objRest(t,["cover"]);return __spreadProps(__spreadValues({},a),{value:i,_editor:__spreadProps(__spreadValues({},M),{name:n,cover:o})})}))}))})}};case"Riko.useResNode":{const{type:e}=_editor_aStore__WEBPACK_IMPORTED_MODULE_8__.default.getState().project;return{spark:"element",space:a,content:()=>{var t,n;const o=(0,_editor_Preview__WEBPACK_IMPORTED_MODULE_20__.xe)(),a=(0,react__WEBPACK_IMPORTED_MODULE_7__.useRef)(),{selectedInnerNode:i}=(0,_editor_aStore__WEBPACK_IMPORTED_MODULE_8__.useEditor)("selectedInnerNode"),l=(null==w?void 0:w.id)&&w.id===(null==i?void 0:i[0]);return(0,react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((()=>{const e=a.current;let t;const r=(0,emotion__WEBPACK_IMPORTED_MODULE_17__.iv)({animation:`${emotion__WEBPACK_IMPORTED_MODULE_17__.F4`
                from {
                  background: transparent;
                  box-shadow: none;
                }
                50% {
                  background: rgb(238, 243, 254);
                  box-shadow: 0 0 0 2px rgb(57 85 246 / 30%);
                }
                to {
                  background: transparent;
                  box-shadow: none;
                }
              `} 1.2s 0.5s`});return l&&(t=setTimeout((()=>{null==e||e.scrollIntoView({behavior:"smooth",block:"center"}),null==e||e.classList.add(r)}),300)),()=>{clearTimeout(t),null==e||e.classList.remove(r)}}),[l]),_.isAnchor&&"Project"===e?React.createElement("div",{ref:a}):"Text"===p?React.createElement(_TextBox__WEBPACK_IMPORTED_MODULE_16__.z,{value:w,onChange:e=>__async(void 0,null,(function*(){r((t=>__spreadProps(__spreadValues({},t),{value:__spreadProps(__spreadValues({},e),{id:(0,_editor_utils__WEBPACK_IMPORTED_MODULE_3__.xv)()})})))}))}):React.createElement(React.Fragment,null,React.createElement("div",{className:(0,emotion__WEBPACK_IMPORTED_MODULE_17__.iv)({marginBottom:10})},React.createElement(_resourceSpark_ResourceBox__WEBPACK_IMPORTED_MODULE_5__.r,{deletable:!0,name:x,domRef:a,required:h,url:null==(t=null==w?void 0:w.props)?void 0:t.url,cover:null!=(n=null==M?void 0:M.cover)?n:d,type:typeAlias(p||"Sprite"),concise:null!=P?P:!["Sound","Sprite","Video"].includes(typeAlias(p||"Sprite")),onChange:e=>__async(void 0,[e],(function*({url:e,name:t,cover:n}){if(e){const o=yield(0,_byted_riko__WEBPACK_IMPORTED_MODULE_0__.createNode)(t,typeAlias(p||"Sprite"),_editor_utils__WEBPACK_IMPORTED_MODULE_3__.xv,e);r((e=>__spreadProps(__spreadValues({},e),{_editor:__spreadProps(__spreadValues({},M),{cover:n}),value:__spreadProps(__spreadValues({},o),{props:__spreadValues(__spreadValues({},o.props),(0,lodash__WEBPACK_IMPORTED_MODULE_4__.pick)(null==w?void 0:w.props,["x","y"])),editor:__spreadValues(__spreadProps(__spreadValues({},o.editor),{cover:n}),_.isAnchor&&{editableProperties:["x","y"]}),id:(0,_editor_utils__WEBPACK_IMPORTED_MODULE_3__.xv)()}),name:t})))}else r((e=>__spreadProps(__spreadValues({},e),{value:void 0,_editor:void 0,name:void 0}))),o()}))})),w&&(0,_editor_Editor_Property_cells__WEBPACK_IMPORTED_MODULE_1__.default)(getUseResNodeGroup(w,(e=>{r((t=>__spreadProps(__spreadValues({},t),{_editor:__spreadProps(__spreadValues({},M),{cover:d}),value:__spreadProps(__spreadValues({},e),{id:(0,_editor_utils__WEBPACK_IMPORTED_MODULE_3__.xv)()})})))}))))}}}case"Riko.useEase":return{spark:"element",space:a,content:()=>React.createElement(_Effect_groups_loopGroup_CubicBezierEle__WEBPACK_IMPORTED_MODULE_2__.G,{label:x,value:w,onChange:r})};case"Riko.useObject":case"object":return(0,_editor_Editor_Property_cells__WEBPACK_IMPORTED_MODULE_1__.filterSpark)({spark:"grid",content:customGroups({callee:a,name:x,default:w,tooltip:f},((e,t,n)=>{r((r=>{var n;return __spreadProps(__spreadValues({},r),{value:__spreadProps(__spreadValues({},null!=(n=r.value)?n:r.default),{[e]:t})})}),n)}),n)});case"Riko.useArray":return hookToSpark(e,b,r,n)!==_editor_Editor_Property_cells__WEBPACK_IMPORTED_MODULE_1__.NULL_SPARK?{spark:"element",space:`${a}-${defaultItemToKey(b).join("-")}`,content:()=>{var e;const[t,o]=(0,react__WEBPACK_IMPORTED_MODULE_7__.useState)(void 0);(0,react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((()=>{b&&fromHook(b).then((e=>o(e)))}),[]);const[a,i]=(0,react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),l=(0,react__WEBPACK_IMPORTED_MODULE_7__.useRef)(null),c=(0,react__WEBPACK_IMPORTED_MODULE_7__.useRef)(collectCallee(b,["Riko.useRes","Riko.useResNode"])),s=(0,react__WEBPACK_IMPORTED_MODULE_7__.useRef)({index:w.length,_arrayEditor:{}});return React.createElement(React.Fragment,null,React.createElement(_editor_Editor_Property_cells__WEBPACK_IMPORTED_MODULE_1__.ArrayCell,{array:w,label:x,onChange:(e,t,n,o)=>{r((t=>{var r;let a=((null==(r=null==t?void 0:t._editor)?void 0:r._arrayEditor)||[]).slice();if(void 0!==n&&void 0!==o){const e=a[n],t=a[o];a[n]=t,a[o]=e}else if(e.length<t.value.length){const r=t.value.findIndex((t=>e.every((e=>t!==e))));a=a.filter(((e,t)=>t!==r))}else a[s.current.index]=s.current._arrayEditor;return s.current={index:e.length,_arrayEditor:{}},__spreadProps(__spreadValues({},t),{value:e,_editor:__spreadProps(__spreadValues({},t._editor||{}),{_arrayEditor:a})})}))},minLength:v,maxLength:O,defaultItem:e=>{var r;if(1!==c.current.length||!c.current.every((e=>"Cubemap"!==e[2]))||"point"===(null==(r=c.current[0])?void 0:r[0])){const r=w[w.length-1];return e(t&&"object"==typeof t?replaceNode(t,((e,t)=>{if(r){const n=findNode(r,t),{editor:{_editor:o}}=e,{offsetX:a=20,offsetY:i=20}=o||{},{props:{x:l=0,y:c=0}}=n;return __spreadProps(__spreadValues({},e),{id:(0,_editor_utils__WEBPACK_IMPORTED_MODULE_3__.xv)(),props:__spreadProps(__spreadValues({},e.props),{x:w.length?l+a:0,y:w.length?c+i:0})})}return __spreadProps(__spreadValues({},e),{id:(0,_editor_utils__WEBPACK_IMPORTED_MODULE_3__.xv)()})})):t)}i(!0),l.current=e},render:(e,t,r)=>{const o=w.indexOf(e),{_arrayEditor:a}=M||{};let i=(0,_editor_utils__WEBPACK_IMPORTED_MODULE_3__.a$)(b,e);return(null==a?void 0:a[o])&&(i=(0,_editor_utils__WEBPACK_IMPORTED_MODULE_3__.a$)(i,a[o],"_editor")),(0,_editor_Editor_Property_cells__WEBPACK_IMPORTED_MODULE_1__.default)(hookToSpark(x,i,((r,n)=>__async(void 0,null,(function*(){if((0,lodash__WEBPACK_IMPORTED_MODULE_4__.isFunction)(r)&&c.current.length){const[[t]]=c.current,{value:n,_editor:o}=r(i);s.current={index:w.indexOf(e),_arrayEditor:"defaultItem"===t?o:Object.fromEntries(Object.entries(n).map((([e,t])=>[e,t._editor])))}}t(yield fromHook((0,lodash__WEBPACK_IMPORTED_MODULE_4__.isFunction)(r)?r(i):__spreadProps(__spreadValues({},i),{value:r})),n)}))),__spreadProps(__spreadValues({},n),{_index:r})))},defaultExpanded:g}),a&&React.createElement(_resourceSpark_ResourceBox_Actions__WEBPACK_IMPORTED_MODULE_12__.O,{eleType:typeAlias((null==(e=c.current[0])?void 0:e[2])||"Sprite"),onChange:e=>__async(void 0,[e],(function*({url:e,name:r}){var n,o,a,i;const[[p,u,d]]=c.current;s.current={index:w.length,_arrayEditor:"defaultItem"===p?{cover:e,name:r}:{[p]:{cover:e,name:r}}};const f="Riko.useResNode"===u?yield(0,_byted_riko__WEBPACK_IMPORTED_MODULE_0__.createNode)(r,typeAlias(d||"Sprite"),_editor_utils__WEBPACK_IMPORTED_MODULE_3__.xv,e):null,m=w[w.length-1],{offsetX:y=20,offsetY:b=20}=M||{};"defaultItem"===p?null==(a=l.current)||a.call(l,"Riko.useRes"===u?e:__spreadProps(__spreadValues({},f),{props:__spreadProps(__spreadValues({},f.props),{x:m?(null==(n=null==m?void 0:m.props)?void 0:n.x)+y:0,y:m?(null==(o=null==m?void 0:m.props)?void 0:o.y)+b:0})})):null==(i=l.current)||i.call(l,Object.fromEntries(Object.entries(t).map((([t,r])=>[t,t===p?"Riko.useRes"===u?e:__spreadProps(__spreadValues({},f),{props:__spreadProps(__spreadValues({},f.props),{x:m?m[t].props.x+20:0,y:m?m[t].props.y+20:0})}):r]))))})),onClose:()=>{i(!1)}}))}}:_editor_Editor_Property_cells__WEBPACK_IMPORTED_MODULE_1__.NULL_SPARK;case"Riko.useNode":return{spark:"element",space:a,content:()=>React.createElement(_NodeCell__WEBPACK_IMPORTED_MODULE_11__.Du,{deletable:!0,isType:e=>!p||e===p,value:w,label:x,tooltip:f,onChange:r})};case"Riko.useEffect":return{spark:"element",space:a,content:()=>React.createElement(_EffectCell__WEBPACK_IMPORTED_MODULE_10__.a,{value:w,label:x,tooltip:f,onChange:r})};case"Riko.useEvent":return{spark:"element",space:a,content:()=>React.createElement(_Script_Event_EventList__WEBPACK_IMPORTED_MODULE_6__.q,{scripts:w,onChange:r,desc:S,context:"useEvent"})};case"Riko.useVector":return{spark:"element",space:a,content:()=>React.createElement(_vector__WEBPACK_IMPORTED_MODULE_15__.O,{value:w,onChange:r,tooltip:f,label:x,labels:I,inputOptions:{min:i,max:l,precision:y,step:s,unit:c,ratio:u}})};case"Riko.useMaterial":return{spark:"element",space:a,content:()=>React.createElement(_3D_Materials__WEBPACK_IMPORTED_MODULE_22__.D4,{type:"",orderId:w,onChange:r,copyLoading:!1,editable:!1})};case"Riko.useInput":case"Riko.useOutput":return _editor_Editor_Property_cells__WEBPACK_IMPORTED_MODULE_1__.NULL_SPARK;case"Riko.useInputs":case"Riko.useOutputs":return{spark:"element",space:a,content:()=>React.createElement(_ExtraSignals__WEBPACK_IMPORTED_MODULE_23__.P,{value:w,onChange:r,label:x})};default:return(0,_editor_Editor_Property_cells__WEBPACK_IMPORTED_MODULE_1__.neverThrow)(a)}},typeAlias=e=>{switch(e){case"Image":return"Sprite";case"Component":return"Animation";case"Component3D":return"Animation3D";case"Cubemap":return"Skybox";default:return e}},fromHook=e=>__async(void 0,null,(function*(){var t,r,n;switch(e.callee){case"Riko.useObject":case"object":return Object.fromEntries(yield Promise.all(Object.entries(null!=(t=e.value)?t:e.default).map((e=>__async(this,[e],(function*([e,t]){return[e,yield fromHook(t)]}))))));case"Riko.useResNode":if(e.default){const t=yield(0,_byted_riko__WEBPACK_IMPORTED_MODULE_0__.createNode)(e.name,typeAlias(e.type||"Sprite"),_editor_utils__WEBPACK_IMPORTED_MODULE_3__.xv,e.default);return Object.assign(t.props,{x:0,y:0}),Object.assign(t.editor,{_editor:{offsetX:e.offsetX,offsetY:e.offsetY}}),e.isAnchor&&Object.assign(t.editor,{editableProperties:["x","y"]}),null!=(r=e.value)?r:t}return e.value;default:return null!=(n=e.value)?n:e.default}})),valueFromHook=e=>{var t,r;switch(e.callee){case"Riko.useObject":case"object":return Object.fromEntries(Object.entries(null!=(t=e.value)?t:e.default).map((([e,t])=>[e,valueFromHook(t)])));default:return null!=(r=e.value)?r:e.default}};function replaceNode(e,t){return Object.fromEntries(Object.entries(e).map((([e,r])=>(0,lodash__WEBPACK_IMPORTED_MODULE_4__.isPlainObject)(r)?r.type&&r.id?[e,t(r,e)]:[e,replaceNode(r,t)]:[e,r])))}function findNode(e,t){for(const[r,n]of Object.entries(e))if(Array.isArray(n)){const e=findNode(n,t);if(e)return e}else if(n&&"object"==typeof n){if(r===t)return n;const e=findNode(n,t);if(e)return e}}function*findSameKey(e,t){const r=["undoStack","redoStack","default","defaultItem"];for(const[n,o]of Object.entries(e))r.includes(n)||(n===t&&(yield o),o&&"object"==typeof o&&(yield*findSameKey(o,t)))}function defaultItemToKey(e){var t;const r=[];switch(e.callee){case"Riko.useObject":case"object":for(const[n,{callee:o,type:a}]of Object.entries(null!=(t=e.value)?t:e.default))r.push(`${o}_${a}`);break;default:r.push(`default_${e.callee}_${e.type}`)}return r}function collectCallee(e,t){return t.includes(e.callee)?[["defaultItem",e.callee,e.type]]:[]}function handleCubeMap(e,t){return __async(this,null,(function*(){if("string"==typeof e){const{data:t}=yield axios__WEBPACK_IMPORTED_MODULE_13___default().get((0,_shared_utils__WEBPACK_IMPORTED_MODULE_14__.GR)(e));return t}return(0,_editor_utils__WEBPACK_IMPORTED_MODULE_3__._N)(t,e)}))}function getUseResNodeGroup(e,t){return{spark:"context",provide:()=>({useValue(r){const{indexValue:n,indexEntries:o}=(0,_editor_Editor_Property_cells__WEBPACK_IMPORTED_MODULE_1__.getIndexer)(r);return{value:[n(e.props)],onChange([r]){t(__spreadProps(__spreadValues({},e),{props:__spreadValues(__spreadValues({},e.props),Object.fromEntries(o(r)))}))}}}}),content:{spark:"grid",content:[{spark:"flex",content:[_Script_Event__WEBPACK_IMPORTED_MODULE_18__.V6,_Script_Event__WEBPACK_IMPORTED_MODULE_18__.LB]},(0,_transformGroup_widthHeightSpark__WEBPACK_IMPORTED_MODULE_19__.Z)(),{spark:"number",label:"旋转角度",step:1,precision:0,index:"rotation",unit:"°"},{spark:"flex",content:[_Script_Event__WEBPACK_IMPORTED_MODULE_18__.$n,_Script_Event__WEBPACK_IMPORTED_MODULE_18__.V2]}]}}}},45963:function(e,t,r){"use strict";r.d(t,{O:function(){return s}});var n=r(3207),o=Object.defineProperty,a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function s({value:e=[0,0,0,0],onChange:t,label:r,tooltip:o,labels:s=["x","y","z","w"],steps:p=[1,1,1,1],inputOptions:u={}}){return[2,3,4].includes(e.length)?(0,n.default)({spark:"context",content:{spark:"label",label:r,tooltip:o,content:{spark:"grid",content:e.map(((t,r)=>((e,t)=>{for(var r in t||(t={}))i.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e})({spark:"number",index:r,label:s[r],cols:3===e.length?2:3,width:3===e.length?16:32,step:p[r]},u)))}},provide:()=>({useValue(r){const{indexValue:o,indexEntries:a}=(0,n.getIndexer)(r);return{value:[o(e)],onChange([r],o){t((0,n.updateValue)(e,a(r)),o)}}}})}):null}},57772:function(e,t,r){"use strict";r.d(t,{K:function(){return pe},D:function(){return ue}});var n,o,a=r(3207),i=r(19104),l=r(42761),c=r(26840),s=r(70072),p=r(48837),u=r(22142),d=["title","titleId"];function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}var m,y,b=function(e,t){var r=e.title,a=e.titleId,i=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,d);return u.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 14",strokeWidth:0,ref:t,"aria-labelledby":a},i),r?u.createElement("title",{id:a},r):null,n||(n=u.createElement("path",{d:"M3 3h9v3H3zM3 8h5v3H3z"})),o||(o=u.createElement("path",{d:"M0 0h1v14H0z"})))},h=(0,u.forwardRef)(b),g=(r.p,["title","titleId"]);function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(this,arguments)}var O,k,x=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,g);return u.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 14",strokeWidth:0,ref:t,"aria-labelledby":n},o),r?u.createElement("title",{id:n},r):null,m||(m=u.createElement("path",{d:"M6 0h1v14H6z"})),y||(y=u.createElement("path",{d:"M0 3h13v3H0zM3 8h7v3H3z"})))},E=(0,u.forwardRef)(x),w=(r.p,["title","titleId"]);function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P.apply(this,arguments)}var j,S,C=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,w);return u.createElement("svg",P({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 14",strokeWidth:0,ref:t,"aria-labelledby":n},o),r?u.createElement("title",{id:n},r):null,O||(O=u.createElement("path",{d:"M11 0h1v14h-1z"})),k||(k=u.createElement("path",{d:"M0 3h9v3H0zM4 8h5v3H4z"})))},I=(0,u.forwardRef)(C),A=(r.p,["title","titleId"]);function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M.apply(this,arguments)}var _,D,R=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,A);return u.createElement("svg",M({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 14",strokeWidth:0,ref:t,"aria-labelledby":n},o),r?u.createElement("title",{id:n},r):null,j||(j=u.createElement("path",{d:"M3 12h3V3H3zM8 8h3V3H8z"})),S||(S=u.createElement("path",{d:"M0 1h14V0H0z"})))},N=(0,u.forwardRef)(R),V=(r.p,["title","titleId"]);function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B.apply(this,arguments)}var Z,T,z=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,V);return u.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 14",strokeWidth:0,ref:t,"aria-labelledby":n},o),r?u.createElement("title",{id:n},r):null,_||(_=u.createElement("path",{d:"M0 6h14v1H0z"})),D||(D=u.createElement("path",{d:"M3 0h3v13H3zM8 3h3v7H8z"})))},L=(0,u.forwardRef)(z),U=(r.p,["title","titleId"]);function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F.apply(this,arguments)}var Y,$,Q=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,U);return u.createElement("svg",F({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 14",strokeWidth:0,ref:t,"aria-labelledby":n},o),r?u.createElement("title",{id:n},r):null,Z||(Z=u.createElement("path",{d:"M3 0h3v9H3zM8 4h3v5H8z"})),T||(T=u.createElement("path",{d:"M0 11h14v1H0z"})))},W=(0,u.forwardRef)(Q),J=(r.p,["title","titleId"]);function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K.apply(this,arguments)}var H,G,q=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,J);return u.createElement("svg",K({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 14",strokeWidth:0,ref:t,"aria-labelledby":n},o),r?u.createElement("title",{id:n},r):null,Y||(Y=u.createElement("rect",{x:5,y:3,width:4,height:8,rx:1})),$||($=u.createElement("path",{d:"M1 1h1v12H1zM12 1h1v12h-1z"})))},X=(0,u.forwardRef)(q),ee=(r.p,["title","titleId"]);function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},te.apply(this,arguments)}var re=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ee);return u.createElement("svg",te({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 14",strokeWidth:0,ref:t,"aria-labelledby":n},o),r?u.createElement("title",{id:n},r):null,H||(H=u.createElement("rect",{x:3,y:5,width:8,height:4,rx:1})),G||(G=u.createElement("path",{d:"M1 1h12v1H1zM1 12h12v1H1z"})))},ne=(0,u.forwardRef)(re),oe=(r.p,[{icon:h,tooltip:"左对齐",value:p.AlignMode.Left},{icon:E,tooltip:"水平居中",value:p.AlignMode.Center},{icon:I,tooltip:"右对齐",value:p.AlignMode.Right},{icon:N,tooltip:"顶对齐",value:p.AlignMode.Top},{icon:L,tooltip:"垂直居中",value:p.AlignMode.Middle},{icon:W,tooltip:"底对齐",value:p.AlignMode.Bottom},{icon:X,tooltip:"水平等间距",value:p.AlignMode.Horizontal},{icon:ne,tooltip:"垂直等间距",value:p.AlignMode.Vertical}]),ae=r(33058),ie=r(62732),le=r(22142);const ce=(0,ie.iv)({alignItems:"center",whiteSpace:"nowrap",display:"flex"}),se=({className:e})=>{const t=(0,l.I0)();return le.createElement("div",{className:(0,ie.cx)(ce,e)},oe.map((({icon:e,tooltip:r,value:n})=>le.createElement(c.Z,{key:n,title:r},le.createElement(s.Z,{type:"text",size:"small",icon:le.createElement(ae.Z,{component:e,onClick:()=>{t((0,i.alignAction)(n))}})})))))},pe=({className:e})=>{const{openKeys:{enabled:t,setEnabled:r}}=(0,u.useContext)(a.CellContext);return le.createElement("div",{className:(0,ie.cx)(ce,e)},le.createElement(a.TooltipHelp,{placement:"left",title:"开启此按钮后，可以定义素材属性是否允许用户更改"}),"素材可被编辑 ",(0,a.default)({spark:"element",content:e=>e({spark:"boolean",value:t,onChange:r,type:"switch",size:"small"})}))},ue=({type:e},{isRoot:t,propsMode:r})=>({spark:"value",index:"_alignment_and_enable_openKeys",hidden:t||"Product"===r||("Sound"===e||"Script"===e)&&"Template"!==r,content:()=>({spark:"element",content(){switch(r){case"Project":return le.createElement(se,{className:(0,ie.iv)({padding:"16px 16px 0",button:{flex:"auto"}})});case"Template":return le.createElement(pe,{className:(0,ie.iv)({height:40,padding:"16px 16px 0"})});default:return null}}})})},88551:function(e,t,r){"use strict";r.d(t,{I:function(){return a}});var n=r(26840),o=r(22142);const a=(e=!1)=>({spark:"value",index:"enabled",hidden:e,content(e=!0,t){return{spark:"element",content:r=>o.createElement(n.Z,{title:e?"禁用":"启用"},r({spark:"boolean",value:e,type:"enabled",size:"small",onChange:t}))}}})},85593:function(e,t,r){"use strict";r.d(t,{S:function(){return n},t:function(){return o}});const n=[{label:"Default",value:"Default"},{label:"TransparentFX",value:"TransparentFX"},{label:"Ignore Raycast",value:"Ignore Raycast"},{label:"Test",value:"Test"},{label:"Water",value:"Water"},{label:"UI",value:"UI"}],o=(e=!0)=>({spark:"block",hidden:!0,content:{spark:"select",index:"layer",label:"层",tooltip:"用于分组的节点所属层",defaultValue:"Default",options:n}})},48704:function(e,t,r){"use strict";r.d(t,{Y:function(){return _}});var n=r(75919),o=r(33058),a=r(73547),i=r(15333),l=r(92546),c=r(99350),s=r(19104),p=r(80866),u=r(26840),d=r(70072),f=r(61754),m=r(22142),y=r(19061),b=r(81645),h=r(71092),g=r(34808),v=r(7910),O=r(40985),k=r(42761),x=r(22142),E=Object.defineProperty,w=Object.defineProperties,P=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,A=(e,t)=>{for(var r in t||(t={}))S.call(t,r)&&I(e,r,t[r]);if(j)for(var r of j(t))C.call(t,r)&&I(e,r,t[r]);return e};const M=({type:e})=>({spark:"element",hidden:!(0,v.cM)({release:!1}),content(){const{getState:t}=(0,k.oR)(),{trigger:r}=(0,h.Z)("Blueprint"),n=(0,g.jt)(),a="Node"===e?n:0;return x.createElement(u.Z,{title:"编辑蓝图"},x.createElement(d.Z,{type:"primary",icon:x.createElement(o.Z,{component:y.Z}),onClick:()=>{const n=(0,O.zh)(t().project);r({type:n.id===a?"Scene":e,id:a})}}))}}),_=({type:e,multiType:t,multiple:r},{typeOfPlay:o,isRoot:y})=>{return{spark:"flex",content:[{spark:"element",basis:"auto",hidden:"Animation3D"!==e||y,content(){const{dispatch:e}=(0,k.oR)(),{orderId:t,nodeId:r,project:n}=(0,k.v9)((({project:e})=>{const t=(0,O.zh)(e,void 0,!1),{editor:{selected:r}}=t;return{project:e,orderId:t.props[Object.keys(r)[0]].url,nodeId:Object.keys(r)[0]}}));return x.createElement(u.Z,{title:"同步组件内部属性"},x.createElement(d.Z,{type:"default",icon:x.createElement(b.Z,null),onClick:()=>{var o,a,i;if("number"==typeof t){const l=(0,O._N)(n,t),c=l.props[l.id];e((0,s.changeProps)([Number(r)],{scale:null!=(o=c.scale)?o:[1,1,1],rotation:null!=(a=c.rotation)?a:[0,0,0],physics:null!=(i=c.physics)?i:{type:"none"}}))}}}))}},{spark:"check",basis:"auto",index:"url",hidden:(0,v.cM)({release:!0})||4===o,check:{hidden:e=>!e},content:{spark:"value",index:"preload",content(t,r){const n=(0,k.v9)((({project:r})=>{if(void 0!==t)return t;if("Sprite"===e)return!0;if("Sound"===e)return!1;const{id:n}=(0,O.dU)(r.scenes);return r.editor.selectedSceneId===n}));return{spark:"element",content(){return x.createElement(u.Z,{title:n?"已设置预加载":"设置预加载"},x.createElement(d.Z,{type:n?"primary":"default",icon:x.createElement(a.Z,null),onClick:()=>r(!n)}))}}}}},{spark:"block",content:{spark:"string",width:72,index:"name",defaultValue:"",tooltip:"名称",max:20,label:t?x.createElement(x.Fragment,null,x.createElement(i.Z,null)," 多选"):x.createElement(x.Fragment,null,x.createElement(n.Z,{type:e})," ",(0,p.J)(e))}},(h=A({},M({type:"Node"})),g={basis:"auto",hidden:"Blueprint"!==e},w(h,P(g))),{spark:"check",index:"url",hidden:r||!["Animation","Animation3D"].includes(e),check:{hidden:e=>!e||"string"!=typeof e&&"number"!=typeof e,basis:()=>"auto"},content:{spark:"value",index:"url",content(e){const{onEditComponent:t}=(0,s.useOnEditComponent)(),[r,n]=(0,m.useState)(!1);return{spark:"element",content:()=>x.createElement(d.Z,{loading:r,icon:"number"==typeof e?x.createElement(l.Z,null):x.createElement(c.Z,null),onClick:()=>{return r=this,null,o=function*(){n(!0);try{yield t(e)}catch(e){f.ZP.error(e.message)}finally{n(!1)}},new Promise(((e,t)=>{var n=e=>{try{i(o.next(e))}catch(e){t(e)}},a=e=>{try{i(o.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,a);i((o=o.apply(r,null)).next())}));var r,o}})}}}}]};var h,g}},80866:function(e,t,r){"use strict";r.d(t,{J:function(){return n}});const n=e=>{switch(e){case"Text":return"文字";case"Shape":return"图形";case"Container":return"容器";case"PVButton":case"Button":return"按钮";case"Camera":return"摄像机";case"Sprite3D":return"3D容器";case"MeshSprite3D":return"3D图形";case"Scene3D":return"3D场景";case"Light":return"灯光";case"Animation3D":return"3D组件";case"Scene":return"场景";case"Script":return"事件";case"Effect":return"动画";case"Blueprint":return"蓝图";case"Controller":return"控制器";case"Sound":return"声音";case"NativeLoadingVideo":case"PVAlphaVideo":case"AlphaVideo":case"NativeVideo":case"Video":return"视频";case"Lottie":return"Lottie";case"Particle":return"粒子";case"ShurikenParticle3D":case"ParticleSystem3D":return"3D粒子";case"Sprite":return"图片";case"Animation":return"组件";case"PVFrameAnime":case"FrameAnime":return"序列帧";case"Spine":return"Spine";case"DragonBones":return"龙骨";case"Live2d":return"Live2D";case"Model":return"模型";case"Trail3D":return"拖尾";case"Particle3D":return"3D粒子容器";case"Cubemaps":return"天空盒";case"PanoramaSpace":return"全景";case"PanoramaHotSpot":return"热点";case"PVClickArea":return"热区";case"PVSlider":return"滑条";case"PVDragger":return"拖拽";default:return e}}},95074:function(e,t,r){"use strict";r.d(t,{J:function(){return o},P:function(){return n}});const n=(e=!1)=>({spark:"grid",content:[{spark:"block",content:{spark:"label",label:"位置",hidden:e,tooltip:"节点的本地位置坐标",content:o("position")}},{spark:"block",content:{spark:"label",label:"旋转",tooltip:"节点的本地旋转角度",content:o("rotation")}},{spark:"block",content:{spark:"label",label:"缩放",tooltip:"节点的本地缩放比例",content:o("scale",void 0,void 0,[1,1,1])}}]}),o=(e,t=["X","Y","Z"],r=!1,n=[0,0,0])=>({spark:"enter",index:e,content:{spark:"flex",content:[{spark:"number",label:t[0],width:16,index:0,defaultValue:n[0],step:.1,precision:2,disabled:r},{spark:"number",label:t[1],width:16,index:1,defaultValue:n[1],step:.1,precision:2,disabled:r},{spark:"number",label:t[2],width:16,index:2,defaultValue:n[2],step:.1,precision:2,disabled:r}]}})},99535:function(e,t,r){"use strict";r.d(t,{K2:function(){return et.K},CQ:function(){return Ue},EG:function(){return g},Uc:function(){return P.Uc},d0:function(){return J},Dc:function(){return et.D},pb:function(){return ae},QB:function(){return qe},Pe:function(){return ve},of:function(){return Ye},Uy:function(){return rt},$g:function(){return nt},pV:function(){return v},Zd:function(){return at},zx:function(){return Fe},mm:function(){return W},WE:function(){return w},Np:function(){return k},d$:function(){return x}});var n=r(81306),o=r(42761),a=r(40985),i=r(53983),l=r(34808),c=r(22142),s=Object.defineProperty,p=Object.defineProperties,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&y(e,r,t[r]);if(d)for(var r of d(t))m.call(t,r)&&y(e,r,t[r]);return e},h=(e,t)=>p(e,u(t));const g=(e,...t)=>({spark:"group",label:"互动跳转设置",content:{spark:"grid",content:[{spark:"value",index:"target",hidden:"PVDragger"!==e.type,content(e,t){return{spark:"element",content:()=>c.createElement(l.Du,{value:e,label:"拖拽目标",isType:e=>!["PVButton","PVClickArea","PVSlider","PVDragger","PVAlphaVideo","VRButton"].includes(e),onChange:t})}}},{spark:"select",hidden:"PVClickArea"!==e.type,index:"shapeType",label:"热区图形",tooltip:"热区图形设置",placeholder:"请选择",options:[{label:"圆形",value:"circle"},{label:"矩形",value:"rectangle"}],defaultValue:"circle",required:!0},(0,n.b)({spark:"select",index:"jumpSceneId",label:"跳转至",tooltip:"跳转至某个视频场景",placeholder:"请选择",defaultValue:void 0,required:!0}),O(e,...t)]}}),v=(...e)=>({spark:"group",label:"互动跳转设置",content:{spark:"grid",content:[(0,n.b)({spark:"select",index:"jumpSceneId",label:"跳转至",tooltip:"跳转至某个视频场景",placeholder:"请选择",defaultValue:void 0,required:!0}),{spark:"select",index:"gestureType",label:"滑动方向",tooltip:"滑动方向",defaultValue:1,cols:3,options:[{label:"左滑",value:0},{label:"右滑",value:1},{label:"上滑",value:2},{label:"下滑",value:3}],required:!0},{spark:"number",index:"distance",label:"滑动长度",step:1,cols:3,precision:0,defaultValue:100,tooltip:"滑动的长度",min:0},{spark:"slider",index:"minRate",width:96,label:"滑动生效长度",min:0,max:1,step:.01,ratio:100,precision:0,defaultValue:1,unit:"%",tooltip:"滑动成功触发比率"},O(...e)]}}),O=()=>({spark:"grid",content:[{spark:"select",index:"guideTitle",label:"引导动作",tooltip:"手势引导该组件时，给用户的操作提示",options:[{value:"点击"},{value:"滑动"},{value:"拖拽"}]},{spark:"string",index:"guideSubtitle",label:"引导文案",tooltip:"手势引导该组件时，给用户的效果提示"},{spark:"label",label:"震动反馈",tooltip:"该组件触发后是否要给用户震动反馈",content:{spark:"boolean",index:"vibrating",defaultValue:!1}}]}),k=()=>({spark:"check",index:[],check:{hidden:()=>(0,o.v9)((({project:e})=>Object.values((0,a.zh)(e).props).some((({jumpSceneId:e,type:t})=>"PVVideo"!==t&&"VRVideo"!==t&&"number"==typeof e))))},content:{spark:"group",label:"自动跳转设置",content:(0,n.b)({spark:"select",index:"jumpSceneId",label:"跳转至",tooltip:"跳转至某个视频场景",placeholder:"请选择",defaultValue:void 0})}}),x=e=>({spark:"check",index:[],check:{hidden:()=>!(0,o.v9)((({project:e})=>Object.values((0,a.zh)(e).props).some((({jumpSceneId:e,type:t})=>"PVVideo"!==t&&"number"==typeof e))))},content:{spark:"group",label:"背景音乐设置",content:{spark:"value",index:["soundUrl","_editor"],content([t,r={}],n){return{spark:"element",content(){return c.createElement(i.r,h(b({deletable:!0},e),{type:"Sound",url:t,name:t?r.name:void 0,size:r.size,onChange:({url:e,name:t,size:o})=>{n([e,h(b({},r),{name:t,size:o})])}}))}}}}}});var E=r(53936);const w=({type:e},{isRoot:t})=>({spark:"group",label:"变换",content:{spark:"grid",content:[{spark:"block",hidden:t&&"Animation"===e,content:{spark:"flex",content:[{spark:"number",width:32,label:"X",index:"x"},{spark:"number",width:32,label:"Y",index:"y"}]}},(0,E.Z)("DragonBones"===e||"Particle"===e||"Spine"===e),{spark:"block",hidden:t&&"Animation"===e||"Particle"===e||"Live2d"===e,content:{spark:"number",label:"旋转角度",step:1,precision:0,index:"rotation",unit:"°"}}]}});var P=r(66615),j=r(3207),S=r(5391),C=r(22142),I=r(19104);let A=[{label:"默认",value:""}];var M=r(68373),_=r(26840),D=r(62732),R=r(22142);const N=(0,D.iv)({width:"100%",display:"flex",">*":{flex:"auto",textAlign:"center"}}),V=(e,t,r)=>({spark:"value",index:e,content(e=t,n){return{spark:"element",content(){return R.createElement(M.ZP.Group,{className:N,value:e,onChange:({target:{value:e}})=>{n(e)}},null==r?void 0:r.map((({value:e,label:t,tooltip:r},n)=>R.createElement(M.ZP.Button,{key:n,value:e},R.createElement(_.Z,{title:r},t)))))}}}}),B=(e,t)=>({spark:"element",content(){return R.createElement(M.ZP.Group,{className:N,value:"true"},null==t?void 0:t.map((({value:t,label:r,tooltip:n},o)=>R.createElement(M.ZP.Button,{key:o,value:t?"true":"false",onClick:()=>{e(o,!t)}},R.createElement(_.Z,{title:n},r)))))}});var Z=r(5319),T=r(58097),z=r(42926),L=r(7882),U=r(62967),F=r(98897),Y=r(55449),$=r(92030),Q=r(22142);const W=({type:e},{typeOfPlay:t})=>({spark:"group",label:"文本内容及样式",tooltip:4!==t&&"Button"===e?"转化目标为 APP 下载按钮时，按钮文案必须包含“下载”字样":"",content:{spark:"grid",content:[{spark:"block",status:"recommended",content:"Text"===e?{spark:"string",type:"area",index:"text",label:"文本",align:"top",max:600}:{spark:"string",index:"text",label:"文本"}},{spark:"check",check:{hidden:()=>!0},index:[],content:{spark:"block",status:"required",indices:["bitMap"],content:j.NULL_SPARK}},{spark:"block",hidden:4===t,content:{spark:"value",index:"font",content(e="",t){const r=(0,I.useProject)("id"),n=(0,I.useProject)("teamId"),[o,a]=(0,C.useState)(A),[i,l]=(0,C.useState)((()=>o.every((({value:t})=>t!==e))));return(0,C.useEffect)((()=>{(0,S.yu)(n,r).then((e=>{a((([t])=>A=[t,...e])),l(!1)}))}),[r]),{spark:"element",content:r=>r({spark:"select",label:"字体",tooltip:"艺术字体不支持动态修改",options:o,loading:i,value:e,onChange:t})}}}},{spark:"check",index:"font",check:{hidden:e=>!e},content:{spark:"string",type:"area",index:"fontSet",label:"字符集",required:!0,placeholder:"需要动态修改艺术字体的文本时，请提前输入可能被用到的文本，以方便对艺术字体进行自动裁剪"}},{spark:"block",cols:3,content:{spark:"number",index:"fontSize",label:"字号",precision:0,max:160,min:8,step:1}},{spark:"block",cols:3,content:{defaultValue:"black",spark:"color",index:"color",label:"颜色"}},{spark:"block",hidden:"Button"===e||4===t,cols:3,content:V("align","left",[{label:Q.createElement(Z.Z,null),tooltip:"左对齐",value:"left"},{label:Q.createElement(T.Z,null),tooltip:"水平居中对齐",value:"center"},{label:Q.createElement(z.Z,null),tooltip:"右对齐",value:"right"}])},{spark:"block",hidden:"Button"===e||4===t,cols:3,content:V("valign","top",[{label:Q.createElement(L.Z,null),tooltip:"顶对齐",value:"top"},{label:Q.createElement(U.Z,null),tooltip:"垂直居中对齐",value:"middle"},{label:Q.createElement(F.Z,null),tooltip:"底对齐",value:"bottom"}])},{spark:"block",cols:3,hidden:4===t,content:{spark:"value",index:["bold","italic"],content([e=!1,t=!1],r){return B(((n,o)=>{const a=[e,t];a[n]=o,r(a)}),[{label:Q.createElement(Y.Z,null),tooltip:"加粗",value:e},{label:Q.createElement($.Z,null),tooltip:"斜体",value:t}])}}},{spark:"block",hidden:"Button"===e||4===t,cols:3,content:{spark:"select",index:"overflow",label:"溢出方式",defaultValue:"visible",tooltip:"内容超出宽高限制的处理方式",options:[{label:"visible",value:"visible"},{label:"hidden",value:"hidden"},{label:"scroll",value:"scroll"}]}},{spark:"block",hidden:"Button"===e||4===t,cols:3,content:{spark:"number",index:"leading",label:"行间距",defaultValue:0,precision:0,max:160,min:0,step:1}},{spark:"block",hidden:"Button"===e||4===t,cols:3,content:{spark:"label",label:"自动换行",tooltip:"自动换行",content:{spark:"boolean",index:"wordWrap",defaultValue:!0}}},{spark:"block",hidden:"Button"===e||4===t,content:{spark:"label",label:"内边距",content:{spark:"value",index:"padding",content(e=[],t){return{spark:"grid",content:[["上",0],["下",2],["左",3],["右",1]].map((([r,n])=>({spark:"element",cols:3,content:o=>{var a;return o({spark:"number",label:r,value:null!=(a=e[n])?a:0,onChange(r,o){t(Array.from({length:4}).map(((t,o)=>{var a,i;return o===n?(0,j.callValue)(r,null!=(a=e[n])?a:0):null!=(i=e[o])?i:0})),o)}})}})))}}}}}]}}),J=()=>({spark:"group",label:"裁剪与滚动",content:{spark:"grid",content:[{spark:"check",index:"scrollable",check:{cols:(e=!1)=>e?2:3},content:{spark:"block",content:{spark:"label",label:"裁剪",reverse:!1,tooltip:"如果子对象超出容器设置的宽高，是否进行裁剪显示",content:{spark:"boolean",index:"clipable",defaultValue:!1}}}},{spark:"check",index:"scrollable",check:{cols:(e=!1)=>e?2:3},content:{spark:"block",indices:["scrollable","smooth"],content:{spark:"label",label:"可滚动",reverse:!1,tooltip:"如果子对象超出容器设置的宽高，是否可以滚动",content:{spark:"boolean",index:"scrollable",defaultValue:!1}}}},{spark:"check",index:"scrollable",check:{hidden:(e=!1)=>!e,cols:()=>2},content:{spark:"block",indices:["scrollable","smooth"],content:{spark:"label",label:"平滑滚动",reverse:!1,tooltip:"是否开启平滑滚动，需要先开启可滚动才有效",content:{spark:"boolean",index:"smooth",defaultValue:!0}}}}]}});var K=r(77769),H=r(41595),G=r(85593),q=r(95074),X=r(80866);const ee=({type:e},{typeOfPlay:t})=>({spark:"block",status:"required",hidden:4===t,content:{spark:"select",index:"fillType",label:`${(0,X.J)(e)}填充`,tooltip:`${(0,X.J)(e)}如何适应到宽高确定的内容框`,defaultValue:0,options:[{label:"拉伸填充",value:0},{label:"缩放显示",value:1},{label:"缩放填充",value:3},{label:"平铺填充",value:2}]}});var te=r(88551);const re=(e,{typeOfPlay:t})=>({spark:"block",hidden:4===t,status:"required",content:{spark:"slider",index:"volume",label:"音量",defaultValue:1,precision:0,ratio:100,unit:"%",step:.01,min:0,max:2}});var ne=r(48704),oe=r(73946);const ae=(e,t)=>({spark:"group",label:"素材名称与内容",extra:(0,te.I)(t.isRoot||4===t.typeOfPlay),content:{spark:"grid",content:ie(e,t)}}),ie=(e,t)=>{switch(e.type){case"Sprite":return[(0,ne.Y)(e,t),(0,P.kI)(e,t),ee(e,t)];case"PVAlphaVideo":case"AlphaVideo":case"VRVideo":case"Video":return[(0,ne.Y)(e,t),(0,P.kI)(e,t),re(0,t),ee(e,t)];case"Sound":return[(0,ne.Y)(e,t),(0,P.kI)(e,t),re(0,t)];case"Particle":return[(0,ne.Y)(e,t),(0,P.kI)(e,t),{spark:"block",status:"required",content:(0,H.v)({type:e.type})}];case"FrameAnime":case"PVDragger":case"PVButton":case"VRButton":case"Lottie":return[(0,ne.Y)(e,t),(0,P.kI)(e,t)];case"Animation":return[(0,ne.Y)(e,t),{spark:"check",index:"compProps",check:{hidden:(e=[])=>e.every((({type:e})=>e.startsWith("Script_")))},content:(0,P.kI)(e,t)}];case"Button":return[(0,ne.Y)(e,t),{spark:"check",index:"url",check:{hidden:e=>!e},content:(0,P.kI)(e,t)}];case"Scene3D":return[(0,ne.Y)(e,t),{spark:"grid",content:[{spark:"select",label:"环境模式",index:"ambientMode",defaultValue:1,options:[{label:"颜色",value:0},{label:"天空盒",value:1}]},{spark:"check",index:"ambientMode",check:{hidden:e=>1===e},content:(0,oe.I)({spark:"color",index:"ambientColor",label:"环境光颜色",defaultValue:[54,58,66]})},{spark:"check",index:"ambientMode",check:{hidden:e=>0===e},content:{spark:"label",label:"强度",content:{spark:"slider",index:"ambientSphericalHarmonicsIntensity",defaultValue:1,min:0,max:8,step:.03,precision:2,inputNumber:!0}}}]}];case"Light":case"Camera":case"Model":case"Sprite3D":case"Particle3D":case"ParticleSystem3D":case"MeshSprite3D":case"SkinnedMeshSprite3D":return[(0,ne.Y)(e,t),(0,G.t)(t.isRoot),(0,q.P)(t.isRoot)];case"PanoramaSpace":case"Trail3D":return[(0,ne.Y)(e,t),(0,q.P)(t.isRoot)];case"PanoramaHotSpot":return[(0,ne.Y)(e,t),(0,K.panoramaHotSpotVectorContent)(e,t)];case"Animation3D":return[(0,ne.Y)(e,t),(0,G.t)(t.isRoot),(0,q.P)(t.isRoot),{spark:"check",index:"compProps",check:{hidden:(e=[])=>!e.length},content:(0,P.kI)(e,t)}];default:return[(0,ne.Y)(e,t)]}};var le=r(5635),ce=r(22142);const se=({values:e,onChange:t})=>{const{token:r}=le.Z.useToken();return ce.createElement("div",{className:(0,D.iv)({border:`1px solid ${r.colorBorderSecondary}`,flexDirection:"column",display:"flex",height:80,width:80})},ce.createElement("div",{className:(0,D.cx)(pe,ue)},ce.createElement(fe,{vertical:!0,checked:e[0],onChecked:e=>t(0,e)})),ce.createElement("div",{style:{alignItems:"stretch"},className:(0,D.cx)(pe,de)},ce.createElement("div",{className:(0,D.cx)(pe,ue)},ce.createElement(fe,{checked:e[3],onChecked:e=>t(3,e)})),ce.createElement("div",{className:(0,D.cx)(pe,de,(0,D.iv)({border:"1px solid black",position:"relative",">div":{position:"absolute"}}))},ce.createElement(fe,{checked:e[4],onChecked:e=>t(4,e)}),ce.createElement(fe,{vertical:!0,checked:e[1],onChecked:e=>t(1,e)})),ce.createElement("div",{className:(0,D.cx)(pe,ue)},ce.createElement(fe,{checked:e[5],onChecked:e=>t(5,e)}))),ce.createElement("div",{className:(0,D.cx)(pe,ue)},ce.createElement(fe,{vertical:!0,checked:e[2],onChecked:e=>t(2,e)})))},pe=(0,D.iv)({display:"flex",alignItems:"center",justifyContent:"center"}),ue=(0,D.iv)({flex:"1 1 0px"}),de=(0,D.iv)({flex:"2 2 0px"}),fe=({checked:e,vertical:t,onChecked:r})=>{const{token:n}=le.Z.useToken();return ce.createElement("div",{className:(0,D.cx)((0,D.iv)({padding:"4px 3px",":hover":{background:n.colorPrimaryBg}}),t&&(0,D.iv)({transform:"rotate(90deg)"})),onClick:()=>{r(!e)}},ce.createElement("div",{className:(0,D.cx)((0,D.iv)({width:12,height:1,background:n.colorText}),e&&(0,D.iv)({height:3,background:n.colorPrimary}))}))};var me=r(22142);const ye=(e,t)=>({spark:"element",content(){return me.createElement(se,{values:e,onChange:(r,n)=>{const o=e.slice();switch(o[r]=n,r){case 0:case 2:o[1]=!1;break;case 1:o[0]=!1,o[2]=!1;break;case 3:case 5:o[4]=!1;break;case 4:o[3]=!1,o[5]=!1}t(o)}})}}),be=(e,t,r)=>({spark:"value",index:t,content(t,n){return{spark:"element",content:o=>o({spark:"select",label:e,options:r,value:t.reduce(((e,t,r)=>t?e|1<<r:e),0),onChange(e){n(t.map(((t,r)=>Boolean(e&1<<r))))}})}}});var he=r(72299),ge=r(22142);const ve=({type:e},{scaleMode:t})=>({spark:"group",label:ge.createElement("div",null,ge.createElement("span",null,"布局适配"),ge.createElement(_.Z,{arrowPointAtCenter:!0,placement:"bottomRight",title:"使用教程"},ge.createElement(he.Z,{style:{marginLeft:"4px"},onClick:e=>{e.stopPropagation(),window.open("https://magicplay.oceanengine.com/tutorials/primary/ten")}}))),hidden:"Sound"===e||0!==t,content:{spark:"grid",content:[{spark:"block",content:{spark:"flex",content:[{spark:"value",basis:"auto",index:["top","middle","bottom","left","center","right"],content:ye},{spark:"grid",content:[be("水平位置",["left","center","right"],[{label:"无适配",value:0},{label:"左端对齐",value:1},{label:"右端对齐",value:4},{label:"左右对齐",value:5},{label:"水平居中",value:2}]),be("垂直位置",["top","middle","bottom"],[{label:"无适配",value:0},{label:"顶部对齐",value:1},{label:"底部对齐",value:4},{label:"上下对齐",value:5},{label:"垂直居中",value:2}])]}]}},{spark:"block",content:{spark:"label",label:"启用百分比适配",content:{spark:"boolean",index:"layoutByPercent",defaultValue:!1}}}]}});var Oe,ke=["title","titleId"];function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xe.apply(this,arguments)}var Ee,we=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ke);return C.createElement("svg",xe({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},o),r?C.createElement("title",{id:n},r):null,Oe||(Oe=C.createElement("path",{d:"M20 2.22222H11.1111C6.2 2.22222 2.22222 6.2 2.22222 11.1111V20H0V11.1111C0 4.97556 4.97556 0 11.1111 0H20V2.22222Z",fill:"currentColor"})))},Pe=(0,C.forwardRef)(we),je=(r.p,["title","titleId"]);function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Se.apply(this,arguments)}var Ce,Ie=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,je);return C.createElement("svg",Se({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},o),r?C.createElement("title",{id:n},r):null,Ee||(Ee=C.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 8.75C0 14.9625 5.0375 20 11.25 20H20V17.5H11.25C6.4175 17.5 2.5 13.5825 2.5 8.75V0H0V8.75Z",fill:"currentColor"})))},Ae=(0,C.forwardRef)(Ie),Me=(r.p,["title","titleId"]);function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_e.apply(this,arguments)}var De,Re=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Me);return C.createElement("svg",_e({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},o),r?C.createElement("title",{id:n},r):null,Ce||(Ce=C.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 8.75C20 14.9625 14.9625 20 8.75 20H0V17.5H8.75C13.5825 17.5 17.5 13.5825 17.5 8.75V0H20V8.75Z",fill:"currentColor"})))},Ne=(0,C.forwardRef)(Re),Ve=(r.p,["title","titleId"]);function Be(){return Be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Be.apply(this,arguments)}var Ze=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Ve);return C.createElement("svg",Be({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},o),r?C.createElement("title",{id:n},r):null,De||(De=C.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 11.25C20 5.0375 14.9625 0 8.75 0H0V2.5H8.75C13.5825 2.5 17.5 6.4175 17.5 11.25V20H20V11.25Z",fill:"currentColor"})))},Te=(0,C.forwardRef)(Ze),ze=(r.p,r(33058)),Le=r(22142);const Ue=()=>({spark:"group",label:"边框描边",content:{spark:"grid",content:[{spark:"check",index:"url",check:{hidden:e=>""!==e,cols:()=>3},content:{spark:"block",content:{spark:"color",index:"borderColor",label:"描边颜色",defaultValue:"white"}}},{spark:"check",index:"url",check:{hidden:e=>""!==e,cols:()=>3},content:{spark:"block",content:{spark:"number",index:"borderWidth",label:"描边宽度",defaultValue:0,min:0}}},{spark:"block",content:{spark:"value",index:["leftTopRounded","rightTopRounded","leftBottomRounded","rightBottomRounded"],content(e,t){const r=e.reduce(((e,t)=>null!=t?t:e),0);return{spark:"grid",content:[B(((n,o)=>{t(0===n?e.map((()=>o?r:void 0)):e.map(((e,t)=>t+1===n?o?r:void 0:e)))}),[{label:"全部",value:e.every((e=>void 0!==e)),tooltip:"全部"},{label:Le.createElement(ze.Z,{component:Pe}),value:void 0!==e[0],tooltip:"左上圆角"},{label:Le.createElement(ze.Z,{component:Te}),value:void 0!==e[1],tooltip:"右上圆角"},{label:Le.createElement(ze.Z,{component:Ae}),value:void 0!==e[2],tooltip:"左下圆角"},{label:Le.createElement(ze.Z,{component:Ne}),value:void 0!==e[3],tooltip:"右下圆角"}]),{spark:"element",hidden:e.every((e=>void 0===e)),content:n=>n({spark:"slider",label:"圆角",value:r,precision:0,max:100,step:1,min:0,onChange(n){t(e.map((e=>void 0===e?e:(0,j.callValue)(n,r))))}})}]}}}}]}}),Fe=()=>({spark:"group",label:"文字描边",content:{spark:"flex",content:[{spark:"block",content:{spark:"number",index:"stroke",label:"描边宽度",defaultValue:0,tooltip:"描边宽度",min:0,max:160}},{spark:"block",content:{spark:"color",index:"strokeColor",label:"描边颜色",defaultValue:"black",tooltip:"描边颜色"}}]}}),Ye=({type:e},{typeOfPlay:t})=>4===t?{spark:"group",label:"其他",content:{spark:"grid",content:[{index:"alpha",spark:"slider",label:"透明度",defaultValue:1,tooltip:"透明度",ratio:100,precision:0,step:.01,unit:"%",min:0,max:1,inputNumber:!0,hidden:"PVClickArea"===e},{spark:"flex",content:[{spark:"block",content:{index:"scaleX",spark:"number",label:"水平缩放",defaultValue:1,ratio:100,step:.01,unit:"%",precision:0,tooltip:"水平缩放的倍数"}},{spark:"block",content:{index:"scaleY",spark:"number",label:"垂直缩放",ratio:100,defaultValue:1,unit:"%",step:.01,precision:0,tooltip:"垂直缩放的倍数"}}]}]}}:{spark:"group",label:"其他",hidden:"Button"===e,content:{spark:"grid",content:[{spark:"block",hidden:"Particle"===e,content:{spark:"flex",content:[{index:"anchorX",spark:"number",label:"锚点 X",defaultValue:.5,unit:"%",ratio:100,tooltip:"锚点X，会影响旋转缩放的中心",step:.01,precision:0,min:-10,max:10},{index:"anchorY",spark:"number",label:"锚点 Y",unit:"%",ratio:100,defaultValue:.5,tooltip:"锚点Y，会影响旋转缩放的中心",precision:0,step:.01,min:-10,max:10}]}},{spark:"flex",content:[{spark:"block",content:{index:"scaleX",spark:"number",label:"水平缩放",defaultValue:1,ratio:100,step:.01,unit:"%",precision:0,tooltip:"水平缩放的倍数"}},{spark:"block",content:{index:"scaleY",spark:"number",label:"垂直缩放",ratio:100,defaultValue:1,unit:"%",step:.01,precision:0,tooltip:"垂直缩放的倍数"}}]},{spark:"block",cols:3,hidden:"Particle"===e,content:{spark:"label",label:"可见",tooltip:"运行时是否可见，设置为false，则看不到此元素",content:{spark:"boolean",index:"visible",defaultValue:!0}}},{spark:"block",cols:3,hidden:"Spine"!==e,content:{spark:"label",label:"预乘alpha",tooltip:"是否开启预乘alpha",content:{spark:"boolean",index:"premultipliedAlpha",defaultValue:!0}}},{spark:"block",cols:3,hidden:"Particle"===e,content:{index:"data",spark:"number",label:"自定数据",defaultValue:0,tooltip:"用户自定义数据，可以记录一些额外的值",precision:0}}]}};var $e=Object.defineProperty,Qe=Object.defineProperties,We=Object.getOwnPropertyDescriptors,Je=Object.getOwnPropertySymbols,Ke=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable,Ge=(e,t,r)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const qe=({type:e})=>({spark:"group",label:"图层",hidden:"Sound"===e||"Button"===e||"Particle"===e,content:{spark:"grid",content:[{spark:"block",hidden:"Button"===e,content:{spark:"select",index:"blendMode",label:"混合模式",tooltip:"混合模式",defaultValue:"normal",options:[{label:"正常模式",value:"normal"},{label:"正片叠底",value:"multiply"},{label:"滤色",value:"screen"},{label:"叠加",value:"overlay"},{label:"增加",value:"add"},{label:"反向遮罩",value:"destination-out"}]}},{spark:"block",hidden:"Live2d"===e,content:{index:"alpha",spark:"slider",label:"透明度",defaultValue:1,tooltip:"透明度",ratio:100,precision:0,step:.01,unit:"%",min:0,max:1,inputNumber:!0}},{spark:"grid",hidden:"Sprite"!==e,content:[{spark:"block",content:(0,oe.I)({spark:"color",index:"color",label:"滤镜颜色",defaultValue:"#fff"})},Xe({spark:"slider",index:"brightness",label:"亮度",min:-100,max:100,defaultValue:0}),Xe({spark:"slider",index:"contrast",label:"对比度",min:-100,max:100,defaultValue:0}),Xe({spark:"slider",index:"saturation",label:"饱和度",min:-100,max:100,defaultValue:0}),Xe({spark:"slider",index:"hue",label:"色调",min:-180,max:180,defaultValue:0}),Xe({spark:"slider",index:"blur",label:"模糊滤镜",min:0,max:10,defaultValue:0})]}]}}),Xe=e=>{var t=e,{index:r,hidden:n}=t,o=((e,t)=>{var r={};for(var n in e)Ke.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Je)for(var n of Je(e))t.indexOf(n)<0&&He.call(e,n)&&(r[n]=e[n]);return r})(t,["index","hidden"]);return{spark:"block",indices:[r],content:{spark:"value",hidden:n,index:[r,"color"],content([e],t){return{spark:"element",content:r=>{return r((n=((e,t)=>{for(var r in t||(t={}))Ke.call(t,r)&&Ge(e,r,t[r]);if(Je)for(var r of Je(t))He.call(t,r)&&Ge(e,r,t[r]);return e})({},o),Qe(n,We({value:e,onChange(e,r){t([e,void 0],r)}}))));var n}}}}}};var et=r(57772),tt=r(40304);const rt=()=>({spark:"group",label:"填充",content:(0,tt.C)({index:"fillColor",label:"填充",defaultValue:"#2860ed"})}),nt=()=>({spark:"group",label:"图形描边",content:{spark:"grid",content:[(0,tt.C)({index:"lineColor",label:"描边",defaultValue:"#ffffff"}),{spark:"check",index:"shapeType",check:{cols:e=>"rectangle"===e?3:6},content:{spark:"block",cols:3,content:{spark:"number",index:"lineWidth",label:"描边宽度",defaultValue:0,tooltip:"描边宽度",min:0}}},{spark:"check",index:"shapeType",check:{hidden:e=>"rectangle"!==e,cols:()=>3},content:{spark:"block",cols:3,indices:["shapeType","roundedSize"],content:{index:"roundedSize",spark:"number",label:"圆角",defaultValue:0,tooltip:"圆角",min:0}}}]}});var ot=r(22142);const at=()=>({spark:"group",label:"时间控制点设置",content:{spark:"grid",content:[{spark:"string",index:"section",label:"section",placeholder:"请输入section名称"},{spark:"value",index:"steps",content(e=[],t){return{spark:"element",content(){var r;return ot.createElement(j.ArrayCell,{label:"控制点",array:e,defaultExpanded:!0,sortable:!1,onChange:t,defaultItem:null!=(r=e[e.length-1])?r:{action:"down",time:0},render:(t,r,n)=>{const{action:o,time:a}=null!=t?t:{};return(0,j.default)({spark:"flex",content:[{spark:"element",content:e=>e({spark:"select",value:o,label:"动作",width:40,options:[{label:"下沉视频",value:"down"},{label:"上浮视频",value:"up"},{label:"高亮按钮",value:"button_highlight"}],onChange(e,t){r({action:e,time:a},t)}})},{spark:"element",content:t=>{var i,l,c;return t({spark:"number",value:a,label:"时间",unit:"s",ratio:-1e3,width:40,step:100,min:null!=(l=null==(i=e[n-1])?void 0:i.time)?l:0,max:null==(c=e[n+1])?void 0:c.time,precision:1,onChange(e,t){r({action:o,time:(0,j.callValue)(e,a)},t)}})}}]})}})}}}}]}})},36263:function(e,t,r){"use strict";r.d(t,{O:function(){return L},Z:function(){return U}});var n=r(22142),o=r(9624),a=r(61754),i=r(32078),l=r(26840),c=r(70072),s=r(63150),p=r(60648),u=r(12570),d=r(86694),f=r(440),m=r(73775),y=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())})),b=({cropResource:e,onCancel:t,onConfirm:r})=>{const b=(0,n.useRef)(null),[h,g]=(0,n.useState)(e.url),[v,O]=(0,n.useState)(!1),[k,x]=(0,n.useState)(.8),E=e.url.includes(".png")?"png":"jpeg";return n.createElement(i.Z,{className:"upload_cropper_modal",open:!0,width:820,onCancel:t,bodyStyle:{padding:"0 20px 10px 20px"},title:"请选择剪裁区域",footer:[n.createElement("div",{style:{width:"100%",height:"20px",margin:"5px 0",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"13px"}},n.createElement("div",null,"操作：",n.createElement(l.Z,{placement:"bottom",title:"放大"},n.createElement(c.Z,{icon:n.createElement(s.Z,null),type:"text",onClick:()=>{const e=null==b?void 0:b.current;(null==e?void 0:e.cropper).zoom(.1)}})),n.createElement(l.Z,{placement:"bottom",title:"缩小"},n.createElement(c.Z,{icon:n.createElement(p.Z,null),type:"text",onClick:()=>{const e=null==b?void 0:b.current;(null==e?void 0:e.cropper).zoom(-.1)}})),n.createElement(l.Z,{placement:"bottom",title:"向左旋转"},n.createElement(c.Z,{icon:n.createElement(u.Z,null),type:"text",onClick:()=>{const e=null==b?void 0:b.current;(null==e?void 0:e.cropper).rotate(-90)}})),n.createElement(l.Z,{placement:"bottom",title:"向右旋转"},n.createElement(c.Z,{icon:n.createElement(d.Z,null),type:"text",onClick:()=>{const e=null==b?void 0:b.current;(null==e?void 0:e.cropper).rotate(90)}})),n.createElement(l.Z,{placement:"bottom",title:"确定"},n.createElement(c.Z,{icon:n.createElement(f.Z,null),type:"text",onClick:()=>{const e=null==b?void 0:b.current,t=(null==e?void 0:e.cropper).getCroppedCanvas();t.width<1||t.height<1?a.ZP.error("裁剪区域图片尺寸小于1*1，无法裁剪"):g(t.toDataURL())}})),n.createElement(l.Z,{placement:"bottom",title:"重置"},n.createElement(c.Z,{icon:n.createElement(m.Z,null),type:"text",onClick:()=>{const t=null==b?void 0:b.current;(null==t?void 0:t.cropper).reset(),g(e.url)}}))),n.createElement("div",null,"压缩质量：",n.createElement(c.Z,{type:.8===k?"link":"text",onClick:()=>{const e=null==b?void 0:b.current,t=null==e?void 0:e.cropper;x(.8),g(t.getCroppedCanvas().toDataURL(.8))}},"高"),n.createElement(c.Z,{type:.6===k?"link":"text",onClick:()=>{const e=null==b?void 0:b.current,t=null==e?void 0:e.cropper;x(.6),g(t.getCroppedCanvas().toDataURL(.6))}},"中"),n.createElement(c.Z,{type:.4===k?"link":"text",onClick:()=>{const e=null==b?void 0:b.current,t=null==e?void 0:e.cropper;x(.4),g(t.getCroppedCanvas().toDataURL(.4))}},"低")),n.createElement(c.Z,{type:"primary",loading:v,onClick:()=>y(void 0,null,(function*(){var e;const t=null==b?void 0:b.current,n=null==t?void 0:t.cropper;O(!0),n.disable(),null==(e=n.getCroppedCanvas({minWidth:0,minHeight:0}))||e.toBlob((e=>y(this,null,(function*(){e?yield r(e,E):a.ZP.error("裁剪区域图片尺寸小于1*1，无法裁剪"),O(!1),n.enable()}))),`image/${E}`,k)}))},"确定"))]},n.createElement(o.Z,{cropperRef:b,src:h,viewMode:1}))},h=r(72704),g=r(9904),v=r(64256),O=r(9329),k=r(81701),x=r(42809),E=r(47151),w=r(20630),P=r(76193),j=r(33058),S=r(92181),C=r(78296),I=r(50509),A=r(19104),M=r(73073),_=r(42761),D=r(7910),R=r(62732),N=r(22142),V=(e,t,r,n=!1,o=!1)=>n?N.createElement(l.Z,{title:e},N.createElement(c.Z,{size:"small",type:"link",className:(0,R.cx)(B,(0,R.iv)({width:"auto !important"}),o&&(0,R.iv)({marginLeft:"auto"})),icon:N.createElement(j.Z,{component:t}),onClick:e=>{e.stopPropagation(),null==r||r()}})):N.createElement(c.Z,{size:"small",type:"link",className:(0,R.cx)(B,o&&(0,R.iv)({marginLeft:"auto"})),icon:N.createElement(j.Z,{component:t}),onClick:e=>{e.stopPropagation(),null==r||r()}},e);const B=(0,R.iv)({padding:"0!important",fontSize:"12px!important",display:"flex",alignItems:"center","&.ant-btn > .anticon + span":{marginLeft:4}});var Z=r(98466),T=r(22142),z=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const L=(0,S.Z)({selector:"#editor-property"});var U=({url:e,type:t,name:r,cover:o,extra:c,plain:s,visitable:p,deletable:u,baseType:d=t,hoverable:f,onAction:m,onChange:y,onReplaceAll:S})=>{const{dispatch:N}=(0,_.oR)(),[B,U]=(0,n.useState)(0),[F,Y]=(0,n.useState)(!1),[$,Q]=(0,n.useState)(!1),W=(0,A.useProject)("id"),J=["Sprite"===t&&V("裁剪",E.Z,(()=>Y(!0))),"Sprite"===t&&V("下载",w.Z,(()=>{const t=new URL((0,D.GR)(e));t.searchParams.append("forceDownload","true"),window.location.href=t.href})),["Video","NativeVideo","PVAlphaVideo","AlphaVideo","NativeLoadingVideo"].includes(t)&&V("播放",P.Z,(()=>Q(!0))),"Sprite"===d&&"number"==typeof(null==c?void 0:c.width)&&"number"==typeof(null==c?void 0:c.height)&&f&&V("重置尺寸",E.Z,(()=>{const t=new Image;t.onload=()=>{const{width:n,height:o}=t;y({url:e,name:r,extra:{width:n,height:o}})},t.src=(0,D.GR)(e)})),u&&V("删除",h.Z,(()=>y({url:"",name:void 0,cover:void 0})),s),S&&e&&V(T.createElement(T.Fragment,null,"替换所有"," ",T.createElement(l.Z,{title:"一键替换所有相同的URL为新URL"},T.createElement(j.Z,{component:g.Z}))),h.Z,(()=>U(2)),s)].filter((t=>t&&e)),K=p?void 0:J.shift();return T.createElement("div",{className:(0,R.iv)({display:"flex",columnGap:8})},e?V("替换",v.Z,(()=>U(1)),s):V("上传",O.Z,(()=>U(1)),s),K,1===J.length?J[0]:J.length>0?"Sound"===t?J.map(((e,t)=>T.createElement(n.Fragment,{key:t},e))):T.createElement(C.Z,{overlay:T.createElement(I.Z,null,J.map(((e,t)=>T.createElement(I.Z.Item,{key:t},e))))},V("更多",k.Z)):null,p&&V("设置",x.Z,(()=>null==m?void 0:m("visit")),s,!0),B>0&&T.createElement(L,{eleType:t,onChange:e=>z(void 0,[e],(function*({url:e,cover:r,name:n,extra:o={},orderId:a}){const i=[y,S][B-1];if("Sprite"===t&&"string"==typeof e){const t=new Image;t.onload=function(){const{width:a,height:l}=t,{size:c}=o;i({url:e,name:n,cover:r,size:c,originWidth:a,originHeight:l})},t.src=(0,D.GR)(e)}else if("Video"===t&&"string"==typeof e)try{const t=document.createElement("video");t.preload="auto",t.crossOrigin="anonymous",yield new Promise((r=>{const n=()=>{t.removeEventListener("canplay",n),r()};t.addEventListener("canplay",n),t.src=(0,D.GR)(e)}));const r=document.createElement("canvas");r.width=t.videoWidth,r.height=t.videoHeight,r.getContext("2d").drawImage(t,0,0,t.videoWidth,t.videoHeight);const l=yield new Promise((e=>{r.toBlob((t=>{e(t)}),"image/jpeg",.3)})),{downloadUrl:c}=yield(0,Z.cT)(l);if(c){const{size:t}=o;i({url:e,name:n,cover:c,size:t,orderId:a,poster:(0,D.Hn)(c)})}}catch(t){i({url:e,name:n,cover:r,size:o.size,orderId:a})}else{const{size:t}=o;i({url:e,name:n,cover:r,size:t,orderId:a})}U(0)})),onClose:()=>{U(0)}}),F&&T.createElement(b,{cropResource:{name:r,url:(0,D.GR)(e)},onCancel:()=>Y(!1),onConfirm:(e,t)=>z(void 0,null,(function*(){const n=new File([e],`${r}.${t}`,{type:`image/${t}`});N((0,A.changeEditor)(0,{loading:!0}));try{const t=yield(0,M.Kf)([n],{projectId:W});t&&(yield t().then((([{url:t}])=>new Promise((n=>{const a=new Image;a.onload=function(){y({url:(0,D.Hn)(t),name:r,cover:o,size:e.size,originWidth:a.width,originHeight:a.height}),n(a)},a.src=t})))).catch((()=>{a.ZP.error("图片上传失败！")})))}finally{N((0,A.changeEditor)(0,{loading:!1})),Y(!1)}}))}),$&&T.createElement(i.Z,{open:!0,destroyOnClose:!0,footer:null,width:375,title:"视频素材播放",onCancel:()=>{Q(!1)},bodyStyle:{padding:0,margin:0,height:667,width:375}},T.createElement("video",{autoPlay:!0,src:(0,D.GR)(e),width:375,height:667,controls:!0,style:{objectFit:"contain"}})))}},12587:function(e,t,r){"use strict";r.d(t,{Y:function(){return u}});var n=r(7910),o=r(75919),a=r(92187),i=r(5635),l=r(70072),c=r(62732),s=r(22142);const p=(0,c.iv)({background:'url("data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAYEBAQFBAYFBQYJBgUGCQsIBgYICwwKCgsKCgwQDAwMDAwMEAwODxAPDgwTExQUExMcGxsbHB8fHx8fHx8fHx8BBwcHDQwNGBAQGBoVERUaHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fH//AABEIABgAGAMBEQACEQEDEQH/xABaAAEBAQAAAAAAAAAAAAAAAAAEAAgQAAEACQUAAAAAAAAAAAAAAAAFERVDY4KiweESEzRRkQEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A1SAJJO5rACAa0odWALmw9uZerzoCZsSnIAgGo15LcBoH/9k=") 0px 0px / 12px 12px repeat',objectFit:"contain",height:"100%",width:"100%"}),u=({type:e,url:t,size:r=100,playable:u,invalid:d,extra:f,onAction:m})=>{const{token:y}=i.Z.useToken(),b=(0,c.iv)({width:r,flex:`0 0 ${r}px`,height:r,fontSize:r/2,borderRadius:4}),{ref:h,display:g}=(0,a.RA)(t);return s.createElement("div",{className:(0,c.cx)(b,(0,c.iv)({display:"flex",justifyContent:"center",alignItems:"center",position:"relative",color:"#999"}),d&&(0,c.iv)({background:"#ffccc7",color:y.colorErrorText}))},(()=>{if(t)switch(e){case"NativeLoadingVideo":case"PVAlphaVideo":case"AlphaVideo":case"NativeVideo":case"Video":return s.createElement("div",{className:(0,c.iv)({height:"100%",width:"100%",position:"relative"})},s.createElement("video",{key:t,ref:h,crossOrigin:"anonymous",src:(0,n.GR)(t),className:p}),s.createElement("div",{className:(0,c.iv)({position:"absolute",top:0,right:0,fontSize:12,color:"white",background:"rgba(0, 0, 0, 0.62)",padding:"2px 4px",borderRadius:"0 0 0 4px"})},g));default:return s.createElement("img",{crossOrigin:"anonymous",src:(0,n.GR)(t),className:p})}return s.createElement(o.Z,{type:e})})(),u?s.createElement("div",{className:(0,c.iv)({position:"absolute",top:0,right:0,display:"flex",borderRadius:4,alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.3)",transition:"200ms",height:"100%",width:"100%",opacity:0,"&:hover":{opacity:1}})},s.createElement(l.Z,{size:"small",type:"primary",onClick:()=>null==m?void 0:m("play")},r<100?"预览":"在画板中预览")):f)}},53983:function(e,t,r){"use strict";r.d(t,{r:function(){return ae}});var n=r(80866),o=r(40985),a=r(75919),i=r(27885),l=r(2119),c=r(3207),s=r(22142);function p(e,t=e){if(t===e)switch(e){case"FrameAnime":return s.createElement(s.Fragment,null,(0,n.J)(e),s.createElement(c.TooltipHelp,{title:"序列帧是一种动画格式，其动画由一帧一帧的图片依次播放而成的"}));case"DragonBones":case"Spine":return s.createElement(s.Fragment,null,(0,n.J)(e),s.createElement(c.TooltipHelp,{title:`${(0,n.J)(e)}是一种常用的骨骼动画`}));case"Particle":return s.createElement(s.Fragment,null,(0,n.J)(e),s.createElement(c.TooltipHelp,{title:"粒子系统是一种动画，具体来说比如暴风雪、水流、爆炸、烟雾等"}));case"Live2d":return s.createElement(s.Fragment,null,(0,n.J)(e),s.createElement(c.TooltipHelp,{title:"Live2D是一种通过一系列的连续图像和人物建模来生成一种类似三维模型的二维图像的绘图渲染技术"}));case"Lottie":return s.createElement(s.Fragment,null,(0,n.J)(e),s.createElement(c.TooltipHelp,{title:"Lottie动画是一种动画格式，通过After Effects软件可以导出Lottie动画，然后上传到编辑器内使用"}));default:return(0,n.J)(e)}return`${(0,n.J)(t)}${p(e)}`}var u=r(36263),d=r(70072),f=r(80926),m=r(22142),y=r(62732),b=r(22142);const h=(0,y.iv)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),g=({type:e,label:t,name:r,url:n,required:o,baseType:c,deletable:s,onChange:g})=>{const[v,O]=(0,m.useState)(!1);return b.createElement("div",null,b.createElement(d.Z,{block:!0,className:(0,y.iv)({display:"flex",padding:"0 8px",borderRadius:4,alignItems:"center",textAlign:"left"}),onClick:()=>O(!v),danger:o&&!n},b.createElement(f.Z.Text,{type:"secondary",style:{flex:"0 0 80px",overflow:"hidden"}},b.createElement(a.Z,{type:e})," ",t||p(e,c)),n?b.createElement(f.Z.Text,{className:h,style:{flex:"auto"}},r):b.createElement(f.Z.Text,{className:h,style:{flex:"auto"},type:"secondary"},"请选择",r),n&&s?b.createElement(i.Z,{style:{flex:"none",marginTop:2},onClick:e=>{e.stopPropagation(),g({})}}):b.createElement(l.Z,{style:{flex:"none",marginTop:2}})),v&&b.createElement(u.O,{eleType:e,onChange:({url:e,cover:t,name:r})=>{g({url:e,name:r,cover:t}),O(!1)},onClose:()=>{O(!1)}}))};var v=r(71076),O=r(88163),k=r(97287),x=r(33058),E=r(7910),w=r(12587),P=r(34450),j=r.n(P),S=r(22142),C=Object.defineProperty,I=Object.defineProperties,A=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,R=(e,t,r)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,N=(e,t)=>{for(var r in t||(t={}))_.call(t,r)&&R(e,r,t[r]);if(M)for(var r of M(t))D.call(t,r)&&R(e,r,t[r]);return e},V=(e,t)=>I(e,A(t));const B=(0,y.iv)({transition:"200ms",borderRadius:4,":hover":{boxShadow:"0 0 0 2px rgb(57 85 246 / 20%)"}}),Z=(0,y.iv)({animation:`${y.F4`
  from {
    background: transparent;
    box-shadow: none;
  }
  50% {
    background: rgb(238, 243, 254);
    box-shadow: 0 0 0 2px rgb(57 85 246 / 20%);
  }
  to {
    background: transparent;
    box-shadow: none;
  }
`} 1s`}),T=e=>S.createElement(O.Z,V(N({},e),{theme:"filled",size:"32",fill:"#333"})),z=e=>S.createElement(k.Z,V(N({},e),{theme:"filled",size:"32",fill:"#333"})),L=({url:e,name:t,type:r,extra:n,required:o,baseType:a=r,deletable:i=!1,visitable:l=!1,hoverable:c=!0,playable:s=!c,domRef:p,onAction:m,onChange:b,onReplaceAll:h})=>{const{ref:g,duration:O,current:k,playing:P,setCurrent:C,setPlaying:I,onTimeUpdate:A,onLoadedMetadata:M}=U(!e);return S.createElement("div",{ref:p,className:(0,y.cx)(c&&B,p&&Z,(0,y.iv)({border:"1px solid #f0f0f0",alignItems:"center",display:"flex",height:64}),o&&!e&&(0,y.iv)({border:"1px solid #f65656"}))},S.createElement(w.Y,{size:62,type:"Sound",playable:s,onAction:m,extra:e&&S.createElement(d.Z,{size:"large",type:"text",className:(0,y.iv)({position:"absolute",opacity:.62,background:"none"}),icon:S.createElement(x.Z,{component:P?T:z}),onClick:()=>I((e=>!e))})}),S.createElement("div",{className:(0,y.iv)({flex:"auto",padding:"6px 8px",borderLeft:"1px solid #f0f0f0",justifyContent:"space-between",flexDirection:"column",display:"flex"})},S.createElement("div",{className:(0,y.iv)({display:"flex",justifyContent:"space-between",overflow:"hidden"})},S.createElement("div",null,t||(e?"(未命名)":"请上传资源")),S.createElement(u.Z,{plain:!0,url:e,name:t,type:r,extra:n,baseType:a,deletable:i,visitable:l,hoverable:c,onAction:m,onChange:b,onReplaceAll:h})),S.createElement("div",{style:{display:"flex",alignItems:"center"}},S.createElement(v.Z,{value:Math.floor(k/(O||1)*1e3),max:1e3,step:1,min:0,style:{flex:"auto",margin:"0 8px",width:"auto"},onChange:e=>{C(e*O/1e3)},tooltip:{formatter:()=>j()(1e3*k).format("mm:ss.SSS").slice(0,-1)}}),S.createElement(f.Z.Text,{type:"secondary"},j()(1e3*O).format("mm:ss.SSS").slice(0,-1))),e&&S.createElement("audio",{src:(0,E.GR)(e),ref:g,preload:"metadata",onLoadedMetadata:M,onTimeUpdate:A})))},U=e=>{const[t,r]=(0,m.useState)(!1),[n,o]=(0,m.useState)(0),[a,i]=(0,m.useState)(0),l=(0,m.useRef)(null);return(0,m.useEffect)((()=>{e&&(r(!1),i(0),o(0))}),[e]),(0,m.useEffect)((()=>{l.current&&(t?l.current.play():l.current.pause())}),[t]),(0,m.useEffect)((()=>{l.current&&!t&&(l.current.currentTime=n)}),[n]),{ref:l,current:n,playing:t,duration:a,setPlaying:r,onTimeUpdate:e=>{const t=e.currentTarget.currentTime;t<a?o(t):(o(a),r(!1))},onLoadedMetadata:e=>{i(e.currentTarget.duration)},setCurrent:(0,m.useCallback)((e=>{o(e),r(!1)}),[])}};var F=r(22142);const Y=({url:e,type:t,name:r,tips:n,cover:o,extra:a,required:i,baseType:l=t,deletable:c=!1,visitable:s=!1,hoverable:d=!0,playable:m=!d,domRef:b,onAction:h,onChange:g,onReplaceAll:v})=>{const O=["Sprite","Video","NativeVideo","PVAlphaVideo","AlphaVideo","NativeLoadingVideo","Texture2D"].includes(t)&&"string"==typeof e?e:o;return F.createElement("div",{ref:b,className:(0,y.cx)((0,y.iv)({alignItems:"center",display:"flex",overflow:"hidden",whiteSpace:"nowrap"}),i&&!e&&(0,y.iv)({background:"#fff2f0"}),d&&B,b&&Z)},F.createElement(w.Y,{type:t,playable:m,url:O,onAction:h}),F.createElement("div",{className:(0,y.iv)({flex:"auto",padding:"0 8px",overflow:"hidden"})},F.createElement("div",null,p(t,l),"：",r||(e?"(未命名)":"请上传资源")),n.map(((e,t)=>F.createElement(f.Z.Text,{key:t,style:{fontSize:12,display:"block"},type:"secondary"},e))),F.createElement(u.Z,{url:e,name:r,cover:o,type:t,extra:a,baseType:l,deletable:c,visitable:s,hoverable:d,onAction:h,onChange:g,onReplaceAll:v})))};var $=r(42809),Q=r(22142);const W=({type:e,name:t,cover:r,baseType:n=e,hoverable:o=!0,playable:a=!o,domRef:i,onAction:l})=>Q.createElement("div",{ref:i,className:(0,y.cx)((0,y.iv)({display:"flex"}),i&&Z,o&&B)},Q.createElement(w.Y,{type:e,url:r,playable:a,onAction:l}),Q.createElement("div",{className:(0,y.iv)({flex:"flex",padding:8,overflow:"hidden"})},Q.createElement("div",null,p(e,n),"：",t),Q.createElement("div",null,Q.createElement(f.Z.Text,{type:"secondary"},"请点击")," ",Q.createElement(f.Z.Link,{onClick:()=>null==l?void 0:l("visit")},Q.createElement(x.Z,{component:$.Z})," 更多设置")," ",Q.createElement(f.Z.Text,{type:"secondary"},"进行编辑"))));var J=r(22142);const K=({type:e,name:t,text:r,required:n,baseType:o=e,visitable:a=!1,hoverable:i=!0,playable:l=!i,domRef:s,onChange:u,onAction:f})=>J.createElement("div",{ref:s,className:(0,y.cx)((0,y.iv)({display:"flex"}),s&&Z,i&&B,n&&!r&&(0,y.iv)({background:"#fff2f0"}))},J.createElement(w.Y,{size:62,type:e,playable:l,onAction:f}),J.createElement("div",{className:(0,y.iv)({padding:"0 8px 8px",flex:"auto"})},a&&J.createElement("div",{className:(0,y.iv)({display:"flex",justifyContent:"space-between",alignItems:"center",margin:"8px 0",overflow:"hidden"})},J.createElement("div",null,p(e,o),"：",t),J.createElement(d.Z,{type:"link",className:(0,y.iv)({padding:0}),icon:J.createElement(x.Z,{component:$.Z}),onClick:()=>null==f?void 0:f("visit")},"设置")),(0,c.default)({spark:"element",content:e=>e({spark:"string",type:"area",value:r,onChange(e){u({text:(0,c.callValue)(e,null!=r?r:"")})}})})));var H=r(22142),G=Object.defineProperty,q=Object.defineProperties,X=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,ne=(e,t,r)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oe=(e,t)=>{for(var r in t||(t={}))te.call(t,r)&&ne(e,r,t[r]);if(ee)for(var r of ee(t))re.call(t,r)&&ne(e,r,t[r]);return e};const ae=e=>{var t,r,a,i;if(e.concise)return H.createElement(g,oe({},e));switch(e.type){case"NativeLoadingVideo":case"PVAlphaVideo":case"AlphaVideo":case"NativeVideo":case"FrameAnime":case"Particle":case"Lottie":case"Sprite":case"Video":case"Cubemaps":case"Model":case"Texture2D":const l=[...{NativeLoadingVideo:["格式：MP4, MOV","尺寸：9:16, 720*1280px"],NativeVideo:["格式：MP4, MOV","尺寸：9:16, 720*1280px"],PVAlphaVideo:["格式：zip","尺寸：9:16, 720*1280px"],AlphaVideo:["格式：zip","尺寸：9:16, 720*1280px"],Particle:["格式要求：plist或zip(图片+plist)"],FrameAnime:["格式要求：需上传多张图片素材"],Lottie:["格式要求：json或zip(图片+json)"],Sprite:e.url?[`图片格式：${null!=(r=null==(t=/png|jpe?g/.exec(e.url))?void 0:t[0].toUpperCase())?r:"未知"}`]:["建议格式：JPG, PNG"],Video:["建议尺寸：最佳为 750*1334"],Cubemaps:["建议格式：JPG, PNG"],Texture2D:["建议格式：JPG, PNG"],Model:["建议格式：无"]}[e.type],...null!=(a=e.tips)?a:[]];return e.originWidth&&e.originHeight&&l.push(`原始尺寸：${[e.originWidth,e.originHeight].join("*")}`),e.size&&l.push(`${(0,n.J)(e.type)}大小：${(0,o.td)(e.size)}`),H.createElement(Y,(i=oe({},e),q(i,X({tips:l}))));case"Sound":return H.createElement(L,oe({},e));case"Text":if(void 0!==e.text)return H.createElement(K,oe({},e))}return H.createElement(W,oe({},e))}},66615:function(e,t,r){"use strict";r.d(t,{Uc:function(){return C},kI:function(){return S},pk:function(){return I}});var n=r(3207),o=r(22142),a=r(57772),i=r(13564),l=r(99045),c=r(93671),s=r(41595),p=r(73760),u=r(77769),d=r(40985),f=r(77073),m=r(51514),y=r(22142),b=Object.defineProperty,h=Object.defineProperties,g=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,x=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E=(e,t)=>{for(var r in t||(t={}))O.call(t,r)&&x(e,r,t[r]);if(v)for(var r of v(t))k.call(t,r)&&x(e,r,t[r]);return e},w=(e,t)=>h(e,g(t));const P=(e,t)=>{const r=e.map((({props:e,name:t})=>Object.fromEntries([["name",t],...e.map((({key:e,default:t,value:r=t})=>[e,r]))]))),[{ids:o}]=e;return e=>{const{indexValue:a,indexEntries:i}=(0,n.getIndexer)(e);return{value:r.map((e=>a(e))),onChange(e,r){var n;(null==(n=null==r?void 0:r.ids)?void 0:n.length)?t(e,w(E({},r),{ids:[o[0],...r.ids]})):t(e.map((e=>Object.fromEntries(i(e)))),w(E({},r),{ids:[o[0]]}))}}}};let j=0;const S=(e,t)=>"Animation"!==e.type&&"Animation3D"!==e.type?{spark:"block",status:"required",hidden:e.multiType,content:(0,s.e)({type:e.type},t)}:{spark:"block",status:"static",content:{spark:"value",index:"compProps",space:"animation.comProps",visit:!0,multi:!0,content(r,i){r=r.map((e=>I(e).filter((({type:e})=>!e.startsWith("Script_")))));const{visiting:{next:l=[],prev:c=[],onVisit:p},openKeys:d}=(0,o.useContext)(n.CellContext),f=(0,o.useRef)(null),m=r.map((e=>e.find((({ids:[e]})=>e===l[0]))));if((0,o.useEffect)((()=>{var e;null==(e=f.current)||e.scrollIntoView({block:"center"})}),[]),m.every(Boolean)){const[{ids:r,type:o,name:l,props:c}]=m;j=r[0];const s=u[o](w(E({},e),{type:o}),t);return{spark:"context",content:{spark:"visit",index:r[0],label:l,extra:d.checking?{spark:"element",content:()=>y.createElement(a.K,null)}:void 0,content:(0,n.filterIndices)(s,c.map((({key:e})=>e)).concat("_editor"))},provide(){return{openKeys:A(d,m[0],"Scene"===t.rootType,(()=>{var e;return null!=(e=m[0].enabled)?e:"Scene"===t.rootType}),(()=>(0,n.collectIndices)(s,["required"]))),useValue:P(m,i)}}}}return{spark:"grid",content:r[0].map((({ids:[e]})=>r.map((t=>t.find((({ids:t})=>t[0]===e)))))).map((e=>{const[{ids:r,type:n}]=e;return{spark:"context",provide:()=>({useValue:P(e,i)}),content:(0,s.e)({domRef:r[0]===j?f:void 0,type:n,visitable:!0,deletable:!0,onAction(e){if("visit"===e)return p(c.map((({index:e})=>e)).concat(r[0]));throw new Error(`Unhandled action: ${e}`)}},t)}}))}}}},C=(e,t)=>({spark:"check",index:"compProps",check:{hidden:(e=[])=>e.every((({type:e})=>!e.startsWith("Script_")))},content:{spark:"block",status:"static",content:{spark:"value",index:"compProps",content(e=[],r){const{openKeys:a}=(0,o.useContext)(n.CellContext);return{spark:"grid",content:[{spark:"element",hidden:!(0,m.FJ)(),content(){return y.createElement(f.w,{value:e,onChange:t=>r((0,d.JY)(e,t))})}},{spark:"block",status:"static",content:{spark:"grid",content:e.filter((({type:e})=>e.startsWith("Script_"))).map((e=>{const o=A(a,e,"Scene"===t.rootType,(e=>e),(()=>[]));if("Script_CustomScript"===e.type)return{spark:"context",provide(){return{openKeys:o}},content:{spark:"grid",content:(0,c.S)({callee:"Riko.useObject",default:Object.fromEntries(e.props.map((({key:e,default:t,value:r=t})=>[e,r]))),name:e.name},((t,n,o)=>{r({[t]:n},w(E({},o),{ids:e.ids}))}))}};const{content:s}=E(E({},l.FP),i.p_)[e.type.slice("Script_".length)];return{spark:"context",provide:()=>({useValue:P([e],(([e],t)=>r(e,t))),openKeys:o}),content:{spark:"group",label:e.name,content:{spark:"block",content:(0,n.filterIndices)(s,(0,n.collectIndices)(s,["required"]))}}}}))}}]}}}}}),I=e=>{const t=(0,p.groupBy)(e,(({ids:[e]})=>e));return Object.values(t).map((e=>{if(1===e.length)return e[0];const t=e.find((({ids:e})=>1===e.length));return t?w(E({},t),{props:t.props.concat({key:"compProps",default:e.filter((({ids:e})=>e.length>1)).map((e=>w(E({},e),{ids:e.ids.slice(1)})))})}):{ids:[e[0].ids[0]],type:"Animation",name:"互动组件",props:[{key:"compProps",default:e.map((e=>w(E({},e),{ids:e.ids.slice(1)})))}]}})).filter((({props:e})=>e.length))},A=({checking:e,enabled:t,setOpenKeys:r,setEnabled:o},a,i,l,c)=>{const s=a.props.reduce(((e,{key:t,enabled:r=i})=>(r&&e.push(t),e)),["_editor"]);return{enabled:l(t),checking:e,openKeys:s,setEnabled(e,t=[]){null==o||o(e,[a.ids[0],...t]),e&&(null==r||r(!0,(0,n.updateIndices)(s,!0,c()),[a.ids[0],...t]))},setOpenKeys(e,t,o=[]){o.length||(t=(0,n.updateIndices)(s,e,t)),null==r||r(e,t,[a.ids[0],...o])}}}},41595:function(e,t,r){"use strict";r.d(t,{v:function(){return S},e:function(){return j}});var n=r(53983),o=r(42761),a=r(19104),i=r(60439),l=r(92481),c=Object.defineProperty,s=Object.defineProperties,p=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const y=e=>{const{propsMode:t}=(0,l.S)(),r=(0,i.xe)(),{dispatch:n,getState:c}=(0,o.oR)();return o=>{const i=e.toString().split("?").shift();if("Product"===t){const e=c().project;n((0,a.restoreState)((l=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&m(e,r,t[r]);if(u)for(var r of u(t))f.call(t,r)&&m(e,r,t[r]);return e})({},e),y={scenes:e.scenes.map((e=>"Scene"===e.type?b(e):e))},s(l,p(y)))))}else n((0,a.restoreState)(b(c().project)));var l,y;function b(t){return JSON.parse(JSON.stringify(t).replaceAll(`${e}`,`${o}`).replaceAll(`${i}`,`${o}`))}r()}};var b=r(22142),h=Object.defineProperty,g=Object.defineProperties,v=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t)=>{for(var r in t||(t={}))k.call(t,r)&&E(e,r,t[r]);if(O)for(var r of O(t))x.call(t,r)&&E(e,r,t[r]);return e},P=(e,t)=>g(e,v(t));const j=(e,t)=>{switch(e.type){case"Button":return I(e,t);case"Text":return C(e);case"PVButton":case"VRButton":return{spark:"grid",content:[j(P(w({},e),{type:"Sprite",deletable:!1,baseType:"Button"}),t),{spark:"value",index:["activeUrl","_editor"],content([t,r={}],o){return{spark:"element",content(){const a=y(t);return b.createElement(n.r,P(w({},e),{type:"Sprite",baseType:"Button",deletable:!1,size:r.activeSize,url:t,originWidth:r.activeOriginWidth,originHeight:r.activeOriginHeight,name:"激活图片",onReplaceAll:({url:e})=>{a(e)},onChange:({url:e,size:t,originWidth:n,originHeight:a})=>{o([e,P(w({},r),{activeSize:t,activeOriginWidth:n,activeOriginHeight:a})])}}))}}}}]};case"PVAlphaVideo":case"AlphaVideo":case"Video":case"Sound":return{spark:"value",index:["url","poster","name","cutSetting","_editor"],content([r,o,a,i,l={}],c){return{spark:"grid",content:[{spark:"element",content(){return b.createElement(n.r,P(w(w({deletable:!0},e),4===(null==t?void 0:t.typeOfPlay)&&"Video"===e.type?{type:"NativeVideo"}:{}),{url:r,name:l.name||a,size:l.size,extra:i||null,onChange:({url:e,name:t,size:r,extra:n,poster:o})=>{c([e,o,a,n,P(w({},l),{name:t,size:r})])}}))}},{spark:"element",hidden:"Video"!==e.type,content(){return b.createElement(n.r,P(w({deletable:!0},e),{type:"Sprite",url:o,name:"视频封面",size:l.posterSize,onChange:({url:e,size:t})=>{c([r,e,a,i,P(w({},l),{posterSize:t})])}}))}}]}}};case"FrameAnime":case"Particle":case"Lottie":case"Model":return{spark:"value",index:["url","_editor"],content([t,r={}],o){return{spark:"value",index:"name",content(a){return{spark:"element",content(){return b.createElement(n.r,P(w({},e),{url:t,name:t?r.name||a:void 0,cover:r.cover,size:r.size,onChange:({url:e,name:t,cover:n,size:a})=>{o([e,P(w({},r),{name:t,cover:n,size:a})])}}))}}}}}};case"PVDragger":case"Sprite":return{spark:"value",index:["url","_editor"],content([r,o={}],a){return{spark:"value",index:["width","height"],content([i,l],c){const s=y(r);return{spark:"value",index:"name",content(p){return{spark:"element",content(){return b.createElement(n.r,P(w({envs:t,deletable:!0},e),{url:r,type:"Sprite",baseType:e.type,name:r?o.name||p:void 0,cover:o.cover,size:o.size,originWidth:o.originWidth,originHeight:o.originHeight,extra:{width:i,height:l},onChange:({url:e,name:r,cover:n,size:s,extra:p,originWidth:u,originHeight:d})=>{p?c([p.width,p.height]):(a([e,P(w({},o),{name:r,cover:n,size:s,originWidth:u,originHeight:d})]),"Product"!==(null==t?void 0:t.propsMode)&&i>0&&l>0&&c([u,d]))},onReplaceAll:({url:e})=>{s(e)}}))}}}}}}}};case"DragonBones":case"Container":case"Animation":case"Live2d":case"Shape":case"Spine":case"Sprite3D":case"Camera":case"Light":case"MeshSprite3D":case"PanoramaHotSpot":case"Animation3D":return{spark:"value",index:"name",content(t){return{spark:"element",content(){return b.createElement(n.r,P(w({},e),{name:t,onChange:()=>{throw new Error("NotImplemented")}}))}}}};default:throw new Error(`NotImplemented: ${e.type}`)}},S=e=>({spark:"value",index:["texture","_editor"],content([t,r={}],o){return{spark:"value",index:"name",content(a){return{spark:"element",content(){return b.createElement(n.r,P(w({},e),{type:"Sprite",baseType:"Particle",name:r.textureName||a,url:t,onChange:({url:e,name:t})=>{o([e,P(w({},r),{textureName:t})])}}))}}}}}}),C=e=>({spark:"value",index:"text",content(t,r){return{spark:"value",index:"name",content(o){return{spark:"element",content(){return b.createElement(n.r,P(w({},e),{type:"Text",text:t,name:o,onChange:({text:e})=>{r(e)}}))}}}}}}),I=(e,t)=>({spark:"value",index:["url","text"],content([r]){return j(P(w({},e),r?{type:"Sprite",deletable:!1,baseType:"Button"}:{type:"Text"}),t)}})},40304:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var n=r(3207),o=r(11439),a=r.n(o);const i=({index:e,label:t,defaultValue:r})=>({spark:"block",content:{spark:"flex",content:[{spark:"color",label:`${t}颜色`,tooltip:`${t}颜色`,defaultValue:r,index:e},{spark:"value",index:e,content(e,r){const o=a()(e),i=100*o.getAlpha();return{spark:"element",content:e=>e({spark:"number",label:`${t}透明度`,tooltip:`${t}透明度`,precision:0,unit:"%",width:80,step:1,max:100,min:0,value:i,onChange(e,t){r(o.setAlpha((0,n.callValue)(e,i)/100).toRgbString(),t)}})}}}]}})},53936:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(3207),o=Object.defineProperty,a=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))s.call(t,r)&&p(e,r,t[r]);return e};const d=(e=!1)=>({spark:"block",hidden:e,content:{spark:"value",index:["width","height","_editor"],content([e,t,r],o){const l=e=>(t,r)=>{o((([r=0,o=0,a])=>{const{lockedRatio:i=!0}=a||{};if(i&&(r&&o||r===o)){if(r===o){const e=(0,n.callValue)(t,r);return[e,e,a]}if(0===e){const e=(0,n.callValue)(t,r);return[e,Math.floor(o*(e/r)),a]}{const e=(0,n.callValue)(t,o);return[Math.floor(r*(e/o)),e,a]}}{const i=[r,o,a];return i[e]=(0,n.callValue)(t,i[e]),i}}),r)};return{spark:"flex",columnGap:4,content:[{spark:"element",grow:1,content:t=>t({spark:"number",width:32,label:"宽",min:0,value:e,onChange:l(0)})},{spark:"element",basis:"auto",content:e=>{var t;return e({spark:"boolean",type:"locked",size:"small",tabIndex:-1,value:null==(t=null==r?void 0:r.lockedRatio)||t,onChange:e=>{o((([t,r,n])=>{return[t,r,(o=u({},n),l={lockedRatio:e},a(o,i(l)))];var o,l}),{after:!0})}})}},{spark:"element",grow:1,content:e=>e({spark:"number",width:32,label:"高",min:0,value:t,onChange:l(1)})}]}}}})},77769:function(e,t,r){"use strict";r.r(t),r.d(t,{AlphaVideo:function(){return $},Animation:function(){return c},Animation3D:function(){return xt},Blueprint:function(){return yr},Button:function(){return he},ButtonBase:function(){return be},Camera:function(){return Zt},Container:function(){return l},Controller:function(){return dr},DragonBones:function(){return i},Effect:function(){return mr.Q},FrameAnime:function(){return a},Light:function(){return Ut},Live2d:function(){return Q},Lottie:function(){return ne},MeshSprite3D:function(){return kt},Model:function(){return Xt},PVAlphaVideo:function(){return Y},PVButton:function(){return ge},PVClickArea:function(){return xe},PVDragger:function(){return Oe},PVFrameAnime:function(){return T},PVGuider:function(){return ke},PVSlider:function(){return Ee},PVSound:function(){return et},PVSprite:function(){return z},PVText:function(){return yt},PVVideo:function(){return U},PanoramaHotSpot:function(){return sr},PanoramaSpace:function(){return ar.GD},Particle:function(){return C},Particle3D:function(){return nr},ParticleSystem3D:function(){return or},Scene:function(){return Ue},Scene3D:function(){return Rt},Script:function(){return fr},Shape:function(){return nt},ShurikenParticle3D:function(){return tr},SkinnedMeshSprite3D:function(){return er},Sound:function(){return Xe},Spine:function(){return ot},Sprite:function(){return Z},Sprite3D:function(){return Et},Text:function(){return mt},Trail3D:function(){return rr},VRButton:function(){return ve},VRSound:function(){return tt},VRSprite:function(){return L},VRText:function(){return bt},VRVideo:function(){return F},Video:function(){return rt},panoramaHotSpotVectorContent:function(){return cr}});var n={};r.r(n),r.d(n,{AlphaVideo:function(){return $},Animation:function(){return c},Animation3D:function(){return xt},Blueprint:function(){return yr},Button:function(){return he},ButtonBase:function(){return be},Camera:function(){return Zt},Container:function(){return l},Controller:function(){return dr},DragonBones:function(){return i},Effect:function(){return mr.Q},FrameAnime:function(){return a},Light:function(){return Ut},Live2d:function(){return Q},Lottie:function(){return ne},MeshSprite3D:function(){return kt},Model:function(){return Xt},PVAlphaVideo:function(){return Y},PVButton:function(){return ge},PVClickArea:function(){return xe},PVDragger:function(){return Oe},PVFrameAnime:function(){return T},PVGuider:function(){return ke},PVSlider:function(){return Ee},PVSound:function(){return et},PVSprite:function(){return z},PVText:function(){return yt},PVVideo:function(){return U},PanoramaHotSpot:function(){return sr},PanoramaSpace:function(){return ar.GD},Particle:function(){return C},Particle3D:function(){return nr},ParticleSystem3D:function(){return or},Scene:function(){return Ue},Scene3D:function(){return Rt},Script:function(){return fr},Shape:function(){return nt},ShurikenParticle3D:function(){return tr},SkinnedMeshSprite3D:function(){return er},Sound:function(){return Xe},Spine:function(){return ot},Sprite:function(){return Z},Sprite3D:function(){return Et},Text:function(){return mt},Trail3D:function(){return rr},VRButton:function(){return ve},VRSound:function(){return tt},VRSprite:function(){return L},VRText:function(){return bt},VRVideo:function(){return F},Video:function(){return rt},panoramaHotSpotVectorContent:function(){return cr}});var o=r(99535);const a=(e,t)=>({spark:"grid",content:[o.Dc,o.pb,o.WE,o.Pe,o.QB,o.of].map((r=>r(e,t)))}),i=a,l=(e,t)=>({spark:"grid",content:[o.Dc,o.pb,o.WE,o.Pe,o.QB,o.d0,o.of].map((r=>r(e,t)))}),c=(e,t)=>t.isRoot?{spark:"grid",content:[o.Dc,o.pb,o.WE].map((r=>r(e,t)))}:{spark:"grid",content:[o.Dc,o.pb,o.Uc,o.WE,o.Pe,o.QB,o.of].map((r=>r(e,t)))};var s=r(7910),p=r(19104),u=r(3207),d=r(70072),f=r(22142),m=r(73946),y=r(52142),b=r(99350),h=r(40985),g=r(26840),v=r(73760),O=r(42761),k=r(86750),x=r(22142);function E(){return{spark:"element",content:()=>{const{dispatch:e,getState:t,subscribe:r}=(0,O.oR)(),n=(0,f.useRef)(null);(0,f.useEffect)((()=>{let e;const a=r((()=>{const{editor:{selected:r,stateId:a},props:i}=(0,h.zh)(t().project),{nodeIds:l}=(0,h.bN)(r),c=(0,k.hk)(a,i)[l[0]];(0,v.isEqual)(n.current,c)||(n.current=c,clearTimeout(e),e=setTimeout((()=>{o()}),600))}));return()=>{a(),clearTimeout(e)}}),[]);const o=(0,f.useCallback)((()=>{var r,n,o,a;const{nodes:i,editor:{selected:l}}=(0,h.zh)(t().project,void 0,!1),{nodeIds:c}=(0,h.bN)(l),s=null==(a=null==(o=null==(n=null==(r=(0,h.qC)(i,c[0]))?void 0:r[0])?void 0:n.scripts)?void 0:o.find((e=>"Controller"===e.type)))?void 0:a.id;e((0,p.playScript)({scriptId:s}))}),[e,t]);return x.createElement(g.Z,{title:"预览效果"},x.createElement(d.Z,{block:!0,onClick:o,icon:x.createElement(b.Z,null)},"预览"))}}}var w=r(22142);const P=({id:e})=>({spark:"enter",index:"customSettings",hidden:(0,s.cM)({release:!0}),content:{spark:"value",index:[],visit:!0,content(){const{visiting:{onVisit:t,prev:r=[],next:n=[]}}=(0,f.useContext)(u.CellContext),{emitterType:o}=(0,p.useEditor)(e,"emitterType");return"customSettings"===n[0]?{spark:"visit",index:"customSettings",label:"返回",content:{spark:"group",label:"高级参数",content:{spark:"grid",content:[{spark:"slider",index:["minVelocity","maxVelocity"],label:"初始速度范围",tooltip:"minVelocity - maxVelocity",min:0,max:600},{spark:"slider",label:"初始角度",tooltip:"angle",index:"angle",precision:1,unit:"°",min:-180,max:180},{spark:"slider",label:"初始角度变化范围",tooltip:"angleVar",index:"angleVar",precision:1,unit:"°",min:0,max:180},(0,m.I)({spark:"color",index:"minStartColor",tooltip:"minStartColor",label:"最小开始颜色",defaultValue:[255,255,255]}),(0,m.I)({spark:"color",index:"maxStartColor",tooltip:"maxStartColor",label:"最大开始颜色",defaultValue:[255,255,255]}),(0,m.I)({spark:"color",index:"minEndColor",tooltip:"minEndColor",label:"最小结束颜色",defaultValue:[255,255,255]}),(0,m.I)({spark:"color",index:"maxEndColor",tooltip:"maxEndColor",label:"最大结束颜色",defaultValue:[255,255,255]}),{spark:"select",label:"位置类型",index:"positionType",tooltip:"positionType",options:y.Rz},{spark:"select",label:"原图的混合模式",index:"blendFuncSource",tooltip:"blendFuncSource",options:[{label:"DestinationColor",value:774},{label:"OneMinusDestinationColor",value:775},{label:"SourceAlphaSaturate",value:776},{label:"SourceAlpha",value:770}]},{spark:"select",label:"目标的混合模式",index:"blendFuncDestination",tooltip:"blendFuncDestination",options:[{label:"Zero",value:0},{label:"One",value:1},{label:"SourceColor",value:768},{label:"OneMinusSourceColor",value:769},{label:"SourceAlpha",value:770},{label:"OneMinusSourceAlpha",value:771},{label:"DestinationAlpha",value:772},{label:"OneMinusDestinationAlpha",value:773}]},...0===o?[{spark:"label",label:"重力",content:{spark:"enter",index:"gravity",tooltip:"gravity",content:{spark:"flex",content:[{spark:"number",label:"X",width:32,index:0,defaultValue:0,step:.1,precision:1,min:-1200,max:1200},{spark:"number",label:"Y",width:32,index:1,defaultValue:0,step:.1,precision:1,min:-1200,max:1200}]}}},{spark:"slider",index:["minRadialAccel","maxRadialAccel"],label:"径向加速度",tooltip:"粒子径向加速度，即平行于重力方向的加速度，只有在重力模式下可用",min:-800,max:600},{spark:"slider",index:["minTangentialAccel","maxTangentialAccel"],label:"切向加速度",tooltip:"每个粒子的最小切向加速度，即垂直于重力方向的加速度，只有在重力模式下可用",min:-800,max:800}]:[{spark:"slider",index:["minStartRadius","maxStartRadius"],label:"开始半径范围",tooltip:"minStartRadius - maxStartRadius"},{spark:"slider",index:["minEndRadius","maxEndRadius"],label:"结束半径范围",tooltip:"minEndRadius - maxEndRadius"},{spark:"slider",label:"每秒绕起点旋转角度",tooltip:"rotatePerSecond",index:"rotatePerSecond",precision:1,unit:"°",min:-180,max:180},{spark:"slider",label:"每秒绕起点旋转角度的变化范围",tooltip:"rotatePerSecondVarian",index:"rotatePerSecondVarian",precision:1,unit:"°",min:-180,max:180}],E()]}}}:{spark:"element",content(){return w.createElement(d.Z,{type:"primary",block:!0,onClick:()=>t(r.map((({index:e})=>e)).concat("customSettings"))},"高级设置")}}}}}),j=()=>({spark:"group",label:"发射器参数",content:{spark:"grid",content:[{spark:"block",content:{index:"emissionRate",spark:"slider",label:"发射速率",defaultValue:1,tooltip:"发射器发射速率",inputNumber:!1,unit:"个/s",precision:0,min:1,max:800,step:1}}]}}),S=(e,t)=>({spark:"group",label:"粒子参数",content:{spark:"grid",content:[{spark:"block",content:{spark:"label",label:"拖尾效果",tooltip:"是否开启拖尾效果",content:{index:"trailing",spark:"boolean",defaultValue:!1}}},{spark:"block",content:{index:["minStartSize","maxStartSize"],spark:"slider",inputNumber:!1,label:"初始尺寸范围",defaultValue:0,tooltip:"minStartSize - maxStartSize",min:0,max:2e3,step:1}},{spark:"block",content:{index:["minEndSize","maxEndSize"],spark:"slider",inputNumber:!1,label:"结束尺寸范围",defaultValue:0,tooltip:"minEndSize - maxEndSize",min:0,max:2e3,step:1}},{spark:"block",content:{index:"particleDuration",spark:"slider",inputNumber:!1,label:"粒子持续时长",defaultValue:100,tooltip:"particleDuration",min:0,max:1e4,precision:2,ratio:-1e3,unit:"s",step:10}},{spark:"block",content:{index:"particleDurationVar",spark:"slider",inputNumber:!1,label:"粒子持续时间浮动范围",defaultValue:100,tooltip:"particleDurationVar",ratio:-1e3,precision:2,unit:"s",min:0,max:1e4,step:10}},{spark:"block",content:{index:"maxPartices",spark:"slider",width:80,inputNumber:!1,label:"最大粒子数",defaultValue:0,tooltip:"maxPartices",precision:0,unit:"个",min:0,max:1e3,step:1}},{spark:"block",content:{spark:"label",label:"粒子坐标偏移范围",tooltip:"positionVariance",width:120,content:{spark:"enter",index:"positionVariance",content:{spark:"flex",content:[{spark:"number",label:"X",width:32,index:0,defaultValue:0,step:.1,precision:1,min:-1200,max:1200},{spark:"number",label:"Y",width:32,index:1,defaultValue:0,step:.1,precision:1,min:-1200,max:1200}]}}}},P(e),E()]}}),C=(e,t)=>({spark:"grid",content:[o.Dc,o.pb,o.WE,o.of,j,S].map((r=>r(e,t)))});var I=Object.defineProperty,A=Object.defineProperties,M=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,N=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,V=(e,t)=>{for(var r in t||(t={}))D.call(t,r)&&N(e,r,t[r]);if(_)for(var r of _(t))R.call(t,r)&&N(e,r,t[r]);return e},B=(e,t)=>A(e,M(t));const Z=(e,t)=>4===t.typeOfPlay?{spark:"grid",content:[(0,o.pb)(e,t),(0,o.WE)(e,t),(0,o.of)(e,t)]}:{spark:"grid",content:[o.Dc,o.pb,o.WE,o.Pe,o.QB,o.of].map((r=>r(e,t)))},T=(e,t)=>(e=B(V({},e),{type:"FrameAnime"}),{spark:"grid",content:[(0,o.pb)(e,t),(0,o.WE)(e,t),(0,o.of)(e,t)]}),z=(e,t)=>(e=B(V({},e),{type:"Sprite"}),{spark:"grid",content:[(0,o.pb)(e,t),(0,o.WE)(e,t),(0,o.of)(e,t)]}),L=(e,t)=>(e=B(V({},e),{type:"Sprite"}),{spark:"grid",content:[(0,o.pb)(e,t),(0,o.WE)(e,t),(0,o.of)(e,t)]}),U=(e,t)=>(e=B(V({},e),{type:"Video"}),{spark:"grid",content:[(0,o.pb)(e,t),(0,o.Np)(e,t),(0,o.d$)(e,t)]}),F=(e,t)=>(e=B(V({},e),{type:"Video"}),{spark:"grid",content:[(0,o.pb)(e,t),(0,o.Np)(e,t),(0,o.d$)(e,t)]}),Y=(e,t)=>({spark:"grid",content:[(0,o.pb)(e,t),(0,o.Zd)(e,t)]}),$=(e,t)=>({spark:"grid",content:[(0,o.pb)(e,t),(0,o.Zd)(e,t)]}),Q=a;var W=r(53983),J=r(22142),K=Object.defineProperty,H=Object.defineProperties,G=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable,te=(e,t,r)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const re=()=>({spark:"check",index:"assets",check:{hidden:e=>!(null==e?void 0:e.length)},content:{spark:"group",label:"Lottie 图片素材",content:{spark:"block",content:{spark:"value",index:"assets",content(e,t){return{spark:"value",index:"name",content(r=""){return{spark:"grid",content:e.map(((n,o)=>({spark:"element",content(){return J.createElement(W.r,{type:"Sprite",baseType:"Lottie",url:n.src,name:`${r} ${o+1}`,onChange:({url:r})=>{const n=e.slice();var a;n[o]=(a=((e,t)=>{for(var r in t||(t={}))X.call(t,r)&&te(e,r,t[r]);if(q)for(var r of q(t))ee.call(t,r)&&te(e,r,t[r]);return e})({},n[o]),H(a,G({src:r}))),t(n)}})}})))}}}}}}}}),ne=(e,t)=>({spark:"grid",content:[o.Dc,o.pb,re,o.WE,o.Pe,o.QB,o.of].map((r=>r(e,t)))});var oe=r(34808),ae=r(22142),ie=Object.defineProperty,le=Object.defineProperties,ce=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable,de=(e,t,r)=>t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fe=(e,t)=>{for(var r in t||(t={}))pe.call(t,r)&&de(e,r,t[r]);if(se)for(var r of se(t))ue.call(t,r)&&de(e,r,t[r]);return e},me=(e,t)=>le(e,ce(t));const ye=()=>({spark:"check",index:"url",check:{hidden:e=>""!==e},content:{spark:"group",label:"填充",content:{spark:"block",content:{spark:"color",index:"bgColor",label:"背景颜色",defaultValue:"#FFC367"}}}}),be=(e,t)=>({spark:"grid",content:[o.Dc,o.pb,o.mm,ye,o.CQ,o.WE,o.Pe].filter((e=>!t.filter||t.filter(e))).map((r=>r(e,t)))}),he=be,ge=(e,t)=>({spark:"grid",content:[(0,o.Dc)(e,t),(0,o.pb)(e,t),(0,o.EG)(e,t),(0,o.mm)(e,t),(0,o.WE)(e,t),(0,o.of)(e,t)]}),ve=(e,t)=>({spark:"grid",content:[(0,o.Dc)(e,t),(0,o.pb)(e,t),(0,o.EG)(e,t),(0,o.mm)(e,t),(0,o.WE)(e,t),(0,o.of)(e,t)]}),Oe=(e,t)=>({spark:"grid",content:[(0,o.Dc)(e,t),(0,o.pb)(e,t),(0,o.EG)(e,t),(0,o.mm)(e,t),(0,o.WE)(e,t),(0,o.of)(e,t)]}),ke=(e,t)=>({spark:"grid",content:[(0,o.pb)(me(fe({},e),{type:"Sprite"}),t),{spark:"group",label:"引导设置",content:{spark:"grid",content:[{spark:"value",index:"targets",content(e=[],t){return{spark:"element",content:()=>ae.createElement(u.ArrayCell,{label:"被引导组件",array:e,defaultExpanded:!0,onChange:t,render:(e,t)=>(0,u.default)({spark:"element",content:()=>ae.createElement(oe.Du,{isType:e=>["PVButton","PVClickArea","PVSlider"].includes(e),value:e,onChange:t})})})}}},{spark:"label",label:"开启全屏蒙层",content:{spark:"boolean",index:"withMask",defaultValue:!1}}]}},(0,o.WE)(e,t),(0,o.of)(e,t)]}),xe=(e,t)=>({spark:"grid",content:[(0,o.pb)(e,t),(0,o.EG)(e,t),(0,o.WE)(e,t),(0,o.of)(e,t)]}),Ee=(e,t)=>(e=me(fe({},e),{type:"Button"}),{spark:"grid",content:[(0,o.Dc)(e,t),(0,o.pb)(e,t),(0,o.pV)(e,t),(0,o.WE)(e,t),(0,o.of)(e,t)]});var we=r(33058),Pe=r(41595),je=r(66615),Se=r(93671),Ce=r(99045),Ie=r(13564),Ae=r(35553),Me=r(62732),_e=r(22142),De=Object.defineProperty,Re=Object.defineProperties,Ne=Object.getOwnPropertyDescriptors,Ve=Object.getOwnPropertySymbols,Be=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable,Te=(e,t,r)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ze=(e,t)=>{for(var r in t||(t={}))Be.call(t,r)&&Te(e,r,t[r]);if(Ve)for(var r of Ve(t))Ze.call(t,r)&&Te(e,r,t[r]);return e},Le=(e,t)=>Re(e,Ne(t));const Ue=(e,t)=>"Product"!==t.propsMode?{spark:"grid",content:[o.Dc,o.pb].map((r=>r(e,t)))}:{spark:"value",index:"compProps",space:"scene.comProps",visit:!0,content(r=[]){var o;const a=(0,je.pk)(r),i=(0,O.oR)(),{visiting:{next:l=[],prev:c=[],onVisit:s}}=(0,f.useContext)(u.CellContext),{onPreview:m}=(0,p.useOnPreview)(),y=a.find((({ids:[e]})=>e===l[0])),{selected:b,onSelect:h}=(0,p.useSelected)(null!=(o=null==y?void 0:y.ids[0])?o:-1,!0);(0,f.useEffect)((()=>{y&&!b&&h({})}),[b,Boolean(y)]);const g=e=>(0,k.kA)([e.ids[0]],i,((t,n)=>{var o;if("compProps"!==t){const t=(null==(o=r.find((({ids:t})=>t[0]===e.ids[0]&&1===t.length)))?void 0:o.props.map((({key:e})=>e)))||[];return t.push("_editor","name"),(0,v.pick)(n,t)}const{compProps:a=[]}=n;return{compProps:r.filter((({ids:t})=>t[0]===e.ids[0]&&t.length>1)).map((e=>{const t=e.ids.slice(1),{props:r}=a.find((e=>(0,v.isEqual)(e.ids,t)));return Le(ze({},e),{ids:t,props:r.filter((({key:t})=>e.props.some((e=>t===e.key))))})}))}}));return y?{spark:"context",provide:()=>({useValue:g(y)}),content:{spark:"visit",index:y.ids[0],label:y.name,content:(0,u.filterIndices)(n[y.type](Le(ze({},e),{type:y.type}),t),y.props.map((({key:e})=>e)).concat("_editor"))}}:(0,u.filterSpark)({spark:"grid",rowGap:0,content:a.map((e=>{const{ids:[r],name:n,type:o,props:a}=e;return{spark:"context",provide:()=>({useValue:g(e)}),content:{spark:"element",content(){const{selected:e,onSelect:i}=(0,p.useSelected)(r,!o.startsWith("Script_"),void 0,!0),l=Fe(e);return _e.createElement("div",{ref:l,onClick:()=>i({}),className:(0,Me.iv)({paddingBottom:16,background:e?"rgb(238, 243, 254)":"white",transition:"200ms",cursor:"pointer"})},(0,u.default)((()=>{if(!o.startsWith("Script_"))return{spark:"group",label:n,extra:{spark:"element",content(){return _e.createElement(d.Z,{type:"link",className:(0,Me.iv)({padding:0}),onClick:e=>{e.stopPropagation(),s(c.map((({index:e})=>e)).concat(r))}},"更多设置 ",_e.createElement(we.Z,{component:Ae.Z}))}},content:(0,Pe.e)({type:o,hoverable:!1,visitable:!1,deletable:!0,onAction(e){switch(e){case"visit":return s(c.map((({index:e})=>e)).concat(r));case"play":return m(r);default:throw new Error(`Unhandled action: ${e}`)}}},t)};if("Script_CustomScript"===o)return{spark:"value",index:a.map((({key:e})=>e)).filter((e=>e.startsWith("$"))),content(e,t){return{spark:"grid",content:(0,Se.S)({callee:"Riko.useObject",default:Object.fromEntries(e.map(((e,t)=>[a[t].key,e]))),name:n},((r,n,o)=>{const i=e.slice();i[a.findIndex((({key:e})=>e===r))]=n,t(i,o)}))}}};const{content:e}=ze(ze({},Ce.FP),Ie.p_)[o.slice("Script_".length)],i=(0,u.filterIndices)(e,(0,u.collectIndices)(e,["required"]));return{spark:"group",label:n,content:i}})()))}}}}))})}},Fe=e=>{const t=(0,f.useRef)(null),r=null===t.current;return(0,f.useEffect)((()=>{var n;e&&(null==(n=t.current)||n.scrollIntoView(r?{block:"center"}:{behavior:"smooth",block:"nearest"}))}),[r,e]),t};var Ye=Object.defineProperty,$e=Object.defineProperties,Qe=Object.getOwnPropertyDescriptors,We=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable,He=(e,t,r)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ge=(e,t)=>{for(var r in t||(t={}))Je.call(t,r)&&He(e,r,t[r]);if(We)for(var r of We(t))Ke.call(t,r)&&He(e,r,t[r]);return e},qe=(e,t)=>$e(e,Qe(t));const Xe=(e,t)=>4===t.typeOfPlay?{spark:"grid",content:[(0,o.pb)(e,t)]}:{spark:"grid",content:[o.Dc,o.pb].map((r=>r(e,t)))},et=(e,t)=>(e=qe(Ge({},e),{type:"Sound"}),{spark:"grid",content:[(0,o.pb)(e,t)]}),tt=(e,t)=>(e=qe(Ge({},e),{type:"Sound"}),{spark:"grid",content:[(0,o.pb)(e,t)]}),rt=Z,nt=(e,t)=>({spark:"grid",content:[o.Dc,o.pb,o.Uy,o.$g,o.WE,o.Pe,o.QB,o.of].map((r=>r(e,t)))}),ot=a;var at=Object.defineProperty,it=Object.defineProperties,lt=Object.getOwnPropertyDescriptors,ct=Object.getOwnPropertySymbols,st=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,ut=(e,t,r)=>t in e?at(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dt=(e,t)=>{for(var r in t||(t={}))st.call(t,r)&&ut(e,r,t[r]);if(ct)for(var r of ct(t))pt.call(t,r)&&ut(e,r,t[r]);return e},ft=(e,t)=>it(e,lt(t));const mt=(e,t)=>({spark:"grid",content:[o.Dc,o.pb,o.mm,o.zx,o.WE,o.Pe,o.QB,o.of].map((r=>r(e,t)))}),yt=(e,t)=>(e=ft(dt({},e),{type:"Text"}),{spark:"grid",content:[(0,o.Dc)(e,t),(0,o.pb)(e,t),(0,o.mm)(e,t),(0,o.WE)(e,t),(0,o.of)(e,t)]}),bt=(e,t)=>(e=ft(dt({},e),{type:"Text"}),{spark:"grid",content:[(0,o.Dc)(e,t),(0,o.pb)(e,t),(0,o.mm)(e,t),(0,o.WE)(e,t),(0,o.of)(e,t)]}),ht=e=>({spark:"group",label:"网格",content:{spark:"grid",content:[{spark:"select",index:"meshType",label:"网格类型",hidden:"MeshSprite3D"!==e.type,tooltip:"节点的网格类型",options:y.Lp,defaultValue:"asset"},{spark:"flex",content:[{spark:"label",label:"网格阴影",tooltip:"设置网格阴影",content:{spark:"boolean",index:"castShadows",defaultValue:!0}},{spark:"label",label:"接收阴影",tooltip:"接收其它阴影",content:{spark:"boolean",index:"receiveShadows",defaultValue:!0}}]}]}});var gt=r(21004),vt=r(48001),Ot=r(46641);const kt=(e,t)=>({spark:"grid",content:[o.Dc,o.pb].concat(ht,Ot.Cr,vt.c,((e,t)=>({spark:"check",index:"physics",check:{hidden:e=>["none",void 0].includes(null==e?void 0:e.type)},content:(0,gt.u)(e,t)}))).map((r=>r(e,t)))}),xt=(e,t)=>{const r=[o.pb,vt.c];return t.isRoot||r.push(o.Uc),{spark:"grid",content:r.concat(((e,t)=>({spark:"check",index:"physics",check:{hidden:e=>["none",void 0].includes(null==e?void 0:e.type)},content:(0,gt.u)(e,t)}))).map((r=>r(e,t)))}},Et=(e,t)=>{const r=[o.pb];return t.isRoot||r.push(vt.c),{spark:"grid",content:r.concat(((e,t)=>({spark:"check",index:"physics",check:{hidden:e=>["none",void 0].includes(null==e?void 0:e.type)||t.isRoot},content:(0,gt.u)(e,t)}))).map((r=>r(e,t)))}};var wt=r(55791),Pt=r(22142),jt=Object.defineProperty,St=Object.defineProperties,Ct=Object.getOwnPropertyDescriptors,It=Object.getOwnPropertySymbols,At=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable,_t=(e,t,r)=>t in e?jt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Dt=(e,t)=>{for(var r in t||(t={}))At.call(t,r)&&_t(e,r,t[r]);if(It)for(var r of It(t))Mt.call(t,r)&&_t(e,r,t[r]);return e};const Rt=(e,t)=>({spark:"grid",content:[o.pb].map((r=>r(e,t))).concat([{spark:"group",label:"雾",content:{spark:"grid",content:[{spark:"block",content:{spark:"select",index:"fogMode",label:"雾模式",defaultValue:0,options:[{label:"无",value:0},{label:"线性",value:1}]}},{spark:"check",index:"fogMode",check:{hidden:e=>0===e},content:{spark:"grid",content:[{spark:"block",content:{spark:"flex",content:[{spark:"number",index:"fogStart",label:"开始距离",tooltip:"从视点到雾开始出现的距离",step:.03,precision:2,defaultValue:0},{spark:"number",index:"fogEnd",label:"结束距离",tooltip:"从视点到雾浓度达到最高的距离",defaultValue:300,precision:2,step:.03}]}},(0,m.I)({spark:"color",index:"fogColor",label:"雾颜色",defaultValue:[255,255,255]})]}}]}},{spark:"group",label:"天空盒",content:{spark:"grid",content:[{spark:"value",index:["skyboxMaterialUrl","_editor"],content([e="",t={}],r){const n=e,{getState:o}=(0,O.oR)(),{scene3DApplyCubemap:a,scene3DCancelApplyCubemap:i}=(0,wt.Z)(),l=o().project.materials.find((({orderId:t})=>t===Number(e))),c=o().project.cubemaps.find((({orderId:e})=>e===(null==l?void 0:l.material.props.cubemapUrl)));return{spark:"element",content(){return Pt.createElement(W.r,{type:"Cubemaps",name:t.skyboxName,url:(null==l?void 0:l.material.props.cubemapUrl)||"",cover:null==c?void 0:c.props.cover,deletable:!0,onChange:({url:e="",cover:t})=>{""===e?i(n,(()=>{r([n,{skyboxCover:""}])})):a(e,((e=n)=>{r([e,{skyboxCover:t}])}))}})}}}},{spark:"value",index:"skyboxMaterialUrl",content(e,t){var r,n,o;const{getState:a,dispatch:i}=(0,O.oR)(),l=(0,v.debounce)(t,800),c=a().project.materials.find((({orderId:t})=>t===Number(e)));return{spark:"context",hidden:!(null==c?void 0:c.material.props.cubemapUrl),content:{spark:"visit",index:null==c?void 0:c.id,label:null!=(o=`${null==(n=null==(r=null==c?void 0:c.material)?void 0:r.props)?void 0:n.name}`)?o:"全景图",content:{spark:"grid",content:[(0,m.I)({spark:"color",index:"tintColor",label:"颜色",defaultValue:[125,125,125,1]}),{spark:"number",label:"曝光",index:"exposure",min:0,max:8,precision:2,defaultValue:1,step:.01},{spark:"label",label:"旋转",content:{spark:"slider",index:"rotation",min:0,max:360,defaultValue:0,step:1}}]}},provide(){return{visiting:{},useValue(t,r){const{indexValue:n,indexEntries:o}=(0,u.getIndexer)(t);return{value:(0,O.v9)((({project:{materials:t}})=>{const r=t.find((({orderId:t})=>t===Number(e))),{material:o}=r;return[n(o.props)]}),r),onChange:t=>{return r=this,n=[t],c=function*([t]){const r=a().project.materials.find((({orderId:t})=>t===Number(e)));var n,c;r&&(i((0,p.updateMaterial)(r.id,(n=Dt({},r.material),c={props:Dt(Dt({},r.material.props),Object.fromEntries(o(t)))},St(n,Ct(c))))),l(e))},new Promise(((e,t)=>{var o=e=>{try{i(c.next(e))}catch(e){t(e)}},a=e=>{try{i(c.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,a);i((c=c.apply(r,n)).next())}));var r,n,c}}}}}}}}]}}])});var Nt=r(85593);const Vt=[{label:"纯色",value:0},{label:"天空盒",value:1},{label:"深度信息",value:2}],Bt=[{label:"透视投影",value:0},{label:"正交投影",value:1}],Zt=(e,t)=>({spark:"grid",content:[o.pb].map((r=>r(e,t))).concat([{spark:"group",label:"相机",content:{spark:"grid",content:[{spark:"block",content:{spark:"select",index:"clearFlag",label:"清除模式",tooltip:"相机渲染前清除画板的方式",defaultValue:2,options:Vt}},(0,m.I)({spark:"color",index:"clearColor",label:"背景颜色",defaultValue:[0,0,0]}),{spark:"block",hidden:!0,content:{spark:"select",index:"cullingMask",label:"筛选图层",tooltip:"相机筛选用于渲染的图层",defaultValue:"Default",options:Nt.S}},{spark:"block",content:{spark:"select",index:"projection",label:"投影类型",tooltip:"相机投影类型",defaultValue:0,options:Bt}},{spark:"check",index:"projection",check:{hidden:e=>0!==e},content:{spark:"block",content:{spark:"number",index:"fieldOfView",label:"垂直角度",defaultValue:60,tooltip:"相机视角垂直角度",min:0,max:180,step:.01,precision:2,unit:"°"}}},{spark:"check",index:"projection",check:{hidden:e=>1!==e},content:{spark:"block",content:{spark:"number",index:"orthographicVerticalSize",label:"垂直尺寸",defaultValue:5,tooltip:"相机正交投影垂直尺寸",min:0,step:.03,precision:2}}},{spark:"grid",content:[{spark:"block",cols:3,content:{spark:"number",index:"nearClip",label:"近切面",defaultValue:.3,step:.03,min:.1,precision:2,tooltip:"相对相机的距离，距离内不会渲染"}},{spark:"block",cols:3,content:{spark:"number",index:"farClip",label:"远切面",defaultValue:1e3,step:.03,min:.1,precision:2,tooltip:"相对相机的距离，距离内不会渲染"}}]},{spark:"block",content:{spark:"label",label:"视口",tooltip:"相机在屏幕上渲染的矩形区域",content:{spark:"enter",index:"normalizedViewport",content:{spark:"grid",content:[{spark:"number",width:24,index:0,label:"X",cols:3,defaultValue:0,step:.03,precision:2},{spark:"number",width:24,index:1,label:"Y",cols:3,defaultValue:0,step:.03,precision:2},{spark:"number",width:24,index:2,label:"W",cols:3,defaultValue:0,step:.03,precision:2},{spark:"number",width:24,index:3,label:"H",cols:3,defaultValue:0,step:.03,precision:2}]}}}}]}}])}),Tt=[{label:"方向光",value:"directional"},{label:"聚光灯",value:"spot"},{label:"点光源",value:"point"}],zt=[{label:"none",value:0},{label:"hard",value:1},{label:"softLow",value:2},{label:"softHigh",value:3}],Lt=[{label:"16 x 16",value:16},{label:"32 x 32",value:32},{label:"64 x 64",value:64},{label:"128 x 128",value:128},{label:"256 x 256",value:256},{label:"512 x 512",value:512},{label:"1024 x 1024",value:1024},{label:"2048 x 2048",value:2048}],Ut=(e,t)=>({spark:"grid",content:[o.pb].map((r=>r(e,t))).concat([{spark:"group",label:"光源",content:{spark:"grid",content:[{spark:"block",content:{spark:"select",index:"lightType",label:"光源类型",defaultValue:"directional",options:Tt}},{spark:"check",index:"lightType",check:{hidden:e=>!["spot","point"].includes(e)},content:{spark:"block",content:{spark:"number",index:"range",label:"范围",tooltip:"光的范围",min:0,defaultValue:8,step:.03,precision:2}}},{spark:"check",index:"lightType",check:{hidden:e=>!["spot"].includes(e)},content:{spark:"block",content:{spark:"number",index:"spotAngle",label:"角度",tooltip:"聚光灯角度",min:1,max:179,defaultValue:45,step:.03,precision:2}}},(0,m.I)({spark:"color",index:"color",label:"光颜色",defaultValue:[51,51,51]}),{spark:"block",content:{spark:"number",label:"光照强度",tooltip:"光照强度",index:"intensity",defaultValue:1,step:.03,min:0,precision:2}},{spark:"block",content:{spark:"select",label:"阴影类型",index:"shadowType",tooltip:"阴影类型",defaultValue:0,options:zt}},{spark:"check",index:"shadowType",check:{hidden:e=>0===e},content:{spark:"grid",content:[{spark:"block",content:{spark:"number",label:"阴影距离",index:"shadowDistance",tooltip:"阴影距离",defaultValue:35,step:.03,precision:2,min:0}},{spark:"block",content:{spark:"select",label:"阴影分辨率",index:"shadowResolution",tooltip:"阴影分辨率",defaultValue:2048,options:Lt}},{spark:"block",content:{spark:"slider",index:"shadowBias",label:"阴影偏移",tooltip:"阴影偏移",defaultValue:1,min:0,max:2,step:.03,precision:2}},{spark:"block",content:{spark:"slider",index:"shadowNormalBias",label:"阴影法线偏移",tooltip:"阴影法线偏移",defaultValue:1,min:0,max:3,step:.03,precision:2}}]}}]}}])});var Ft=r(76463),Yt=r(22142),$t=Object.defineProperty,Qt=Object.defineProperties,Wt=Object.getOwnPropertyDescriptors,Jt=Object.getOwnPropertySymbols,Kt=Object.prototype.hasOwnProperty,Ht=Object.prototype.propertyIsEnumerable,Gt=(e,t,r)=>t in e?$t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qt=(e,t)=>{for(var r in t||(t={}))Kt.call(t,r)&&Gt(e,r,t[r]);if(Jt)for(var r of Jt(t))Ht.call(t,r)&&Gt(e,r,t[r]);return e};const Xt=(e,t)=>{const r=[o.Dc,o.pb];return t.isRoot||r.push(vt.c),{spark:"grid",content:r.concat([(e,t)=>({spark:"check",index:"physics",check:{hidden:e=>["none",void 0].includes(null==e?void 0:e.type)||t.isRoot},content:(0,gt.u)(e,t)}),()=>({spark:"group",label:"资源",content:{spark:"block",content:{spark:"value",index:["url","_editor"],content([e="",t]){const r=(0,oe.jt)(),{replaceCarModelInProduct:n}=(0,Ft.B)();return{spark:"element",content(){return Yt.createElement(W.r,{type:"Model",name:null==t?void 0:t.name,url:e,cover:null==t?void 0:t.cover,onChange:e=>{return o=this,a=[e],i=function*({url:e="",cover:o,name:a}){var i,l;yield n(r,e,{_editor:(i=qt({},t),l={name:a,cover:o},Qt(i,Wt(l)))})},new Promise(((e,t)=>{var r=e=>{try{l(i.next(e))}catch(e){t(e)}},n=e=>{try{l(i.throw(e))}catch(e){t(e)}},l=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,n);l((i=i.apply(o,a)).next())}));var o,a,i}})}}}}}})]).map((r=>null==r?void 0:r(e,t)))}},er=(e,t)=>({spark:"grid",content:[o.pb].concat(ht,Ot.Cr,vt.c,((e,t)=>({spark:"check",index:"physics",check:{hidden:e=>["none",void 0].includes(null==e?void 0:e.type)},content:(0,gt.u)(e,t)}))).map((r=>r(e,t)))}),tr=(e,t)=>({spark:"grid",content:[o.pb].concat((()=>({spark:"group",label:"粒子",content:{spark:"grid",content:[{spark:"number",index:"duration",label:"时长",defaultValue:5,min:0,step:.03,precision:2,unit:"s",tooltip:"控制生成粒子的时长。如果开启了循环，则表明一个周期的时长。"},{spark:"label",label:"循环",tooltip:"是否循环",content:{spark:"boolean",index:"looping",defaultValue:!0}},{spark:"label",label:"自动播放",tooltip:"是否自动播放",content:{spark:"boolean",index:"playOnAwake",defaultValue:!0}},{spark:"select",index:"startDelayType",defaultValue:0,options:[{label:"常量",value:0},{label:"两个常量随机",value:1}],label:"初始延迟类型",tooltip:"初始延迟类型"},{spark:"check",index:"startDelayType",check:{hidden:e=>0!==e},content:{spark:"number",index:"startDelay",label:"初始延迟时间",defaultValue:0,min:0,precision:2,step:.03,tooltip:"粒子生成的延迟时间，单位为 s"}},{spark:"check",index:"startDelayType",check:{hidden:e=>1!==e},content:{spark:"number",index:"startDelayMin",label:"初始最小延迟",defaultValue:0,min:0,precision:2,step:.03,tooltip:"粒子生成的延迟时间，单位为 s"}},{spark:"check",index:"startDelayType",check:{hidden:e=>1!==e},content:{spark:"number",index:"startDelayMax",label:"初始最小延迟",defaultValue:0,min:0,precision:2,step:.03,tooltip:"粒子生成的延迟时间，单位为 s"}},{spark:"select",index:"startLifetimeType",defaultValue:0,options:[{label:"常量",value:0},{label:"两个常量随机",value:2}],label:"初始存活类型",tooltip:"初始存活类型"},{spark:"check",index:"startLifetimeType",check:{hidden:e=>0!==e},content:{spark:"number",index:"startLifetimeConstant",label:"初始存活时间",defaultValue:5,min:1e-4,precision:2,step:.03,tooltip:"粒子生成的延迟时间，单位为 s"}},{spark:"check",index:"startLifetimeType",check:{hidden:e=>2!==e},content:{spark:"number",index:"startLifetimeConstantMin",label:"初始存活最小时间",defaultValue:5,min:1e-4,precision:2,step:.03,tooltip:"粒子生成的延迟时间，单位为 s"}},{spark:"check",index:"startLifetimeType",check:{hidden:e=>2!==e},content:{spark:"number",index:"startLifetimeConstantMax",label:"初始存活最小时间",defaultValue:5,min:1e-4,precision:2,step:.03,tooltip:"粒子生成的延迟时间，单位为 s"}},{spark:"select",index:"startSpeedType",defaultValue:0,options:[{label:"常量",value:0},{label:"两个常量随机",value:2}],label:"初始速度类型",tooltip:"初始速度类型"},{spark:"check",index:"startSpeedType",check:{hidden:e=>0!==e},content:{spark:"number",index:"startSpeedConstant",label:"初始速度",defaultValue:5,min:-1e5,max:1e5,precision:2,step:.03,tooltip:"初始速度"}},{spark:"check",index:"startSpeedType",check:{hidden:e=>2!==e},content:{spark:"number",index:"startSpeedConstantMin",label:"初始最小速度",defaultValue:5,min:-1e5,max:1e5,precision:2,step:.03,tooltip:"初始最小速度"}},{spark:"check",index:"startSpeedType",check:{hidden:e=>2!==e},content:{spark:"number",index:"startSpeedConstantMax",label:"初始最大速度",defaultValue:5,min:-1e5,max:1e5,precision:2,step:.03,tooltip:"初始最大速度"}},{spark:"select",index:"startSizeType",defaultValue:0,options:[{label:"常量",value:0},{label:"两个常量随机",value:2}],label:"初始尺寸类型",tooltip:"初始尺寸类型"},{spark:"check",index:"startSizeType",check:{hidden:e=>0!==e},content:{spark:"number",index:"startSizeConstant",label:"初始尺寸",defaultValue:1,tooltip:"初始尺寸",min:0,max:1e4,precision:2,step:.03}},{spark:"check",index:"startSizeType",check:{hidden:e=>2!==e},content:{spark:"number",index:"startSizeConstantMin",label:"初始最小尺寸",defaultValue:1,tooltip:"初始最小尺寸",min:0,max:1e4,precision:2,step:.03}},{spark:"check",index:"startSizeType",check:{hidden:e=>2!==e},content:{spark:"number",index:"startSizeConstantMax",label:"初始最大尺寸",defaultValue:1,tooltip:"初始最大尺寸",min:0,max:1e4,precision:2,step:.03}},{spark:"select",index:"startRotationType",defaultValue:0,options:[{label:"常量",value:0},{label:"两个常量随机",value:2}],label:"初始旋转类型",tooltip:"初始旋转类型"},{spark:"check",index:"startRotationType",check:{hidden:e=>0!==e},content:{spark:"number",index:"startRotationConstant",label:"初始旋转角度",defaultValue:0,min:-1e5,max:1e5,tooltip:"初始旋转角度",precision:2,step:.03}},{spark:"check",index:"startRotationType",check:{hidden:e=>2!==e},content:{spark:"number",index:"startRotationConstantMin",label:"初始旋转最小角度",defaultValue:0,min:-1e5,max:1e5,tooltip:"初始旋转最小角度",precision:2,step:.03}},{spark:"check",index:"startRotationType",check:{hidden:e=>2!==e},content:{spark:"number",index:"startRotationConstantMax",label:"初始旋转最大角度",defaultValue:0,min:-1e5,max:1e5,tooltip:"初始旋转最大角度",precision:2,step:.03}},{spark:"number",index:"randomizeRotationDirection",label:"随机旋转方向",defaultValue:0,min:0,max:1,tooltip:"随机旋转方向",precision:2,step:.03},{spark:"select",index:"startColorType",defaultValue:0,options:[{label:"常量",value:0},{label:"两个常量随机",value:2}],label:"初始颜色类型",tooltip:"初始颜色类型"},{spark:"check",index:"startColorType",check:{hidden:e=>0!==e},content:(0,m.I)({spark:"color",index:"startColorConstant",label:"初始颜色",defaultValue:[0,0,0]})},{spark:"check",index:"startColorType",check:{hidden:e=>2!==e},content:(0,m.I)({spark:"color",index:"startColorConstantMin",label:"初始颜色1",defaultValue:[0,0,0]})},{spark:"check",index:"startColorType",check:{hidden:e=>0!==e},content:(0,m.I)({spark:"color",index:"startColorConstantMax",label:"初始颜色2",defaultValue:[0,0,0]})},{spark:"number",index:"gravityModifier",label:"重力缩放",defaultValue:0,min:-1e5,max:1e5,tooltip:"重力缩放",precision:2,step:.03},{spark:"select",index:"simulationSpace",label:"模拟空间",defaultValue:1,tooltip:"模拟空间",options:[{label:"本地",value:1},{label:"全局",value:0}]},{spark:"number",index:"simulationSpeed",label:"模拟速度",defaultValue:1,tooltip:"模拟速度",min:0,max:100,precision:2,step:.03},{spark:"select",index:"scaleMode",label:"缩放模式",defaultValue:1,tooltip:"缩放模式",options:[{label:"层级",value:0},{label:"本地",value:1},{label:"形状",value:2}]}]}})),vt.c,((e,t)=>({spark:"check",index:"physics",check:{hidden:e=>["none",void 0].includes(null==e?void 0:e.type)},content:(0,gt.u)(e,t)})),Ot.Cr).map((r=>r(e,t)))}),rr=(e,t)=>({spark:"grid",content:[o.pb,Ot.Cr,vt.c].concat(((e,t)=>({spark:"check",index:"physics",check:{hidden:e=>["none",void 0].includes(null==e?void 0:e.type)},content:(0,gt.u)(e,t)}))).map((r=>r(e,t))).concat([{spark:"group",label:"属性设置",content:{spark:"grid",content:[{spark:"number",label:"时长",index:"time",min:0,step:.03,precision:2,unit:"s",defaultValue:5},{spark:"number",label:"最小顶点距离",index:"minVertexDistance",min:0,step:.03,precision:2,defaultValue:.1},{spark:"select",label:"对齐方式",index:"alignment",options:[{label:"视图",value:0},{label:"Z 轴",value:1}],defaultValue:0},{spark:"select",label:"纹理模式",index:"textureMode",options:[{label:"拉伸",value:0},{label:"平铺",value:1}],defaultValue:0}]}}])}),nr=Et,or=tr;var ar=r(39139),ir=r(95074),lr=r(22142);const cr=()=>({spark:"grid",content:[{spark:"block",content:{spark:"label",label:"位置",tooltip:"节点的本地位置坐标",content:(0,ir.J)("position")}},{spark:"value",index:"billboardMode",content(e){return{spark:"block",content:{spark:"label",label:"旋转",tooltip:"节点的本地旋转角度",content:(0,ir.J)("rotation",["X","Y","Z"],e)}}}},{spark:"block",content:{spark:"label",label:"缩放",tooltip:"节点的本地缩放比例",content:(0,ir.J)("scale")}}]}),sr=(e,t)=>({spark:"grid",content:[o.Dc,o.pb].map((r=>r(e,t))).concat([{spark:"group",label:"属性设置",content:{spark:"grid",content:[{spark:"block",content:{spark:"label",label:"广告牌模式",content:{spark:"boolean",index:"billboardMode",defaultValue:!0}}},{spark:"block",content:{spark:"value",index:"textureUrl",content(e,t){return{spark:"element",content(){return lr.createElement(W.r,{type:"Sprite",url:e,onChange:({url:e})=>{t(e)}})}}}}},{spark:"block",content:{spark:"grid",content:[{spark:"label",label:"热点功能",content:{spark:"select",index:"actionType",options:[{label:"无",value:0},{label:"跳转",value:1},{label:"发送事件",value:2}],defaultValue:1}},{spark:"check",index:"actionType",check:{hidden:e=>1!==e},content:{spark:"label",label:"跳转节点",content:{spark:"value",index:"targetPanoramaId",content(){var e,t;const{getState:r}=(0,O.oR)(),n=(0,O.v9)((({project:{editor:{panoramaEdit:{panoramaDataOrderId:e}}}})=>e));return{spark:"select",options:(null!=(t=null==(e=(0,h.HE)(r().project).find((e=>e.orderId===n)))?void 0:e.panoramas)?t:[]).map((e=>({label:e.name,value:e.id}))),index:"targetPanoramaId"}}}}},{spark:"check",index:"actionType",check:{hidden:e=>2!==e},content:{spark:"string",index:"eventName",label:"事件名称",defaultValue:""}}]}}]}}])});var pr=r(88551),ur=r(48704);const dr=(e,t)=>({spark:"grid",content:[{spark:"group",label:"控制器名称与内容",extra:(0,pr.I)(t.isRoot),content:{spark:"block",status:"closed",content:{spark:"grid",content:[(0,ur.Y)(e,t),{spark:"check",index:[],check:{hidden:()=>(0,O.v9)((({project:t})=>{const[r]=(0,h.qC)((0,h.v$)((0,h.zh)(t)),e.id,!0);return r&&!["Spine","DragonBones","Live2d","FrameAnime"].includes(r.type)}),O.wU)},content:{spark:"value",index:["animName","name","duration"],content([t],r){var n;const o=null!=(n=(0,O.v9)((({project:t})=>{var r,n;return null==(n=null==(r=(0,h.qC)((0,h.v$)((0,h.zh)(t)),e.id,!0)[0])?void 0:r.editor)?void 0:n.animations}),O.wU))?n:[["default",1e3]],a=o.map((([e])=>({label:e,value:e})));return{spark:"element",content:e=>e({spark:"select",label:"动画片段",tooltip:"指定要播放的动画片段",value:t,options:a,onChange:e=>{const[t,n]=o.find((t=>t[0]===e));r([t,t,n])}})}}}},{spark:"check",index:"layer",check:{hidden:t=>{var r,n;return 0===(null!=(n=null==(r=(0,O.v9)((({project:t})=>{var r,n;return null==(n=null==(r=(0,h.qC)((0,h.v$)((0,h.zh)(t)),e.id,!0)[0])?void 0:r.editor)?void 0:n.layerAnimations}),O.wU))?void 0:r[t])?n:[]).length}},content:{spark:"value",index:["layer","animName","duration"],content([t,r],n){var o,a;const i=null!=(a=null==(o=(0,O.v9)((({project:t})=>{var r,n;return null==(n=null==(r=(0,h.qC)((0,h.v$)((0,h.zh)(t)),e.id,!0)[0])?void 0:r.editor)?void 0:n.layerAnimations}),O.wU))?void 0:o[t])?a:[],l=i.map((([e])=>({label:e,value:e})));return{spark:"element",content:e=>e({spark:"select",label:"动画片段",tooltip:"指定要播放的动画片段",value:r,options:l,onChange:e=>{const[r,o]=i.find((t=>t[0]===e));n([t,r,o])}})}}}},{spark:"check",index:[],check:{hidden:()=>(0,O.v9)((({project:t})=>{const[r]=(0,h.qC)((0,h.v$)((0,h.zh)(t)),e.id,!0);return r&&!(0,h.W6)(r.type)}),O.wU)},content:{spark:"value",index:["stateId","name","duration"],content([t],r){var n;const o=null!=(n=(0,O.v9)((({project:t})=>{var r,n;return null==(n=null==(r=(0,h.qC)((0,h.v$)((0,h.zh)(t)),e.id,!0)[0])?void 0:r.editor)?void 0:n.state}),O.wU))?n:[],a=o.map((({name:e,id:t})=>({label:e,value:-1!==t?t:void 0})));return{spark:"element",content:e=>e({spark:"select",label:"组件状态",tooltip:"选择互动组件的状态",value:t,options:a,onChange:e=>{const{name:t,duration:n=0}=o.find((t=>t.id===(null!=e?e:-1)));r([e,t,n])}})}}}}]}}},{spark:"group",label:"播放",hidden:4===t.typeOfPlay,content:{spark:"block",status:"closed",content:{spark:"grid",content:[{spark:"label",tooltip:"是否循环播放",label:"循环播放",content:{spark:"boolean",index:"loop",defaultValue:!1}},{spark:"check",index:"loop",check:{hidden:(e=!1)=>!e},content:{spark:"flex",content:[{spark:"number",index:"loopInterval",label:"循环间隔",tooltip:"每次循环的停顿间隔时间",defaultValue:0,precision:2,ratio:-1e3,unit:"s",step:10,min:0},{index:"loopTimes",spark:"number",label:"循环次数",defaultValue:-1,tooltip:"循环次数，-1代表一直循环",precision:0,unit:"次",step:1,min:-1}]}},{spark:"check",index:[],check:{hidden:()=>(0,O.v9)((({project:t})=>{const[r]=(0,h.qC)((0,h.v$)((0,h.zh)(t)),e.id,!0);return r&&!["FrameAnime"].includes(r.type)}),O.wU)},content:{spark:"select",label:"播放方式",index:"direction",options:[{label:"正序",value:"normal"},{label:"倒序",value:"reverse"},{label:"来回播放",value:"pingpong"}],defaultValue:"normal"}}]}}},{spark:"group",label:"时间",hidden:4===t.typeOfPlay,content:{spark:"block",status:"closed",content:{spark:"grid",content:[{spark:"number",index:"time",label:"开始时间",tooltip:"控制器的开始时间",defaultValue:0,precision:2,ratio:-1e3,unit:"s",step:10,min:0},{spark:"label",label:"不受场景播放状态影响",tooltip:"动画是否受场景播放状态影响，设置为开启后，即使当前场景停止播放，动画依然会继续运行，用来实现场景停止播放，但一些动画依然继续播放的效果",content:{spark:"boolean",index:"playBySelf",defaultValue:!1}}]}}}]}),fr=(e,t)=>({spark:"grid",content:[(0,o.Dc)(e,t),(0,Ie.Mq)(e,t),(0,Ce.yf)(e,t)]});var mr=r(42014);const yr=(e,t)=>({spark:"group",label:"蓝图信息",content:{spark:"grid",content:[(0,ur.Y)(e,t)]}})},47681:function(e,t,r){"use strict";r.d(t,{E:function(){return A}});var n=r(42761),o=r(19104),a=r(3799),i=r(80926),l=r(36263),c=r(53983),s=r(22142),p=r(40985),u=r(55309),d=r(73760),f=r(70072),m=r(22142),y=Object.defineProperty,b=Object.defineProperties,h=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,k=(e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,x=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&k(e,r,t[r]);if(g)for(var r of g(t))O.call(t,r)&&k(e,r,t[r]);return e};const E=32;var w={spark:"value",index:"color",content(e,t){const{getState:r,dispatch:i}=(0,n.oR)(),[y,k]=(0,s.useState)(!1),w=(0,o.useAddNode)(),{onDelete:P}=(0,o.useOnDelete)(),j=(0,n.v9)((({project:e})=>(0,p.zh)(e))),S=j.nodes.filter((({type:e})=>"Video"===e)).map((({id:e})=>e)).reverse(),C=S.map((e=>j.props[e])),I=e=>{i((0,o.groupActions)(S.map(((t,r)=>(0,o.changeProps)([t],{enabled:r===e})))))},A=(0,s.useMemo)((()=>{const e=document.createElement("canvas");return e.height=E,e.width=E,e.getContext("2d")}),[]);return{spark:"grid",content:[{spark:"grid",hidden:!C.length,content:C.map((({url:e,name:r,_editor:n,enabled:a=!0},l)=>({spark:"element",space:e,content:()=>{const p=(0,s.useRef)(null);return(0,s.useEffect)((()=>{if(a&&p.current){const e=p.current.querySelector("video");if(!e)return void console.error("no video found");e.crossOrigin="anonymous";const r=(0,d.debounce)((()=>{A.clearRect(0,0,E,E),A.drawImage(e,0,0,e.videoWidth,e.videoHeight,0,0,E,E);const r=[0,0,0],n=A.getImageData(0,0,E,E).data;for(let e=0;e<n.length;e++)for(let t=0;t<r.length;t++)r[t]+=n[e++];const o=r.map((e=>Math.floor(4*e/n.length).toString(16).padStart(2,"0")));t(`#${o.join("")}`)}),1e3);if(4!==e.readyState)return e.addEventListener("loadeddata",r),()=>{e.removeEventListener("loadeddata",r)};r()}}),[a]),m.createElement("div",{style:{border:a?"1px solid #3955F6":"1px solid transparent",borderRadius:4},onClick:()=>{I(l)}},m.createElement(c.r,{deletable:!0,type:"NativeLoadingVideo",domRef:p,url:e,name:(null==n?void 0:n.name)||r,onChange:e=>{var t=e,{url:r}=t,c=((e,t)=>{var r={};for(var n in e)v.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&g)for(var n of g(e))t.indexOf(n)<0&&O.call(e,n)&&(r[n]=e[n]);return r})(t,["url"]);r?i((0,o.changeProps)([S[l]],{url:r,_editor:x(x({},n),c)})):(a&&S.length>1&&I((l+1)%S.length),P({nodeIds:[S[l]]}),i((0,o.selectNode)([])))}}))}})))},{spark:"element",hidden:C.length>=5,content:()=>m.createElement("div",null,m.createElement(a.sg,{placement:"bottom",title:m.createElement(m.Fragment,null,m.createElement("div",null,"尺寸要求：9:16, 720*1280px及以上"),m.createElement("div",null,"格式要求：MOV或MP4"),m.createElement("div",null,"时长要求：2~5秒"),m.createElement("div",null,"大小要求：≤5M"))},m.createElement(f.Z,{icon:m.createElement(u.Z,null),style:{width:"100%"},onClick:()=>{k(!0)}},"添加视频")),y&&m.createElement(l.O,{eleType:"NativeLoadingVideo",onClose:()=>{k(!1)},onChange:({name:e,url:t,extra:n,cover:a})=>{const l=(0,p.zh)(r().project);w({mime:"Video",name:e,url:t,cover:a,extra:n,targetId:l.nodes[0].id,dropWhere:"before",mapNode(e){var t,r,n;return e.editor=(n=x({},e.editor),b(n,h({isLocked:!0}))),(null==(r=null==(t=e.scripts)?void 0:t[0])?void 0:r.props).loop=!0,(0,p.kj)(e)}},!0).then((()=>{I(-1),i((0,o.selectNode)([]))}))}}))}]}}},P=r(62732),j=r(22142);const S={spark:"grid",content:[{spark:"group",label:j.createElement(a.HY,{id:"straight.playable.settings",head:"加载页模板化配置",placement:"leftTop",className:(0,P.iv)({".ant-tooltip-content":{transform:"translateX(-36px)"}}),body:j.createElement("div",null,"加载页包含互动素材专属标识、主副标题、加载页视频几部分内部，配置有吸引力的内容能在互动素材加载阶段留住用户，为互动素材争取更多转化可能性。")},"背景视频上传（至多5个）"),content:{spark:"grid",content:[{spark:"element",content:()=>j.createElement(i.Z.Text,{type:"secondary",style:{fontSize:12}},"背景视频会与图标、主副文案组合成多个加载动画物料，投放时会随机更换加载动画，以使直出素材感知更丰富")},w]}},{spark:"group",label:"主标题填写",content:{spark:"string",index:"title",placeholder:"请输入加载页主标题文案，14个字以内",max:14}},{spark:"group",label:"副标题填写",content:{spark:"string",index:"subTitle",placeholder:"请输入加载页副标题文案，12个字以内",max:12}},{spark:"group",label:"加载图标",content:{spark:"select",index:"icon",label:"选择",options:[{label:"图标1",value:"material/preview/cb756a09718208edd5dee49e80f1ed7c/sequence.json"},{label:"图标2",value:"material/preview/e6079c7c05f93532a3e1b87dc7f541da/sequence.json"},{label:"图标3",value:"material/preview/92427d37c42f1ecad4e85d70f995bb9f/sequence.json"},{label:"图标4",value:"material/preview/821616ef37d20268c7d0a3ee0d16cf22/sequence.json"}]}}]};var C=r(3207),I=r(60439);function A(){const e=M();return(0,C.default)(e)}const M=()=>{const{dispatch:e}=(0,n.oR)(),t=(0,I.xe)(),r=(0,n.v9)((({project:e})=>(0,p.zh)(e)));return{spark:"context",content:S,provide:()=>{const[n]=r.nodes.filter((({type:e})=>"Sprite"===e)),[a,i]=r.nodes.filter((({type:e})=>"Text"===e)),[l]=r.nodes.filter((({type:e})=>"FrameAnime"===e));return{useValue(c){var s,p;switch(c){case"title":return{value:[r.props[a.id].text],onChange([t]){e((0,o.changeProps)([a.id],{text:t}))}};case"subTitle":return{value:[r.props[i.id].text],onChange([t]){e((0,o.changeProps)([i.id],{text:t}))}};case"color":return{value:[r.props[n.id].color],onChange([t]){e((0,o.changeProps)([n.id],{color:t}))}};case"icon":return{value:["material/private/preview/4b3f06ff990f5b0e0ff59f4030bf74a1/sequence.json"===(null==(s=r.props[null==l?void 0:l.id])?void 0:s.url)?"material/preview/e6079c7c05f93532a3e1b87dc7f541da/sequence.json":null==(p=r.props[null==l?void 0:l.id])?void 0:p.url],onChange([r]){(null==l?void 0:l.id)&&(e((0,o.changeProps)([l.id],{url:r})),t())}};default:return{value:[],onChange(){throw new Error}}}}}}}}},36006:function(e,t,r){"use strict";r.d(t,{Z:function(){return M}});var n=r(22142),o=r(68961),a=r(2961),i=r(32078),l=r(76151),c=r(61754),s=r(62255),p=r(34394),u=r(61645),d=r(19104),f=r(13883),m=r(87491),y=r(62732),b=r(42761),h=r(40985),g=r(78405),v=Object.defineProperty,O=Object.defineProperties,k=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,P=(e,t,r)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const{Option:j}=o.Z;var S,C;(C=S||(S={})).Scene="场景",C.Component="互动组件",C.Model="模型",C.Particle3D="粒子";const I=[{required:!0,whitespace:!0,message:"请输入项目名称"},{max:20,message:"项目名称不可超过20个字"}],A=[{whitespace:!0,message:"项目描述不能为空格"},{max:128,message:"项目描述不可超过128个字"}];function M({onClose:e,onPublish:t,resourceType:r="Scene",is3D:d=!1,scene:y,requireCover:b=!0}){var h,v;const[C]=a.Z.useForm(),[M,R]=(0,n.useState)(!1),N=(e=>{const[t,r]=(0,n.useState)([]);return(0,n.useEffect)((()=>{(0,u.zs)({category:9,pageSize:999,origin:1,parentName:S[e]}).then((({tags:e})=>{r(e)}))}),[e]),t})(r),V=D(y);return n.createElement(i.Z,{open:!0,title:`${S[r]}信息录入`,width:720,centered:!0,onOk:()=>C.submit(),onCancel:e,okText:"发布",cancelText:"取消"},n.createElement(l.Z,{spinning:M},n.createElement(a.Z,{form:C,colon:!1,labelAlign:"right",onFinish:n=>{R(!0);try{t((o=((e,t)=>{for(var r in t||(t={}))E.call(t,r)&&P(e,r,t[r]);if(x)for(var r of x(t))w.call(t,r)&&P(e,r,t[r]);return e})({},n),a={extra:JSON.stringify({previewVideo:n.previewVideo})},O(o,k(a)))).then((()=>{c.ZP.success(`${S[r]}发布成功`),R(!1),e()}))}catch(e){c.ZP.error(e.message||"发布失败"),R(!1)}var o,a},labelCol:{span:6},wrapperCol:{span:14},key:Number(Boolean(y)),initialValues:{name:null==y?void 0:y.name,cover:null==y?void 0:y.editor.capture,orderIds:[]}},!d&&n.createElement(a.Z.Item,{name:"platformTags",label:`${S[r]}标签：`,rules:[{required:!0,message:`请选择${S[r]}标签`}]},n.createElement(o.Z,{placeholder:"请选择",showArrow:!0},"Component"===r?n.createElement(n.Fragment,null,n.createElement(o.Z.OptGroup,{label:"玩法组件"},N.filter((e=>"玩法组件"===e.parentName)).map((e=>{const t=e.id;return n.createElement(j,{key:t,value:t},e.name)}))),n.createElement(o.Z.OptGroup,{label:"附加组件"},N.filter((e=>"附加组件"===e.parentName)).map((e=>{const t=e.id;return n.createElement(j,{key:t,value:t},e.name)}))),n.createElement(o.Z.OptGroup,{label:"视频组件"},n.createElement(j,{key:null==(h=N.filter((e=>"视频组件"===e.name))[0])?void 0:h.id,value:null==(v=N.filter((e=>"视频组件"===e.name))[0])?void 0:v.id},"视频组件"))):N.map((e=>{const t=e.id;return n.createElement(j,{key:t,value:t},e.name)})))),n.createElement(a.Z.Item,{label:`${S[r]}名称：`,name:"name",rules:I},n.createElement(s.Z,{type:"string",placeholder:`请输入${S[r]}名称`})),n.createElement(a.Z.Item,{name:"cover",label:"上传封面：",rules:[{required:b,message:`请上传${S[r]}封面`}]},n.createElement(f.Z,null)),n.createElement(a.Z.Item,{name:"previewVideo",label:"预览视频：",rules:[{message:"请上传预览视频"}]},n.createElement(g.Z,null)),y&&V.length>0&&n.createElement(a.Z.Item,{name:"orderIds",label:"关联场景：",tooltip:""},n.createElement(_,{scene:y})),n.createElement(a.Z.Item,{label:`${S[r]}描述：`,name:"description",rules:A},n.createElement(s.Z.TextArea,{showCount:!0,maxLength:128,className:m.Z.textarea,placeholder:`请输入${S[r]}描述`})),n.createElement(a.Z.Item,{label:"版权控制：",name:"isAuthControl",valuePropName:"checked"},n.createElement(p.Z,{className:m.Z.checkbox},"版权控制")))))}const _=({scene:e,value:t,onChange:r})=>{const{width:o,height:a}=(0,d.useProjectHeight)(100),i=D(e,t);return n.createElement("div",{className:(0,y.iv)({display:"flex",position:"relative",overflowX:"auto","&::-webkit-scrollbar":{display:"none"}})},i.map(((e,i)=>n.createElement("div",{key:i,className:(0,y.iv)({border:"1px solid #d9d9d9",borderRadius:4,flex:"none",position:"relative","&+&":{marginLeft:8}}),onClick:({currentTarget:e})=>{e.scrollIntoView({inline:"center",behavior:"smooth"})}},n.createElement("img",{style:{width:o,height:a},src:e.editor.capture}),n.createElement(p.Z,{style:{position:"absolute",top:8,right:8},checked:null==t?void 0:t.includes(e.orderId),onChange:({target:{checked:n}})=>{r(n?(t||[]).concat(e.orderId):(t||[]).filter((t=>t!==e.orderId)))}})))))},D=(e,t)=>{const{getState:r}=(0,b.oR)();return(0,n.useMemo)((()=>e?function(e,t,r=[]){const n=new Set;function*o(t=[]){for(const{props:{script:r,sceneId:n,scripts:i,elseScripts:l}}of t){if("ChangeScene"===r&&"number"==typeof n)try{yield*a((0,h._N)(e,n))}catch(e){}yield*o(i),Array.isArray(l)&&(yield*o(l))}}function*a(e){if(!n.has(e.orderId)&&(n.add(e.orderId),yield e,r.includes(e.orderId)||e.orderId===t.orderId))for(const{type:t,scripts:r}of Object.values(e.props))"Script"===t&&(yield*o(r))}return Array.from(a(t))}(r().project,e,t).slice(1):[]),[e,r,t])}},66716:function(e,t,r){"use strict";var n=r(3197),o=r(19104),a=r(51908),i=r(40985),l=Object.defineProperty,c=Object.defineProperties,s=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&f(e,r,t[r]);if(p)for(var r of p(t))d.call(t,r)&&f(e,r,t[r]);return e},y=(e,t)=>c(e,s(t)),b=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));t.Z=(e,t,r,l,c,s=!1)=>b(void 0,null,(function*(){if(t.editor.playing)return;const{id:p}=t;if(p){const{copyNode:u,createScenes:d}=(0,a.KL)(t,!1,!0,((e,t)=>"number"==typeof t),(e=>b(this,null,(function*(){const t=r.find((({orderId:t})=>t===e));if(!t)throw new Error;return[t.sceneId,t]}))),((e,t)=>b(this,null,(function*(){if(void 0===e&&t){const e=(c||[]).find((e=>e.name===t));return[null==e?void 0:e.id,e]}{const t=(c||[]).find((({orderId:t})=>t===e));if(!t)throw new Error;return[t.id,t]}}))));let f=(0,i.GV)(y(m({},r[0]),{parentId:r[0].sceneId}));f=y(m({},f),{nodes:yield u(f.nodes)});const{components:h,customScripts:g}=yield d(),v=h.find((({parentId:e})=>e===r[0].sceneId));if(v)e((0,o.addScene)(v,l++));else{const{id:t,orderId:a}=yield n.aY({projectId:p,name:r[0].name||"未命名场景",sceneContent:JSON.stringify(f)});s?(e((0,o.addComponent)((0,i.oY)((0,i.m7)(f),t,a))),l++):e((0,o.addScene)((0,i.oY)((0,i.m7)(f),t,a),l++))}for(const t of h)t!==v&&("Scene"===t.type?e((0,o.addScene)(t,l++)):(e((0,o.addComponent)(t)),l++));for(const t of g)e((0,o.addCustomScript)(t))}else for(const t of r)e((0,o.addScene)(t,l++))}))},1850:function(e,t,r){"use strict";r.d(t,{$:function(){return m},a:function(){return y}});var n=r(42761),o=r(19104),a=r(73760),i=r(40985),l=r(23247),c=r.n(l),s=r(7910),p=r(81749),u=r(48837),d=r(61645),f=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const m=()=>{const{getState:e,dispatch:t}=(0,n.oR)(),r=t=>e().project.scenes.find((e=>e.id===t)),a=()=>{const t=e().project.editor.selectedSceneId;return r(t)},l=()=>{var e;const t=a();return t&&(null==(e=Object.entries(t.props).find((e=>"Scene3D"===e[1].type)))?void 0:e.shift())};return{getSceneById:r,getProject:()=>e().project,onSelectScene:e=>{t((0,o.changeEditor)(0,{selectedSceneId:e,settingsOn:!1}))},onChangeSceneName:(e,r)=>{t((0,o.changeProps)([e],{name:r}))},getCurrentSceneNode3DId:l,onChangeCurrentScene3DProps:e=>{const r=Number(l());r&&t((0,o.changeProps)([r],e))},getSceneFromUrl:(e,t)=>f(void 0,null,(function*(){if("number"==typeof t)return(0,i._N)(e,t);const{data:r}=yield c().get((0,s.GR)(t)),[n]=yield(0,p.Rr)(e.id,[(0,i.m7)(r)]);return n.orderId=0,n})),changeSceneHiddenProperty:()=>f(void 0,null,(function*(){const e=a(),r=l();if(e&&r){const n=yield((e,t)=>f(void 0,null,(function*(){var r,n;const o=null==(n=null==(r=(0,i.GV)(e))?void 0:r.nodes)?void 0:n.find((e=>e.id===Number(t)));return o?yield(0,u.generateScene3DProps)(o):void 0})))(e,Number(r));if(n){const e=n.reflectionUrl;if("object"==typeof e){const[t,r]=Object.entries(e.files)[0],o=new File([r],t),{data:a}=yield(0,d.hM)({file:o,name:t,onPlatform:!1,type:0});n.reflectionUrl=(0,s.Hn)(a.url)}t((0,o.changeProps)([Number(r)],n))}}})),getCurrentSceneNode3DProps:()=>{var e;const t=a();return t&&(null==(e=Object.entries(t.props).find((e=>"Scene3D"===e[1].type)))?void 0:e[1])}}},y=(e,t)=>(0,n.v9)((({project:r})=>{const n=r.scenes.find((t=>t.id===e));return Object.fromEntries(Object.entries(t).map((([e,t])=>[e,(0,a.get)(n,t)])))}),n.wU)},91259:function(e,t,r){"use strict";r.d(t,{s:function(){return d}});var n=r(66234),o=r(24113),a=r(23515),i=r(41502),l=r(42761),c=r(40985),s=r(61754);const p={0:[0],1:[1],2:[2],3:[3],4:[4],5:[5]},u=[{name:"默认",key:"0"},{name:"平地",key:"1"},{name:"玩家",key:"2"},{name:"敌人",key:"3"},{name:"金币",key:"4"},{name:"子弹",key:"5"}],d=()=>{const{dispatch:e,getState:t}=(0,l.oR)();return{resetLayer:()=>{Object.entries(p).forEach((([t,r])=>{e((0,n.p)(t,r))})),u.forEach(((t,r)=>{e((0,o.o)(r,t))}))},initialLayer:()=>{void 0===t().project.settings.layerCollisionName&&(Object.entries(p).forEach((([t,r])=>{e((0,n.p)(t,r))})),u.forEach(((t,r)=>{e((0,o.o)(r,t))})))},updateName:(t,r)=>{e((0,o.o)(r,t))},updateCollisions:(t,r)=>{e((0,n.p)(t,r))},addCollision:()=>{const{project:{settings:{layerCollisionName:r,layerCollisions:a}}}=t(),i=r.length;let l=1;for(;r.map((e=>e.name)).includes(`碰撞组${l}`);)l++;let c=0;for(;Object.keys(a).includes(`${c}`);)c++;e((0,o.o)(i,{name:`碰撞组${l}`,key:`${c}`})),e((0,n.p)(c,[c]))},deleteCollision:r=>{(0,c.KC)(t().project,r)?s.ZP.error("碰撞组正在被使用，无法删除"):(e((0,a.B)(r)),e((0,i.y)(r)))}}}},43825:function(e,t,r){"use strict";r.d(t,{A:function(){return C},H:function(){return S}});var n=r(32078),o=r(70072),a=r(22142),i=r(62255),l=r(34394),c=r(54520),s=r(33058),p=r(62732),u=r(42761),d=r(91259),f=r(64515),m=r(22142),y=Object.defineProperty,b=Object.defineProperties,h=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,k=(e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,x=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&k(e,r,t[r]);if(g)for(var r of g(t))O.call(t,r)&&k(e,r,t[r]);return e};const E=e=>""!==e,w=({idx:e,initialValue:t,hasDelete:r,onSave:n,onDelete:o})=>{const[l,c]=(0,a.useState)(t),[p,u]=(0,a.useState)(!1),[d,y]=(0,a.useState)(!1),b=(0,a.useRef)(null);return(0,a.useEffect)((()=>{b.current&&(p?b.current.focus():b.current.blur())}),[p]),m.createElement("div",{style:{width:"100px",display:"flex",alignItems:"center"},onMouseLeave:()=>{y(!1)},onMouseEnter:()=>{y(!0)}},m.createElement(i.Z,{ref:b,prefix:m.createElement("span",{style:{color:"gray",fontSize:"11px"}},e),style:{marginRight:"3px",width:"80px"},value:l,bordered:p,status:""===l?"error":"",placeholder:"不能为空",onChange:e=>{c(e.target.value)},onPressEnter:()=>{var e,t,r;const o=null!=(r=null==(t=null==(e=b.current)?void 0:e.input)?void 0:t.value)?r:"碰撞组";E(o)&&(n(o),u(!1))},onBlur:()=>{var e,r,o;const a=null!=(o=null==(r=null==(e=b.current)?void 0:e.input)?void 0:r.value)?o:"碰撞组";E(a)?n(a):c(t),u(!1)},onFocus:()=>{u(!0)}}),d&&r&&m.createElement(s.Z,{component:f.Z,onClick:o}))};function P(){const{updateName:e,updateCollisions:t,deleteCollision:r,resetLayer:n}=(0,d.s)();window.resetLayer=n;const{layerCollisions:o={},layerCollisionName:a=[]}=(0,u.v9)((({project:{settings:e}})=>({layerCollisions:e.layerCollisions,layerCollisionName:e.layerCollisionName})),u.wU),i=(e,r,n)=>o=>{o.target.checked?n.push(Number(r)):n=n.filter((e=>e!==Number(r))),t(e,[...n])},s=[{title:"",width:"110px",dataIndex:"name",key:"name",fixed:"left",ellipsis:!0,render(t,n,o){const{name:a,key:i}=t;return m.createElement(w,{idx:i,initialValue:a,hasDelete:"0"!==i,onSave:r=>{var n;((t,r)=>{e(t,r)})((n=x({},t),b(n,h({name:r}))),o)},onDelete:()=>{r(i)}})}},...null==a?void 0:a.map((({name:e,key:t},r)=>({title:e,width:"80px",dataIndex:`col${t}`,ellipsis:!0,key:r,render:e=>e.disabled?"-":m.createElement(l.Z,x({},e))})))],f=[];for(let e=0;e<a.length;e++){const{key:t,name:r}=a[e],n={key:t,name:{name:r,key:t}},l=o[t];null==a||a.forEach((({key:r},o)=>{n[`col${r}`]={disabled:o>e,checked:null==l?void 0:l.includes(Number(r)),onChange:i(t,r,l)}})),f.push(n)}return m.createElement(c.Z,{className:(0,p.iv)({".ant-input":{fontSize:"12px",padding:"4px 6px"},".ant-table":{fontSize:"12px"},".ant-table-tbody > tr > td, .ant-table-thead > tr > th":{padding:"12px",textAlign:"center",fontWeight:"unset"},".ant-table-tbody > tr > td":{padding:"12px 4px"}}),columns:s,dataSource:f,pagination:!1,scroll:{x:"100%",y:500}})}var j=r(22142);const S={showModal:()=>{throw new Error("Empty function")},hideModal:()=>{throw new Error("Empty function")}},C=function(){const{addCollision:e}=(0,d.s)(),[t,r]=(0,a.useState)(!1),{enabled3d:i,layerCollisionName:l}=(0,u.v9)((({project:{settings:{enabled3d:e,layerCollisionName:t=[]}}})=>({enabled3d:e,layerCollisionName:t})),u.wU),c=()=>{r(!1)};return S.showModal=()=>{r(!0)},S.hideModal=c,i?j.createElement(n.Z,{style:{padding:"12px 24px"},className:(0,p.iv)({".ant-modal-body":{padding:"12px 24px"}}),title:"碰撞组设置",open:t,onCancel:c,width:650,footer:!1,destroyOnClose:!0},l.length<31&&j.createElement(o.Z,{style:{marginBottom:"12px"},onClick:e},"新增碰撞组"),j.createElement(P,null)):null}},75919:function(e,t,r){"use strict";r.d(t,{Z:function(){return $}});var n=r(33058),o=r(29656),a=r(23762),i=r(15942),l=r(18789),c=r(34219),s=r(41506),p=r(89099),u=r(27904),d=r(49814),f=r(96241),m=r(94670),y=r(5028),b=r(64983),h=r(7997),g=r(90906),v=r(65520),O=r(43230),k=r(29043),x=r(28476),E=r(31090),w=r(24478),P=r(41110),j=r(51848),S=r(8722),C=r(40378),I=r(63451),A=r(79824),M=r(56120),_=r(83509),D=r(78339),R=r(19061),N=r(85770),V=r(22142),B=Object.defineProperty,Z=Object.defineProperties,T=Object.getOwnPropertyDescriptors,z=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,F=(e,t,r)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Y=e=>{return V.createElement(i.Z,(t=((e,t)=>{for(var r in t||(t={}))L.call(t,r)&&F(e,r,t[r]);if(z)for(var r of z(t))U.call(t,r)&&F(e,r,t[r]);return e})({},e),Z(t,T({theme:"filled"}))));var t};function $({type:e,asMask:t}){if(t)return V.createElement(n.Z,{component:Y});switch(e){case"DragonBones":return V.createElement(n.Z,{component:l.Z});case"Spine":return V.createElement(n.Z,{component:c.Z});case"Controller":return V.createElement(n.Z,{component:s.Z});case"Scene":return V.createElement(n.Z,{component:p.Z});case"Sound":case"PVSound":case"VRSound":return V.createElement(n.Z,{component:u.Z});case"Video":case"PVVideo":case"VRVideo":return V.createElement(n.Z,{component:d.Z});case"PVAlphaVideo":case"AlphaVideo":return V.createElement(n.Z,{component:f.Z});case"Text":case"PVText":case"VRText":return V.createElement(o.Z,null);case"Shape":case"PVClickArea":return V.createElement(n.Z,{component:m.Z});case"PVFrameAnime":case"FrameAnime":return V.createElement(n.Z,{component:y.Z});case"Particle":return V.createElement(n.Z,{component:b.Z});case"Lottie":return V.createElement(n.Z,{component:h.Z});case"Animation":case"Animation3D":return V.createElement(n.Z,{component:g.Z});case"Container":case"Sprite3D":return V.createElement(n.Z,{component:v.Z});case"Button":case"PVButton":case"VRButton":return V.createElement(n.Z,{component:O.Z});case"PVDragger":case"PVSlider":return V.createElement(n.Z,{component:k.Z});case"PVGuider":return V.createElement(n.Z,{component:x.Z});case"Camera":return V.createElement(n.Z,{component:E.Z});case"Light":return V.createElement(n.Z,{component:w.Z});case"MeshSprite3D":case"SkinnedMeshSprite3D":return V.createElement(n.Z,{component:P.Z});case"Scene3D":return V.createElement(n.Z,{component:j.Z});case"Model":return V.createElement(n.Z,{component:S.Z});case"Live2d":return V.createElement(n.Z,{component:C.Z});case"Sprite":case"PVSprite":case"VRSprite":return V.createElement(a.Z,null);case"Particle3D":case"ParticleSystem3D":return V.createElement(n.Z,{component:I.Z});case"ShurikenParticle3D":return V.createElement(n.Z,{component:A.Z});case"Trail3D":return V.createElement(n.Z,{component:M.Z});case"PanoramaSpace":return V.createElement(n.Z,{component:_.Z});case"PanoramaHotSpot":return V.createElement(n.Z,{component:D.Z});case"Blueprint":return V.createElement(n.Z,{component:R.Z});default:return V.createElement(n.Z,{component:N.Z})}}},60439:function(e,t,r){"use strict";r.d(t,{ZP:function(){return xt},xe:function(){return kt},QO:function(){return P}});var n=r(22142),o=r(48837),a=r(61754),i=r(291),l=r(42761),c=r(19104),s=r(71092),p=r(79630),u=r.n(p),d=r(40985),f=r(98468),m=r(80330),y=Object.defineProperty,b=Object.defineProperties,h=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,k=(e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,x=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&k(e,r,t[r]);if(g)for(var r of g(t))O.call(t,r)&&k(e,r,t[r]);return e},E=(e,t)=>b(e,h(t));const w={current:null},P=()=>{const{getState:e}=(0,l.oR)();return(0,n.useCallback)(((t,r,n)=>{var o;const{project:a}=e();return null==(o=w.current)?void 0:o.then((e=>e.capture(null!=t?t:a.editor.selectedSceneId,null!=r?r:260,null!=n?n:(0,c.getProjectHeight)(a,260).height)))}),[])};var j=e=>{const[t,r]=(0,n.useMemo)((()=>S()),[]),[a,i]=(0,n.useMemo)((()=>S()),[]),{getState:c,dispatch:s}=(0,l.oR)();return(0,n.useEffect)((()=>{if(e.current)return w.current=Promise.resolve(new o.Editor(e.current,i,r,(e=>{const t=(0,d.vk)((0,d.q7)(c().project),e);return["Material","CustomScript","Cubemap","PanoramaData","Texture2D"].includes(t.type)?t:(0,d.GV)(t)}),(e=>{return void 0,null,t=function*(){return(0,d.se)((0,d.q7)(c().project),e)},new Promise(((e,r)=>{var n=e=>{try{a(t.next(e))}catch(e){r(e)}},o=e=>{try{a(t.throw(e))}catch(e){r(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);a((t=t.apply(undefined,null)).next())}));var t}))),a.on(s)}),[]),{editorRef:w,playerSender:t,editorSender:a}};const S=()=>{let e=[],t=[];return[{on(t){return e.push(t),()=>{e=e.filter((e=>e!==t))}},emit(e){for(const r of t)r(e)}},{on(e){return t.push(e),()=>{t=t.filter((t=>t!==e))}},emit(t){for(const r of e)r(t)}}]};var C=r(5635),I=r(26840),A=r(70072),M=r(76631),_=r(38878),D=r(26995),R=r(33058),N=r(62732),V=r(22142),B=(0,n.memo)((()=>{const e=(0,l.v9)((e=>e.project.editor.canvasScale)),t=(0,l.I0)(),r=(0,n.useCallback)(((e,r)=>{t((0,c.changeCanvasScale)(e,r))}),[t]),{token:o}=C.Z.useToken();return V.createElement("div",{className:(0,N.cx)(Z,(0,N.iv)(T),(0,N.iv)({background:o.colorBgContainer}))},V.createElement(I.Z,{title:e<=.2?"已缩小到最小值":"缩小",placement:"bottom"},V.createElement(A.Z,{type:"text",size:"small",disabled:e<=.2,icon:V.createElement(R.Z,{component:_.Z}),onClick:t=>{t.stopPropagation(),e>1?r(Math.ceil(e)-1):e>.2&&r(Math.ceil(10*e-1)/10)}})),V.createElement(M.Z,{size:"small",controls:!1,bordered:!1,className:`${Z}-num`,min:.2,max:5,value:e,onChange:e=>{r(e)},formatter:e=>`${Math.floor(100*e)}%`,parser:e=>Number(e.replace("%",""))/100}),V.createElement(I.Z,{title:e>=5?"已放大到最大值":"放大",placement:"bottom"},V.createElement(A.Z,{type:"text",size:"small",disabled:e>=5,icon:V.createElement(R.Z,{component:D.Z}),onClick:t=>{t.stopPropagation(),e<1?r(Math.floor(10*e+1)/10):e<5&&r(Math.floor(e)+1)}})))}));const Z=(0,N.iv)({display:"flex",justifyContent:"center",alignItems:"center",padding:"0 8px","&-num":{padding:0,fontSize:12,maxWidth:48}}),T={height:34,borderRadius:34,boxShadow:"0px 2px 8px rgba(0,0,0,0.08)"};var z=r(46332),L=r(22142),U=Object.defineProperty,F=Object.defineProperties,Y=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,J=(e,t,r)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,K=(e,t)=>{for(var r in t||(t={}))Q.call(t,r)&&J(e,r,t[r]);if($)for(var r of $(t))W.call(t,r)&&J(e,r,t[r]);return e},H=(0,n.memo)((()=>{const e=(0,l.I0)(),t=(0,n.useCallback)(((t,r)=>{e((0,c.changeCanvasScale)(t,r))}),[e]);return L.createElement(I.Z,{title:"重置",placement:"bottom"},L.createElement(A.Z,{type:"default",size:"small",style:(r=K({},T),o={display:"flex",alignItems:"center",justifyContent:"center",width:34},F(r,Y(o))),icon:L.createElement(z.Z,{style:{lineHeight:0,fontSize:"16px"}}),onClick:e=>{e.stopPropagation(),t(1,!0)}}));var r,o})),G=r(45858),q=r(73760),X=r(22142),ee=Object.defineProperty,te=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,oe=(e,t,r)=>t in e?ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ae=(e,t)=>{for(var r in t||(t={}))re.call(t,r)&&oe(e,r,t[r]);if(te)for(var r of te(t))ne.call(t,r)&&oe(e,r,t[r]);return e},ie=(0,n.memo)((function(){(0,c.useEditorHotkeys)(`${(0,d.zO)("command","control")}+shift+o`,(()=>{e({type:"Scene",id:t})}));const{trigger:e}=(0,s.Z)("Blueprint"),[t,r]=(0,l.v9)((({project:e})=>{var t,r,n;const o=(0,d.zh)(e),a=null==(t=o.scripts)?void 0:t.find((e=>"Blueprint"===e.type)),i=!a||0===(null==(n=null==(r=o.props[a.id])?void 0:r.scripts)?void 0:n.length);return[o.id,i]}),l.wU);return X.createElement("div",null,X.createElement(I.Z,{title:"场景蓝图(⇧+⌘+o)",placement:"bottom"},X.createElement(A.Z,{type:r?"default":"primary",style:ae({},(0,q.omit)(T,r?[]:["background"])),onClick:()=>{e({type:"Scene",id:t})}},X.createElement(G.Z,{dot:!0,color:"red"},X.createElement("span",{className:(0,N.cx)(!r&&(0,N.iv)({color:"#fff"}))},"场景蓝图")))))})),le=r(98466),ce=r(34394),se=r(2961),pe=r(32078),ue=r(68961);const de={Sun:"太阳",Earth:"地球",Moon:"月球",Sky:"天空",Tree:"树",River:"河流",Mountain:"山脉",Ocean:"海洋",Beach:"海滩",Forest:"森林",Flower:"花",Grass:"草",Rock:"岩石",Lake:"湖泊",Rain:"雨",Snow:"雪",Cloud:"云",Storm:"暴风雨",Thunder:"雷声",Lightning:"闪电",Volcano:"火山",Waterfall:"瀑布",Stream:"小溪",Valley:"山谷",Desert:"沙漠",Iceberg:"冰山",Aurora:"极光",Rainbow:"彩虹",Fog:"雾",Sunlight:"阳光",Raindrop:"雨滴",Dew:"露珠",Hail:"冰雹",Snowflake:"雪花",Mist:"薄雾",Breeze:"微风",Wind:"风",Hurricane:"飓风",Typhoon:"台风",Tornado:"龙卷风",Earthquake:"地震",Tsunami:"海啸",Flood:"洪水",Wildfire:"野火",Blizzard:"暴风雪",Landslide:"山崩","Tree trunk":"树干","Tree bark":"树皮","Tree leaves":"树叶","Tree branch":"树枝","Tree root":"树根","Flower petal":"花瓣","Flower stem":"花茎","Flower bud":"花蕾","Grass blade":"草刺","Grass seed":"草种","Mountain peak":"山峰","Mountain range":"山脉","Mountain trail":"山径","Ocean wave":"海浪","Ocean current":"海流","Ocean tide":"潮汐","Ocean depth":"海洋深度","Beach sand":"沙滩","Beach shell":"海贝壳","Beach rock":"海岸岩石","Forest canopy":"森林冠层","Forest floor":"森林地面","Forest animals":"森林动物"},fe={"game art":"游戏艺术","oil painting":"油画","fantasy vivid colors":"色彩动人",photorealistic:"照片"};var me=r(22142),ye=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const be=ce.Z.Group;var he=(0,n.memo)((function(){const[e,t]=(0,n.useState)(!1),[r,o]=(0,n.useState)(!1),[i]=se.Z.useForm();return me.createElement("div",null,me.createElement(I.Z,{title:"AI图片生成",placement:"bottom"},me.createElement(A.Z,{type:"default",style:T,onClick:()=>ye(this,null,(function*(){t(!0)}))},"AI")),e&&me.createElement(pe.Z,{open:!0,title:"AI图像生成",okText:r?"图片生成中...":"生成图片",okButtonProps:{disabled:r,loading:r},cancelButtonProps:{disabled:r},onCancel:()=>{t(!1)},onOk:()=>{i.validateFields().then((e=>ye(this,null,(function*(){var t,r;try{o(!0);const{keywords1:n=[],keywords2:a=[],keywords3:i=[]}=e,{data:{data:l}}=yield le.dJ.post("faas/text2image",{text:[[...n,...a,...i].join(",")]});if(!(null==(r=null==(t=null==l?void 0:l.images)?void 0:t[0])?void 0:r.data))throw new Error("图像生成失败，请重新尝试");{const e=new Uint8Array(l.images[0].data).buffer;(0,d.lm)(new Blob([e],{type:"image/png"}),`ai-${Date.now()}.png`)}}catch(e){a.ZP.error(e.message)}finally{o(!1)}}))))}},me.createElement(se.Z,{form:i,labelCol:{span:6},wrapperCol:{span:18}},me.createElement(se.Z.Item,{name:"keywords1",label:"风格"},me.createElement(be,{options:Object.entries(fe).map((([e,t])=>({label:t,value:e})))})),me.createElement(se.Z.Item,{name:"keywords2",label:"预设关键词"},me.createElement(ue.Z,{mode:"multiple",placeholder:"预设关键词",allowClear:!0,options:Object.entries(de).map((([e,t])=>({label:t,value:e})))})),me.createElement(se.Z.Item,{name:"keywords3",label:"自定义关键词"},me.createElement(ue.Z,{mode:"tags",placeholder:"自定义关键词（英文）",allowClear:!0})))))})),ge=r(51514),ve=r(22142),Oe=(0,n.memo)((({bottom:e=16,blueprint:t})=>{const r=(0,ge.FJ)();return ve.createElement("div",{className:(0,N.iv)({position:"absolute",display:"flex",bottom:e,right:16,columnGap:8})},r&&ve.createElement(he,null),ve.createElement(B,null),ve.createElement(H,null),t&&ve.createElement(ie,null))}));const ke={};var xe=Object.defineProperty,Ee=Object.defineProperties,we=Object.getOwnPropertyDescriptors,Pe=Object.getOwnPropertySymbols,je=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,Ce=(e,t,r)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ie=(0,q.throttle)((e=>(0,c.changeMoment)(e,!0)),16);var Ae=r(19131),Me=r(76673),_e=r(44258),De=r(41204),Re=r(65164),Ne=r(76566),Ve=r(22669),Be=r(22142);const Ze=["rgb(200 200 200)","rgb(255,255,255)"],Te=["rgb(50 50 50 / 90%)","rgb(64 101 247)"];var ze=(0,n.memo)((function(){const[e,t]=(0,Re.Z)("tool3d.current.handler.type",o.Tool3DType.Move),{dispatch:r,getState:a}=(0,l.oR)(),{trigger:i}=(0,s.Z)("EmitStateEvent"),{edit3d:p}=(0,c.useEditor)("edit3d"),u=(0,c.useProject)("type"),{typeOfPlay:f,category:m}=(0,c.useProject)("settings"),y=3===f&&3===m,b=(0,Ve.LX)();return(0,n.useEffect)((()=>{setTimeout((()=>{i({type:o.ActionType.Toolbar,tool3d:e})}),0)}),[i,e]),(0,De.y)("1,2,3",(({key:e})=>{const{editor:{edit3d:r}}=(0,d.zh)(a().project);r&&t(Number(e)-1)})),Be.createElement("div",{className:(0,N.iv)({position:"absolute",left:y?"":5,right:y?5:"",top:5,display:"flex",flexDirection:y?"row-reverse":"row"})},("Project"===u||(0,Ne.y_)(a().project))&&Be.createElement(I.Z,{title:p?"开启2D视图":"关闭2D视图"},Be.createElement(A.Z,{type:"text",style:{background:Te[p?0:1]},className:(0,N.cx)((0,N.iv)({pointerEvents:"auto",margin:"0 1px"})),icon:Be.createElement(R.Z,{component:Le,className:(0,N.cx)((0,N.iv)({fill:Ze[p?0:1]}))}),onClick:()=>{if((0,Ne.Yt)(a().project))b(!p);else{const{id:e,editor:{edit3d:t}}=(0,d.zh)(a().project);r((0,c.changeEditor)(e,{edit3d:!t,selected:{}})),r((0,c.changeCategory)(""))}}})),p&&Be.createElement(Be.Fragment,null,Be.createElement(I.Z,{title:"方向 快捷键1"},Be.createElement(A.Z,{type:"text",style:{background:Te[e===o.Tool3DType.Move?1:0]},className:(0,N.cx)((0,N.iv)({pointerEvents:"auto",margin:"0 1px"})),onClick:()=>t(0),icon:Be.createElement(R.Z,{component:Ae.Z,className:(0,N.iv)({color:Ze[e===o.Tool3DType.Move?1:0]})})})),Be.createElement(I.Z,{title:"旋转 快捷键2"},Be.createElement(A.Z,{type:"text",style:{background:Te[e===o.Tool3DType.Rotate?1:0]},className:(0,N.cx)((0,N.iv)({pointerEvents:"auto",margin:"0 1px"})),onClick:()=>t(1),icon:Be.createElement(R.Z,{component:Me.Z,className:(0,N.iv)({color:Ze[e===o.Tool3DType.Rotate?1:0]})})})),Be.createElement(I.Z,{title:"缩放 快捷键3"},Be.createElement(A.Z,{type:"text",style:{background:Te[e===o.Tool3DType.Scale?1:0]},className:(0,N.cx)((0,N.iv)({pointerEvents:"auto",margin:"0 1px"})),onClick:()=>t(2),icon:Be.createElement(R.Z,{component:_e.Z,className:(0,N.iv)({color:Ze[e===o.Tool3DType.Scale?1:0]})})}))))}));function Le(){return Be.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2543",width:"1em",height:"1em"},Be.createElement("path",{d:"M37.010286 822.290286h353.536c21.686857 0 35.291429-13.622857 35.291428-34.468572 0-20.425143-13.604571-34.029714-35.291428-34.029714H107.209143v-2.139429l166.345143-161.645714c101.248-98.285714 131.017143-149.339429 131.017143-214.857143 0-97.408-86.345143-171.867429-201.636572-171.867428-90.624 0-168.045714 48.932571-194.011428 123.794285C3.84 341.577143 1.828571 353.462857 1.828571 364.105143c0 21.266286 12.635429 35.291429 33.481143 35.291428 20.004571 0 28.507429-9.344 34.889143-30.610285 3.401143-13.202286 8.082286-25.106286 14.884572-36.169143 22.546286-37.851429 64.676571-62.116571 117.851428-62.116572 68.918857 0 123.794286 48.493714 123.794286 108.909715 0 48.932571-19.986286 82.102857-104.228572 165.065143L23.405714 742.308571C5.522286 760.173714 0 770.816 0 786.56c0 22.125714 14.464 35.730286 37.010286 35.730286z m511.780571-0.859429h174.445714C913.792 821.430857 1024 707.84 1024 515.968c0-191.853714-110.189714-302.902857-300.781714-302.902857h-174.427429c-23.405714 0-38.272 15.323429-38.272 39.131428v529.664c0 24.246857 14.884571 39.570286 38.272 39.570286z m38.729143-69.778286V281.984h130.176c146.340571 0 227.602286 85.101714 227.602286 234.422857 0 150.162286-81.261714 235.245714-227.602286 235.245714z",fill:"white"}))}var Ue=r(26494),Fe=r(92187),Ye=r(87438),$e=r(29367),Qe=r(20649),We=r(24202),Je=r(50969),Ke=r(71076),He=r(34450),Ge=r.n(He),qe=r(22142);const Xe=(0,N.iv)({flex:"auto",background:"#eee",borderRadius:4,margin:"0 16px",position:"relative"}),et=(0,N.iv)({position:"absolute",right:-14,top:-4,width:28,height:28,borderRadius:"50%",border:"4px solid #0dce8a",transition:"200ms",opacity:0,[`&:hover, &-activated, .${Xe}:hover &`]:{opacity:1}}),tt=({totalTime:e})=>{const{dispatch:t,getState:r}=(0,l.oR)(),{playing:n,disabled:o,onPlayOrStop:a}=(0,c.usePlaying)(),i=(0,Ue.Z)((o=>{o.preventDefault();const{editor:{moment:i}}=(0,d.zh)(r().project);n?t((0,c.changeMoment)(Math.min(i,e))):(t((0,c.changeMoment)(0)),a())}));return(0,De.y)("space",i),qe.createElement(I.Z,{title:["播放","停止"][n%2]},qe.createElement(A.Z,{type:"text",disabled:o,icon:[c.playIcon,c.pauseIcon][n%2],onClick:i}))};function rt({scene:{editor:{moment:e,selected:t},nodes:r}}){const o=(0,n.useMemo)((()=>Math.max((0,c.maxEndTime)(r,!0,0),5e3)),[r]),{playRate:a,onChange:s}=(0,c.useEditor)(0,"playRate"),p=(0,n.useRef)(null),u=(0,l.I0)(),[f,m,y]=(0,n.useMemo)((()=>(0,c.joinDuration)(r,Object.keys(t).map(Number))),[r,t]),b=(0,l.v9)((({project:{editor:{soundVolume:e}}})=>e)),{accumulative:h,activated:g,activate:v}=(0,Fe.kL)(),O=(0,n.useMemo)((()=>e),[g]);(0,n.useEffect)((()=>{if(h&&p.current){const e=O+Math.floor(o*(h/p.current.offsetWidth));u((0,c.changeMoment)(Math.max(Math.min(e,o),0)))}}),[h]);const{token:k}=C.Z.useToken();return qe.createElement(i.Z.Content,{style:{userSelect:"none",position:"absolute",width:"100%",bottom:0,left:0}},qe.createElement("div",{style:{background:k.colorBgContainer,boxShadow:"0px -2px 8px rgba(0,0,0,0.08)",borderRadius:4,alignItems:"center",padding:"12px 16px",display:"flex",cursor:"pointer",margin:16,height:42}},qe.createElement(tt,{totalTime:o}),qe.createElement(Je.Z,{trigger:"click",content:qe.createElement(Ke.Z,{vertical:!0,value:b,style:{height:"100px"},onChange:e=>{u((0,c.changeEditor)(0,{soundVolume:e},!0))},tooltip:{open:!1}})},qe.createElement(A.Z,{type:"text",icon:qe.createElement(R.Z,{component:[Ye.Z,$e.Z,Qe.Z][b&&Math.ceil(b/50)]})})),qe.createElement(ue.Z,{bordered:!1,size:"small",value:a,onChange:e=>s(e,!0),suffixIcon:qe.createElement(R.Z,{component:We.Z}),style:{background:"#f5f5f5",borderRadius:4}},[.1,.2,.5,1,1.5].map((e=>qe.createElement(ue.Z.Option,{key:e,value:e,title:`播放速度x${e}`},e.toFixed(1),"倍速")))),qe.createElement("div",{ref:p,className:Xe,onMouseDown:e=>{const{currentTarget:t,clientX:r}=e,n=t.getBoundingClientRect();u((0,c.changeMoment)(Math.floor(o*((r-n.left)/t.offsetWidth)))),v(e)}},m>f&&qe.createElement("div",{style:{position:"absolute",background:"#8E9CED",borderRadius:4,height:20,lineHeight:"20px",textAlign:"center",overflow:"hidden",fontSize:"12px",color:"white",top:0,left:f/o*100+"%",width:(m-f)/o*100+"%"}},y.map((({name:e})=>e)).join("，")),qe.createElement("div",{style:{width:100*Math.min(e/o,1)+"%",borderRadius:4,background:"#0dce8ac0",position:"relative",height:20}},qe.createElement("div",{className:(0,d.xG)({[et]:{activated:g}})}))),Ge()(e).format("mm:ss.SSS").slice(0,-1)))}var nt=r(13718),ot=r(3207),at=r(86750),it=r(39139),lt=r(53983),ct=r(22142);const st=()=>{const e=(()=>{const e=(0,at.lu)((0,l.oR)()),[t,r]=(0,n.useState)([0]);return{spark:"context",content:{spark:"visit",index:0,label:"全景编辑",content:{spark:"grid",content:[{spark:"block",content:{spark:"label",label:"全景标记",content:{spark:"value",index:"landMarkUrl",content(e,t){return{spark:"element",content(){return ct.createElement(lt.r,{type:"Sprite",deletable:!0,url:e,onChange:({url:e})=>{t(e)}})}}}}}},{spark:"block",content:{spark:"enter",index:"plan",content:{spark:"grid",content:[{spark:"label",label:"观察点",tooltip:"中心观察点必须在图的正中央",content:{spark:"value",index:"viewerUrl",content(e,t){return{spark:"element",content(){return ct.createElement(lt.r,{type:"Sprite",deletable:!0,url:e,onChange:({url:e})=>{t(e)}})}}}}},{spark:"label",label:"平面图",content:{spark:"value",index:"planUrl",content(e,t){return{spark:"element",content(){return ct.createElement(lt.r,{type:"Sprite",deletable:!0,url:e,onChange:({url:e})=>{t(e)}})}}}}}]}}}]}},provide:()=>({openKeys:{},useValue:e,visiting:{next:t,onVisit:r}})}})(),t=(()=>{const e=(({dispatch:e,getState:t})=>r=>{const{indexValue:n,indexEntries:o}=(0,ot.getIndexer)(r),{value:a,panoramaSpaceId:i}=(0,l.v9)((({project:e})=>{var t;const{prevState:r,panoramaEdit:{panoramaSpaceId:o}}=e.editor,a=null==r?void 0:r.scenes.find((e=>e.id===r.editor.selectedSceneId)),i=a?null==(t=Object.entries(a.props).find((([e])=>e===`${o}`)))?void 0:t[1]:{};return{value:[n(i)],panoramaSpaceId:o}}),l.wU);return{value:a,onChange:r=>{return n=[r],a=function*([r]){const n=(0,Ne.Ve)(t().project,i,Object.fromEntries(o(r)));e((0,c.restoreState)(n))},new Promise(((e,t)=>{var r=e=>{try{i(a.next(e))}catch(e){t(e)}},o=e=>{try{i(a.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,o);i((a=a.apply(void 0,n)).next())}));var n,a}}})((0,l.oR)()),[t,r]=(0,n.useState)([0]);return{spark:"context",content:{spark:"visit",index:0,label:"全景编辑",content:{spark:"group",label:"属性设置",content:{spark:"grid",content:[{spark:"label",label:"进场动画",content:{spark:"select",index:"enterAnimationType",options:it.EP,defaultValue:0}},{spark:"block",content:{spark:"label",label:"陀螺仪",content:{spark:"boolean",index:"gyroscopeEnabled",defaultValue:!1}}}]}}},provide:()=>({openKeys:{},useValue:e,visiting:{next:t,onVisit:r}})}})();return ct.createElement("div",null,(0,ot.default)(e),ct.createElement("br",null),(0,ot.default)(t))};var pt=()=>ct.createElement("div",{className:(0,N.iv)({position:"absolute",left:5,bottom:5,display:"flex"})},ct.createElement(Je.Z,{placement:"rightBottom",content:st,trigger:"click"},ct.createElement(A.Z,null,"设置"))),ut=r(22142),dt=Object.defineProperty,ft=Object.defineProperties,mt=Object.getOwnPropertyDescriptors,yt=Object.getOwnPropertySymbols,bt=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable,gt=(e,t,r)=>t in e?dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vt=(e,t)=>{for(var r in t||(t={}))bt.call(t,r)&&gt(e,r,t[r]);if(yt)for(var r of yt(t))ht.call(t,r)&&gt(e,r,t[r]);return e},Ot=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const kt=()=>{const{trigger:e}=(0,s.Z)("forceSceneReload");return e};function xt(){const{state:e,scene:t}=(()=>{const e=(0,l.v9)((({project:e})=>e));return{state:e,scene:(0,d.zh)(e,void 0,!1)}})(),{edit3d:r}=(0,c.useEditor)("edit3d"),[p,y]=(0,n.useState)(0),{dispatch:b,getState:h}=(0,l.oR)(),g=(e=>{const{editor:{propsMode:t},settings:{typeOfPlay:r}}=e,o=(0,n.useRef)(null),a=(0,c.useScene)("editor"),{edit3d:i}=(0,c.useEditor)("edit3d"),{onAddNode:l,onAddNodeFromFiles:s}=(0,c.useOnAddNodeFromFiles)(),p=(0,c.useOnAddScripts)(),[,u]=(0,m.L)({accept:["resource",f.FILE],canDrop(n){return("resource"!==n.type||"CustomScript"!==n.mime||0!==Object.keys(a.selected).length)&&!("Product"===t||!n.type&&4===r||3===r&&(0,d.zh)(e).editor.loading)},drop(e,t){const r=t.getClientOffset()||void 0;i||("resource"===e.type?"CustomScript"===e.mime?p("Script",{script:"Auto",name:"自动触发",once:!0,time:a.moment,scripts:[{id:(0,d.xv)(),type:"Script",props:{name:"自定义脚本",script:"CustomScript",url:e.url}}]}):l(E(x({},e),{position:r,mapNode(t){const r=x(x({},t.props),e.props);return E(x({},t),{props:r})}}),!0):void 0===e.type&&s(e.files,{position:r}))}});return u(o),o})(e),{editorRef:v,playerSender:O,editorSender:k}=j(g);(({id:e,history:{undoStack:t,redoStack:r}},o)=>{const a=(0,n.useMemo)((()=>({current:t.length})),[e]),i=(0,n.useMemo)((()=>({current:r.length})),[e]);(0,n.useEffect)((()=>{for(const e of t.slice(a.current))try{o.emit(u()(e))}catch(t){console.error(e,t)}a.current=t.length}),[t]),(0,n.useEffect)((()=>{for(const e of r.slice(i.current))try{o.emit(u()(e).undo)}catch(t){console.error(e.undo,t)}i.current=r.length}),[r])})(t,e.editor.playing?O:k),(({id:e,editor:{editorTaskStack:t}},r)=>{const o=(0,n.useMemo)((()=>({current:t.length})),[e]);(0,n.useEffect)((()=>{for(const e of t.slice(o.current))try{r.emit(u()(e))}catch(t){console.error(e,t)}o.current=t.length}),[t]),(0,s.Z)("EmitStateEvent",(e=>{r.emit(e)}))})(e,e.editor.playing?O:k),((e,t)=>{const{subscribe:r,getState:a,dispatch:i}=(0,l.oR)();(0,n.useEffect)((()=>{var n;const l=null==(n=e.current)?void 0:n.then((e=>{let n=()=>{},l=a().project;return r((()=>{const{editor:{playing:r,playRate:s,soundVolume:p}}=l;if(l=a().project,l.editor.playRate===s&&l.editor.soundVolume===p||l.editor.playing&&t.emit({type:o.PlayerActionType.RuntimeSettings,rate:l.editor.playRate,soundVolume:l.editor.soundVolume/100}),l.editor.playing!==r)if(r)l.editor.playing?l.editor.playing%2?t.emit({type:o.PlayerActionType.Resume}):t.emit({type:o.PlayerActionType.Pause}):(n(),e.stop());else{const r=(0,d.zh)(l);n=t.on((e=>{var t,r;switch(e.type){case o.PlayerActionType.SetTime:return i(Ie(e.time));case o.PlayerActionType.ActivateNode:return i((0,c.changeProps)([e.nodeId],{enabled:!0},{playing:!0}));case o.PlayerActionType.DeactivateNode:return i((0,c.changeProps)([e.nodeId],{enabled:!1},{playing:!0}));case o.PlayerActionType.ChangeScene:const n=a().project.scenes.find((t=>t.id===e.sceneId||t.orderId===e.sceneId));return n?i((0,c.changeEditor)(0,{selectedSceneId:n.id},!0)):console.log("Unknown sceneId",e);case o.PlayerActionType.NodeProperties:if(null==(t=e.properties)?void 0:t.props){const{id:t,props:r}=e.properties;return i((0,c.changeProps)([t],r,{playing:!0}))}return;default:return i((r=((e,t)=>{for(var r in t||(t={}))je.call(t,r)&&Ce(e,r,t[r]);if(Pe)for(var r of Pe(t))Se.call(t,r)&&Ce(e,r,t[r]);return e})({},e),Ee(r,we({playing:!0}))))}})),e.play(r.editor.moment,l.editor.playRate,l.editor.soundVolume/100,r.orderId)}}))}));return()=>{null==l||l.then((e=>e()))}}),[Boolean(e.current)])})(v,O),(e=>{const t=(0,c.useEmitter)("UpdateRikoLog");(0,n.useEffect)((()=>{e.on((e=>{e.type===o.PlayerActionType.Log&&t({level:e.level,message:e.message})}))}),[e,t])})(O);const w=e.settings.typeOfPlay,P=e.settings.category,S=3===w&&3===P;(0,s.Z)("forceSceneReload",(()=>y((e=>e+1)))),(0,s.Z)("editorSender",(e=>k.emit(e)));const C=(0,l.v9)((({project:e})=>"PanoramaData"===e.type&&!(0,Ne.Yt)(e)));(0,n.useEffect)((()=>{v.current&&!e.editor.playing&&(v.current=v.current.then((e=>Ot(this,null,(function*(){var r,n;try{const r=h().project,o=(0,d.GV)(t);yield e.loadScene(o),e.editable="Product"!==r.editor.sceneMode,k.emit((0,c.changeCanvasScale)(r.editor.canvasScale)),"Project"===r.type?k.emit((0,c.setSettings)(vt(vt({},r.settings),(0,c.getProjectHeight)(r)))):k.emit((0,c.setSettings)((n=vt(vt({},r.settings),(0,c.getProjectHeight)(r)),ft(n,mt({bgImage:"",bgMusic:""})))));const{nodeIds:a,scriptIds:i}=(0,d.bN)(t.editor.selected);i.length?b((0,c.selectScript)(i)):a.length&&b((0,c.selectNode)(a))}catch(e){console.error(e),a.ZP.error(null!=(r=e.message)?r:e)}return e})))))}),[t.id,t.editor.stateId,e.editor.playing,e.type,p]),(0,n.useEffect)((()=>{v.current&&(v.current=v.current.then((t=>(t.editable="Product"!==e.editor.sceneMode,t))))}),[e.editor.sceneMode]),(({id:e,editor:{moment:t,lockCapture:r,stateId:o},nodes:a},i,l,c)=>{(0,n.useEffect)((()=>{if(!l&&i.current&&(i.current=i.current.then((e=>(e.gotoAndStop(t),e))),!r)){const t=i.current.then((t=>{const r=setTimeout(c,ke[e]?800:4e3,t);return ke[e]=!0,r}));return()=>{t.then((e=>clearTimeout(e)))}}}),[e,t,r,l,0===a.length,o])})(t,v,e.editor.playing,(r=>Ot(this,null,(function*(){b((0,c.changeEditor)(t.id,{capture:yield r.capture(t.id,260,(0,c.getProjectHeight)(e,260).height)},!1,o.ActionFlag.SideEffect))}))));let I="Product"===e.editor.sceneMode||t.editor.playable;return(0,Ne.Yt)(h().project)&&r&&(I=!1),ut.createElement(i.Z.Content,{style:{position:"relative"}},ut.createElement("div",{id:nt.F_,ref:g,style:{position:"relative",height:"100%",width:"100%",backgroundColor:"white"}}),e.settings.enabled3d&&!t.editor.playable&&ut.createElement(ze,null),ut.createElement(Oe,{bottom:I?74:16,blueprint:4!==w&&"Product"!==e.editor.sceneMode&&!S}),I&&ut.createElement(rt,{scene:t}),C&&ut.createElement(pt,null))}},5391:function(e,t,r){"use strict";r.d(t,{PG:function(){return h},yu:function(){return b}});var n=r(61645),o=r(62226),a=r(73073),i=r(73760),l=r(86128),c=Object.defineProperty,s=Object.defineProperties,p=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const b=(e,t)=>y(void 0,null,(function*(){const[{materialList:r},{materialList:n},{materialList:o}]=yield Promise.all([h(e,t,"private",1,999,"Font",0),h(e,t,"shared",1,999,"Font",0).catch((()=>({materialList:[]}))),h(e,t,"public",1,999,"Font",0).catch((()=>({materialList:[]})))]);return(0,i.uniqBy)([...r,...n,...o].map((({name:e,previewUrl:t})=>({label:e,value:t}))),"value")})),h=(e,t,r,o,i,c,s,p,u)=>{const d=s?String(s):void 0;return"public"===r?(0,n.YZ)({page:o,pageSize:i,sort:"updated_at desc",types:String(a._g[c]),keyword:p,tagIds:d,onPlatform:!0,statuses:"1"}):"project"===r?(0,n.xP)({projectId:t,page:o,pageSize:i,types:a._g[c]===a._g.Effect?l.z.join(","):a._g[c],keyword:p,categoryId:u,sort:"created_at desc"}):(0,n.xP)({page:o,pageSize:i,types:a._g[c],keyword:p,teamId:e,sort:"created_at desc",categoryId:u})};t.ZP=(e,t,r,i)=>"private"!==r||["Animation","CustomScript"].includes(i)?"public"===r&&Object.keys(a.Y9).includes(i)?(0,n.zs)({category:9,pageSize:999,origin:1,parentName:a.Y9[i]}).then((n=>y(void 0,[n],(function*({tags:n}){const o=[];return yield Promise.all(n.concat({id:"-1",name:"其他"}).map(((n,a)=>h(e,t,r,1,"public"!==r?999:6,i,n.id).then((({materialList:e,pagination:t})=>{t.total>0&&(o[a]={name:n.name,list:e||[],total:t.total,tagId:n.id,expandable:"public"===r,status:"loaded",parentName:n.parentName})}))))),o.flat().length?o.flat():[{name:"全部",list:[],total:0,tagId:0}]})))):h(e,t,r,1,"project"===r?999:6,i,0).then((e=>y(void 0,[e],(function*({materialList:e,pagination:t}){return[{name:"未分类",list:e,total:t.total,tagId:0}].map((e=>{return t=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&m(e,r,t[r]);if(u)for(var r of u(t))f.call(t,r)&&m(e,r,t[r]);return e})({},e),s(t,p({expandable:"project"!==r,status:"loaded"}));var t}))})))):(0,o.Jm)().then((({categories:n})=>Promise.all(n.filter((e=>"1"!==e.id&&"0"!==e.id)).map((n=>h(e,t,r,1,6,i,0,void 0,n.id).then((({materialList:e,pagination:t})=>({name:n.name,list:e,total:t.total,categoryId:n.id,expandable:!0,status:"loaded"})))))))).then((e=>e.filter((e=>e.total>0||"未分类"===e.name))))},43532:function(e,t,r){"use strict";var n=r(42761),o=r(19104),a=Object.defineProperty,i=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))p.call(t,r)&&u(e,r,t[r]);return e},f=(e,t)=>i(e,l(t));t.Z=()=>{const{dispatch:e,getState:t}=(0,n.oR)(),r=(0,o.useEmitter)("ResourceAdded"),a=(0,o.useUserInfo)();return(n,i,l,c)=>{const s=t().resource.database[n][i];r(c.id),e((0,o.changeDatabase)(n,i,s.map((e=>e.name!==l?e:f(d({},e),{list:[f(d({},c),{userId:null==a?void 0:a.userId}),...e.list]})))))}}},92529:function(e,t,r){"use strict";r.d(t,{K:function(){return b}});var n=r(42761),o=r(61645),a=r(19104),i=r(7910),l=Object.defineProperty,c=Object.defineProperties,s=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const y=()=>{const{dispatch:e,getState:t}=(0,n.oR)(),r=(0,a.useEmitter)("ResourceDeleted");return(n,i,l)=>m(void 0,null,(function*(){const m=Array.isArray(l)?l:[l];yield(0,o.mO)(m);const y=t().resource.database[n][i];m.forEach((e=>r(e))),e((0,a.changeDatabase)(n,i,y.map((e=>{const t=e.list.filter((e=>!m.includes(e.id)));return e.list.length&&e.list.length!==t.length?(r=((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&f(e,r,t[r]);if(p)for(var r of p(t))d.call(t,r)&&f(e,r,t[r]);return e})({},e),n={list:t,total:e.total-1},c(r,s(n))):e;var r,n}))))}))},b=()=>{const{getState:e}=(0,n.oR)(),t=y();return(r,n)=>m(void 0,null,(function*(){const o=e().resource.database[r][n].reduce(((e,t)=>Array.isArray(null==t?void 0:t.list)?e.concat(null==t?void 0:t.list):e),[]),a=JSON.stringify(e().project),l=o.filter((({previewUrl:e})=>"string"==typeof e&&!a.includes((0,i.Hn)(e)))).map((e=>e.id));if(l.length)return t(r,n,l)}))};t.Z=y},53957:function(e,t,r){"use strict";var n=r(22142),o=r(65852),a=r(42761),i=r(19104),l=r(1850),c=r(92181),s=r(40985),p=r(7910),u=r(63361),d=r(95787),f=r(55791),m=r(22669),y=r(73073),b=Object.defineProperty,h=Object.defineProperties,g=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,x=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E=(e,t)=>{for(var r in t||(t={}))O.call(t,r)&&x(e,r,t[r]);if(v)for(var r of v(t))k.call(t,r)&&x(e,r,t[r]);return e};t.Z=({mime:e,url:t,name:r,orderId:b,cover:v,props:O,materialId:k,provider:x,extra:w})=>{if(k&&"string"==typeof t){const e=new URL(t);e.searchParams.set("mid",String(k)),t=e.href}const P=(0,i.useAddNode)(),j=(0,i.useAddNodeWith3D)(),S=(0,i.useOnAddScripts)(),{onChange:C}=(0,n.useContext)(c.q),I=(0,i.useScene)("editor"),{addParticle3DInEdit:A}=(0,u.Rv)(),{addModelInEdit:M}=(0,d.tT)(),{getState:_}=(0,a.oR)(),[,D]=(0,o.c)({item:{type:"resource",mime:e,url:t,name:r,cover:v,props:O}}),R=_().project.type,{scene3DApplyCubemap:N}=(0,f.Z)(),{onChangeCurrentScene3DProps:V}=(0,l.$)(),{createPanoramaHotSpot:B,createPanoramaSpaceNode:Z}=(0,m.KW)();return C?{onClick(){"public"===x&&e&&(0,s.r3)(s.GM.UseResource,{type:y._g[e],material_id:Number(k)}),C({name:r,cover:v,orderId:b,url:"string"==typeof t?(0,p.Hn)(t):"Animation"===e?(0,i.checkComponentCircleRef)(_().project,t):t,_from:"resChanger",extra:w})}}:{ref:D,onClick(){if("public"===x&&e&&(0,s.r3)(s.GM.UseResource,{type:y._g[e],material_id:Number(k)}),"CustomScript"===e){if(0===Object.keys(I.selected).length)return;return S("Script",{script:"Auto",name:"自动触发",once:!0,time:I.moment,scripts:[{id:(0,s.xv)(),type:"Script",props:{name:"自定义脚本",script:"CustomScript",url:t,enabled:!0,_resName:r}}]})}if("Cubemaps"!==e)if("Particle3D"!==e||"Particle3D"!==R)if("Model"!==e||"Model"!==R)if("PanoramaSpace"!==e){if("PanoramaHotSpot"!==e)return j(e,(()=>{P({mime:e,name:r,url:t,cover:v,extra:w,mapNode(e){const t=E(E({},e.props),O);return r=E({},e),h(r,g({props:t}));var r}},!0)}));B()}else Z();else M(t);else A(t);else j(e,(()=>{N(t,(e=>{V({skyboxMaterialUrl:null!=e?e:0,_editor:{skyboxCover:v}})}))}))}}}},76937:function(e,t,r){"use strict";var n=r(42761),o=r(61645),a=r(61754),i=r(19104),l=Object.defineProperty,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;t.Z=()=>{const{dispatch:e}=(0,n.oR)();return(t,r,n,l,d,f)=>{return void 0,null,m=function*(){try{yield(0,o.LI)([{id:n,name:l}]);const m=f.list.findIndex((e=>e.id===n)),y=f;y.list[m].name=l,d(((e,t)=>{for(var r in t||(t={}))s.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))p.call(t,r)&&u(e,r,t[r]);return e})({},y)),e("project"===r?(0,i.changeProvider)(t,"private"):(0,i.changeProvider)(t,"project")),e((0,i.changeProvider)(t,r)),a.ZP.success("重命名成功")}catch(e){a.ZP.error(`${e}`)}},new Promise(((e,t)=>{var r=e=>{try{o(m.next(e))}catch(e){t(e)}},n=e=>{try{o(m.throw(e))}catch(e){t(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,n);o((m=m.apply(undefined,null)).next())}));var m}}},19091:function(e,t,r){"use strict";var n=r(22142),o=r(7910),a=r(92181);t.Z=()=>{const{onChange:e,acceptFiles:t}=(0,n.useContext)(a.q);return{replacing:Boolean(e),acceptFiles:t,onReplace(t,r,n,a){if(e){if(t&&"string"==typeof n){const e=new URL(n);e.searchParams.set("mid",String(t)),n=e.href}e({name:r,url:(0,o.Hn)(n),cover:a,_from:"resChanger"})}}}}},74173:function(e,t,r){"use strict";r.d(t,{G:function(){return s},Z:function(){return c}});var n=r(22142),o=r(10839),a=r(33058),i=r(35553),l=r.p+"f6d8068a2bb6a94ab55bdf684dc786b0.svg";function c(e){return(0,n.memo)((({groups:t,provider:r,category:a,searching:i,onExpand:c,setGroupData:p})=>{const u=t.filter((({list:e})=>e.length));if(u.length||!t.length)return n.createElement(s,{groups:u,onClick:c},(t=>n.createElement(e,{key:t.name,groupData:t,setGroupData:p,provider:r,category:a})));switch(r){case"public":return i?n.createElement(o.Z,{description:"没有符合要求的素材",image:o.Z.PRESENTED_IMAGE_SIMPLE}):n.createElement("div",{style:{textAlign:"center",color:"#999"}},n.createElement("img",{src:l,style:{maxWidth:"100%"}}),n.createElement("div",null,"公共素材库正在筹备中..."));case"project":return n.createElement(o.Z,{image:o.Z.PRESENTED_IMAGE_SIMPLE,description:"暂无项目素材，请本地上传"});case"private":return n.createElement(o.Z,{image:o.Z.PRESENTED_IMAGE_SIMPLE,description:"暂无我的素材，请本地上传"});case"shared":return n.createElement(o.Z,{image:o.Z.PRESENTED_IMAGE_SIMPLE,description:"暂无团队素材，请本地上传"})}}))}function s({groups:e,onClick:t,children:r}){return n.createElement(n.Fragment,null,e.map(((e,o)=>n.createElement("div",{key:o,style:{padding:"16px 12px 0"}},e.expandable&&n.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px",fontWeight:"bold"}},n.createElement("div",null,e.name),e.total>e.list.length&&n.createElement("div",{style:{cursor:"pointer"},onClick:()=>null==t?void 0:t(e)},"更多 ",n.createElement("span",{style:{color:"#555"}},"(",e.total-e.list.length,"+)"),n.createElement(a.Z,{component:i.Z}))),r(e)))))}},18765:function(e,t,r){"use strict";r.d(t,{Z:function(){return te}});var n=r(22142),o=r(42761),a=r(5635),i=r(26840),l=r(62255),c=r(70072),s=r(76151),p=r(61754),u=r(33058),d=r(9904),f=r(2376),m=r(80226),y=r(9329),b=r(41650),h=r(38280),g=r(62732),v=r(26494),O=r(73073),k=r(40985),x=r(43532),E=r(92529),w=r(19104),P=r(5391),j=Object.defineProperty,S=Object.defineProperties,C=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,_=(e,t,r)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,D=(e,t)=>{for(var r in t||(t={}))A.call(t,r)&&_(e,r,t[r]);if(I)for(var r of I(t))M.call(t,r)&&_(e,r,t[r]);return e},R=(e,t)=>S(e,C(t)),N=({categories:e,current:t,setCategory:r})=>e.length<2?null:n.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",marginTop:"-4px",padding:"16px 12px 0"}},e.map((({category:e,title:o})=>n.createElement(c.Z,{key:e,size:"small",type:e===t?"primary":"default",onClick:()=>{r(e)},style:{flex:"auto 1 1",margin:"4px 2px"}},o))));const V=(e,t,r)=>3!==e||"Animation"!==t?r:r.filter((({name:e})=>!e.includes("loading")));var B=r(19091),Z=r(73760),T=r(23247),z=r.n(T),L=r(1419),U=r.n(L),F=r(14766),Y=r.n(F),$=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())})),Q=()=>{const{getState:e}=(0,o.oR)();return(t,r)=>$(void 0,null,(function*(){const n=e().resource.database[t][r][0].list,o=new(Y()),a=o.folder("images");yield Promise.all(n.map((e=>$(this,null,(function*(){var t;const{data:r}=yield z().get(e.previewUrl||e.url,{responseType:"blob"});null==a||a.file(`${e.name}.${null==(t=e.extra)?void 0:t.ext}`,r)}))))),o.generateAsync({type:"blob"}).then((function(e){U()(e,"images.zip")}))}))},W=r(16969),J=r(49405),K=r(98466),H=r(13404);const G=(0,n.memo)((({setUploading:e,children:t,uploading:r,className:o})=>{const{addTexture2D:a}=(0,H.Z)();return n.createElement(W.Z,{disabled:r,showUploadList:!1,className:o,accept:J.n$.Texture2D,beforeUpload:t=>{return void 0,null,r=function*(){e(!0);try{const e=yield(0,K.cT)(t);yield a(void 0,{url:e.downloadUrl,name:t.name})}catch(e){p.ZP.error(e.message)}return e(!1),!1},new Promise(((e,t)=>{var n=e=>{try{a(r.next(e))}catch(e){t(e)}},o=e=>{try{a(r.throw(e))}catch(e){t(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);a((r=r.apply(undefined,null)).next())}));var r}},t)}));var q=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const X={minHeight:60},ee=(0,g.iv)({padding:"12px 2px 0","& .ant-btn":{padding:"4px 10px"},"& .ant-btn > .anticon + span":{marginLeft:"4px"}});function te(e,t){const r=Array.isArray(e)?e:[{category:e,title:e}];return({defaultCategory:e})=>{const{token:g}=a.Z.useToken(),{dispatch:j}=(0,o.oR)(),S=(0,o.v9)((({project:{id:e}})=>e)),C=(0,o.v9)((({project:{teamId:e}})=>e)),{replacing:I,onReplace:A,acceptFiles:M}=(0,B.Z)(),{category:_,provider:T,projectData:z,setCategory:L}=((e,t,r,a)=>{const i=(0,o.I0)(),l=(0,w.useSettings)("typeOfPlay")||0,[c,s]=(0,n.useState)(null!=a?a:r[0].category),{provider:p,public:u,project:d,private:f,shared:m}=(0,o.v9)((({resource:{database:{[c]:e}}})=>e));(0,n.useEffect)((()=>{"project"===p&&(0,k.Fo)(c)||(0,P.ZP)(e,t,p,c).then((e=>{i((0,w.changeDatabase)(c,p,e))}))}),[i,p,c,t]);const y=(0,v.Z)((e=>{const t=["Animation","CustomScript"];if("shared"===e&&t.includes(c)){const e=r.findIndex((e=>e.category===c)),t=r[e+1]||r[e-1];s(t.category)}for(const{category:n}of r)"shared"===e&&t.includes(n)||i((0,w.changeProvider)(n,e))}));return{category:c,provider:p,publicData:V(l,c,u),projectData:V(l,c,d),privateData:V(l,c,f),sharedData:V(l,c,m),setCategory:s,onChangeProvider:y}})(C,S,r,e),{fetchSearchData:U,groupData:F,loadingData:Y,setGroupData:$}=((e,t,r)=>{const[o,a]=(0,n.useState)(null),[i,l]=(0,n.useState)(!1);return(0,w.useEmitter)("ResourceDeleted",(0,v.Z)((e=>{a((t=>t?R(D({},t),{list:t.list.filter((t=>t.id!==e))}):t))}))),{groupData:o,loadingData:i,fetchSearchData:(n,o,i,c)=>{return s=function*(){var s;if(void 0===n&&!o)return l(!1),void a(null);try{l(!0);const{materialList:p,pagination:u}=yield(0,P.PG)(e,t,c,Math.floor((null!=(s=null==i?void 0:i.list.length)?s:0)/99)+1,99,r,(null==o?void 0:o.tagId)||0,n,null==o?void 0:o.categoryId);a(i?R(D({},i),{list:i.list.concat(p)}):{name:o?o.name:"",list:p,total:u.total,expandable:!1,status:"loaded"})}catch(e){p.ZP.error(e.message)}finally{l(!1)}},new Promise(((e,t)=>{var r=e=>{try{o(s.next(e))}catch(e){t(e)}},n=e=>{try{o(s.throw(e))}catch(e){t(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,n);o((s=s.apply(void 0,null)).next())}));var s},setGroupData:a}})(C,S,_),[W,J]=(0,n.useState)(null),[K,H]=(0,n.useState)(void 0),[te,re]=(0,n.useState)(!1),[ne,oe]=(0,n.useState)(!1),[ae,ie]=(0,n.useState)(!1),[le,ce]=(0,n.useState)(!1),[se,pe]=(0,n.useState)(!1),ue=(0,x.Z)(),de=(0,E.K)(),fe=Q(),me=(0,v.Z)((e=>e(n.createElement(i.Z,{placement:"bottom",title:{Sprite:"jpg/png图片",Sound:"mp3文件",Video:"mp4文件",NativeVideo:"mp4、mov文件",NativeLoadingVideo:"mp4、mov文件",Lottie:"json文件 / Lottie zip包(json+图片)",Particle:"plist文件 / 粒子zip包(plist+图片)",FrameAnime:"多个有序的图片文件",DragonBones:"龙骨zip包(json+png)",Spine:"Spine zip包(json/skel+png+atlas)",Live2d:"Live2D zip包(json+图片+moc3)"}[_]},n.createElement(d.Z,{theme:"outline",style:{marginLeft:"3px",lineHeight:"11px",verticalAlign:"middle"},onClick:e=>{e.preventDefault(),window.open("https://bytedance.feishu.cn/docs/doccnxn0Z0wqEMDtzVJnPwa1b9c#")}})),((e,t)=>"FrameAnime"===_?n.createElement(O.g6,{uploading:ne,setUploading:oe,onAddResourceEntry:({name:e,id:r,url:n,cover:o,extra:a})=>{ue(_,t,"未分类",{id:r,previewUrl:n,name:e,cover:o,extra:a}),I&&A(r,e,n,o)}},e):"Cubemaps"===_?n.createElement(O.uQ,{dispatch:j,uploading:ne,setUploading:oe,onAddResourceEntry:({name:e,id:r,url:n,cover:o,extra:a})=>{ue(_,t,"未分类",{id:r,previewUrl:n,name:e,cover:o,extra:a}),I&&A(r,e,n,o)}},e):"Model"===_?n.createElement(O.z4,{onAddResourceEntry:({name:e,id:r,url:n})=>{ue(_,t,"未分类",{id:r,previewUrl:n,name:e})},uploading:ne,setUploading:oe},e):"Texture2D"===_?n.createElement(G,{uploading:ne,setUploading:oe},e):n.createElement(O.BX,{multiple:!I,uploading:ne,category:_,acceptFiles:M,setUploading:oe,onAddResourceEntry:({name:e,id:r,url:n,cover:o,extra:a})=>{ue(_,t,"未分类",{id:r,previewUrl:n,name:e,cover:o,extra:a}),I&&A(r,e,n)}},e))))),ye=(0,n.useRef)(null);(0,n.useEffect)((()=>{ye.current&&clearTimeout(ye.current),ye.current=setTimeout((()=>{(0,k.r3)(k.GM.OriginResource,{type:T})}),1e3)}),[T]);const be=(0,n.useRef)(null);(0,n.useEffect)((()=>{be.current&&clearTimeout(be.current),be.current=setTimeout((()=>{["Animation","PSD","CustomScript"].includes(_)?((0,k.r3)(k.GM.SelectResource,{type:"Animation"}),(0,k.r3)(k.GM.OriginComponent,{type:_})):["Lottie","Particle","FrameAnime","DragonBones","Spine"].includes(_)?((0,k.r3)(k.GM.SelectResource,{type:"effect"}),(0,k.r3)(k.GM.OriginEffect,{type:_})):(0,k.r3)(k.GM.SelectResource,{type:_})}),1e3)}),[_]);const he=["Animation","Animation3D","CustomScript"].includes(_),ge=!["Particle3D"].includes(_);return n.createElement(n.Fragment,null,n.createElement("div",{style:{padding:I?"0 12px 4px":"16px 12px 4px",position:"sticky",top:0,zIndex:1,background:g.colorBgContainer}},n.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},n.createElement(l.Z.Search,{allowClear:!0,loading:Y,placeholder:"搜索关键词",prefix:void 0!==K&&te&&n.createElement(u.Z,{component:f.Z,style:{cursor:"pointer"},title:"返回",onClick:()=>{re(!1),H(void 0),U(void 0,W,null,T)}}),onChange:(0,Z.debounce)((e=>{const t=e.target.value;H(t),t?(re(!0),U(t,W,null,T)):re(!1)}),800),enterButton:Y?void 0:n.createElement(c.Z,{title:"搜索",icon:n.createElement(u.Z,{component:m.Z})}),onSearch:()=>{void 0!==K&&(re(!0),U(K,W,null,T))}}))),te||W?n.createElement(s.Z,{spinning:Y&&!F,style:X},n.createElement(t,{groups:F?[F]:[],setGroupData:$,category:_,provider:T,searching:!0})):n.createElement(n.Fragment,null,!e&&n.createElement(N,{categories:r,current:_,setCategory:L}),!he&&ge&&n.createElement("div",{className:ee},me(((e,t)=>t(n.createElement(c.Z,{type:"link",icon:n.createElement(u.Z,{component:y.Z}),loading:ne},"本地上传",e),T))),n.createElement(i.Z,{title:"一键删除没有用到的素材"},n.createElement(c.Z,{type:"link",icon:n.createElement(u.Z,{component:b.Z}),onClick:()=>q(this,null,(function*(){de(_,T)}))})),"Sprite"===_&&n.createElement(i.Z,{title:"一键下载项目图片"},n.createElement(c.Z,{type:"link",icon:n.createElement(u.Z,{component:h.Z}),loading:ae,onClick:()=>q(this,null,(function*(){try{ie(!0),yield fe(_,T)}catch(e){p.ZP.error("批量下载失败")}finally{ie(!1)}}))}))),n.createElement(s.Z,{spinning:!(0,k.Fo)(_)&&0===z.length,style:X},n.createElement(t,{groups:z,category:_,provider:T,setGroupData:$,onExpand:e=>{re(!0),J(e),U(K,e,null,T)}}))),le&&n.createElement(O.DV,{onFinish:e=>{"private"===T&&e.forEach((({id:e,url:t,name:r,cover:n})=>{ue(_,T,"未分类",{id:e,previewUrl:t,name:r,cover:n})})),ce(!1)},onHide:()=>ce(!1)}),se&&n.createElement(O.Nn,{onFinish:e=>{"private"===T&&e.forEach((({id:e,url:t,name:r,cover:n})=>{ue(_,T,"未分类",{id:e,previewUrl:t,name:r,cover:n})})),pe(!1)},onHide:()=>pe(!1)}))}}},25961:function(e,t,r){"use strict";r.d(t,{Z:function(){return w}});var n=r(22142),o=r(42761),a=r(48751),i=r(19104),l=r(92529),c=r(40985),s=r(19091),p=r(3197),u=r(62732),d=r(22142);const f=(0,u.iv)({display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridAutoRows:"auto",rowGap:"8px"});var m=(0,n.memo)((({groupData:e,provider:t,category:r})=>{const n=(0,l.Z)(),{onEditComponent:u}=(0,i.useOnEditComponent)(),{getState:m,dispatch:y}=(0,o.oR)(),{replacing:b}=(0,s.Z)(),{readOnly:h}=(0,i.useEditor)(0,"readOnly"),g=(0,o.v9)((({project:e})=>{const t=[];for(;e;){for(const r of e.scenes)"Animation"!==r.type||t.some((({orderId:e})=>e===r.orderId))||t.push(r);e=e.editor.prevState}return t.map((({id:e,orderId:t,name:r,editor:{capture:n}})=>({id:e,previewUrl:t,name:r,cover:n})))}),o.wU);return d.createElement("div",{className:f},g.map((e=>d.createElement(a.vE,{key:e.id,materialId:e.id,provider:t,category:r,url:e.previewUrl,name:e.name,cover:e.cover,extra:e.extra,description:e.description||"",onEdit:h||b?void 0:()=>{u(e.previewUrl)},onDelete:h||b?void 0:()=>{return void 0,null,o=function*(){if("Animation"===r&&"number"==typeof e.previewUrl){const{project:t}=m();if("Component"===t.type&&e.previewUrl===t.scenes[0].orderId)throw new Error("组件正在编辑，不能删除");if((0,c.rz)(t,e.previewUrl))throw new Error("组件正在使用，不能删除");const{sceneId:r,id:n}=(0,c._N)(t,e.previewUrl);yield p.r4(r).then((()=>{y((0,i.deleteScene)(n))}))}else yield n(r,t,e.id)},new Promise(((e,t)=>{var r=e=>{try{a(o.next(e))}catch(e){t(e)}},n=e=>{try{a(o.throw(e))}catch(e){t(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,n);a((o=o.apply(undefined,null)).next())}));var o}}))))})),y=r(18765),b=r(22142),h=Object.defineProperty,g=Object.defineProperties,v=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(0,y.Z)("Animation",(e=>{return b.createElement("div",{style:{padding:"16px 12px 0"}},b.createElement(m,(t=((e,t)=>{for(var r in t||(t={}))k.call(t,r)&&E(e,r,t[r]);if(O)for(var r of O(t))x.call(t,r)&&E(e,r,t[r]);return e})({},e),r={groupData:e.groups[0]},g(t,v(r)))));var t,r}))},90812:function(e,t,r){"use strict";r.d(t,{v:function(){return w},Z:function(){return j}});var n=r(19104),o=r(92187),a=r(89591),i=r(80926),l=r(18765),c=r(74173),s=r(22142),p=r(62732),u=r(48751),d=r(92529),f=r(19091),m=r(8702);const y=(0,p.iv)({display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridAutoRows:"auto",rowGap:"8px"});var b=r(22142),h=Object.defineProperty,g=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,k=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,x=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&k(e,r,t[r]);if(g)for(var r of g(t))O.call(t,r)&&k(e,r,t[r]);return e};const E=(0,c.Z)((function({groupData:e,setGroupData:t,category:r,provider:n}){const{replacing:o}=(0,f.Z)(),a=(0,d.Z)();return s.createElement("div",{className:y},e.list.map((i=>{var l,c;const p="Spine"===r?(null!=(c=null==(l=i.extra)?void 0:l.spineVersion)?c:3.8).toFixed(1):null;return s.createElement("div",{style:{position:"relative"}},s.createElement("span",{style:{position:"absolute",padding:"0 5px",fontSize:"11px",background:"orange",top:0,right:0}},(0,m.Yj)(i.type.cid)),s.createElement(u.vE,{key:i.id,materialId:i.id,category:(0,m.PC)(i.type.cid),provider:n,name:i.name,cover:i.cover,url:i.previewUrl,resourceUrl:i.url,version:p,description:i.description,extra:i.extra,groupData:e,setGroupData:t,onDelete:o||"project"!==n?void 0:()=>a(r,n,i.id)}))})))})),w=({title:e})=>{const{showImDialog:t}=(0,n.useImbot)(),[r,l]=(0,o.Em)(e);return r?b.createElement("div",{className:(0,p.iv)({"& .ant-alert-info":{margin:"16px 12px 0",border:"none",padding:8}})},b.createElement(a.Z,{type:"info",closable:!0,onClose:()=>l(!1),message:b.createElement(b.Fragment,null,"什么是",b.createElement(i.Z.Link,{underline:!0,onClick:r=>{r.preventDefault(),t(e)}},e),"？")})):null};function P(e){return b.createElement("div",null,b.createElement(w,{title:"Lottie、粒子、序列帧"}),b.createElement(E,x({},e)))}var j=e=>{const t=(0,l.Z)("Effect",P);return b.createElement(t,x({},e))}},48751:function(e,t,r){"use strict";r.d(t,{vE:function(){return B}});var n=r(22142),o=r(61754),a=r(32078),i=r(62255),l=r(26840),c=r(62732),s=r(53957),p=r(33058),u=(r(99305),r(12031)),d=r(66928),f=r(10155),m=r(75119),y=r(72704),b=(r(26995),r(70072)),h=r(40985),g=r(73073),v=r(19104),O=r(76937),k=r(23247),x=r.n(k),E=r(1850),w=Object.defineProperty,P=Object.defineProperties,j=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,M=(e,t)=>{for(var r in t||(t={}))C.call(t,r)&&A(e,r,t[r]);if(S)for(var r of S(t))I.call(t,r)&&A(e,r,t[r]);return e},_=(e,t)=>P(e,j(t));const D=(0,c.iv)({width:"72px",height:"72px",borderRadius:"2px",backgroundRepeat:"no-repeat",border:"1px solid #f0f0f0",backgroundSize:"contain",backgroundPosition:"center",backgroundColor:"#F5F5F5",cursor:"pointer",justifySelf:"center",display:"flex"}),R=(0,c.iv)({opacity:0,margin:2,[`.${D}:hover &, &-loading`]:{opacity:1},"&.ant-btn-icon-only.ant-btn-sm":{width:"16px",height:"16px",lineHeight:"8px",fontSize:"8px","& > *":{fontSize:"8px"}}}),N=(0,c.iv)({marginTop:"2px",marginRight:"2px",padding:"0 3px",borderRadius:"4px",backgroundColor:"#3955f6",color:"#fff"}),V=e=>n.createElement(u.Z,_(M({theme:"filled"},e),{fill:"#F6A304"}));function B({isFavored:e,category:t,props:r,cover:g,name:k,url:w,extra:P,version:j,description:S,materialId:C,provider:I,orderId:A,onDelete:B,onFavor:Z,onEdit:T,groupData:z,setGroupData:L,onSaveAs:U,resourceUrl:F}){const[Y,$]=(0,n.useState)(!1),[Q,W]=(0,n.useState)(!1),[J,K]=(0,n.useState)(k),[H,G]=(0,n.useState)(!1),q=n.useRef(null),X=(0,O.Z)(),{onChangeSceneName:ee}=(0,E.$)(),te=(0,s.Z)({mime:t,url:w,name:k,cover:g,props:r,version:j,materialId:C,provider:I,extra:P,orderId:A}),re=(0,v.useEmitter)("ViewResource"),ne=(0,n.useCallback)((()=>{re({type:"enter",category:t,url:w,name:k,description:S,extra:P})}),[re,t,w,k,S,P]),oe=(0,n.useCallback)((()=>{re({type:"leave"})}),[re]);(0,n.useEffect)((()=>oe),[oe]);const ae=()=>{return e=this,null,r=function*(){J!==k&&""!==J&&(["Animation","Animation3D"].includes(t)?ee(Number(C),J):yield X(t,I,C,J,L,z)),G(!1)},new Promise(((t,n)=>{var o=e=>{try{i(r.next(e))}catch(e){n(e)}},a=e=>{try{i(r.throw(e))}catch(e){n(e)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,a);i((r=r.apply(e,null)).next())}));var e,r};return n.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},onMouseEnter:ne,onMouseLeave:oe,onMouseDown:oe},n.createElement("div",M({className:(0,c.cx)(D,"Particle"===t),style:M({backgroundImage:`url(${g||"https://sf3-cdn-tos.douyinstatic.com/obj/eden-cn/bqaeh7vhobd/feedback.svg"})`},"Particle"===t?{backgroundSize:"cover"}:{})},te),Z&&n.createElement(b.Z,{type:"primary",size:"small",onClick:t=>{t.stopPropagation(),W(!0),Z(!e).finally((()=>{W(!1)}))},loading:Q,className:(0,h.xG)({[R]:{loading:Q}}),icon:n.createElement(p.Z,{component:e?V:u.Z})}),n.createElement("div",{style:{flex:"auto"}}),U&&n.createElement(b.Z,{type:"primary",size:"small",onClick:e=>{e.stopPropagation(),U()},className:R,icon:n.createElement(p.Z,{component:d.Z})}),T&&n.createElement(b.Z,{type:"primary",size:"small",onClick:e=>{e.stopPropagation(),T()},className:R,icon:n.createElement(p.Z,{component:f.Z})}),!["Animation","FrameAnime","Model","Particle3D","Animation3D","Texture2D","Cubemaps"].includes(t)&&n.createElement(b.Z,{type:"primary",size:"small",className:R,icon:n.createElement(p.Z,{component:m.Z}),onClick:e=>{e.stopPropagation();const t=F?`${F}`:`${w}`,r=t.lastIndexOf(".");let n="";n=t.substr(r+1),t.includes("zip")&&(n="zip"),x()({url:`${t}?forceDownload=true`,responseType:"blob"}).then((e=>{(0,h.lm)(e.data,`${k}.${n}`)})).catch((()=>{o.ZP.error("下载失败")}))}}),B&&n.createElement(b.Z,{danger:!0,type:"primary",size:"small",onClick:e=>{e.stopPropagation(),a.Z.confirm({title:`确定删除${k}吗？`,okText:"确定",cancelText:"取消",onOk(){$(!0),B().then((()=>{$(!1)})).catch((e=>{o.ZP.error(e.message),$(!1)}))}})},loading:Y,className:(0,h.xG)({[R]:{loading:Y}}),icon:n.createElement(p.Z,{component:y.Z})})),n.createElement("div",{title:k,onDoubleClick:e=>{e.stopPropagation(),G(!0)},style:_(M({},"Animation"===t?{cursor:"pointer"}:{}),{fontSize:11,textAlign:"center",color:"gray",whiteSpace:"nowrap",width:"72px",overflow:"hidden",textOverflow:"ellipsis"})},j&&n.createElement("span",{className:N},j),H?n.createElement(i.Z,{ref:q,type:"text",defaultValue:k,autoFocus:!0,style:{fontSize:11,height:"20px"},onChange:e=>{K(e.target.value)},onBlur:ae,onPressEnter:ae}):n.createElement(l.Z,{title:k,placement:"bottom"},n.createElement("div",null,k))))}g.BX},88158:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var n=r(48751),o=r(92529),a=r(62732),i=r(22142);const l={"image-container":(0,a.iv)({display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridAutoRows:"auto",rowGap:"8px"})};var c=r(18765);const s=(0,r(74173).Z)((function({groupData:e,setGroupData:t,provider:r,category:a}){const c=(0,o.Z)();return i.createElement("div",{className:l["image-container"]},e.list.map((o=>i.createElement(n.vE,{key:o.id,materialId:o.id,category:a,provider:r,name:o.name,url:o.previewUrl||o.url,cover:o.previewUrl||o.url,description:o.description,extra:o.extra,groupData:e,setGroupData:t,onDelete:()=>c(a,r,o.id)}))))}));var p=(0,c.Z)("Sprite",s)},35001:function(e,t,r){"use strict";r.d(t,{Z:function(){return T}});var n=r(74173),o=r(18765),a=r(22142),i=r(92529),l=r(19091),c=r(19104),s=r(62255),p=r(26840),u=r(61754),d=r(32078),f=r(62732),m=r(34450),y=r.n(m),b=r(33058),h=r(43248),g=r(89763),v=r(10155),O=r(75119),k=r(72704),x=r(53957),E=r(70072),w=r(76937),P=r(23247),j=r.n(P),S=r(40985),C=Object.defineProperty,I=Object.defineProperties,A=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,R=(e,t,r)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const N=(0,f.iv)({marginBottom:"8px",height:"32px",background:"#f9f9f9",borderRadius:"2px",display:"flex",alignItems:"center",padding:"0 8px",cursor:"pointer","&:nth-last-child(1)":{marginBottom:0}}),V=(0,f.iv)({opacity:0,[`.${N}:hover &, &-loading`]:{opacity:1}});function B({musicData:e,onDelete:t,materialId:r,groupData:n,setGroupData:o,provider:i,category:l}){const[c,f]=(0,a.useState)(!1),m=(0,a.useRef)(null),P=(0,a.useRef)(null),[C,B]=(0,a.useState)(0),Z=(0,x.Z)({mime:"Sound",url:e.previewUrl,name:e.name,materialId:r}),[T,z]=(0,a.useState)(!1),[L,U]=(0,a.useState)(e.name),[F,Y]=(0,a.useState)(!1),$=a.useRef(null),Q=(0,w.Z)(),W=()=>{return t=this,null,a=function*(){L!==e.name&&""!==L&&(yield Q(l,i,r,L,o,n)),Y(!1)},new Promise(((e,r)=>{var n=e=>{try{i(a.next(e))}catch(e){r(e)}},o=e=>{try{i(a.throw(e))}catch(e){r(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);i((a=a.apply(t,null)).next())}));var t,a};return(0,a.useEffect)((()=>{const e=setTimeout((()=>{var e;const t=m.current;t&&(c?P.current=t.play():(P.current=null!=(e=P.current)?e:Promise.resolve(),P.current.then((()=>{t.currentTime=0,t.pause(),P.current=null})).catch((()=>{console.log("音频播放失败")}))))}),200);return()=>{clearTimeout(e)}}),[c]),a.createElement("div",(J=((e,t)=>{for(var r in t||(t={}))_.call(t,r)&&R(e,r,t[r]);if(M)for(var r of M(t))D.call(t,r)&&R(e,r,t[r]);return e})({className:N},Z),I(J,A({onMouseOver:()=>f(!0),onMouseOut:()=>f(!1)}))),c?a.createElement(b.Z,{component:h.Z}):a.createElement(b.Z,{component:g.Z}),a.createElement("div",{style:{flex:"1 1 0",margin:"0 8px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},F?a.createElement(s.Z,{ref:$,type:"text",defaultValue:e.name,autoFocus:!0,style:{fontSize:11,height:"20px"},onChange:e=>{U(e.target.value)},onClick:e=>{e.stopPropagation()},onBlur:W,onPressEnter:W}):a.createElement(p.Z,{title:e.name},a.createElement("div",null,e.name))),a.createElement("div",{style:{fontSize:"10px",opacity:.62,paddingRight:"4px"}},y()(1e3*C||0).format("mm:ss.SSS").slice(0,-2)),a.createElement("div",{style:{display:"flex",width:"80px"}},"project"===i&&a.createElement(E.Z,{type:"text",loading:T,className:V,onClick:e=>{e.stopPropagation(),Y(!0)},icon:a.createElement(b.Z,{component:v.Z})}),"project"===i&&"Sound"===l&&a.createElement(E.Z,{type:"text",onClick:t=>{t.stopPropagation();const r=e.previewUrl,n=r.lastIndexOf("."),o=r.substr(n+1);j()({url:`${r}?forceDownload=true`,responseType:"blob"}).then((t=>{(0,S.lm)(t.data,`${e.name}.${o}`)})).catch((e=>{u.ZP.error("下载失败")}))},className:V,icon:a.createElement(b.Z,{component:O.Z})}),t&&a.createElement(E.Z,{type:"text",loading:T,onClick:r=>{r.stopPropagation(),d.Z.confirm({title:`确定删除${e.name}吗？`,okText:"确定",cancelText:"取消",onOk(){z(!0),t().catch((()=>{z(!1)}))}})},icon:a.createElement(b.Z,{component:k.Z})})),a.createElement("audio",{src:e.previewUrl,ref:m,preload:"metadata",onLoadedMetadata:e=>{B(e.target.duration)}}));var J}const Z=(0,n.Z)((function({groupData:e,setGroupData:t,provider:r,category:n}){const{replacing:o}=(0,l.Z)(),s=(0,i.Z)(),p=(0,c.useUserInfo)();return a.createElement("div",null,e.list.map((i=>a.createElement(B,{key:i.id,materialId:i.id,musicData:i,groupData:e,setGroupData:t,provider:r,category:n,onDelete:o||"project"!==r&&("shared"!==r||(null==p?void 0:p.userId)!==i.userId)?void 0:()=>s(n,r,i.id)}))))}));var T=(0,o.Z)("Sound",Z)},70983:function(e,t,r){"use strict";r.d(t,{B1:function(){return V},qS:function(){return Z},p_:function(){return B},Ic:function(){return T},ZP:function(){return N}});var n=r(74173),o=r(18765),a=r(92529),i=r(19091),l=r(19104),c=r(22142),s=r(62255),p=r(26840),u=r(32078),d=r(62732),f=r(53957),m=r(70072),y=r(34450),b=r.n(y),h=r(33058),g=r(10155),v=r(75119),O=r(72704),k=r(76937),x=r(23247),E=r.n(x),w=r(40985),P=Object.defineProperty,j=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const A=(0,d.iv)({cursor:"pointer",marginBottom:"8px",background:"#F9F9F9",borderRadius:"2px",display:"flex",alignItems:"center"}),M=(0,d.iv)({opacity:0,[`.${A}:hover &, &-loading`]:{opacity:1}});function _({videoData:e,onDelete:t,materialId:r,extra:n,groupData:o,setGroupData:a,provider:i,category:l}){const[d,y]=(0,c.useState)(!1),[x,P]=(0,c.useState)(0),_=(0,c.useRef)(null),D=(0,c.useRef)(null),[R,N]=(0,c.useState)(!1),[V,B]=(0,c.useState)(e.name),[Z,T]=(0,c.useState)(!1),z=c.useRef(null),L=(0,k.Z)(),U=()=>{return t=this,null,n=function*(){V!==e.name&&""!==V&&(yield L(l,i,r,V,a,o)),T(!1)},new Promise(((e,r)=>{var o=e=>{try{i(n.next(e))}catch(e){r(e)}},a=e=>{try{i(n.throw(e))}catch(e){r(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,a);i((n=n.apply(t,null)).next())}));var t,n};(0,c.useEffect)((()=>{const e=setTimeout((()=>{var e;const t=_.current;t&&(d?D.current=t.play():(D.current=null!=(e=D.current)?e:Promise.resolve(),D.current.then((()=>{t.currentTime=0,t.pause(),D.current=null})).catch((()=>{console.log("视频播放失败")}))))}),200);return()=>{clearTimeout(e)}}),[d]);const F=(0,f.Z)({mime:"Video",url:e.previewUrl,name:e.name,materialId:r,extra:n});return c.createElement("div",((e,t)=>{for(var r in t||(t={}))S.call(t,r)&&I(e,r,t[r]);if(j)for(var r of j(t))C.call(t,r)&&I(e,r,t[r]);return e})({className:A},F),c.createElement("video",{muted:!0,ref:_,preload:"metadata",style:{width:"100px",height:"76px",objectFit:"contain"},src:e.previewUrl,onMouseOver:()=>y(!0),onMouseOut:()=>y(!1),onLoadedMetadata:e=>{P(e.target.duration)}}),c.createElement("div",{style:{flex:"1 1 0",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",margin:"0"}},Z?c.createElement(s.Z,{ref:z,type:"text",defaultValue:e.name,autoFocus:!0,style:{fontSize:11,height:"20px"},onChange:e=>{B(e.target.value)},onBlur:U,onPressEnter:U,onClick:e=>{e.stopPropagation()}}):c.createElement(p.Z,{title:e.name,placement:"top"},c.createElement("div",null,e.name)),c.createElement("div",{style:{fontSize:"10px",textAlign:"center",opacity:.62}},"时长：",b()(1e3*x||0).format("mm:ss.SSS").slice(0,-2))),c.createElement("div",{style:{display:"flex",width:"70px"}},"project"===i&&c.createElement(m.Z,{type:"text",loading:R,className:M,onClick:e=>{e.stopPropagation(),T(!0)},icon:c.createElement(h.Z,{component:g.Z})}),"project"===i&&c.createElement(m.Z,{type:"text",className:M,onClick:t=>{t.stopPropagation();const r=e.previewUrl,n=r.lastIndexOf("."),o=r.substr(n+1);E()({url:`${r}?forceDownload=true`,responseType:"blob"}).then((t=>{(0,w.lm)(t.data,`${e.name}.${o}`)}))},icon:c.createElement(h.Z,{component:v.Z})}),t&&c.createElement(m.Z,{type:"text",loading:R,onClick:r=>{r.stopPropagation(),u.Z.confirm({title:`确定删除${e.name}吗？`,okText:"确定",cancelText:"取消",onOk(){N(!0),t().catch((()=>{N(!1)}))}})},icon:c.createElement(h.Z,{component:O.Z})})))}var D=r(22142);const R=(0,n.Z)((function({groupData:e,setGroupData:t,category:r,provider:n}){const{replacing:o}=(0,i.Z)(),c=(0,a.Z)(),s=(0,l.useUserInfo)();return D.createElement("div",null,e.list.map((a=>D.createElement(_,{key:a.id,materialId:a.id,videoData:a,extra:a.extra,groupData:e,setGroupData:t,provider:n,category:r,onDelete:o&&"NativeVideo"!==r&&"NativeLoadingVideo"!==r||"project"!==n&&("shared"!==n||(null==s?void 0:s.userId)!==a.userId)?void 0:()=>c(r,n,a.id)}))))}));var N=(0,o.Z)("Video",R);const V=(0,o.Z)("NativeLoadingVideo",R),B=(0,o.Z)("PVAlphaVideo",R),Z=(0,o.Z)("NativeVideo",R),T=(0,o.Z)("VRVideo",R)},79428:function(e,t,r){"use strict";r.d(t,{d:function(){return tr},Z:function(){return yr}});var n,o,a,i,l,c,s,p,u,d,f,m,y,b,h,g,v=r(53957),O=r(62732),k=r(74173),x=r(22142),E=["title","titleId"];function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w.apply(this,arguments)}var P,j=function(e,t){var r=e.title,v=e.titleId,O=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,E);return x.createElement("svg",w({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t,"aria-labelledby":v},O),r?x.createElement("title",{id:v},r):null,n||(n=x.createElement("g",null,x.createElement("g",null,x.createElement("path",{d:"M511.531,8.384c-0.128-0.576-0.128-1.195-0.363-1.749c-1.088-2.645-3.179-4.736-5.824-5.824 c-0.555-0.235-1.152-0.213-1.749-0.363C502.869,0.299,502.144,0,501.333,0H160c-0.619,0-1.173,0.256-1.771,0.363 c-0.768,0.128-1.557,0.149-2.283,0.448c-1.323,0.555-2.496,1.323-3.499,2.325L3.115,152.469c-0.085,0.085-0.107,0.213-0.213,0.299 c-0.853,0.917-1.6,1.963-2.091,3.136C0.277,157.248,0,158.635,0,160.043v341.269c0,1.408,0.277,2.816,0.832,4.117 c0.299,0.704,0.811,1.237,1.237,1.856c0.363,0.533,0.576,1.109,1.045,1.579c0.363,0.341,0.811,0.491,1.195,0.789 c0.725,0.555,1.429,1.152,2.283,1.493C7.893,511.723,9.28,512,10.667,512H352c1.387,0,2.773-0.277,4.075-0.832 c1.173-0.491,2.219-1.216,3.136-2.091c0.085-0.085,0.213-0.107,0.32-0.213l149.333-149.333c0.981-0.981,1.771-2.176,2.304-3.477 c0.299-0.747,0.341-1.515,0.469-2.304c0.107-0.576,0.363-1.131,0.363-1.749V10.667C512,9.856,511.701,9.131,511.531,8.384z  M149.333,36.416v112.917H36.416L149.333,36.416z M21.333,170.667h128v176.917l-128,128V170.667z M341.333,490.667H36.416l128-128 h176.917V490.667z M341.333,341.333H170.667V170.667h170.667V341.333z M347.584,149.333H170.667v-128h304.917L347.584,149.333z  M362.667,475.584V362.667h112.917L362.667,475.584z M490.667,341.333h-128V164.416l128-128V341.333z"})))),o||(o=x.createElement("g",null)),a||(a=x.createElement("g",null)),i||(i=x.createElement("g",null)),l||(l=x.createElement("g",null)),c||(c=x.createElement("g",null)),s||(s=x.createElement("g",null)),p||(p=x.createElement("g",null)),u||(u=x.createElement("g",null)),d||(d=x.createElement("g",null)),f||(f=x.createElement("g",null)),m||(m=x.createElement("g",null)),y||(y=x.createElement("g",null)),b||(b=x.createElement("g",null)),h||(h=x.createElement("g",null)),g||(g=x.createElement("g",null)))},S=(0,x.forwardRef)(j),C=(r.p,["title","titleId"]);function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I.apply(this,arguments)}var A,M,_,D,R,N,V,B,Z,T,z,L,U,F,Y,$,Q=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,C);return x.createElement("svg",I({viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},o),r?x.createElement("title",{id:n},r):null,P||(P=x.createElement("path",{d:"M39 6H9C7.34315 6 6 7.34315 6 9V39C6 40.6569 7.34315 42 9 42H39C40.6569 42 42 40.6569 42 39V9C42 7.34315 40.6569 6 39 6Z",stroke:"#333",strokeWidth:4})))},W=(0,x.forwardRef)(Q),J=(r.p,["title","titleId"]);function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K.apply(this,arguments)}var H,G,q,X,ee,te,re,ne,oe,ae,ie,le,ce,se,pe,ue,de=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,J);return x.createElement("svg",K({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t,"aria-labelledby":n},o),r?x.createElement("title",{id:n},r):null,A||(A=x.createElement("g",null,x.createElement("g",null,x.createElement("path",{d:"M256,0C114.837,0,0,114.837,0,256s114.837,256,256,256s256-114.837,256-256S397.163,0,256,0z M256,21.333 c129.387,0,234.667,105.28,234.667,234.667c0,40.363-96.384,85.333-234.667,85.333c-28.629,0-55.339-2.005-79.893-5.44 c-3.435-24.555-5.44-51.264-5.44-79.893C170.667,117.717,215.637,21.333,256,21.333z M208.512,26.176 C173.184,67.435,149.333,153.707,149.333,256c0,26.688,1.621,52.309,4.651,76.309C72.683,317.205,21.333,285.419,21.333,256 C21.333,142.869,101.824,48.192,208.512,26.176z M26.176,303.488c27.072,23.168,73.429,41.429,131.136,51.2 c9.792,57.707,28.032,104.064,51.2,131.136C117.163,466.965,45.035,394.837,26.176,303.488z M256,490.667 c-29.419,0-61.205-51.349-76.309-132.651c24,3.029,49.621,4.651,76.309,4.651c102.293,0,188.565-23.851,229.824-59.179 C463.808,410.176,369.131,490.667,256,490.667z"})))),M||(M=x.createElement("g",null)),_||(_=x.createElement("g",null)),D||(D=x.createElement("g",null)),R||(R=x.createElement("g",null)),N||(N=x.createElement("g",null)),V||(V=x.createElement("g",null)),B||(B=x.createElement("g",null)),Z||(Z=x.createElement("g",null)),T||(T=x.createElement("g",null)),z||(z=x.createElement("g",null)),L||(L=x.createElement("g",null)),U||(U=x.createElement("g",null)),F||(F=x.createElement("g",null)),Y||(Y=x.createElement("g",null)),$||($=x.createElement("g",null)))},fe=(0,x.forwardRef)(de),me=(r.p,["title","titleId"]);function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ye.apply(this,arguments)}var be,he,ge,ve,Oe,ke,xe,Ee,we,Pe,je,Se,Ce,Ie,Ae,Me,_e,De,Re,Ne,Ve,Be,Ze=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,me);return x.createElement("svg",ye({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 260.397 260.397",style:{enableBackground:"new 0 0 260.397 260.397"},xmlSpace:"preserve",ref:t,"aria-labelledby":n},o),r?x.createElement("title",{id:n},r):null,H||(H=x.createElement("g",null,x.createElement("path",{d:"M151.719,37.683c-0.936-0.936-2.205-1.461-3.529-1.461s-2.593,0.526-3.529,1.462l-27.248,27.255 c-0.017,0.017-0.028,0.038-0.046,0.056c-0.204,0.21-0.391,0.436-0.555,0.68c-0.037,0.055-0.068,0.113-0.103,0.169 c-0.122,0.197-0.23,0.402-0.324,0.615c-0.031,0.071-0.065,0.141-0.093,0.214c-0.095,0.247-0.177,0.5-0.233,0.764l-9.189,43.54 L1.463,216.393c-1.948,1.949-1.948,5.108,0,7.057l35.485,35.485c0.974,0.974,2.252,1.461,3.529,1.461 c1.277,0,2.554-0.487,3.529-1.461l105.412-105.412l43.542-9.188c0.265-0.056,0.518-0.138,0.765-0.234 c0.071-0.027,0.14-0.06,0.21-0.091c0.215-0.094,0.421-0.203,0.618-0.325c0.056-0.035,0.114-0.065,0.169-0.103 c0.242-0.164,0.468-0.35,0.677-0.553c0.018-0.018,0.04-0.029,0.059-0.048l27.254-27.25c0.935-0.936,1.461-2.205,1.461-3.529 s-0.526-2.593-1.461-3.529L151.719,37.683z M40.477,248.35l-28.429-28.429l99.398-99.407l14.216,14.217l14.216,14.217 L40.477,248.35z M148.553,143.506l-31.665-31.665l7.035-33.336l57.967,57.967L148.553,143.506z M191.929,132.397l-63.931-63.931 L148.19,48.27l63.935,63.934L191.929,132.397z"}),x.createElement("path",{d:"M29.776,178.738c1.277,0,2.554-0.487,3.529-1.462l35.492-35.492c1.949-1.948,1.948-5.108,0-7.057 c-1.949-1.949-5.109-1.948-7.057,0.001l-35.492,35.492c-1.949,1.948-1.948,5.108,0,7.057 C27.222,178.251,28.499,178.738,29.776,178.738z"}),x.createElement("path",{d:"M206.674,58.711c1.277,0,2.554-0.487,3.529-1.461l17.746-17.744c1.949-1.949,1.949-5.108,0-7.057 c-1.95-1.949-5.108-1.949-7.057-0.001l-17.746,17.744c-1.949,1.949-1.949,5.108,0,7.057 C204.12,58.223,205.397,58.711,206.674,58.711z"}),x.createElement("path",{d:"M255.406,77.566l-25.099-0.004c-0.001,0-0.001,0-0.001,0c-2.755,0-4.99,2.234-4.99,4.989c0,2.756,2.234,4.99,4.989,4.991 l25.099,0.004c0.001,0,0.001,0,0.001,0c2.755,0,4.99-2.233,4.99-4.989C260.395,79.801,258.161,77.567,255.406,77.566z"}),x.createElement("path",{d:"M177.843,35.076c2.755-0.001,4.989-2.235,4.989-4.99L182.829,4.99c0-2.756-2.235-4.99-4.991-4.99 c-2.755,0-4.989,2.235-4.989,4.99l0.003,25.096C172.852,32.842,175.086,35.076,177.843,35.076z"}))),G||(G=x.createElement("g",null)),q||(q=x.createElement("g",null)),X||(X=x.createElement("g",null)),ee||(ee=x.createElement("g",null)),te||(te=x.createElement("g",null)),re||(re=x.createElement("g",null)),ne||(ne=x.createElement("g",null)),oe||(oe=x.createElement("g",null)),ae||(ae=x.createElement("g",null)),ie||(ie=x.createElement("g",null)),le||(le=x.createElement("g",null)),ce||(ce=x.createElement("g",null)),se||(se=x.createElement("g",null)),pe||(pe=x.createElement("g",null)),ue||(ue=x.createElement("g",null)))},Te=(0,x.forwardRef)(Ze),ze=(r.p,["title","titleId"]);function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Le.apply(this,arguments)}var Ue,Fe,Ye,$e,Qe,We,Je,Ke,He,Ge=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ze);return x.createElement("svg",Le({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t,"aria-labelledby":n},o),r?x.createElement("title",{id:n},r):null,be||(be=x.createElement("g",null,x.createElement("g",null,x.createElement("path",{d:"M256,0c-4.51,0-8.166,3.656-8.166,8.166v44.383c0,4.51,3.656,8.166,8.166,8.166s8.166-3.656,8.166-8.166V8.166 C264.166,3.656,260.51,0,256,0z"})))),he||(he=x.createElement("g",null,x.createElement("g",null,x.createElement("path",{d:"M162.956,74.165l-21.23-38.976c-2.157-3.961-7.117-5.423-11.077-3.265c-3.96,2.158-5.422,7.117-3.265,11.077 l21.231,38.976c1.482,2.721,4.284,4.261,7.178,4.261c1.32,0,2.658-0.32,3.899-0.996C163.652,83.085,165.113,78.125,162.956,74.165 z"})))),ge||(ge=x.createElement("g",null,x.createElement("g",null,x.createElement("path",{d:"M84.418,141.561L47.13,117.488c-3.79-2.448-8.843-1.359-11.289,2.431c-2.446,3.789-1.358,8.844,2.431,11.289 l37.288,24.072c1.37,0.885,2.904,1.307,4.421,1.307c2.679,0,5.305-1.318,6.868-3.738 C89.296,149.061,88.207,144.007,84.418,141.561z"})))),ve||(ve=x.createElement("g",null,x.createElement("g",null,x.createElement("path",{d:"M381.349,31.924c-3.963-2.158-8.921-0.695-11.077,3.265l-21.229,38.976c-2.157,3.961-0.696,8.919,3.264,11.077 c1.241,0.676,2.579,0.996,3.899,0.996c2.894,0,5.696-1.542,7.178-4.261l21.229-38.976 C386.771,39.04,385.309,34.082,381.349,31.924z"})))),Oe||(Oe=x.createElement("g",null,x.createElement("g",null,x.createElement("path",{d:"M476.159,119.92c-2.446-3.789-7.504-4.875-11.289-2.431l-37.288,24.072c-3.789,2.446-4.878,7.5-2.431,11.289 c1.562,2.419,4.187,3.738,6.868,3.738c1.518,0,3.053-0.422,4.421-1.306l37.288-24.072 C477.517,128.762,478.605,123.708,476.159,119.92z"})))),ke||(ke=x.createElement("g",null,x.createElement("g",null,x.createElement("path",{d:"M357.63,119.907c-26.533-26.873-61.926-41.955-99.659-42.465c-39.282-0.496-77.577,15.748-105.133,44.661 c-3.112,3.265-2.987,8.433,0.278,11.545c3.265,3.111,8.435,2.988,11.545-0.278c24.432-25.637,58.362-40.089,93.091-39.599 c33.416,0.453,64.761,13.81,88.259,37.61c23.521,23.822,36.474,55.381,36.474,88.862c0,26.958-8.371,52.692-24.209,74.42 c-0.143,0.196-0.276,0.397-0.402,0.605l-0.998,1.661c-3.899,6.491-7.479,12.45-10.77,17.996c-2.302,3.879-1.023,8.889,2.855,11.19 c1.307,0.775,2.743,1.144,4.159,1.144c2.788,0,5.505-1.428,7.03-4c3.277-5.523,6.841-11.456,10.724-17.92l0.814-1.355 c17.749-24.477,27.127-53.425,27.127-83.742C398.814,182.438,384.188,146.805,357.63,119.907z"})))),xe||(xe=x.createElement("g",null,x.createElement("g",null,x.createElement("path",{d:"M340.905,340.129c-4.009-2.06-8.933-0.481-10.995,3.531c-7.356,14.315-11.749,26.121-14.148,38.268H196.238 c-4.863-24.654-17.421-45.557-40.65-84.227l-1.461-2.431c-0.125-0.208-0.259-0.409-0.402-0.606 c-15.838-21.728-24.209-47.462-24.209-74.42c0-21.791,5.819-43.38,16.83-62.432c2.257-3.904,0.92-8.899-2.984-11.155 c-3.903-2.257-8.898-0.921-11.155,2.984c-12.443,21.533-19.02,45.947-19.02,70.603c0,30.316,9.378,59.264,27.127,83.742 l1.277,2.125c23.336,38.849,34.733,57.826,38.853,80.175c-7.504,4.854-12.484,13.29-12.484,22.873 c0,7.418,2.984,14.148,7.812,19.064c-4.828,4.916-7.812,11.647-7.812,19.064c0,15.015,12.216,27.231,27.229,27.231h11.417 C212.696,496.319,232.792,512,256,512c23.208,0,43.304-15.68,49.395-37.483h11.417c15.015,0,27.229-12.216,27.229-27.231 c0-7.418-2.984-14.148-7.812-19.064c4.827-4.916,7.812-11.647,7.812-19.064c0-9.583-4.98-18.02-12.484-22.873 c2.04-11.092,5.916-21.612,12.878-35.161C346.497,347.113,344.915,342.19,340.905,340.129z M256,495.669 c-14.214,0-26.716-8.625-32.117-21.152h64.234C282.714,487.044,270.212,495.669,256,495.669z M294.103,436.388h22.708 c6.01,0,10.898,4.89,10.898,10.898c0,6.01-4.89,10.899-10.898,10.899H195.187c-6.01,0-10.898-4.89-10.898-10.899 s4.89-10.898,10.898-10.898h66.631c4.51,0,8.166-3.656,8.166-8.166s-3.656-8.166-8.166-8.166h-66.631 c-6.01,0-10.898-4.89-10.898-10.898c0-4.921,3.279-9.086,7.766-10.436c0.421-0.126,0.851-0.221,1.286-0.295 c0.131-0.023,0.261-0.042,0.393-0.06c0.48-0.063,0.964-0.109,1.453-0.109h121.623c0.49,0,0.973,0.045,1.453,0.109 c0.133,0.017,0.263,0.038,0.395,0.061c0.431,0.073,0.858,0.168,1.276,0.293c4.491,1.347,7.775,5.513,7.775,10.438 c0,6.01-4.89,10.898-10.898,10.898h-22.708c-4.51,0-8.166,3.656-8.166,8.166C285.938,432.733,289.593,436.388,294.103,436.388z"})))),Ee||(Ee=x.createElement("g",null)),we||(we=x.createElement("g",null)),Pe||(Pe=x.createElement("g",null)),je||(je=x.createElement("g",null)),Se||(Se=x.createElement("g",null)),Ce||(Ce=x.createElement("g",null)),Ie||(Ie=x.createElement("g",null)),Ae||(Ae=x.createElement("g",null)),Me||(Me=x.createElement("g",null)),_e||(_e=x.createElement("g",null)),De||(De=x.createElement("g",null)),Re||(Re=x.createElement("g",null)),Ne||(Ne=x.createElement("g",null)),Ve||(Ve=x.createElement("g",null)),Be||(Be=x.createElement("g",null)))},qe=(0,x.forwardRef)(Ge),Xe=(r.p,["title","titleId"]);function et(){return et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},et.apply(this,arguments)}var tt,rt,nt,ot,at,it,lt,ct,st,pt,ut,dt,ft,mt,yt,bt,ht=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Xe);return x.createElement("svg",et({width:"48px",height:"48px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},o),r?x.createElement("title",{id:n},r):null,Ue||(Ue=x.createElement("path",{d:"M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),Fe||(Fe=x.createElement("path",{d:"M22 12L23 12",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),Ye||(Ye=x.createElement("path",{d:"M12 2V1",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),$e||($e=x.createElement("path",{d:"M12 23V22",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),Qe||(Qe=x.createElement("path",{d:"M20 20L19 19",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),We||(We=x.createElement("path",{d:"M20 4L19 5",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),Je||(Je=x.createElement("path",{d:"M4 20L5 19",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),Ke||(Ke=x.createElement("path",{d:"M4 4L5 5",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),He||(He=x.createElement("path",{d:"M1 12L2 12",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))},gt=(0,x.forwardRef)(ht),vt=(r.p,["title","titleId"]);function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ot.apply(this,arguments)}var kt,xt,Et,wt,Pt=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,vt);return x.createElement("svg",Ot({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 307.192 307.192",style:{enableBackground:"new 0 0 307.192 307.192"},xmlSpace:"preserve",ref:t,"aria-labelledby":n},o),r?x.createElement("title",{id:n},r):null,tt||(tt=x.createElement("g",null,x.createElement("path",{d:"M52.173,68.291L51.865,192.96l38.403,22.428l0.063,6.344l-62.767-36.461L0,201.416l95.198,55.702l21.044-12.23l0.09-14.238 l102.419,59.844l88.279-51.587l0.162-124.886L140.552,16.699L52.173,68.291z M180.787,250.883L67.012,184.435V89.824 l113.775,66.446V250.883z M209.03,267.377l-13.243-7.734V165.03l13.243,7.746V267.377z M224.168,270.656v-98.272l22.475-13.111 c-11.483,12.079-19.784,35.158-19.784,57.023c0,17.414,5.272,30.302,14.465,35.359c2.726,1.499,5.634,2.245,8.614,2.245 c1.16,0,2.332-0.115,3.508-0.341L224.168,270.656z M252.889,236.763c-2.528,1.604-3.525,1.053-3.854,0.871 c-1.614-0.888-3.735-4.095-5.025-9.836c1.615,0.291,3.398-0.104,5.275-1.293c7.254-4.599,13.136-19.229,13.136-32.679 c0-10.671-3.704-17.386-8.857-17.41c2.526-4.1,5.253-7.203,7.891-8.875c1.387-0.879,2.313-1.109,2.922-1.109 c0.501,0,0.786,0.156,0.935,0.238c2.482,1.365,6.176,8.176,6.176,21.339C271.486,209.794,261.686,231.188,252.889,236.763z  M292.03,231.03l-24.825,14.514c11.74-11.929,20.281-35.356,20.281-57.534c0-17.413-5.271-30.301-14.464-35.357 c-3.643-2.004-7.612-2.66-11.644-1.993l30.651-17.899V231.03z M286.415,119.074l-69.795,40.761l-17.505-10.211l69.794-40.769 L286.415,119.074z M254.229,100.234l-69.738,40.849L70.537,74.533l69.691-40.828L254.229,100.234z"}))),rt||(rt=x.createElement("g",null)),nt||(nt=x.createElement("g",null)),ot||(ot=x.createElement("g",null)),at||(at=x.createElement("g",null)),it||(it=x.createElement("g",null)),lt||(lt=x.createElement("g",null)),ct||(ct=x.createElement("g",null)),st||(st=x.createElement("g",null)),pt||(pt=x.createElement("g",null)),ut||(ut=x.createElement("g",null)),dt||(dt=x.createElement("g",null)),ft||(ft=x.createElement("g",null)),mt||(mt=x.createElement("g",null)),yt||(yt=x.createElement("g",null)),bt||(bt=x.createElement("g",null)))},jt=(0,x.forwardRef)(Pt),St=(r.p,["title","titleId"]);function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ct.apply(this,arguments)}var It,At=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,St);return x.createElement("svg",Ct({width:50,height:50,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},o),r?x.createElement("title",{id:n},r):null,kt||(kt=x.createElement("rect",{x:6,y:5,width:18,height:32,fill:"none",stroke:"#333",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"})),xt||(xt=x.createElement("rect",{x:24,y:11,width:18,height:32,fill:"none",stroke:"#333",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"})),Et||(Et=x.createElement("path",{d:"M13 17L17 20.7895L13.3333 25",stroke:"#333",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"})),wt||(wt=x.createElement("path",{d:"M31 23L35 26.7895L31.3333 31",stroke:"#333",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"})))},Mt=(0,x.forwardRef)(At),_t=(r.p,["title","titleId"]);function Dt(){return Dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dt.apply(this,arguments)}var Rt,Nt=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,_t);return x.createElement("svg",Dt({width:50,height:50,viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},o),r?x.createElement("title",{id:n},r):null,It||(It=x.createElement("g",null,x.createElement("rect",{width:48,height:48,fill:"white",fillOpacity:.01,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,stroke:"none",fillRule:"evenodd"}),x.createElement("g",{transform:"translate(5.000000, 4.000000)"},x.createElement("path",{d:"M25,0 L25,6 M34.8994949,4.10050506 L30.6568542,8.34314575 M39,14 L33,14 M34.8994949,23.8994949 L30.6568542,19.6568542 M25,28 L25,22 M15.1005051,23.8994949 L19.3431458,19.6568542 M11,14 L17,14 M15.1005051,4.10050506 L19.3431458,8.34314575",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,stroke:"#333",fill:"none",fillRule:"evenodd"}),x.createElement("path",{d:"M24.5857864,14.4142136 L0.544155877,38.4558441",transform:"translate(12.564971, 26.435029) rotate(-0.000000) translate(-12.564971, -26.435029) ",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,stroke:"#333",fill:"none",fillRule:"evenodd"})))))},Vt=(0,x.forwardRef)(Nt),Bt=(r.p,["title","titleId"]);function Zt(){return Zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zt.apply(this,arguments)}var Tt,zt,Lt,Ut=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Bt);return x.createElement("svg",Zt({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},o),r?x.createElement("title",{id:n},r):null,Rt||(Rt=x.createElement("g",null,x.createElement("rect",{width:48,height:48,fill:"white",fillOpacity:.01,strokeLinecap:"round",strokeWidth:4,stroke:"none",fillRule:"evenodd"}),x.createElement("g",{transform:"translate(8.000000, 5.000000)"},x.createElement("g",{transform:"translate(7.000000, 7.000000)"},x.createElement("path",{d:"M0,14 L0,3 C0,1.34314575 1.34314575,0 3,0 C4.65685425,0 6,1.34314575 6,3 L6,14",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,stroke:"#333",fill:"none",fillRule:"evenodd"}),x.createElement("path",{d:"M24,13 L24,19.5 C24,25.8512746 18.8512746,31 12.5,31 L11.5,31 C5.14872538,31 0,25.8512746 0,19.5 L0,13",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,stroke:"#333",fill:"none",fillRule:"evenodd"}),x.createElement("path",{d:"M6,17 L6,15.1057529 L6,12 C6,10.3431458 7.34314575,9 9,9 C10.6568542,9 12,10.3431458 12,12 L12,15.1818037 L12,17",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,stroke:"#333",fill:"none",fillRule:"evenodd"}),x.createElement("path",{d:"M12,17 L12,15.1057529 L12,12 C12,10.3431458 13.3431458,9 15,9 C16.6568542,9 18,10.3431458 18,12 L18,15.1818037 L18,17",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,stroke:"#333",fill:"none",fillRule:"evenodd"}),x.createElement("path",{d:"M18,17 L18,15.1057529 L18,12 C18,10.3431458 19.3431458,9 21,9 C22.6568542,9 24,10.3431458 24,12 L24,15.1818037 L24,17",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,stroke:"#333",fill:"none",fillRule:"evenodd"})),x.createElement("path",{d:"M20,10 C20,8.94888684 19.8378284,7.93565088 19.5371411,6.98394793 C19.2008409,5.91952713 18.6912709,4.93207821 18.0415268,4.05469702 C16.2197921,1.59471942 13.2961294,0 10,0 C6.70387063,0 3.78020794,1.59471942 1.95847316,4.05469702 C1.30872911,4.93207821 0.799159071,5.91952713 0.462858909,6.98394793 C0.162171574,7.93565088 0,8.94888684 0,10",strokeLinecap:"round",strokeWidth:4,stroke:"#333",fill:"none",fillRule:"evenodd"})))))},Ft=(0,x.forwardRef)(Ut),Yt=(r.p,["title","titleId"]);function $t(){return $t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$t.apply(this,arguments)}var Qt=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Yt);return x.createElement("svg",$t({viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},o),r?x.createElement("title",{id:n},r):null,Tt||(Tt=x.createElement("path",{d:"M14 28C17 28 26.5 29.5 26.5 33C26.5 36.5 21.394 35.7386 19 36C16.9274 36 12 36 12 39C12 43 32.5447 44 36.5 44",stroke:"#333",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"})),zt||(zt=x.createElement("path",{d:"M31 15C31 10.7333 26.7297 4 20.805 4C14.8804 4 10.333 12 8.54511 19.4667C6.7572 26.9333 7.01261 36 7.01261 36",stroke:"#333",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"})),Lt||(Lt=x.createElement("path",{d:"M26 24C26 21.5 27.4 17 32 17C36 17 38.2 21.0424 39 24.5C39.8 27.9576 40 33 40 33",stroke:"#333",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"})))},Wt=(0,x.forwardRef)(Qt),Jt=(r.p,r(42761)),Kt=r(22142),Ht=Object.defineProperty,Gt=Object.getOwnPropertySymbols,qt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable,er=(e,t,r)=>t in e?Ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const tr=[{comp:W,name:"平面",key:"plane"},{comp:fe,name:"球体",key:"sphere"},{comp:S,name:"正方体",key:"box"}],rr=[{comp:gt,name:"方向光",key:"directional"},{comp:qe,name:"点光源",key:"point"},{comp:Te,name:"聚光灯",key:"spot"}],nr=[{comp:jt,name:"摄像机",key:"camera"},{comp:Mt,name:"拖尾",key:"Trail3D"},{comp:Vt,name:"粒子容器",key:"Particle3D"},{comp:Wt,name:"全景节点",key:"panoramaSpace"},{comp:Ft,name:"热点",key:"panoramaHotSpot"}],or=({name:e,Comp:t,dragProps:r})=>Kt.createElement("div",{style:{width:"72px",marginRight:"4px",marginBottom:"8px"}},Kt.createElement("div",((e,t)=>{for(var r in t||(t={}))qt.call(t,r)&&er(e,r,t[r]);if(Gt)for(var r of Gt(t))Xt.call(t,r)&&er(e,r,t[r]);return e})({className:(0,O.iv)({height:"72px",borderRadius:"2px",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center",cursor:"pointer",marginBottom:"4px",padding:"10px",backgroundColor:"#f5f5f5",":nth-child(3n+3)":{marginRight:0}})},r),Kt.createElement(t,null)),Kt.createElement("div",{style:{textAlign:"center"}},e)),ar=({name:e,url:t,Comp:r})=>{const n=(0,v.Z)({mime:"MeshSprite3D",name:e,url:t});return Kt.createElement(or,{name:e,Comp:r,dragProps:n})},ir=({name:e,url:t,Comp:r})=>{const n=(0,v.Z)({mime:"Light",name:e,url:t});return Kt.createElement(or,{name:e,Comp:r,dragProps:n})},lr=({name:e,Comp:t})=>{const r=(0,v.Z)({mime:"Camera",name:"摄像机",url:""});return Kt.createElement(or,{name:e,Comp:t,dragProps:r})},cr=({name:e,Comp:t})=>{const r=(0,v.Z)({mime:"Trail3D",name:"拖尾",url:""});return Kt.createElement(or,{name:e,Comp:t,dragProps:r})},sr=({name:e,Comp:t})=>{const r=(0,v.Z)({mime:"Particle3D",name:"粒子容器",url:""});return Kt.createElement(or,{name:e,Comp:t,dragProps:r})},pr=({name:e,Comp:t})=>{const r=(0,v.Z)({mime:"PanoramaSpace",name:"全景节点",url:""});return Kt.createElement(or,{name:e,Comp:t,dragProps:r})},ur=({name:e,Comp:t})=>{const r=(0,v.Z)({mime:"PanoramaHotSpot",name:"热点",url:""});return Kt.createElement(or,{name:e,Comp:t,dragProps:r})},dr=()=>Kt.createElement(k.G,{groups:[{name:"网格",status:"loaded",expandable:!0,list:tr,total:tr.length}]},(e=>Kt.createElement("div",{className:(0,O.iv)({display:"flex",flexWrap:"wrap"})},e.list.map(((e,t)=>Kt.createElement(ar,{key:t,name:e.name,url:e.key,Comp:e.comp})))))),fr=()=>Kt.createElement(k.G,{groups:[{name:"光源",status:"loaded",expandable:!0,list:rr,total:rr.length}]},(e=>Kt.createElement("div",{className:(0,O.iv)({display:"flex",flexWrap:"wrap"})},e.list.map(((e,t)=>Kt.createElement(ir,{key:t,name:e.name,url:e.key,Comp:e.comp})))))),mr=()=>{const e="PanoramaData"===(0,Jt.v9)((({project:e})=>e.type));return Kt.createElement(k.G,{groups:[{name:"通用",status:"loaded",expandable:!0,list:nr,total:nr.length}]},(t=>Kt.createElement("div",{className:(0,O.iv)({display:"flex",flexWrap:"wrap"})},Kt.createElement(lr,{name:t.list[0].name,Comp:t.list[0].comp}),Kt.createElement(cr,{name:t.list[1].name,Comp:t.list[1].comp}),Kt.createElement(sr,{name:t.list[2].name,Comp:t.list[2].comp}),Kt.createElement(pr,{name:t.list[3].name,Comp:t.list[3].comp}),e&&Kt.createElement(ur,{name:t.list[4].name,Comp:t.list[4].comp}))))};var yr=()=>Kt.createElement(Kt.Fragment,null,Kt.createElement(dr,null),Kt.createElement(fr,null),Kt.createElement(mr,null))},83413:function(e,t,r){"use strict";r.d(t,{Z:function(){return T}});var n=r(22142),o=r(42761),a=r(62732),i=r(92529),l=r(33058),c=r(26995),s=r(19104),p=r(40985),u=r(3197),d=r(19091),f=r(48751),m=r(48837),y=r(22142),b=Object.defineProperty,h=Object.defineProperties,g=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,x=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E=e=>{const[t,r]=(0,n.useState)("");return(0,n.useEffect)((()=>{let t=!0;return t&&(0,m.captureNode3DData)(e.previewUrl).then((e=>{r(e)})),()=>{t=!1}}),[e.previewUrl]),y.createElement(f.vE,(o=((e,t)=>{for(var r in t||(t={}))O.call(t,r)&&x(e,r,t[r]);if(v)for(var r of v(t))k.call(t,r)&&x(e,r,t[r]);return e})({},e),h(o,g({cover:t}))));var o};const w={container:(0,a.iv)({display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridAutoRows:"auto",rowGap:"8px"})},P=()=>{const e=(0,s.useOnAddComponent)({is3D:!0});return n.createElement("div",{style:{width:"72px",height:"72px",cursor:"pointer",border:"1px solid #f0f0f0",borderRadius:"2px",justifySelf:"center",background:"#eef3fe",display:"flex",justifyContent:"center",color:"#3955f6",alignItems:"center",fontSize:"1.62em"},onClick:e},n.createElement(l.Z,{component:c.Z}))};function j({groupData:e,category:t,provider:r}){const a=(0,i.Z)(),{getState:l,dispatch:c}=(0,o.oR)(),{readOnly:f}=(0,s.useEditor)(0,"readOnly"),{replacing:m}=(0,d.Z)(),{onEditComponent:y}=(0,s.useOnEditComponent)(),b=(0,o.v9)((({project:t})=>{if("project"===r){const e=[];for(;t;){for(const r of t.scenes)"Animation3D"!==r.type||!1===r.editor.isOpen||e.some((({orderId:e})=>e===r.orderId))||e.push(r);t=t.editor.prevState}return e.map((({id:e,orderId:t,name:r,editor:{capture:n}})=>({id:e,previewUrl:t,name:r,cover:n})))}return null==e?void 0:e.list}),o.wU);return n.createElement("div",{className:w.container},"project"===r&&n.createElement(P,null),null==b?void 0:b.map((e=>n.createElement(E,{key:e.id,materialId:e.id,provider:r,category:t,url:e.previewUrl,name:e.name,previewUrl:e.previewUrl,extra:e.extra,description:e.description||"",onEdit:f||m||"public"===r||"Animation3D"!==t?void 0:()=>{y(e.previewUrl)},onDelete:f||m||"public"===r?void 0:()=>{return n=this,null,o=function*(){if("Animation3D"===t&&"number"==typeof e.previewUrl){const{project:t}=l();if("Component"===t.type&&e.previewUrl===t.scenes[0].orderId)throw new Error("组件正在编辑，不能删除");if((0,p.rz)(t,e.previewUrl))throw new Error("组件正在使用，不能删除");const{sceneId:r,id:n}=(0,p._N)(t,e.previewUrl);yield u.r4(r).then((()=>{c((0,s.deleteScene)(n))}))}else yield a(t,r,e.id)},new Promise(((e,t)=>{var r=e=>{try{i(o.next(e))}catch(e){t(e)}},a=e=>{try{i(o.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,a);i((o=o.apply(n,null)).next())}));var n,o}}))))}var S=r(18765),C=r(74173),I=r(22142),A=Object.defineProperty,M=Object.defineProperties,_=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,V=(e,t,r)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,B=(e,t)=>{for(var r in t||(t={}))R.call(t,r)&&V(e,r,t[r]);if(D)for(var r of D(t))N.call(t,r)&&V(e,r,t[r]);return e};const Z=(0,C.Z)(j);var T=(0,S.Z)("Animation3D",(e=>{return"public"===e.provider?I.createElement(Z,B({},e)):I.createElement("div",{style:{padding:"16px 12px 0"}},I.createElement(j,(t=B({},e),r={groupData:e.groups[0]},M(t,_(r)))));var t,r}))},86274:function(e,t,r){"use strict";r.d(t,{Z:function(){return E}});var n=r(22142),o=r(48751),a=r(62732),i=r(19104),l=r(42761),c=r(55791);const s={container:(0,a.iv)({display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridAutoRows:"auto",rowGap:"8px"})};function p({groupData:e,category:t,provider:r}){const a=(0,i.useUserInfo)(),{deleteCubemap:p}=(0,c.Z)(),u=(0,l.v9)((({project:t})=>{var n;if("project"===r){const e=[];for(;t;){for(const r of t.cubemaps)e.some((({orderId:e})=>e===r.orderId))||e.push(r);t=t.editor.prevState}return e.map((({id:e,orderId:t,name:r="全景图",props:n})=>({id:e,orderId:t,previewUrl:n.cover,name:r,cover:n.cover,userId:0})))}return null!=(n=null==e?void 0:e.list)?n:[]}),l.wU);return n.createElement("div",{className:s.container},u.map((e=>n.createElement(o.vE,{key:e.id,materialId:e.id,category:t,provider:r,name:e.name,url:e.orderId,cover:e.cover,orderId:e.orderId,onDelete:"project"===r||"shared"===r&&(null==a?void 0:a.userId)===e.userId?()=>{return t=this,null,r=function*(){return p(e.id)},new Promise(((e,n)=>{var o=e=>{try{i(r.next(e))}catch(e){n(e)}},a=e=>{try{i(r.throw(e))}catch(e){n(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,a);i((r=r.apply(t,null)).next())}));var t,r}:void 0}))))}var u=r(18765),d=r(74173),f=r(22142),m=Object.defineProperty,y=Object.defineProperties,b=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,k=(e,t)=>{for(var r in t||(t={}))g.call(t,r)&&O(e,r,t[r]);if(h)for(var r of h(t))v.call(t,r)&&O(e,r,t[r]);return e};const x=(0,d.Z)(p);var E=(0,u.Z)("Cubemaps",(e=>{return"public"===e.provider?f.createElement(x,k({},e)):f.createElement("div",{style:{padding:"16px 12px 0"}},f.createElement(p,(t=k({},e),r={groupData:e.groups[0]},y(t,b(r)))));var t,r}))},55791:function(e,t,r){"use strict";var n=r(3197),o=r(7910),a=r(48837),i=r(19104),l=r(1850),c=r(73073),s=r(40985),p=r(61754),u=r(23247),d=r.n(u),f=r(42761),m=r(50815),y=Object.defineProperty,b=Object.defineProperties,h=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,k=(e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,x=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&k(e,r,t[r]);if(g)for(var r of g(t))O.call(t,r)&&k(e,r,t[r]);return e},E=(e,t)=>b(e,h(t)),w=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));t.Z=()=>{const{getState:e,dispatch:t}=(0,f.oR)(),{changeSceneHiddenProperty:r,getCurrentSceneNode3DProps:u}=(0,l.$)(),y=(0,f.v9)((({project:e})=>e.id)),b=(0,c.iQ)(),h=(r,l)=>w(void 0,null,(function*(){var c,s;let p;if("number"==typeof r){const e=yield(0,m.E)(yield(0,a.createAsset)("天空盒","Skybox6SidedMaterial",r));p=x({},e.files[e.entry])}else p=(yield d().get(`${(0,o.GR)(r,e().project.settings.basePath)}`)).data;if("string"==typeof(null==(c=p.props)?void 0:c.cubemapUrl)){const{data:t}=yield d().get(`${(0,o.GR)(null==(s=p.props)?void 0:s.cubemapUrl,e().project.settings.basePath)}`),r=yield b(t);p.props.cubemapUrl=r.orderId}const u={material:p,name:null!=l?l:"天空盒",type:"Material",isCustom:!1,_originUrl:""},{id:f,orderId:h}=yield(0,n.aY)({projectId:y,name:null!=l?l:"天空盒",sceneContent:JSON.stringify(u)});return t((0,i.addMaterial)(E(x({},u),{id:f,orderId:h}))),h}));return{deleteCubemap:r=>w(void 0,null,(function*(){var o;const a=null==(o=(0,s.qZ)(e().project).find((e=>e.id===r)))?void 0:o.orderId;a&&((0,s.PM)(e().project,a)?p.ZP.error("全景图正在使用，无法删除"):(t((0,i.deleteCubemap)(r)),yield(0,n.r4)(r)))})),createMaterial:h,scene3DApplyCubemap:(n,o)=>w(void 0,null,(function*(){const a=u();if(a){if((null==a?void 0:a.skyboxMaterialUrl)||"number"!=typeof n){const r=e().project.materials.find((e=>e.orderId===a.skyboxMaterialUrl));if(!r)return void p.ZP.error(`找不到材质 orderId: ${a.skyboxMaterialUrl}`);t((0,i.updateMaterial)(r.id,E(x({},r.material),{props:E(x({},r.material.props),{cubemapUrl:n})}))),null==o||o(r.orderId)}else{const e=yield h(n);null==o||o(e)}setTimeout(r)}else p.ZP.error("不存在 scene3D 节点")})),scene3DCancelApplyCubemap:(n,o)=>{const a=e().project.materials.find((e=>e.orderId===n));a&&(t((0,i.updateMaterial)(a.id,E(x({},a.material),{props:E(x({},a.material.props),{cubemapUrl:0})}))),null==o||o(),setTimeout(r))}}}},95787:function(e,t,r){"use strict";r.d(t,{QR:function(){return v},em:function(){return g},tT:function(){return O}});var n=r(19104),o=r(40985),a=r(61754),i=r(22142),l=r(42761),c=Object.defineProperty,s=Object.defineProperties,p=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&m(e,r,t[r]);if(u)for(var r of u(t))f.call(t,r)&&m(e,r,t[r]);return e},b=(e,t)=>s(e,p(t)),h=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const g=()=>{const{dispatch:e,getState:t}=(0,l.oR)(),[r,c]=(0,i.useState)(!1),s=(0,n.useEmitter)("LoadComponent");return{loading:r,onEditModel:(0,i.useCallback)((r=>h(void 0,null,(function*(){let i=(0,o.q7)(t().project);i=b(y({},i),{editor:b(y({},i.editor),{contextMenu:void 0})});const l=()=>h(this,null,(function*(){try{c(!0);const t=yield(0,o.sH)(i,r);t.editor.edit3d=!0;const a=(0,n.newCase)([t],"Model",i);a.editor.readOnly="string"==typeof r||i.editor.readOnly,a.settings.store=i.settings.store,a.settings.layerCollisions=i.settings.layerCollisions,a.settings.layerCollisionName=i.settings.layerCollisionName,a.materials=i.materials,a.id=i.id,e((0,n.restoreState)(a)),e((0,n.changeCategory)(""))}catch(e){a.ZP.error("不能打开模型"),c(!1)}}));["Component","PanoramaData"].includes(i.type)?s({loadComponent:l}):l()}))),[t,e,s])}},v=()=>{const{canIntoModel:e,url:t}=(0,l.v9)((({project:e})=>{var t,r;const{editor:n,props:a}=(0,o.zh)(e),{nodeIds:i}=(0,o.bN)(n.selected),{url:l=""}=null!=(t=a[i[0]])?t:{};return{canIntoModel:"Model"===(null==(r=a[i[0]])?void 0:r.type)?"string"==typeof l?"view":"edit":"None",url:l}}),l.wU);return{canIntoModel:e,modelUrl:t}},O=()=>{const{dispatch:e,getState:t}=(0,l.oR)();return{addModelInEdit:r=>h(void 0,null,(function*(){var a,i;const l=yield(0,o.sH)(t().project,r);if(l){const r=null==(a=(0,o.zh)(t().project,void 0,!1))?void 0:a.id;let c=l.nodes.length;null==(i=l.nodes)||i.forEach((t=>{e((0,n.addFromNode)(r,c,b(y({},t),{id:(0,o.xv)()}),void 0,void 0)),c++}))}}))}}},12278:function(e,t,r){"use strict";r.d(t,{Z:function(){return M}});var n=r(22142),o=r(19104),a=r(19091),i=r(92529),l=r(62732),c=r(42761),s=r(48751),p=r(73073),u=r(22142),d=Object.defineProperty,f=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=e=>{const t=(0,p.l6)();return(0,n.useEffect)((()=>{let r=!0;return r&&!e.cover&&e.orderId&&t(e.orderId),()=>{r=!1}}),[e.cover]),u.createElement(s.vE,((e,t)=>{for(var r in t||(t={}))m.call(t,r)&&b(e,r,t[r]);if(f)for(var r of f(t))y.call(t,r)&&b(e,r,t[r]);return e})({},e))},g=r(63361);const v={container:(0,l.iv)({display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridAutoRows:"auto",rowGap:"8px"})};function O({groupData:e,category:t,provider:r}){const{onDeleteSceneResource:l}=(0,g.aZ)("Model"),s=(0,o.useUserInfo)(),{replacing:p}=(0,a.Z)(),u=(0,i.Z)(),d=(0,c.v9)((({project:t})=>{var n;if("project"===r){const e=[];for(;t;){for(const r of t.scenes)"Model"!==r.type||e.some((({orderId:e})=>e===r.orderId))||e.push(r);t=t.editor.prevState}return e.map((({id:e,orderId:t,name:r,editor:{cover:n}})=>({id:e,previewUrl:t,name:r,cover:n,userId:0,orderId:t})))}return null!=(n=null==e?void 0:e.list)?n:[]}),c.wU);return n.createElement("div",{className:v.container},d.map((e=>n.createElement(h,{key:e.id,materialId:e.id,category:t,provider:r,name:e.name,cover:e.cover,url:e.previewUrl,orderId:e.orderId,onDelete:p||"project"!==r&&("shared"!==r||(null==s?void 0:s.userId)!==e.userId)?void 0:()=>{return n=this,null,o=function*(){if("number"!=typeof e.previewUrl)return u(t,r,e.id);yield l(e.previewUrl)},new Promise(((e,t)=>{var r=e=>{try{i(o.next(e))}catch(e){t(e)}},a=e=>{try{i(o.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,a);i((o=o.apply(n,null)).next())}));var n,o}}))))}var k=r(18765),x=r(74173),E=r(22142),w=Object.defineProperty,P=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,C=(e,t,r)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,I=(e,t)=>{for(var r in t||(t={}))j.call(t,r)&&C(e,r,t[r]);if(P)for(var r of P(t))S.call(t,r)&&C(e,r,t[r]);return e};const A=(0,x.Z)(O);var M=(0,k.Z)("Model",(e=>"public"===e.provider?E.createElement(A,I({},e)):E.createElement(O,I({},e))))},63361:function(e,t,r){"use strict";r.d(t,{Dp:function(){return M},Rv:function(){return I},aZ:function(){return C},yk:function(){return A}});var n,o,a=r(3197),i=r(63414),l=r(7910),c=r(48837),s=r(19104),p=r(1850),u=r(40985),d=r(61754),f=r(23247),m=r.n(f),y=r(73760),b=r(22142),h=r(42761),g=Object.defineProperty,v=Object.defineProperties,O=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,P=(e,t)=>{for(var r in t||(t={}))x.call(t,r)&&w(e,r,t[r]);if(k)for(var r of k(t))E.call(t,r)&&w(e,r,t[r]);return e},j=(e,t)=>v(e,O(t)),S=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));(o=n||(n={})).Model="模型",o.Particle3D="3D粒子",o.Component="组件",o.PanoramaData="全景";const C=e=>{const{getState:t,dispatch:r}=(0,h.oR)();return{onDeleteSceneResource:o=>S(void 0,null,(function*(){const{project:l}=t();if(l.type===e&&o===l.scenes[0].orderId)throw new Error(`${n[e]}正在编辑，不能删除`);if((0,u.rz)(l,o))throw new Error(`${n[e]}正在使用，不能删除`);const{sceneId:c,id:s}=(0,u._N)(l,o);yield a.r4(c).then((()=>{r((0,i.deleteScene)(s))}))}))}},I=()=>{const{dispatch:e,getState:t}=(0,h.oR)(),r=(0,s.useProject)("id"),{getSceneFromUrl:n}=(0,p.$)(),o=t=>S(void 0,null,(function*(){var n;const{props:o}=t;if(null==o?void 0:o.url){const{data:t}=yield m().get((0,l.GR)(o.url)),{orderId:i,id:c}=yield(0,a.aY)({name:null!=(n=t.name)?n:"粒子容器",projectId:r,sceneContent:JSON.stringify(t)});return e((0,s.addComponent)((0,u.m7)(j(P({},t),{id:c,sceneId:c,orderId:i,parentId:o.url})))),i}}));return{onParticleNodeToScene:o,getConvertParticleNode:e=>S(void 0,null,(function*(){e=(0,y.cloneDeep)(e);const t=e=>S(this,null,(function*(){var r;if("Particle3D"===(null==e?void 0:e.type)){const t=yield o(e);t&&(e.props.url=t)}else if(null==e?void 0:e.nodes)for(let n=0;n<(null==(r=null==e?void 0:e.nodes)?void 0:r.length);n++)yield t(e.nodes[n])}));return yield t(e),e})),addParticle3DInEdit:r=>S(void 0,null,(function*(){var o,a;const l=yield n(t().project,r);if(l){const r=null==(o=(0,u.zh)(t().project,void 0,!1))?void 0:o.id;let n=l.nodes.length;null==(a=l.nodes)||a.forEach((t=>{e((0,i.addFromNode)(r,n,j(P({},t),{id:(0,u.xv)()}),void 0,void 0)),n++}))}})),createEmptyParticleSystem3D:()=>S(void 0,null,(function*(){let t=(0,i.newScene)("粒子",{type:"Particle3D",nodes:[yield(0,c.createNode)("粒子","ParticleSystem3D",u.xv,"")],edit3d:!0});const{id:n,orderId:o}=yield(0,a.aY)({projectId:r,name:t.name,sceneContent:JSON.stringify((0,u.GV)(t))});return t=(0,u.oY)(t,n,o),e((0,s.addComponent)(j(P({},t),{id:t.id,sceneId:t.id,orderId:o}))),t}))}},A=()=>{const{canIntoParticle3D:e,url:t}=(0,h.v9)((({project:e})=>{var t,r;const{editor:n,props:o}=(0,u.zh)(e),{nodeIds:a}=(0,u.bN)(n.selected),{url:i=""}=null!=(t=o[a[0]])?t:{};return{canIntoParticle3D:"Particle3D"===(null==(r=o[a[0]])?void 0:r.type),url:i}}),h.wU);return{canIntoParticle3D:e,particle3DUrl:t}},M=()=>{const{dispatch:e,getState:t}=(0,h.oR)(),[r,n]=(0,b.useState)(!1),{getSceneFromUrl:o}=(0,p.$)(),a=(0,s.useEmitter)("LoadComponent");return{loading:r,onEditParticle3D:(0,b.useCallback)((r=>S(void 0,null,(function*(){let i=(0,u.q7)(t().project);i=j(P({},i),{editor:j(P({},i.editor),{contextMenu:void 0})});const l=()=>S(this,null,(function*(){try{n(!0);const t=yield o(i,r);t.editor.edit3d=!0;const a=(0,s.newCase)([t],"Particle3D",i);a.editor.readOnly="string"==typeof r||i.editor.readOnly,a.settings.store=i.settings.store,a.settings.layerCollisions=i.settings.layerCollisions,a.settings.layerCollisionName=i.settings.layerCollisionName,a.materials=i.materials,a.texture2Ds=i.texture2Ds,a.id=i.id,e((0,s.restoreState)(a)),e((0,s.changeCategory)(""))}catch(e){d.ZP.error("不能编辑粒子"),n(!1)}}));"Project"!==i.type?a({loadComponent:l}):l()}))),[t,e,a])}}},44128:function(e,t,r){"use strict";r.d(t,{Z:function(){return b}});var n=r(48751),o=r(62732),a=r(42761),i=r(22142);const l={container:(0,o.iv)({display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridAutoRows:"auto",rowGap:"8px"})};function c({category:e,provider:t}){const r=(0,a.v9)((({project:e})=>{const t=[];for(;e;){for(const r of e.texture2Ds)t.some((({orderId:e})=>e===r.orderId))||t.push(r);e=e.editor.prevState}return t}),a.wU);return i.createElement("div",{className:l.container},r.map((r=>{var o,a;return i.createElement(n.vE,{key:r.id,materialId:r.id,category:e,provider:t,name:null!=(a=null==(o=r.props)?void 0:o.name)?a:r.name,url:r.orderId,cover:r.props.url,orderId:r.orderId})})))}var s=r(18765),p=r(22142),u=Object.defineProperty,d=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(0,s.Z)("Texture2D",(e=>p.createElement("div",{style:{padding:"16px 12px 0"}},p.createElement(c,((e,t)=>{for(var r in t||(t={}))f.call(t,r)&&y(e,r,t[r]);if(d)for(var r of d(t))m.call(t,r)&&y(e,r,t[r]);return e})({},e)))))},50815:function(e,t,r){"use strict";r.d(t,{E:function(){return o}});var n=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const o=e=>n(void 0,null,(function*(){return yield Promise.all(Object.entries(e.files).map((t=>n(this,[t],(function*([t,r]){try{r instanceof Blob&&(e.files[t]=JSON.parse(yield r.text()))}catch(e){console.log(e)}}))))),e}))},9624:function(e,t,r){"use strict";r(95040);var n=r(99002),o=r(22142);t.Z=({cropperRef:e,src:t,viewMode:r})=>o.createElement(n.Z,{ref:e,src:t,viewMode:r,zoomable:!0,movable:!0,background:!0,rotatable:!0,style:{width:"100%",height:"400px"},cropBoxResizable:!0,dragMode:"move",autoCropArea:1,center:!0,highlight:!0,responsive:!0})},70156:function(e){(function(){"use strict";function e(e){throw e}var t=void 0,r=!0,n=this;function o(e,r){var o,a=e.split("."),i=n;!(a[0]in i)&&i.execScript&&i.execScript("var "+a[0]);for(;a.length&&(o=a.shift());)a.length||r===t?i=i[o]?i[o]:i[o]={}:i[o]=r}var a="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array;function i(e){if("string"==typeof e){var t,r,n=e.split("");for(t=0,r=n.length;t<r;t++)n[t]=(255&n[t].charCodeAt(0))>>>0;e=n}for(var o,a=1,i=0,l=e.length,c=0;0<l;){l-=o=1024<l?1024:l;do{i+=a+=e[c++]}while(--o);a%=65521,i%=65521}return(i<<16|a)>>>0}function l(t,r){this.index="number"==typeof r?r:0,this.i=0,this.buffer=t instanceof(a?Uint8Array:Array)?t:new(a?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&e(Error("invalid index")),this.buffer.length<=this.index&&this.f()}l.prototype.f=function(){var e,t=this.buffer,r=t.length,n=new(a?Uint8Array:Array)(r<<1);if(a)n.set(t);else for(e=0;e<r;++e)n[e]=t[e];return this.buffer=n},l.prototype.d=function(e,t,r){var n,o=this.buffer,a=this.index,i=this.i,l=o[a];if(r&&1<t&&(e=8<t?(f[255&e]<<24|f[e>>>8&255]<<16|f[e>>>16&255]<<8|f[e>>>24&255])>>32-t:f[e]>>8-t),8>t+i)l=l<<t|e,i+=t;else for(n=0;n<t;++n)l=l<<1|e>>t-n-1&1,8==++i&&(i=0,o[a++]=f[l],l=0,a===o.length&&(o=this.f()));o[a]=l,this.buffer=o,this.i=i,this.index=a},l.prototype.finish=function(){var e,t=this.buffer,r=this.index;return 0<this.i&&(t[r]<<=8-this.i,t[r]=f[t[r]],r++),a?e=t.subarray(0,r):(t.length=r,e=t),e};var c,s=new(a?Uint8Array:Array)(256);for(c=0;256>c;++c){for(var p=d=c,u=7,d=d>>>1;d;d>>>=1)p<<=1,p|=1&d,--u;s[c]=(p<<u&255)>>>0}var f=s;function m(e){this.buffer=new(a?Uint16Array:Array)(2*e),this.length=0}function y(e){var t,r,n,o,i,l,c,s,p,u=e.length,d=0,f=Number.POSITIVE_INFINITY;for(s=0;s<u;++s)e[s]>d&&(d=e[s]),e[s]<f&&(f=e[s]);for(t=1<<d,r=new(a?Uint32Array:Array)(t),n=1,o=0,i=2;n<=d;){for(s=0;s<u;++s)if(e[s]===n){for(l=0,c=o,p=0;p<n;++p)l=l<<1|1&c,c>>=1;for(p=l;p<t;p+=i)r[p]=n<<16|s;++o}++n,o<<=1,i<<=1}return[r,d,f]}function b(e,t){this.h=g,this.w=0,this.input=e,this.b=0,t&&(t.lazy&&(this.w=t.lazy),"number"==typeof t.compressionType&&(this.h=t.compressionType),t.outputBuffer&&(this.a=a&&t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.b=t.outputIndex)),this.a||(this.a=new(a?Uint8Array:Array)(32768))}a&&new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),m.prototype.getParent=function(e){return 2*((e-2)/4|0)},m.prototype.push=function(e,t){var r,n,o,a=this.buffer;for(r=this.length,a[this.length++]=t,a[this.length++]=e;0<r&&(n=this.getParent(r),a[r]>a[n]);)o=a[r],a[r]=a[n],a[n]=o,o=a[r+1],a[r+1]=a[n+1],a[n+1]=o,r=n;return this.length},m.prototype.pop=function(){var e,t,r,n,o,a=this.buffer;for(t=a[0],e=a[1],this.length-=2,a[0]=a[this.length],a[1]=a[this.length+1],o=0;!((n=2*o+2)>=this.length)&&(n+2<this.length&&a[n+2]>a[n]&&(n+=2),a[n]>a[o]);)r=a[o],a[o]=a[n],a[n]=r,r=a[o+1],a[o+1]=a[n+1],a[n+1]=r,o=n;return{index:e,value:t,length:this.length}};var h,g=2,v={NONE:0,r:1,j:g,N:3},O=[];for(h=0;288>h;h++)switch(r){case 143>=h:O.push([h+48,8]);break;case 255>=h:O.push([h-144+400,9]);break;case 279>=h:O.push([h-256+0,7]);break;case 287>=h:O.push([h-280+192,8]);break;default:e("invalid literal: "+h)}function k(e,t){this.length=e,this.G=t}function x(){var t=E;switch(r){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case 12>=t:return[265,t-11,1];case 14>=t:return[266,t-13,1];case 16>=t:return[267,t-15,1];case 18>=t:return[268,t-17,1];case 22>=t:return[269,t-19,2];case 26>=t:return[270,t-23,2];case 30>=t:return[271,t-27,2];case 34>=t:return[272,t-31,2];case 42>=t:return[273,t-35,3];case 50>=t:return[274,t-43,3];case 58>=t:return[275,t-51,3];case 66>=t:return[276,t-59,3];case 82>=t:return[277,t-67,4];case 98>=t:return[278,t-83,4];case 114>=t:return[279,t-99,4];case 130>=t:return[280,t-115,4];case 162>=t:return[281,t-131,5];case 194>=t:return[282,t-163,5];case 226>=t:return[283,t-195,5];case 257>=t:return[284,t-227,5];case 258===t:return[285,t-258,0];default:e("invalid length: "+t)}}b.prototype.n=function(){var n,o,i,c,s=this.input;switch(this.h){case 0:for(i=0,c=s.length;i<c;){var p,u,d,f=o=a?s.subarray(i,i+65535):s.slice(i,i+65535),m=(i+=o.length)===c,y=t,b=t,h=this.a,v=this.b;if(a){for(h=new Uint8Array(this.a.buffer);h.length<=v+f.length+5;)h=new Uint8Array(h.length<<1);h.set(this.a)}if(p=m?1:0,h[v++]=0|p,d=65536+~(u=f.length)&65535,h[v++]=255&u,h[v++]=u>>>8&255,h[v++]=255&d,h[v++]=d>>>8&255,a)h.set(f,v),v+=f.length,h=h.subarray(0,v);else{for(y=0,b=f.length;y<b;++y)h[v++]=f[y];h.length=v}this.b=v,this.a=h}break;case 1:var k=new l(new Uint8Array(this.a.buffer),this.b);k.d(1,1,r),k.d(1,2,r);var x,E,w,P=S(this,s);for(x=0,E=P.length;x<E;x++)if(w=P[x],l.prototype.d.apply(k,O[w]),256<w)k.d(P[++x],P[++x],r),k.d(P[++x],5),k.d(P[++x],P[++x],r);else if(256===w)break;this.a=k.finish(),this.b=this.a.length;break;case g:var j,A,M,_,D,R,N,V,B,Z,T,z,L,U,F,Y=new l(new Uint8Array(this.a),this.b),$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=Array(19);for(j=g,Y.d(1,1,r),Y.d(j,2,r),A=S(this,s),N=I(R=C(this.L,15)),B=I(V=C(this.K,7)),M=286;257<M&&0===R[M-1];M--);for(_=30;1<_&&0===V[_-1];_--);var W,J,K,H,G,q,X=M,ee=_,te=new(a?Uint32Array:Array)(X+ee),re=new(a?Uint32Array:Array)(316),ne=new(a?Uint8Array:Array)(19);for(W=J=0;W<X;W++)te[J++]=R[W];for(W=0;W<ee;W++)te[J++]=V[W];if(!a)for(W=0,H=ne.length;W<H;++W)ne[W]=0;for(W=G=0,H=te.length;W<H;W+=J){for(J=1;W+J<H&&te[W+J]===te[W];++J);if(K=J,0===te[W])if(3>K)for(;0<K--;)re[G++]=0,ne[0]++;else for(;0<K;)(q=138>K?K:138)>K-3&&q<K&&(q=K-3),10>=q?(re[G++]=17,re[G++]=q-3,ne[17]++):(re[G++]=18,re[G++]=q-11,ne[18]++),K-=q;else if(re[G++]=te[W],ne[te[W]]++,3>--K)for(;0<K--;)re[G++]=te[W],ne[te[W]]++;else for(;0<K;)(q=6>K?K:6)>K-3&&q<K&&(q=K-3),re[G++]=16,re[G++]=q-3,ne[16]++,K-=q}for(n=a?re.subarray(0,G):re.slice(0,G),Z=C(ne,7),U=0;19>U;U++)Q[U]=Z[$[U]];for(D=19;4<D&&0===Q[D-1];D--);for(T=I(Z),Y.d(M-257,5,r),Y.d(_-1,5,r),Y.d(D-4,4,r),U=0;U<D;U++)Y.d(Q[U],3,r);for(U=0,F=n.length;U<F;U++)if(z=n[U],Y.d(T[z],Z[z],r),16<=z){switch(U++,z){case 16:L=2;break;case 17:L=3;break;case 18:L=7;break;default:e("invalid code: "+z)}Y.d(n[U],L,r)}var oe,ae,ie,le,ce,se,pe,ue,de=[N,R],fe=[B,V];for(ce=de[0],se=de[1],pe=fe[0],ue=fe[1],oe=0,ae=A.length;oe<ae;++oe)if(ie=A[oe],Y.d(ce[ie],se[ie],r),256<ie)Y.d(A[++oe],A[++oe],r),le=A[++oe],Y.d(pe[le],ue[le],r),Y.d(A[++oe],A[++oe],r);else if(256===ie)break;this.a=Y.finish(),this.b=this.a.length;break;default:e("invalid compression type")}return this.a};var E,w,P=[];for(E=3;258>=E;E++)w=x(),P[E]=w[2]<<24|w[1]<<16|w[0];var j=a?new Uint32Array(P):P;function S(n,o){function i(t,n){var o,a,i,l,c=t.G,s=[],p=0;switch(o=j[t.length],s[p++]=65535&o,s[p++]=o>>16&255,s[p++]=o>>24,r){case 1===c:a=[0,c-1,0];break;case 2===c:a=[1,c-2,0];break;case 3===c:a=[2,c-3,0];break;case 4===c:a=[3,c-4,0];break;case 6>=c:a=[4,c-5,1];break;case 8>=c:a=[5,c-7,1];break;case 12>=c:a=[6,c-9,2];break;case 16>=c:a=[7,c-13,2];break;case 24>=c:a=[8,c-17,3];break;case 32>=c:a=[9,c-25,3];break;case 48>=c:a=[10,c-33,4];break;case 64>=c:a=[11,c-49,4];break;case 96>=c:a=[12,c-65,5];break;case 128>=c:a=[13,c-97,5];break;case 192>=c:a=[14,c-129,6];break;case 256>=c:a=[15,c-193,6];break;case 384>=c:a=[16,c-257,7];break;case 512>=c:a=[17,c-385,7];break;case 768>=c:a=[18,c-513,8];break;case 1024>=c:a=[19,c-769,8];break;case 1536>=c:a=[20,c-1025,9];break;case 2048>=c:a=[21,c-1537,9];break;case 3072>=c:a=[22,c-2049,10];break;case 4096>=c:a=[23,c-3073,10];break;case 6144>=c:a=[24,c-4097,11];break;case 8192>=c:a=[25,c-6145,11];break;case 12288>=c:a=[26,c-8193,12];break;case 16384>=c:a=[27,c-12289,12];break;case 24576>=c:a=[28,c-16385,13];break;case 32768>=c:a=[29,c-24577,13];break;default:e("invalid distance")}for(o=a,s[p++]=o[0],s[p++]=o[1],s[p++]=o[2],i=0,l=s.length;i<l;++i)h[g++]=s[i];O[s[0]]++,x[s[3]]++,v=t.length+n-1,m=null}var l,c,s,p,u,d,f,m,y,b={},h=a?new Uint16Array(2*o.length):[],g=0,v=0,O=new(a?Uint32Array:Array)(286),x=new(a?Uint32Array:Array)(30),E=n.w;if(!a){for(s=0;285>=s;)O[s++]=0;for(s=0;29>=s;)x[s++]=0}for(O[256]=1,l=0,c=o.length;l<c;++l){for(s=u=0,p=3;s<p&&l+s!==c;++s)u=u<<8|o[l+s];if(b[u]===t&&(b[u]=[]),d=b[u],!(0<v--)){for(;0<d.length&&32768<l-d[0];)d.shift();if(l+3>=c){for(m&&i(m,-1),s=0,p=c-l;s<p;++s)y=o[l+s],h[g++]=y,++O[y];break}if(0<d.length){var w=t,P=t,S=0,C=t,I=t,A=t,M=o.length,_=(I=0,d.length);e:for(;I<_;I++){if(w=d[_-I-1],C=3,3<S){for(A=S;3<A;A--)if(o[w+A-1]!==o[l+A-1])continue e;C=S}for(;258>C&&l+C<M&&o[w+C]===o[l+C];)++C;if(C>S&&(P=w,S=C),258===C)break}f=new k(S,l-P),m?m.length<f.length?(y=o[l-1],h[g++]=y,++O[y],i(f,0)):i(m,-1):f.length<E?m=f:i(f,0)}else m?i(m,-1):(y=o[l],h[g++]=y,++O[y])}d.push(l)}return h[g++]=256,O[256]++,n.L=O,n.K=x,a?h.subarray(0,g):h}function C(e,t){function r(e){var t=E[e][w[e]];t===g?(r(e+1),r(e+1)):--k[t],++w[e]}var n,o,i,l,c,s=e.length,p=new m(572),u=new(a?Uint8Array:Array)(s);if(!a)for(l=0;l<s;l++)u[l]=0;for(l=0;l<s;++l)0<e[l]&&p.push(l,e[l]);if(n=Array(p.length/2),o=new(a?Uint32Array:Array)(p.length/2),1===n.length)return u[p.pop().index]=1,u;for(l=0,c=p.length/2;l<c;++l)n[l]=p.pop(),o[l]=n[l].value;var d,f,y,b,h,g=o.length,v=new(a?Uint16Array:Array)(t),O=new(a?Uint8Array:Array)(t),k=new(a?Uint8Array:Array)(g),x=Array(t),E=Array(t),w=Array(t),P=(1<<t)-g,j=1<<t-1;for(v[t-1]=g,f=0;f<t;++f)P<j?O[f]=0:(O[f]=1,P-=j),P<<=1,v[t-2-f]=(v[t-1-f]/2|0)+g;for(v[0]=O[0],x[0]=Array(v[0]),E[0]=Array(v[0]),f=1;f<t;++f)v[f]>2*v[f-1]+O[f]&&(v[f]=2*v[f-1]+O[f]),x[f]=Array(v[f]),E[f]=Array(v[f]);for(d=0;d<g;++d)k[d]=t;for(y=0;y<v[t-1];++y)x[t-1][y]=o[y],E[t-1][y]=y;for(d=0;d<t;++d)w[d]=0;for(1===O[t-1]&&(--k[0],++w[t-1]),f=t-2;0<=f;--f){for(b=d=0,h=w[f+1],y=0;y<v[f];y++)(b=x[f+1][h]+x[f+1][h+1])>o[d]?(x[f][y]=b,E[f][y]=g,h+=2):(x[f][y]=o[d],E[f][y]=d,++d);w[f]=0,1===O[f]&&r(f)}for(i=k,l=0,c=n.length;l<c;++l)u[n[l].index]=i[l];return u}function I(t){var r,n,o,i,l=new(a?Uint16Array:Array)(t.length),c=[],s=[],p=0;for(r=0,n=t.length;r<n;r++)c[t[r]]=1+(0|c[t[r]]);for(r=1,n=16;r<=n;r++)s[r]=p,(p+=0|c[r])>1<<r&&e("overcommitted"),p<<=1;for(65536>p&&e("undercommitted"),r=0,n=t.length;r<n;r++)for(p=s[t[r]],s[t[r]]+=1,o=l[r]=0,i=t[r];o<i;o++)l[r]=l[r]<<1|1&p,p>>>=1;return l}function A(e,t){this.input=e,this.a=new(a?Uint8Array:Array)(32768),this.h=M.j;var r,n={};for(r in!t&&(t={})||"number"!=typeof t.compressionType||(this.h=t.compressionType),t)n[r]=t[r];n.outputBuffer=this.a,this.z=new b(this.input,n)}var M=v;function _(t,r){switch(this.k=[],this.l=32768,this.e=this.g=this.c=this.q=0,this.input=a?new Uint8Array(t):t,this.s=!1,this.m=R,this.B=!1,!r&&(r={})||(r.index&&(this.c=r.index),r.bufferSize&&(this.l=r.bufferSize),r.bufferType&&(this.m=r.bufferType),r.resize&&(this.B=r.resize)),this.m){case D:this.b=32768,this.a=new(a?Uint8Array:Array)(32768+this.l+258);break;case R:this.b=0,this.a=new(a?Uint8Array:Array)(this.l),this.f=this.J,this.t=this.H,this.o=this.I;break;default:e(Error("invalid inflate mode"))}}A.prototype.n=function(){var t,r,n,o,l,c,s,p=0;if(s=this.a,(t=pe)===pe?r=Math.LOG2E*Math.log(32768)-8:e(Error("invalid compression method")),n=r<<4|t,s[p++]=n,t===pe)switch(this.h){case M.NONE:l=0;break;case M.r:l=1;break;case M.j:l=2;break;default:e(Error("unsupported compression type"))}else e(Error("invalid compression method"));return o=l<<6|0,s[p++]=o|31-(256*n+o)%31,c=i(this.input),this.z.b=p,p=(s=this.z.n()).length,a&&((s=new Uint8Array(s.buffer)).length<=p+4&&(this.a=new Uint8Array(s.length+4),this.a.set(s),s=this.a),s=s.subarray(0,p+4)),s[p++]=c>>24&255,s[p++]=c>>16&255,s[p++]=c>>8&255,s[p++]=255&c,s},o("Zlib.Deflate",A),o("Zlib.Deflate.compress",(function(e,t){return new A(e,t).n()})),o("Zlib.Deflate.CompressionType",M),o("Zlib.Deflate.CompressionType.NONE",M.NONE),o("Zlib.Deflate.CompressionType.FIXED",M.r),o("Zlib.Deflate.CompressionType.DYNAMIC",M.j);var D=0,R=1,N={D:D,C:R};_.prototype.p=function(){for(;!this.s;){var n=ee(this,3);switch(1&n&&(this.s=r),n>>>=1){case 0:var o=this.input,i=this.c,l=this.a,c=this.b,s=t,p=t,u=t,d=l.length,f=t;switch(this.e=this.g=0,(s=o[i++])===t&&e(Error("invalid uncompressed block header: LEN (first byte)")),p=s,(s=o[i++])===t&&e(Error("invalid uncompressed block header: LEN (second byte)")),p|=s<<8,(s=o[i++])===t&&e(Error("invalid uncompressed block header: NLEN (first byte)")),u=s,(s=o[i++])===t&&e(Error("invalid uncompressed block header: NLEN (second byte)")),p===~(u|=s<<8)&&e(Error("invalid uncompressed block header: length verify")),i+p>o.length&&e(Error("input buffer is broken")),this.m){case D:for(;c+p>l.length;){if(p-=f=d-c,a)l.set(o.subarray(i,i+f),c),c+=f,i+=f;else for(;f--;)l[c++]=o[i++];this.b=c,l=this.f(),c=this.b}break;case R:for(;c+p>l.length;)l=this.f({v:2});break;default:e(Error("invalid inflate mode"))}if(a)l.set(o.subarray(i,i+p),c),c+=p,i+=p;else for(;p--;)l[c++]=o[i++];this.c=i,this.b=c,this.a=l;break;case 1:this.o(G,X);break;case 2:re(this);break;default:e(Error("unknown BTYPE: "+n))}}return this.t()};var V,B,Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],T=a?new Uint16Array(Z):Z,z=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],L=a?new Uint16Array(z):z,U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],F=a?new Uint8Array(U):U,Y=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],$=a?new Uint16Array(Y):Y,Q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],W=a?new Uint8Array(Q):Q,J=new(a?Uint8Array:Array)(288);for(V=0,B=J.length;V<B;++V)J[V]=143>=V?8:255>=V?9:279>=V?7:8;var K,H,G=y(J),q=new(a?Uint8Array:Array)(30);for(K=0,H=q.length;K<H;++K)q[K]=5;var X=y(q);function ee(r,n){for(var o,a=r.g,i=r.e,l=r.input,c=r.c;i<n;)(o=l[c++])===t&&e(Error("input buffer is broken")),a|=o<<i,i+=8;return o=a&(1<<n)-1,r.g=a>>>n,r.e=i-n,r.c=c,o}function te(r,n){for(var o,a,i,l=r.g,c=r.e,s=r.input,p=r.c,u=n[0],d=n[1];c<d;)(o=s[p++])===t&&e(Error("input buffer is broken")),l|=o<<c,c+=8;return i=(a=u[l&(1<<d)-1])>>>16,r.g=l>>i,r.e=c-i,r.c=p,65535&a}function re(e){function t(e,t,r){var n,o,a,i;for(i=0;i<e;)switch(n=te(this,t),n){case 16:for(a=3+ee(this,2);a--;)r[i++]=o;break;case 17:for(a=3+ee(this,3);a--;)r[i++]=0;o=0;break;case 18:for(a=11+ee(this,7);a--;)r[i++]=0;o=0;break;default:o=r[i++]=n}return r}var r,n,o,i,l=ee(e,5)+257,c=ee(e,5)+1,s=ee(e,4)+4,p=new(a?Uint8Array:Array)(T.length);for(i=0;i<s;++i)p[T[i]]=ee(e,3);r=y(p),n=new(a?Uint8Array:Array)(l),o=new(a?Uint8Array:Array)(c),e.o(y(t.call(e,l,r,n)),y(t.call(e,c,r,o)))}function ne(t,r){var n,o;this.input=t,this.c=0,!r&&(r={})||(r.index&&(this.c=r.index),r.verify&&(this.M=r.verify)),n=t[this.c++],o=t[this.c++],(15&n)===pe?this.method=pe:e(Error("unsupported compression method")),((n<<8)+o)%31!=0&&e(Error("invalid fcheck flag:"+((n<<8)+o)%31)),32&o&&e(Error("fdict flag is not supported")),this.A=new _(t,{index:this.c,bufferSize:r.bufferSize,bufferType:r.bufferType,resize:r.resize})}_.prototype.o=function(e,t){var r=this.a,n=this.b;this.u=e;for(var o,a,i,l,c=r.length-258;256!==(o=te(this,e));)if(256>o)n>=c&&(this.b=n,r=this.f(),n=this.b),r[n++]=o;else for(l=L[a=o-257],0<F[a]&&(l+=ee(this,F[a])),o=te(this,t),i=$[o],0<W[o]&&(i+=ee(this,W[o])),n>=c&&(this.b=n,r=this.f(),n=this.b);l--;)r[n]=r[n++-i];for(;8<=this.e;)this.e-=8,this.c--;this.b=n},_.prototype.I=function(e,t){var r=this.a,n=this.b;this.u=e;for(var o,a,i,l,c=r.length;256!==(o=te(this,e));)if(256>o)n>=c&&(c=(r=this.f()).length),r[n++]=o;else for(l=L[a=o-257],0<F[a]&&(l+=ee(this,F[a])),o=te(this,t),i=$[o],0<W[o]&&(i+=ee(this,W[o])),n+l>c&&(c=(r=this.f()).length);l--;)r[n]=r[n++-i];for(;8<=this.e;)this.e-=8,this.c--;this.b=n},_.prototype.f=function(){var e,t,r=new(a?Uint8Array:Array)(this.b-32768),n=this.b-32768,o=this.a;if(a)r.set(o.subarray(32768,r.length));else for(e=0,t=r.length;e<t;++e)r[e]=o[e+32768];if(this.k.push(r),this.q+=r.length,a)o.set(o.subarray(n,n+32768));else for(e=0;32768>e;++e)o[e]=o[n+e];return this.b=32768,o},_.prototype.J=function(e){var t,r,n,o=this.input.length/this.c+1|0,i=this.input,l=this.a;return e&&("number"==typeof e.v&&(o=e.v),"number"==typeof e.F&&(o+=e.F)),r=2>o?(n=(i.length-this.c)/this.u[2]/2*258|0)<l.length?l.length+n:l.length<<1:l.length*o,a?(t=new Uint8Array(r)).set(l):t=l,this.a=t},_.prototype.t=function(){var e,t,r,n,o,i=0,l=this.a,c=this.k,s=new(a?Uint8Array:Array)(this.q+(this.b-32768));if(0===c.length)return a?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(t=0,r=c.length;t<r;++t)for(n=0,o=(e=c[t]).length;n<o;++n)s[i++]=e[n];for(t=32768,r=this.b;t<r;++t)s[i++]=l[t];return this.k=[],this.buffer=s},_.prototype.H=function(){var e,t=this.b;return a?this.B?(e=new Uint8Array(t)).set(this.a.subarray(0,t)):e=this.a.subarray(0,t):(this.a.length>t&&(this.a.length=t),e=this.a),this.buffer=e},ne.prototype.p=function(){var t,r=this.input;return t=this.A.p(),this.c=this.A.c,this.M&&(r[this.c++]<<24|r[this.c++]<<16|r[this.c++]<<8|r[this.c++])>>>0!==i(t)&&e(Error("invalid adler-32 checksum")),t},o("Zlib.Inflate",ne),o("Zlib.Inflate.BufferType",N),N.ADAPTIVE=N.C,N.BLOCK=N.D,o("Zlib.Inflate.prototype.decompress",ne.prototype.p),a&&new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a&&new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),a&&new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),a&&new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),a&&new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);var oe,ae,ie=new(a?Uint8Array:Array)(288);for(oe=0,ae=ie.length;oe<ae;++oe)ie[oe]=143>=oe?8:255>=oe?9:279>=oe?7:8;y(ie);var le,ce,se=new(a?Uint8Array:Array)(30);for(le=0,ce=se.length;le<ce;++le)se[le]=5;y(se);var pe=8}).call(window);var t=window.Zlib;t.Deflate=t.Deflate,t.Deflate.compress=t.Deflate.compress,t.Inflate=t.Inflate,t.Inflate.BufferType=t.Inflate.BufferType,t.Inflate.prototype.decompress=t.Inflate.prototype.decompress,e.exports=t},20282:function(e,t,r){"use strict";r.d(t,{Z:function(){return b}});var n=r(32078),o=r(22142),a=r(9624),i=r(26840),l=r(70072),c=r(60648),s=r(63150),p=r(73775),u=r(49405),d=({fileList:e,onFinish:t})=>{const r=(0,o.useRef)(null),[d,f]=(0,o.useState)(""),[m,y]=(0,o.useState)(1),[b,h]=(0,o.useState)({});return(0,o.useEffect)((()=>{const t=new FileReader;t.onload=function(){f(t.result)},t.readAsDataURL(e[0])}),[e]),(0,o.useEffect)((()=>{const t=null==r?void 0:r.current;(null==t?void 0:t.cropper).scale(m),(0,u.jL)(e[0]).then((t=>{const r=t.width,n=t.height,o=e.reduce(((e,t)=>e+t.size),0),a=Math.round(r*m),i=Math.round(n*m),l=o*m;h({size:`${r} * ${n}`,currentWidth:a,currentHeight:i,currentSize:`${a} * ${i}`,frameSize:(o/1024/1024).toFixed(2),currentFrameSize:(l/1024/1024).toFixed(2)})}))}),[e,m]),o.createElement(n.Z,{className:"upload_cropper_modal",open:!0,centered:!0,width:820,onCancel:()=>{n.Z.destroyAll()},bodyStyle:{padding:"0 20px 10px 20px"},title:"请修改图片缩放值",footer:[o.createElement("div",{style:{width:"100%",height:"20px",margin:"5px 0",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"13px"}},o.createElement("div",null,"操作：",o.createElement(i.Z,{placement:"bottom",title:"缩小"},o.createElement(l.Z,{icon:o.createElement(c.Z,null),type:"text",onClick:()=>{y(.8*m)}})),o.createElement(i.Z,{placement:"bottom",title:"放大"},o.createElement(l.Z,{icon:o.createElement(s.Z,null),type:"text",onClick:()=>{y(1.25*m)}})),o.createElement(i.Z,{placement:"bottom",title:"重置"},o.createElement(l.Z,{icon:o.createElement(p.Z,null),type:"text",onClick:()=>{y(1);const e=null==r?void 0:r.current;(null==e?void 0:e.cropper).reset()}}))),o.createElement("div",{style:{display:"flex",fontSize:"12px",justifyContent:"space-around",width:"50%"}},o.createElement("div",null,o.createElement("div",null,"原尺寸：",b.size),o.createElement("div",{style:{color:b.currentWidth*b.currentHeight>262144?"red":""}},"当前尺寸：",b.currentSize)),o.createElement("div",null,o.createElement("div",null,"原序列帧大小：",b.frameSize,"M"),o.createElement("div",{style:{color:b.currentFrameSize>2?"red":""}},"当前序列帧大小：",b.currentFrameSize,"M")),o.createElement(l.Z,{type:"primary",disabled:b.currentWidth*b.currentHeight>262144||b.currentFrameSize>2,onClick:()=>{t(m.toFixed(2)),n.Z.destroyAll()}},"确定")))]},o.createElement(a.Z,{cropperRef:r,src:d,viewMode:0}))},f=r(62732),m={confirmModal:(0,f.iv)({"& .ant-modal-confirm-body > .anticon + .ant-modal-confirm-title + .ant-modal-confirm-content":(0,f.iv)({marginLeft:"0"}),"& .ant-modal-confirm-btns":(0,f.iv)({display:"none"})}),header:(0,f.iv)({display:"flex",width:"1075px",justifyContent:"space-between"}),wrapper:(0,f.iv)({width:"1075px",height:"650px",overflow:"auto",display:"flex"}),list:(0,f.iv)({width:"240px",height:"650px",display:"flex",flexDirection:"column",margin:"0 10px 0 0",alignItems:"center",overflow:"auto"}),videoWrapper:(0,f.iv)({width:"210px",height:"130px",margin:"10px",position:"relative",boxSizing:"content-box"}),video:(0,f.iv)({width:"100%",height:"100%",position:"relative"}),videoPlay:(0,f.iv)({position:"absolute",top:"55px",left:"93px",fontSize:"25px",color:"white"}),audioContent:(0,f.iv)({width:"210px",height:"130px",backgroundColor:"#f1f3f4"}),audioCover:(0,f.iv)({width:"210px",height:"100px"}),audio:(0,f.iv)({width:"210px",height:"30px"}),mask:(0,f.iv)({position:"absolute",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(255,255,255,0.5)",display:"flex",justifyContent:"center",alignItems:"center"}),completeIcon:(0,f.iv)({position:"absolute",fontSize:"30px"}),centerAndRight:(0,f.iv)({width:"800px",height:"650px",display:"flex"}),center:(0,f.iv)({width:"700px",height:"650px",display:"flex",flexDirection:"column",padding:"10px",justifyContent:"center",alignItems:"center",backgroundColor:"#e5e5e5"}),tip:(0,f.iv)({height:"100%",width:"100%"}),previewVideo:(0,f.iv)({height:"500px",width:"500px"}),previewAudioWrapper:(0,f.iv)({height:"500px",width:"500px",backgroundColor:"#f1f3f4"}),previewAudioCover:(0,f.iv)({height:"400px",width:"500px"}),previewAudio:(0,f.iv)({height:"100px",width:"500px"}),previewImage:(0,f.iv)({height:"500px",width:"500px",objectFit:"contain"}),info:(0,f.iv)({width:"500px",display:"flex",flexDirection:"column",margin:"10px",alignItems:"start",fontSize:14}),right:(0,f.iv)({width:"130px",height:"650px",display:"flex",marginLeft:"20px",flexDirection:"column"}),uploadBtn:(0,f.iv)({marginTop:"35px"})},y=r(22142);function b({fileList:e}){return new Promise((t=>{n.Z.confirm({centered:!0,maskClosable:!1,icon:null,visible:!0,className:m.confirmModal,bodyStyle:{padding:"10px 20px 20px 10px"},content:y.createElement(d,{fileList:e,onFinish:e=>t(e)})})}))}},49405:function(e,t,r){"use strict";r.d(t,{$T:function(){return k},Ip:function(){return v},Jk:function(){return P},Le:function(){return x},NC:function(){return b},Y9:function(){return p},_g:function(){return s},fA:function(){return O},j7:function(){return w},jL:function(){return j},jP:function(){return g},kv:function(){return m},n$:function(){return d},u4:function(){return h}});var n=r(40985),o=r(73760),a=r(61754),i=r(7910),l=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const c={Animation:"互动组件",Sprite:"图片文件",Sound:"音频文件",Video:"视频文件",NativeLoadingVideo:"加载视频",NativeVideo:"交互视频",VRVideo:"VR视频",PVAlphaVideo:"出框视频",AlphaVideo:"出框视频",Lottie:"Lottie文件",Particle:"粒子文件",FrameAnime:"序列帧文件",PSD:"Photoshop文件",DragonBones:"龙骨文件",Spine:"Spine文件",Live2d:"Live2D文件",CustomScript:"脚本文件",Font:"字体文件",Material:"材质文件",Cubemaps:"全景图片",Model:"模型文件",Animation3D:"3D互动组件",Particle3D:"3D粒子"},s={Animation:4,Sprite:5,Sound:8,Video:6,Lottie:12,Particle:13,FrameAnime:18,PSD:21,DragonBones:23,NativeLoadingVideo:34,NativeVideo:35,PVAlphaVideo:36,Spine:24,Live2d:30,CustomScript:25,AlphaVideo:36,Font:29,Material:28,Cubemaps:31,Model:27,Animation3D:32,Particle3D:14,VRVideo:37},p={Sprite:"图片",Sound:"音频",Animation:"互动组件",CustomScript:"脚本",FrameAnime:"序列帧",Particle:"2D粒子"},u=(0,i.cM)({release:!0}),d={Sprite:u?"image/png,image/jpeg,image/*":"image/png,image/jpeg,image/webp,image/gif,image/heic,image/tiff,image/svg,image/ico,image/*",Sound:u?".mp3":".mp3,.ogg,.wav,.aac.,m4a.,wma.,amr",Video:u?".mp4":".mp4,.webm,.wmv,.ogg,.mov,.flv,.asf,.mpeg,.rm,.rmvb,.mkv,.3gp,.hevc,.m2ts,.m2v,.m4v,.mjpeg,.mpg,.mts,.mxf,.ogv,.swf,.ts,.vob,.wtv",NativeLoadingVideo:".mp4,.mov",NativeVideo:".mp4,.mov",VRVideo:".mp4",PVAlphaVideo:".zip",AlphaVideo:".zip",FrameAnime:"image/png,image/jpeg",PSD:"image/vnd.adobe.photoshop",Lottie:"application/json,.zip",Particle:".plist,.zip,.particle",DragonBones:".zip,image/png,application/json",Spine:".zip,.atlas,.txt,.skel,image/png,application/json",Live2d:".zip",CustomScript:".js,.ts",Animation:".json,.zip",Animation3D:".json",Font:".ttf",Material:".rmat",Cubemaps:".zip,image/png,image/jpeg,.hdr",Model:".zip,.gltf,.obj,.fbx,.glb",Particle3D:".json",Texture2D:"image/png,image/jpeg"},f=(0,o.omit)(d,["NativeLoadingVideo","NativeVideo","AlphaVideo","FrameAnime","DragonBones","Animation","Skybox","Spine","Model","PSD"]),m=(0,o.xor)(...Object.values(f).map((e=>e.split(",")))).concat(d.Video.split(",")).filter(Boolean).join(","),y=(0,o.pick)(d,["Sprite","Sound","Video"]),b=(0,o.xor)(...Object.values(y).map((e=>e.split(",")))).filter(Boolean).join(","),h=e=>{var t;for(const[r,n]of Object.entries(f)){const o=n.split(",");for(const n of o)if(n.startsWith(".")){if(null==(t=e.name)?void 0:t.toLowerCase().endsWith(n))return r}else if(n.endsWith("/*")){if(e.type.startsWith(n.slice(0,-1)))return r}else if(e.type===n)return r}throw new Error},g={Sprite:1048576,Sound:2097152,Video:10485760,VRVideo:52428800,NativeLoadingVideo:5242880,NativeVideo:52428800,PVAlphaVideo:52428800,AlphaVideo:52428800,FrameAnime:2097152,PSD:52428800,Lottie:2097152,Particle:2097152,DragonBones:2097152,Spine:2097152,Live2d:20971520,CustomScript:1048576,Font:20971520,Material:2097152,Model:2097152,Animation:52428800,Animation3D:0,Cubemaps:1048576,Particle3D:0},v={Sprite:[2048,2048],FrameAnime:[512,512]},O=(e,t)=>{const r=[],n=[];for(const o of e)try{r.push(k(o,t))}catch(e){n.push([o,e.message])}if(n.length){const[{name:e},t]=n[0];a.ZP.error(`${e}${n.length>1?`${e?"等":""}${n.length}个`:""}${t}`)}return r},k=(e,t)=>{if(!(t?d[t]:m).split(",").some((t=>{var r;return t.startsWith(".")?null==(r=e.name)?void 0:r.toLowerCase().endsWith(t):t.endsWith("/*")?e.type.startsWith(t.slice(0,-1)):e.type===t})))throw new Error(`${t?c[t]:""}格式错误`);return e},x=(e,t)=>{const r=[],n=[];for(const o of e)try{r.push(E(o,t))}catch(e){n.push([o,e.message])}if(n.length){const[{name:e},t]=n[0];a.ZP.error(`${e||""}${n.length>1?`${e?"等":""}${n.length}个`:""}${t}`)}return r},E=(e,t)=>{const r="number"==typeof t?t:g[t||h(e)];if(e.size>r){const o="number"==typeof t?"":c[t||h(e)];throw new Error(`${o}超过了${(0,n.td)(r)}`)}return e},w=(e,t)=>l(void 0,null,(function*(){const r=[],n=[];for(const o of e)try{r.push(yield P(o,t))}catch(e){n.push([o,e.message])}if(n.length){const[{name:e},t]=n[0];a.ZP.error(`${e}${n.length>1?`${e?"等":""}${n.length}个`:""}${t}`)}return r})),P=(e,t)=>l(void 0,null,(function*(){if(t||(t=h(e)),v[t]){const[r,n]=v[t],{width:o,height:a}=yield j(e);if(o>r||a>n)throw new Error(`${c[t]}尺寸超过了${r}×${n}`)}return e})),j=e=>new Promise((t=>{const r=URL.createObjectURL(e),n=new Image;n.onload=()=>{t(n)},n.src=r}))},73073:function(e,t,r){"use strict";r.d(t,{Ip:function(){return l.Ip},jP:function(){return l.jP},n$:function(){return l.n$},ju:function(){return rt},DV:function(){return Ut},Nn:function(){return Wt},Y9:function(){return l.Y9},_g:function(){return l._g},xI:function(){return nt},uQ:function(){return Pr},BX:function(){return Ke},S2:function(){return He},g6:function(){return E},z4:function(){return Ur},NC:function(){return l.NC},fA:function(){return l.fA},Kf:function(){return ze},jL:function(){return l.jL},iQ:function(){return xr},Eu:function(){return wr},l6:function(){return zr},Be:function(){return Lr},Pg:function(){return g}});var n=r(22142),o=r(16969),a=r(32078),i=r(61754),l=r(49405),c=r(40985),s=r(19104),p=r(14766),u=r.n(p),d=r(98466),f=Object.defineProperty,m=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const g=(e,t,r)=>{return void 0,null,n=function*(){var n;const o=e.sort((({name:e},{name:t})=>(0,c.$I)(e,t)));if(!o.length)throw new Error("No files");const{previewUrl:a}=yield(0,d.cT)(o[0],t.$config),i=new(u());for(let e=0;e<o.length;e++)i.file(o[e].name,o[e]);const s=(null==(n=o[0].name.split("/").pop())?void 0:n.split(".")[0])||`序列动画${o.length}帧`,p=yield i.generateAsync({type:"blob"}).then((e=>new File([e],`${s}.zip`,{type:"application/zip"}))),{id:f,url:g}=yield(0,d.xA)(((e,t)=>{for(var r in t||(t={}))y.call(t,r)&&h(e,r,t[r]);if(m)for(var r of m(t))b.call(t,r)&&h(e,r,t[r]);return e})({file:p,type:l._g[r],cover:a},t));return{id:f,mime:r,name:s,url:g,cover:a}},new Promise(((e,t)=>{var r=e=>{try{a(n.next(e))}catch(e){t(e)}},o=e=>{try{a(n.throw(e))}catch(e){t(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,o);a((n=n.apply(undefined,null)).next())}));var n};var v=r(84269),O=r(20282),k=r(7910),x=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const E=(0,n.memo)((({onAddResourceEntry:e,setUploading:t,children:r,uploading:p,className:u})=>{const d=(0,s.useProject)("id");return n.createElement(o.Z,{multiple:!0,disabled:p,showUploadList:!1,className:u,accept:l.n$.FrameAnime,beforeUpload:(r,o)=>x(void 0,null,(function*(){if(o.indexOf(r)!==o.length-1)return!1;(0,c.r3)(c.GM.UploadResource,{type:"用户上传量"});let s=1;const[p,u]=l.Ip.FrameAnime,f=e=>x(this,null,(function*(){return new Promise((t=>{a.Z.confirm({centered:!0,title:"序列帧压缩",icon:n.createElement(v.Z,null),content:e?`动画序列尺寸超过了${p}×${u}，是否压缩？`:`动画序列过大，不得超过${Math.round(l.jP.FrameAnime/1024/1024)}M，是否压缩？`,okText:"开始",cancelText:"放弃",onOk:()=>{(0,O.Z)({fileList:o}).then((e=>x(this,null,(function*(){t(e)}))))}})}))}));if((0,k.cM)({release:!0}))Promise.all(o.map((e=>(0,l.Jk)((0,l.$T)(e,"FrameAnime"),"FrameAnime")))).then((r=>{r.reduce(((e,t)=>e+t.size),0)>l.jP.FrameAnime?i.ZP.error(`动画序列过大，不得超过${Math.round(l.jP.FrameAnime/1024/1024)}M`):(t(!0),g(r,{projectId:d},"FrameAnime").then((t=>x(this,null,(function*(){(0,c.r3)(c.GM.UploadResource,{type:"上传成功量"}),yield e(t)})))).catch((e=>{i.ZP.error(e.message)})).finally((()=>{t(!1)})))})).catch((e=>{i.ZP.error(e.message)})).finally((()=>{t(!1),s=1}));else{const r=yield(0,l.fA)(o,"FrameAnime");if(r.length){const{width:n,height:o}=yield(0,l.jL)(r[0]);n*o>p*u?yield f("overSize").then((e=>{s=e})):r.reduce(((e,t)=>e+t.size),0)>l.jP.FrameAnime&&(yield f().then((e=>{s=e}))),t(!0),g(r,{projectId:d,scale:Number(s)},"FrameAnime").then((t=>x(this,null,(function*(){yield e(t)})))).catch((e=>{i.ZP.error(e.message)})).finally((()=>{t(!1),s=1}))}}return!1}))},r)}));var w=r(73760),P=r(26494),j=r(48837),S=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));function C(e){e.children.map((t=>{t.children&&C(t),t.top-=e.top,t.left-=e.left}))}function I(e,t,r,n){var o;const a={editor:{},id:e.id,type:e.texts?"Text":"Sprite",props:{name:e.name,width:e.width,height:e.height,x:e.left,y:e.top,alpha:parseFloat((e.opacity/255).toFixed(2)),anchorX:.5,anchorY:.5,rotation:0,scaleX:1,scaleY:1},nodes:[],scripts:[]};if(e.image&&a.props&&e.blob&&t){const o=e.blob.type.split("/"),i=o[o.length-1];if(["png","jpg","jpeg"].includes(i)){const o=`${n()}.${i}`;t.file(o,e.blob),a.props.url=`${r}/${o}`}}if(e.texts&&a.props){const t=e.texts[0];a.props.text=t.text,a.props.fontSize=t.fontSize,a.props.leading=t.lineHeight,a.props.color=t.color}if(e.children)for(let i=0;i<e.children.length;i++)null==(o=a.nodes)||o.push(I(e.children[e.children.length-1-i],t,r,n));return a}const A=function(e){return S(this,null,(function*(){const{layer:t}=e,r={name:e.name,width:e.width,height:e.height,top:e.top,left:e.left,id:(0,c.xv)(),opacity:t.opacity>=0?t.opacity:255,children:[]};e.isGroup()||t.image&&(yield function(e,t){return S(this,null,(function*(){return new Promise((r=>{try{const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const o=n.getContext("2d"),a=e.layer.image.toPng();a.onload=function(){null==o||o.drawImage(a,0,0,t.width,t.height),n.toBlob((function(e){t.blob=e,t.image=URL.createObjectURL(e),r()}))}}catch(e){r()}}))}))}(e,r));const n=e._children;if(n)for(let e=0;e<n.length;e++){const t=n[e];t.layer.visible&&r.children.push(yield A(t))}return r}))};function M(e){const t=new D(e);t.readString();const r=t.readString();return!!r&&r.startsWith("3.8")}function _(e){const t=new D(e);t.readInt32(),t.readInt32();const r=t.readString();return!!r&&r.startsWith("4.0")}class D{constructor(e,t=[],r=0,n=new DataView(e.buffer)){this.strings=t,this.index=r,this.buffer=n}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){const e=this.buffer.getInt16(this.index);return this.index+=2,e}readInt32(){const e=this.buffer.getInt32(this.index);return this.index+=4,e}readInt(e){let t=this.readByte(),r=127&t;return 0!=(128&t)&&(t=this.readByte(),r|=(127&t)<<7,0!=(128&t)&&(t=this.readByte(),r|=(127&t)<<14,0!=(128&t)&&(t=this.readByte(),r|=(127&t)<<21,0!=(128&t)&&(t=this.readByte(),r|=(127&t)<<28)))),e?r:r>>>1^-(1&r)}readStringRef(){const e=this.readInt(!0);return 0===e?null:this.strings[e-1]}readString(){let e=this.readInt(!0);switch(e){case 0:return null;case 1:return""}e--;let t="";for(let r=0;r<e;){const e=this.readByte();switch(e>>4){case 12:case 13:t+=String.fromCharCode((31&e)<<6|63&this.readByte()),r+=2;break;case 14:t+=String.fromCharCode((15&e)<<12|(63&this.readByte())<<6|63&this.readByte()),r+=3;break;default:t+=String.fromCharCode(e),r++}}return t}readFloat(){const e=this.buffer.getFloat32(this.index);return this.index+=4,e}readBoolean(){return 0!==this.readByte()}}function R(e){var t;return null==(t=e.split(".").pop())?void 0:t.toLowerCase()}var N=(e,t,r)=>{return void 0,null,n=function*(){const t=[],n=[];for(const r of e)"zip"===R(r.name)?t.push(r):n.push(r);if(!n.length)return e;try{const e=n.find((e=>e.name.endsWith(r)));if(!e)throw new Error("文件格式错误");const o=e.name.slice(0,-r.length),a=new(u());for(const e of n)a.file(e.name,e);const i=yield a.generateAsync({type:"blob"}).then((e=>new File([e],`${o}.zip`,{type:"application/zip"})));t.push(i)}catch(e){i.ZP.error(e.message)}return t},new Promise(((e,t)=>{var r=e=>{try{a(n.next(e))}catch(e){t(e)}},o=e=>{try{a(n.throw(e))}catch(e){t(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,o);a((n=n.apply(undefined,null)).next())}));var n};function V(e){const t=e.split("/");t.length>1&&t.shift();for(const e of t)if(/[^\w\-\.]/.test(e))throw new Error("zip内文件名仅支持大小写字母、数字、减号和下划线组成，请修改后重新上传")}const B=function(e){this.data=e,this.debug=!1,this.gpflags=void 0,this.files=0,this.unzipped=[],this.buf32k=new Array(32768),this.bIdx=0,this.modeZIP=!1,this.bytepos=0,this.bb=1,this.bits=0,this.nameBuf=[],this.fileout=void 0,this.literalTree=new Array(B.LITERALS),this.distanceTree=new Array(32),this.treepos=0,this.Places=null,this.len=0,this.fpos=new Array(17),this.fpos[0]=0,this.flens=void 0,this.fmax=void 0};B.gunzip=function(e){return e.constructor===Array||e.constructor,new B(e).gunzip()[0][0]},B.HufNode=function(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1},B.LITERALS=288,B.NAMEMAX=256,B.bitReverse=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],B.cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],B.cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],B.cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],B.cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B.border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B.prototype.gunzip=function(){return this.outputArr=[],this.nextFile(),this.unzipped},B.prototype.readByte=function(){return this.bits+=8,this.bytepos<this.data.length?this.data.charCodeAt(this.bytepos++):-1},B.prototype.byteAlign=function(){this.bb=1},B.prototype.readBit=function(){var e;return this.bits++,e=1&this.bb,this.bb>>=1,0===this.bb&&(this.bb=this.readByte(),e=1&this.bb,this.bb=this.bb>>1|128),e},B.prototype.readBits=function(e){for(var t=0,r=e;r--;)t=t<<1|this.readBit();return e&&(t=B.bitReverse[t]>>8-e),t},B.prototype.flushBuffer=function(){this.bIdx=0},B.prototype.addBuffer=function(e){this.buf32k[this.bIdx++]=e,this.outputArr.push(String.fromCharCode(e)),32768===this.bIdx&&(this.bIdx=0)},B.prototype.IsPat=function(){for(;;){if(this.fpos[this.len]>=this.fmax)return-1;if(this.flens[this.fpos[this.len]]===this.len)return this.fpos[this.len]++;this.fpos[this.len]++}},B.prototype.Rec=function(){var e,t=this.Places[this.treepos];if(17===this.len)return-1;if(this.treepos++,this.len++,(e=this.IsPat())>=0)t.b0=e;else if(t.b0=32768,this.Rec())return-1;if((e=this.IsPat())>=0)t.b1=e,t.jump=null;else if(t.b1=32768,t.jump=this.Places[this.treepos],t.jumppos=this.treepos,this.Rec())return-1;return this.len--,0},B.prototype.CreateTree=function(e,t,r,n){var o;for(this.Places=e,this.treepos=0,this.flens=r,this.fmax=t,o=0;o<17;o++)this.fpos[o]=0;return this.len=0,this.Rec()?-1:0},B.prototype.DecodeValue=function(e){for(var t,r,n=0,o=e[n];;)if(this.readBit()){if(!(32768&o.b1))return o.b1;for(o=o.jump,t=e.length,r=0;r<t;r++)if(e[r]===o){n=r;break}}else{if(!(32768&o.b0))return o.b0;o=e[++n]}return-1},B.prototype.DeflateLoop=function(){var e,t,r;do{var n,o;if(e=this.readBit(),0===(t=this.readBits(2)))for(this.byteAlign(),n=this.readByte(),n|=this.readByte()<<8,o=this.readByte(),65535&(n^~(o|=this.readByte()<<8))&&document.write("BlockLen checksum mismatch\n");n--;)a=this.readByte(),this.addBuffer(a);else if(1===t)for(;;)if((i=B.bitReverse[this.readBits(7)]>>1)>23?(i=i<<1|this.readBit())>199?i=(i-=128)<<1|this.readBit():(i-=48)>143&&(i+=136):i+=256,i<256)this.addBuffer(i);else{if(256===i)break;for(i-=257,m=this.readBits(B.cplext[i])+B.cplens[i],i=B.bitReverse[this.readBits(5)]>>3,B.cpdext[i]>8?(y=this.readBits(8),y|=this.readBits(B.cpdext[i]-8)<<8):y=this.readBits(B.cpdext[i]),y+=B.cpdist[i],i=0;i<m;i++){var a=this.buf32k[this.bIdx-y&32767];this.addBuffer(a)}}else if(2===t){var i,l,c,s,p,u=new Array(320);for(c=257+this.readBits(5),s=1+this.readBits(5),p=4+this.readBits(4),i=0;i<19;i++)u[i]=0;for(i=0;i<p;i++)u[B.border[i]]=this.readBits(3);for(m=this.distanceTree.length,r=0;r<m;r++)this.distanceTree[r]=new B.HufNode;if(this.CreateTree(this.distanceTree,19,u,0))return this.flushBuffer(),1;for(l=c+s,r=0;r<l;)if((i=this.DecodeValue(this.distanceTree))<16)u[r++]=i;else if(16===i){var d;if(r+(i=3+this.readBits(2))>l)return this.flushBuffer(),1;for(d=r?u[r-1]:0;i--;)u[r++]=d}else{if(r+(i=17===i?3+this.readBits(3):11+this.readBits(7))>l)return this.flushBuffer(),1;for(;i--;)u[r++]=0}for(m=this.literalTree.length,r=0;r<m;r++)this.literalTree[r]=new B.HufNode;if(this.CreateTree(this.literalTree,c,u,0))return this.flushBuffer(),1;for(m=this.literalTree.length,r=0;r<m;r++)this.distanceTree[r]=new B.HufNode;var f=[];for(r=c;r<u.length;r++)f[r-c]=u[r];if(this.CreateTree(this.distanceTree,s,f,0))return this.flushBuffer(),1;for(;;)if((i=this.DecodeValue(this.literalTree))>=256){var m,y;if(0==(i-=256))break;for(i--,m=this.readBits(B.cplext[i])+B.cplens[i],i=this.DecodeValue(this.distanceTree),B.cpdext[i]>8?(y=this.readBits(8),y|=this.readBits(B.cpdext[i]-8)<<8):y=this.readBits(B.cpdext[i]),y+=B.cpdist[i];m--;)a=this.buf32k[this.bIdx-y&32767],this.addBuffer(a)}else this.addBuffer(i)}}while(!e);return this.flushBuffer(),this.byteAlign(),0},B.prototype.unzipFile=function(e){var t;for(this.gunzip(),t=0;t<this.unzipped.length;t++)if(this.unzipped[t][1]===e)return this.unzipped[t][0]},B.prototype.nextFile=function(){this.outputArr=[],this.modeZIP=!1;var e=[];if(e[0]=this.readByte(),e[1]=this.readByte(),120===e[0]&&218===e[1]&&(this.DeflateLoop(),this.unzipped[this.files]=[this.outputArr.join(""),"geonext.gxt"],this.files++),31===e[0]&&139===e[1]&&(this.skipdir(),this.unzipped[this.files]=[this.outputArr.join(""),"file"],this.files++),80===e[0]&&75===e[1]&&(this.modeZIP=!0,e[2]=this.readByte(),e[3]=this.readByte(),3===e[2]&&4===e[3])){e[0]=this.readByte(),e[1]=this.readByte(),this.gpflags=this.readByte(),this.gpflags|=this.readByte()<<8;var t=this.readByte();t|=this.readByte()<<8,this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte();var r=this.readByte();r|=this.readByte()<<8;var n=this.readByte();for(n|=this.readByte()<<8,a=0,this.nameBuf=[];r--;){var o=this.readByte();"/"===o|":"===o?a=0:a<B.NAMEMAX-1&&(this.nameBuf[a++]=String.fromCharCode(o))}this.fileout||(this.fileout=this.nameBuf);for(var a=0;a<n;)o=this.readByte(),a++;8===t&&(this.DeflateLoop(),this.unzipped[this.files]=[this.outputArr.join(""),this.nameBuf.join("")],this.files++),this.skipdir()}},B.prototype.skipdir=function(){var e,t,r=[];if(8&this.gpflags&&(r[0]=this.readByte(),r[1]=this.readByte(),r[2]=this.readByte(),r[3]=this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte()),this.modeZIP&&this.nextFile(),r[0]=this.readByte(),8!==r[0])return 0;if(this.gpflags=this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),4&this.gpflags)for(r[0]=this.readByte(),r[2]=this.readByte(),this.len=r[0]+256*r[1],e=0;e<this.len;e++)this.readByte();if(8&this.gpflags)for(e=0,this.nameBuf=[];t=this.readByte();)"7"!==t&&":"!==t||(e=0),e<B.NAMEMAX-1&&(this.nameBuf[e++]=t);if(16&this.gpflags)for(;t=this.readByte(););2&this.gpflags&&(this.readByte(),this.readByte()),this.DeflateLoop(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.modeZIP&&this.nextFile()};var Z=B;const T=r(70156),z=function(e){var t,r,n,o,a,i,l,c,s,p,u,d,f;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},a=null;;){switch(t=this.readUInt32(),c=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":a&&this.animation.frames.push(a),this.pos+=4,a={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},o=this.readUInt16(),n=this.readUInt16()||100,a.delay=1e3*o/n,a.disposeOp=this.data[this.pos++],a.blendOp=this.data[this.pos++],a.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,t-=4),e=(null!=a?a.data:void 0)||this.imgData,u=0;0<=t?u<t:u>t;0<=t?++u:--u)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(t),(s=255-this.transparency.indexed.length)>0)for(d=0;0<=s?d<s:d>s;0<=s?++d:--d)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":i=(p=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,p.slice(0,i)),this.text[l]=String.fromCharCode.apply(String,p.slice(i+1));break;case"IEND":return a&&this.animation.frames.push(a),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(f=this.colorType)||6===f,r=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*r,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(Uint8Array!=Array&&(this.imgData=new Uint8Array(this.imgData)));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error}};z.prototype={constructor:z,read:function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)r.push(this.data[this.pos++]);return r},readUInt32:function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},readUInt16:function(){return this.data[this.pos++]<<8|this.data[this.pos++]},decodePixels:function(e){var t,r,n,o,a,i,l,c,s,p,u,d,f,m,y,b,h,g,v,O,k,x,E;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);for(e=new T.Inflate(e,{index:0,verify:!1}).decompress(),b=(d=this.pixelBitlength/8)*this.width,f=new Uint8Array(b*this.height),i=e.length,y=0,m=0,r=0;m<i;){switch(e[m++]){case 0:for(o=v=0;v<b;o=v+=1)f[r++]=e[m++];break;case 1:for(o=O=0;O<b;o=O+=1)t=e[m++],a=o<d?0:f[r-d],f[r++]=(t+a)%256;break;case 2:for(o=k=0;k<b;o=k+=1)t=e[m++],n=(o-o%d)/d,h=y&&f[(y-1)*b+n*d+o%d],f[r++]=(h+t)%256;break;case 3:for(o=x=0;x<b;o=x+=1)t=e[m++],n=(o-o%d)/d,a=o<d?0:f[r-d],h=y&&f[(y-1)*b+n*d+o%d],f[r++]=(t+Math.floor((a+h)/2))%256;break;case 4:for(o=E=0;E<b;o=E+=1)t=e[m++],n=(o-o%d)/d,a=o<d?0:f[r-d],0===y?h=g=0:(h=f[(y-1)*b+n*d+o%d],g=n&&f[(y-1)*b+(n-1)*d+o%d]),l=a+h-g,c=Math.abs(l-a),p=Math.abs(l-h),u=Math.abs(l-g),s=c<=p&&c<=u?a:p<=u?h:g,f[r++]=(t+s)%256;break;default:throw new Error("debug.getError(6018, data[pos - 1])")}y++}return f},copyToImageData:function(e,t){var r,n,o,a,i,l,c,s,p,u,d;if(n=this.colors,p=null,r=this.hasAlphaChannel,this.palette.length&&(p=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),n=4,r=!0),s=(o=e.data||e).length,i=p||t,a=l=0,1===n)for(;a<s;)c=p?4*t[a/4]:l,u=i[c++],o[a++]=u,o[a++]=u,o[a++]=u,o[a++]=r?i[c++]:255,l=c;else for(;a<s;)c=p?4*t[a/4]:l,o[a++]=i[c++],o[a++]=i[c++],o[a++]=i[c++],o[a++]=r?i[c++]:255,l=c},decodePalette:function(){var e,t,r,n,o,a,i,l,c;for(r=this.palette,a=this.transparency.indexed||[],o=new Uint8Array((a.length||0)+r.length),n=0,e=0,t=i=0,l=r.length;i<l;t=i+=3)o[n++]=r[t],o[n++]=r[t+1],o[n++]=r[t+2],o[n++]=null!=(c=a[e++])?c:255;return o},render:function(e){var t,r;return e.width=this.width,e.height=this.height,r=(t=e.getContext("2d")).createImageData(this.width,this.height),this.copyToImageData(r,this.decodePixels()),t.putImageData(r,0,0)}};var L=z,U={_littleEndian:!1,_tiffData:null,_fileDirectories:[],getUint8:function(e){return this._tiffData[e]},getUint16:function(e){return this._littleEndian?this._tiffData[e+1]<<8|this._tiffData[e]:this._tiffData[e]<<8|this._tiffData[e+1]},getUint32:function(e){var t=this._tiffData;return this._littleEndian?t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]:t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]},checkLittleEndian:function(){var e=this.getUint16(0);if(18761===e)this.littleEndian=!0;else{if(19789!==e)throw TypeError(6019);this.littleEndian=!1}return this.littleEndian},hasTowel:function(){if(42!==this.getUint16(2))throw RangeError(6020);return!0},getFieldTypeName:function(e){var t=this.fieldTypeNames;return e in t?t[e]:null},getFieldTagName:function(e){var t=this.fieldTagNames;return e in t?t[e]:(cc.logID(6021,e),"Tag"+e)},getFieldTypeLength:function(e){return-1!==["BYTE","ASCII","SBYTE","UNDEFINED"].indexOf(e)?1:-1!==["SHORT","SSHORT"].indexOf(e)?2:-1!==["LONG","SLONG","FLOAT"].indexOf(e)?4:-1!==["RATIONAL","SRATIONAL","DOUBLE"].indexOf(e)?8:null},getFieldValues:function(e,t,r,n){var o=[],a=this.getFieldTypeLength(t);if(a*r<=4)!1===this.littleEndian?o.push(n>>>8*(4-a)):o.push(n);else for(var i=0;i<r;i++){var l=a*i;a>=8?-1!==["RATIONAL","SRATIONAL"].indexOf(t)?(o.push(this.getUint32(n+l)),o.push(this.getUint32(n+l+4))):cc.logID(8e3):o.push(this.getBytes(a,n+l))}return"ASCII"===t&&o.forEach((function(e,t,r){r[t]=String.fromCharCode(e)})),o},getBytes:function(e,t){if(e<=0)cc.logID(8001);else{if(e<=1)return this.getUint8(t);if(e<=2)return this.getUint16(t);if(e<=3)return this.getUint32(t)>>>8;if(e<=4)return this.getUint32(t);cc.logID(8002)}},getBits:function(e,t,r){r=r||0;var n,o,a=t+Math.floor(r/8),i=r+e,l=32-e;return i<=0?cc.logID(6023):i<=8?(n=24+r,o=this.getUint8(a)):i<=16?(n=16+r,o=this.getUint16(a)):i<=32?(n=r,o=this.getUint32(a)):cc.logID(6022),{bits:o<<n>>>l,byteOffset:a+Math.floor(i/8),bitOffset:i%8}},parseFileDirectory:function(e){for(var t=this.getUint16(e),r=[],n=e+2,o=0;o<t;n+=12,o++){var a=this.getUint16(n),i=this.getUint16(n+2),l=this.getUint32(n+4),c=this.getUint32(n+8),s=this.getFieldTagName(a),p=this.getFieldTypeName(i),u=this.getFieldValues(s,p,l,c);r[s]={type:p,values:u}}this._fileDirectories.push(r);var d=this.getUint32(n);0!==d&&this.parseFileDirectory(d)},clampColorSample:function(e,t){var r=Math.pow(2,8-t);return Math.floor(e*r+(r-1))},parseTIFF:function(e,t){if(t=t||document.createElement("canvas"),this._tiffData=e,this.canvas=t,this.checkLittleEndian(),this.hasTowel()){var r=this.getUint32(4);this._fileDirectories.length=0,this.parseFileDirectory(r);var n=this._fileDirectories[0],o=n.ImageWidth.values[0],a=n.ImageLength.values[0];this.canvas.width=o,this.canvas.height=a;var i=[],l=n.Compression?n.Compression.values[0]:1,c=n.SamplesPerPixel.values[0],s=[],p=0,u=!1;if(n.BitsPerSample.values.forEach((function(e,t,r){s[t]={bitsPerSample:e,hasBytesPerSample:!1,bytesPerSample:void 0},e%8==0&&(s[t].hasBytesPerSample=!0,s[t].bytesPerSample=e/8),p+=e}),this),p%8==0){u=!0;var d=p/8}var f=n.StripOffsets.values,m=f.length;if(n.StripByteCounts)var y=n.StripByteCounts.values;else{if(cc.logID(8003),1!==m)throw Error(6024);y=[Math.ceil(o*a*p/8)]}for(var b=0;b<m;b++){var h=f[b];i[b]=[];for(var g=y[b],v=0,O=0,k=1,x=!0,E=[],w=0,P=0,j=0;v<g;v+=k)switch(l){case 1:var S=0;for(E=[];S<c;S++){if(!s[S].hasBytesPerSample){var C=this.getBits(s[S].bitsPerSample,h+v,O);throw E.push(C.bits),v=C.byteOffset-h,O=C.bitOffset,RangeError(6025)}var I=s[S].bytesPerSample*S;E.push(this.getBytes(s[S].bytesPerSample,h+v+I))}if(i[b].push(E),!u)throw k=0,RangeError(6026);k=d;break;case 2:case 3:case 4:case 5:case 6:case 7:default:break;case 32773:if(x){x=!1;var A=1,M=1,_=this.getInt8(h+v);_>=0&&_<=127?A=_+1:_>=-127&&_<=-1?M=1-_:x=!0}else{var D=this.getUint8(h+v);for(S=0;S<M;S++){if(!s[P].hasBytesPerSample)throw RangeError(6025);j=j<<8*w|D,++w===s[P].bytesPerSample&&(E.push(j),j=w=0,P++),P===c&&(i[b].push(E),E=[],P=0)}0==--A&&(x=!0)}k=1}}if(t.getContext){var R=this.canvas.getContext("2d");R.fillStyle="rgba(255, 255, 255, 0)";var N=n.RowsPerStrip?n.RowsPerStrip.values[0]:a,V=i.length,B=a%N,Z=0===B?N:B,T=N,z=0,L=n.PhotometricInterpretation.values[0],U=[],F=0;if(n.ExtraSamples&&(F=(U=n.ExtraSamples.values).length),n.ColorMap)var Y=n.ColorMap.values,$=Math.pow(2,s[0].bitsPerSample);for(b=0;b<V;b++){b+1===V&&(T=Z);for(var Q=i[b].length,W=z*b,J=0,K=0;K<Q;J++)for(var H=0;H<o;H++,K++){var G=i[b][K],q=0,X=0,ee=0,te=1;if(F>0)for(var re=0;re<F;re++)if(1===U[re]||2===U[re]){te=G[3+re]/256;break}switch(L){case 0:if(s[0].hasBytesPerSample)var ne=Math.pow(16,2*s[0].bytesPerSample);G.forEach((function(e,t,r){r[t]=ne-e}));case 1:q=X=ee=this.clampColorSample(G[0],s[0].bitsPerSample);break;case 2:q=this.clampColorSample(G[0],s[0].bitsPerSample),X=this.clampColorSample(G[1],s[1].bitsPerSample),ee=this.clampColorSample(G[2],s[2].bitsPerSample);break;case 3:if(void 0===Y)throw Error(6027);var oe=G[0];q=this.clampColorSample(Y[oe],16),X=this.clampColorSample(Y[$+oe],16),ee=this.clampColorSample(Y[2*$+oe],16);break;default:throw RangeError(6028)}R.fillStyle="rgba("+q+", "+X+", "+ee+", "+te+")",R.fillRect(H,W+J,1,1)}z=T}}return this.canvas}},fieldTagNames:{315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop"},fieldTypeNames:{1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE"}},F=U;const Y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAA6ElEQVR4nO3QwQ3AIBDAsNL9dz5WIC+EZE8QZc3Mx5n/dsBLzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCjbP8QPFyqa8aAAAAABJRU5ErkJggg==";function $(e){return new Promise(((t,r)=>{const n=new FileReader;n.readAsText(e),n.onload=()=>{if((0,w.isString)(n.result)){const e=new class extends class{constructor(){window.DOMParser?(this._isSupportDOMParser=!0,this._parser=new DOMParser):this._isSupportDOMParser=!1}parse(e){return this._parseXML(e)}_parseXML(e){let t;return this._isSupportDOMParser&&this._parser?t=this._parser.parseFromString(e.replace(/^\s*/g,""),"text/xml"):(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)),t}}{parse(e){let t=this._parseXML(e);const r=t.documentElement;if("plist"!==r.tagName)return{};let n=null;for(let e=0,t=r.childNodes.length;e<t&&(n=r.childNodes[e],1!==n.nodeType);e++);return t=null,this._parseNode(n)}_parseNode(e){let t=null;const r=e.tagName;if("dict"===r)t=this._parseDict(e);else if("array"===r)t=this._parseArray(e);else if("string"===r)if(1===e.childNodes.length)t=e.firstChild.nodeValue;else{t="";for(let r=0;r<e.childNodes.length;r++)t+=e.childNodes[r].nodeValue}else"false"===r?t=!1:"true"===r?t=!0:"real"===r?t=parseFloat(e.firstChild.nodeValue):"integer"===r&&(t=parseInt(e.firstChild.nodeValue,10));return t}_parseArray(e){const t=[];for(let r=0,n=e.childNodes.length;r<n;r++){const n=e.childNodes[r];1===n.nodeType&&t.push(this._parseNode(n))}return t}_parseDict(e){const t={};let r="";for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];1===o.nodeType&&("key"===o.tagName?r=o.firstChild.nodeValue:t[r]=this._parseNode(o))}return t}},r=n.result,o=e.parse(r);o.textureImageData?function(e){const t=function(e){const t=atob(e);let r="";try{r=Z.gunzip(t)}catch(e){r=t.slice(7)}let n,o,a,i=[];for(n=0,a=r.length/1;n<a;n++)for(i[n]=0,o=0;o>=0;--o)i[n]+=r.charCodeAt(1*n+o)<<8*o;return i}(e),r=document.createElement("canvas"),n=(o=t).length>8&&137===o[0]&&80===o[1]&&78===o[2]&&71===o[3]&&13===o[4]&&10===o[5]&&26===o[6]&&10===o[7]?"PNG":o.length>2&&(73===o[0]&&73===o[1]||77===o[0]&&77===o[1]||255===o[0]&&216===o[1])?"TIFF":"UNKNOWN";var o;let a="";return"PNG"===n||"TIFF"===n?("PNG"===n?new L(t).render(r):F.parseTIFF(t,r),a=r.toDataURL("image/png",1)):a=Y,Promise.resolve().then((()=>a))}(o.textureImageData).then((e=>{o.textureImageData=e,t(o)})):(o.textureFileName||(o.textureImageData=Y),t(o))}},n.onerror=()=>r("Fail to load plist file")}))}var Q,W,J=r(32782),K=r.n(J),H=r(62732),G=r(60837),q=r(68373),X=r(14908),ee=r(70072),te=r(28324),re={header:(0,H.iv)({display:"flex",width:"1075px",justifyContent:"space-between"}),wrapper:(0,H.iv)({width:"1075px",height:"650px",overflow:"auto",display:"flex"}),list:(0,H.iv)({width:"240px",height:"650px",display:"flex",flexDirection:"column",margin:"0 10px 0 0",alignItems:"center",overflow:"auto"}),videoWrapper:(0,H.iv)({width:"210px",height:"130px",margin:"10px",position:"relative",boxSizing:"content-box"}),video:(0,H.iv)({width:"100%",height:"100%",position:"relative"}),videoPlay:(0,H.iv)({position:"absolute",top:"55px",left:"93px",fontSize:"25px",color:"white"}),audioContent:(0,H.iv)({width:"210px",height:"130px",backgroundColor:"#f1f3f4"}),audioCover:(0,H.iv)({width:"210px",height:"100px"}),audio:(0,H.iv)({width:"210px",height:"30px"}),mask:(0,H.iv)({position:"absolute",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(255,255,255,0.5)",display:"flex",justifyContent:"center",alignItems:"center"}),completeIcon:(0,H.iv)({position:"absolute",fontSize:"30px"}),centerAndRight:(0,H.iv)({width:"800px",height:"650px",display:"flex"}),center:(0,H.iv)({width:"700px",height:"650px",display:"flex",flexDirection:"column",padding:"10px",justifyContent:"center",alignItems:"center",backgroundColor:"#e5e5e5"}),tip:(0,H.iv)({height:"100%",width:"100%"}),previewVideo:(0,H.iv)({height:"500px",width:"500px"}),previewAudioWrapper:(0,H.iv)({height:"500px",width:"500px",backgroundColor:"#f1f3f4"}),previewAudioCover:(0,H.iv)({height:"400px",width:"500px"}),previewAudio:(0,H.iv)({height:"100px",width:"500px"}),previewImage:(0,H.iv)({height:"500px",width:"500px",objectFit:"contain"}),info:(0,H.iv)({width:"500px",display:"flex",flexDirection:"column",margin:"10px",alignItems:"start",fontSize:14}),right:(0,H.iv)({width:"130px",height:"650px",display:"flex",marginLeft:"20px",flexDirection:"column"}),uploadBtn:(0,H.iv)({marginTop:"35px"})},ne=r(27885),oe=r(10268),ae=r(14270),ie=r(2835),le=r(72458),ce=r(42560),se=["title","titleId"];function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pe.apply(this,arguments)}var ue,de,fe,me,ye=function(e,t){var r=e.title,o=e.titleId,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,se);return n.createElement("svg",pe({t:1641387839657,className:"icon",viewBox:"0 0 1087 1024",xmlns:"http://www.w3.org/2000/svg","p-id":12783,xmlnsXlink:"http://www.w3.org/1999/xlink",width:212.3046875,height:200,ref:t,"aria-labelledby":o},a),r?n.createElement("title",{id:o},r):null,Q||(Q=n.createElement("defs",null,n.createElement("style",{type:"text/css"}))),W||(W=n.createElement("path",{d:"M768 415.744q0 5.12-10.752 17.92t-23.04 30.208-23.04 37.888-10.752 41.984 10.752 41.472 23.04 36.352 23.04 27.136 10.752 13.824l0 107.52q0 17.408-12.8 39.424t-31.744 41.472-41.984 32.256-43.52 12.8l-508.928 0q-27.648 0-50.688-9.728t-40.448-27.136-27.136-40.96-9.728-51.2l0-441.344q0-20.48 9.216-42.496t26.112-40.448 39.936-30.72 50.688-12.288l508.928 0q27.648 0 51.712 9.728t41.984 26.624 28.16 40.448 10.24 50.176l0 89.088zM1086.464 319.488l0 467.968q0 22.528-11.776 39.936t-35.328 17.408q-8.192 0-20.992-6.144t-25.6-14.336-24.064-16.384-16.384-13.312q-13.312-11.264-40.448-38.912t-54.784-62.464-48.64-71.68-20.992-67.584 22.528-70.144 54.272-77.312 66.56-70.144 58.368-48.64q9.216-6.144 25.088-14.848t28.16-8.704q27.648 0 35.84 15.36t8.192 37.888l0 2.048z","p-id":12784,fill:"#bfbfbf"})))},be=(0,n.forwardRef)(ye),he=(r.p,r(23247)),ge=r.n(he),ve=r(30437),Oe=r.n(ve),ke=r(21703),xe=r(22142),Ee=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));(de=ue||(ue={}))[de.video=10485760]="video",de[de.audio=2097152]="audio",de[de.image=1048576]="image",(me=fe||(fe={}))[me.video=104857600]="video",me[me.audio=104857600]="audio",me[me.image=31457280]="image";const we={video:["video/mp4"],audio:["audio/mpeg"],image:["image/jpeg","image/png"]},Pe=[],je=(e,t,r,n,o,a,c,s,p,u)=>Ee(void 0,null,(function*(){Se(e,p,u);const f=o.findIndex((t=>t.index===e));if(-1===f)a([...o,{index:e,quality:r}]);else{const e=o;e[f].quality=r,a([...e])}const m=(0,k.cM)({online:!0});if(t.type.startsWith("image")){(0,ke.r)(ke.G.CompressResource,{type:"图片"});let o="0:0";const{width:a,height:f}=yield(0,l.jL)(t);a>2048&&(o="2048:0"),f>2048&&(o="0:2048");const b=yield(y=t,Ee(void 0,null,(function*(){const e=(()=>{const e=(0,k.cM)({online:!0});return new(Oe())({userId:e?"1000000292":"1900000130",appId:5158,region:e?"cn":"boe",imageHost:e?"":["https://staging","-openapi-boe",".byted",".org"].join(),imageConfig:{serviceId:e?"q2c0dv3l96":"lrm9e79t2k"}})})(),t=yield(0,d.G7)(),r=e.addFile({file:y,stsToken:{CurrentTime:t.currentTime,ExpiredTime:t.expiredTime,SessionToken:t.sessionToken,AccessKeyId:t.accessKeyId,SecretAccessKey:t.secretAccessKey},type:"image"});return e.start(r),new Promise(((t,r)=>{e.on("complete",(e=>{t(e.uploadResult.ImageUri)})),e.on("error",(e=>{var t;i.ZP.error(`${null==(t=null==e?void 0:e.extra)?void 0:t.message}`),r(e)}))}))}))),h=m?["https://p3-magicplay",".byteimg.com"].join(""):["https://p-boe",".byted",".org"].join(),g=m?"tplv-q2c0dv3l96-resize":"tplv-lrm9e79t2k-resize",v=yield ge().get(`${h}/${b}~${g}:${o}:q${10*r}.${n}`,{responseType:"arraybuffer"}),O=new Blob([v.data],{type:`image/${n}`});clearTimeout(Pe[e]);const x=new File([O],`${t.name.split(".").slice(0,-1).join(".")}.${n}`,{type:`image/${n}`}),E=p;p[e]=100,u([...E]);const w=c.findIndex((t=>t.index===e)),P=c;-1===w?P.push({index:e,file:x,type:n,src:URL.createObjectURL(O)}):P[w]={index:e,file:x,type:n,src:URL.createObjectURL(O)},s([...P])}else{t.type.startsWith("video")?(0,ke.r)(ke.G.CompressResource,{type:"视频"}):(0,ke.r)(ke.G.CompressResource,{type:"音频"});const n=yield((e,t)=>Ee(void 0,null,(function*(){const r=(new Date).getTime(),n=new FormData;n.append("file",e),n.append("level",t),e.type.startsWith("video")?n.append("mediaType","3"):n.append("mediaType","2"),n.append("fileName",e.name);const o=yield ge().post("/api/worker/processMedia",n,{responseType:"arraybuffer"});if(o.headers.error)return e.type.startsWith("video")&&(0,ke.r)(ke.G.VideoCompressDuration,{duration:"超时"}),i.ZP.error(decodeURI(o.headers.error).includes("Timeout")?"文件压缩超时":"文件压缩出错"),{headers:{"media-width":0,"media-height":0,"media-duration":0,error:!0},data:null};const a=(new Date).getTime(),l=Math.round((a-r)/1e3);return e.type.startsWith("video")&&(0,ke.r)(ke.G.VideoCompressDuration,{duration:`${l}`}),o})))(t,r),o=new Blob([n.data]);clearTimeout(Pe[e]);const a=new File([o],`${t.name.split(".").slice(0,-1).join(".")}.${t.type.startsWith("video")?"mp4":"mp3"}`),l=p;p[e]=100,u([...l]);const d=c.findIndex((t=>t.index===e)),f=c;-1===d?f.push({index:e,file:a,width:n.headers["media-width"],height:n.headers["media-height"],duration:n.headers["media-duration"],type:t.type.startsWith("video")?"mp4":"mp3",error:n.headers.error,src:URL.createObjectURL(o)}):f[d]={index:e,file:a,width:n.headers["media-width"],height:n.headers["media-height"],duration:n.headers["media-duration"],type:t.type.startsWith("video")?"mp4":"mp3",error:n.headers.error,src:URL.createObjectURL(o)},s([...f])}var y})),Se=(e,t,r)=>Ee(void 0,null,(function*(){let n=0;Pe[e]=setInterval((()=>{n<40?n+=10:n>=40&&n<70?n+=5:n>=70&&n<90?n+=2:n>=90&&n<98?n+=1:clearTimeout(Pe[e]);const o=t;t[e]=n,r([...o])}),500)})),Ce=(e,t,r,n)=>{const o=e.length,i=t.length;o<i?a.Z.confirm({title:"确认关闭",icon:xe.createElement(v.Z,null),content:`您还有${i-o}个文件未上传，关闭此窗口将不会上传这些文件，是否确认关闭？`,okText:"确认",cancelText:"取消",onOk:()=>{r(n),a.Z.destroyAll()}}):(r(n),a.Z.destroyAll())},Ie=(0,te.ZP)((e=>({processPercent:[],completeFiles:[],processQuality:[],setProcessPercent:t=>e((()=>({processPercent:t}))),setCompleteFiles:t=>e((()=>({completeFiles:t}))),setProcessQuality:t=>e((()=>({processQuality:t})))})));var Ae=({list:e,onFinish:t})=>{var r,o,a,l,c,s,p,u,d,f,m,y,b,h,g,v,O;const[k,x]=(0,n.useState)(e),[E,w]=(0,n.useState)(0),[P,j]=(0,n.useState)([]),[S,C]=(0,n.useState)([]),[I,A]=(0,n.useState)([]),[M,_]=(0,n.useState)([]),[D,R]=(0,n.useState)(!1),N=Ie((e=>e.processPercent)),V=Ie((e=>e.setProcessPercent)),B=Ie((e=>e.completeFiles)),Z=Ie((e=>e.setCompleteFiles)),T=Ie((e=>e.processQuality)),z=Ie((e=>e.setProcessQuality));return(0,n.useEffect)((()=>{((e,t,r,n)=>{const o=[],a=[];e.forEach(((t,r)=>{t.type.startsWith("image")&&a.push({index:r,type:"image/png"===t.type?"png":"jpeg"});const i=new FileReader;i.onload=function(){o.push({index:r,src:i.result,type:t.type}),n([...e])},i.readAsDataURL(t)})),t(o),r(a)})(k,j,C,x)}),[]),(0,n.useEffect)((()=>{const e="image/png"===k[E].type?"png":"jpeg";k.forEach(((t,r)=>{je(r,t,8,e,T,z,B,Z,N,V)}))}),[]),(0,n.useEffect)((()=>{I.length===k.length&&Ce(I,k,t,M)}),[I]),n.createElement(n.Fragment,null,n.createElement("div",{className:re.header},n.createElement("h2",null,"处理结果"),n.createElement(ne.Z,{onClick:()=>Ce(I,k,t,M)})),n.createElement("div",{className:re.wrapper},n.createElement("div",{className:re.list},k.map(((e,t)=>{var r,o,a,i;return n.createElement("div",{key:t,className:re.videoWrapper,style:{border:E===t?"2px solid #1890ff":"none"},onClick:e=>{e.preventDefault(),E!==t&&w(t)}},e.type.startsWith("video")&&n.createElement("div",{className:re.video,onMouseLeave:()=>{R(!1);const e=document.getElementById(`${t}`);null==e||e.pause()}},["video/mp4","video/webm","video/ogg"].includes(null==(r=P.filter((e=>e.index===t))[0])?void 0:r.type)?n.createElement(n.Fragment,null,n.createElement("video",{id:`${t}`,src:null==(o=P.filter((e=>e.index===t))[0])?void 0:o.src,width:"100%",height:"100%",style:{width:"100%",height:"100%",objectFit:"contain"}}),!D&&t===E&&n.createElement(oe.Z,{className:re.videoPlay,onClick:()=>{const e=document.getElementById(`${t}`);R(!0),null==e||e.play()}})):n.createElement("img",{width:"100%",height:"100%",src:be}),D&&t===E&&n.createElement(ae.Z,{className:re.videoPlay,onClick:()=>{const e=document.getElementById(`${t}`);R(!1),null==e||e.pause()}})),e.type.startsWith("audio")&&n.createElement("div",{className:re.audioContent},n.createElement("img",{className:re.audioCover,src:ce.r}),n.createElement("audio",{src:null==(a=P.filter((e=>e.index===t))[0])?void 0:a.src,controls:!0,className:re.audio})),e.type.startsWith("image")&&n.createElement("img",{src:null==(i=P.filter((e=>e.index===t))[0])?void 0:i.src,className:re.video}),I.includes(t)&&n.createElement("div",{className:re.mask},n.createElement(ie.Z,{className:re.completeIcon})))}))),n.createElement("div",{className:re.centerAndRight},n.createElement("div",{className:re.center},100!==N[E]?n.createElement(G.Z,{percent:N[E],status:"active",className:re.tip}):n.createElement(n.Fragment,null,k[E].type.startsWith("video")&&n.createElement("video",{className:re.previewVideo,controls:!0,src:null==(r=B.filter((e=>e.index===E))[0])?void 0:r.src}),k[E].type.startsWith("audio")&&n.createElement("div",{className:re.previewAudioWrapper},n.createElement("img",{src:ce.r,className:re.previewAudioCover}),n.createElement("audio",{className:re.previewAudio,controls:!0,src:null==(o=B.filter((e=>e.index===E))[0])?void 0:o.src})),k[E].type.startsWith("image")&&n.createElement("img",{className:re.previewImage,src:null==(a=B.filter((e=>e.index===E))[0])?void 0:a.src}),n.createElement("div",{className:re.info},n.createElement("span",null,"名称：",null==(c=null==(l=B.filter((e=>e.index===E))[0])?void 0:l.file)?void 0:c.name),n.createElement("span",null,"大小：",((null!=(u=null==(p=null==(s=B.filter((e=>e.index===E))[0])?void 0:s.file)?void 0:p.size)?u:0)/1048576).toFixed(2),"MB"),!k[E].type.startsWith("image")&&n.createElement("span",null,"时长：",Number(null==(d=B.filter((e=>e.index===E))[0])?void 0:d.duration).toFixed(2),"s"),k[E].type.startsWith("video")&&n.createElement("span",null,"尺寸：",null==(f=B.filter((e=>e.index===E))[0])?void 0:f.width," *",null==(m=B.filter((e=>e.index===E))[0])?void 0:m.height),k[E].type.startsWith("image")&&n.createElement("span",null,"格式：",null==(y=B.filter((e=>e.index===E))[0])?void 0:y.type)))),n.createElement("div",{className:re.right},n.createElement("h2",null,"压缩质量"),n.createElement(q.ZP.Group,{disabled:-1===B.findIndex((e=>e.index===E))||I.includes(E),onChange:e=>{var t;je(E,k[E],e.target.value,null==(t=S.filter((e=>e.index===E))[0])?void 0:t.type,T,z,B,Z,N,V)},defaultValue:8,value:null!=(h=null==(b=T.filter((e=>e.index===E))[0])?void 0:b.quality)?h:8},n.createElement(X.Z,{direction:"vertical"},n.createElement(q.ZP,{value:8},"高"),n.createElement(q.ZP,{value:6},"中"),n.createElement(q.ZP,{value:4},"低"))),k[E].type.startsWith("image")&&n.createElement(n.Fragment,null,n.createElement("h2",null,"图片格式"),n.createElement(q.ZP.Group,{disabled:-1===B.findIndex((e=>e.index===E))||I.includes(E),onChange:e=>{var t,r;const n=S,o=n.findIndex((e=>e.index===E));n[o].type=e.target.value,C(n),je(E,k[E],null!=(r=null==(t=T.filter((e=>e.index===E))[0])?void 0:t.quality)?r:8,e.target.value,T,z,B,Z,N,V)},defaultValue:"image/png"===k[E].type?"png":"jpeg",value:null!=(v=null==(g=S.filter((e=>e.index===E))[0])?void 0:g.type)?v:"jpeg"},n.createElement(X.Z,{direction:"vertical"},n.createElement(q.ZP,{value:"jpeg"},"jpeg格式"),n.createElement(q.ZP,{value:"png"},"png格式")))),n.createElement(ee.Z,{disabled:100!==N[E]||I.includes(E)||(null==(O=B.filter((e=>e.index===E))[0])?void 0:O.error),type:"primary",shape:"round",icon:n.createElement(le.Z,null),size:"middle",className:re.uploadBtn,onClick:()=>{return void 0,null,e=function*(){var e,t,r;const n=null==(e=B.filter((e=>e.index===E))[0])?void 0:e.type,o=null==(t=B.filter((e=>e.index===E))[0])?void 0:t.file.size;0===o?i.ZP.warning("文件错误"):"mp4"===n&&o>10485760?i.ZP.warning("视频大小不能超过10M"):"mp3"===n&&o>2097152?i.ZP.warning("音频大小不能超过2M"):["png","jpeg"].includes(n)&&o>1048576?i.ZP.warning("图片大小不能超过1M"):(A([...I,E]),_([...M,null==(r=B.filter((e=>e.index===E))[0])?void 0:r.file]))},new Promise(((t,r)=>{var n=t=>{try{a(e.next(t))}catch(e){r(e)}},o=t=>{try{a(e.throw(t))}catch(e){r(e)}},a=e=>e.done?t(e.value):Promise.resolve(e.value).then(n,o);a((e=e.apply(undefined,null)).next())}));var e}},"确定")))))},Me=r(22142),_e=r(22142),De=Object.defineProperty,Re=Object.getOwnPropertySymbols,Ne=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable,Be=(e,t,r)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ze=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const Te=(e,t,r)=>Ze(void 0,null,(function*(){var n;const o={};if(r||(r=(0,l.u4)(e)),"image/vnd.adobe.photoshop"===e.type){const t=(null==(n=e.name.split("/").pop())?void 0:n.split(".")[0])||"PSD",r=yield K().fromDroppedFile(e),o=yield A(r.tree());C(o),o.name=e.name;const a=new(u()),i=I(o,a.folder("images"),"images",(0,c.$k)(1e3)),l="psd.json";a.file(l,new File([JSON.stringify(i)],l,{type:"application/json"})),e=yield a.generateAsync({type:"blob"}).then((e=>new File([e],`${t}_psd.zip`,{type:"application/zip"})))}if("Lottie"===r&&(e=yield function(e){return t=this,r=function*(){var t;if("zip"===R(e.name)){const r=new(u()),n=yield u().loadAsync(e),o=Object.entries(n.files).filter((e=>!e[0].startsWith("__MACOSX/")&&!e[0].endsWith(".DS_Store")));for(const[e,a]of o){if(a.dir||"html"===R(e))continue;V(e);const o=yield null==(t=n.file(e))?void 0:t.async("blob");o&&r.file(e,o)}return yield r.generateAsync({type:"blob"}).then((t=>new File([t],e.name,{type:"application/zip"})))}return e},new Promise(((e,n)=>{var o=e=>{try{i(r.next(e))}catch(e){n(e)}},a=e=>{try{i(r.throw(e))}catch(e){n(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,a);i((r=r.apply(t,null)).next())}));var t,r}(e)),"Particle"===r&&(e=yield function(e){return t=this,r=function*(){var t;const r=R(e.name),n=new(u());if("plist"===r){const t=e.name,r=yield $(e);return n.file(t.slice(0,-5)+"particle",JSON.stringify(r)),new Promise(((t,r)=>{const n=new FileReader;n.onload=function(){t(n.result)},n.onerror=function(e){r(e)},n.readAsText(e)})).then((e=>(n.file(t,e),n.generateAsync({type:"blob"})))).then((t=>new File([t],e.name,{type:"application/zip"})))}if("zip"===r){const r=yield u().loadAsync(e),o=Object.entries(r.files).filter((e=>!e[0].startsWith("__MACOSX/")&&!e[0].endsWith(".DS_Store")));for(const[e,a]of o){if(a.dir||e.split("/").length>2)continue;V(e);const o=yield null==(t=r.file(e))?void 0:t.async("blob");if(o){if("plist"===R(e)){const t=yield $(o);n.file(e.slice(0,-5)+"particle",JSON.stringify(t))}n.file(e,o)}}if(0===Object.keys(n.files).length)throw new Error("zip包解析错误，暂不支持多层文件夹嵌套");return yield n.generateAsync({type:"blob"}).then((t=>new File([t],e.name,{type:"application/zip"})))}return e},new Promise(((e,n)=>{var o=e=>{try{i(r.next(e))}catch(e){n(e)}},a=e=>{try{i(r.throw(e))}catch(e){n(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,a);i((r=r.apply(t,null)).next())}));var t,r}(e)),"DragonBones"===r&&(e=yield function(e){return t=this,r=function*(){var t;if("zip"===R(e.name)){const r=new(u()),n=yield u().loadAsync(e),o=Object.entries(n.files).filter((e=>!e[0].startsWith("__MACOSX/")&&!e[0].endsWith(".DS_Store"))),a=o.find((e=>e[0].endsWith("_ske.json"))),i=a?a[0].slice(0,-9):"";for(const[e,a]of o){if(a.dir||e.split("/").length>2)continue;V(e);const o=yield null==(t=n.file(e))?void 0:t.async("blob"),l=R(e);o&&("json"===l&&e.endsWith("_tex.json")?r.file(i+"_tex.json",o):r.file(e,o))}if(0===Object.keys(r.files).length)throw new Error("zip包解析错误，暂不支持多层文件夹嵌套");return yield r.generateAsync({type:"blob"}).then((t=>new File([t],e.name,{type:"application/zip"})))}return e},new Promise(((e,n)=>{var o=e=>{try{i(r.next(e))}catch(e){n(e)}},a=e=>{try{i(r.throw(e))}catch(e){n(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,a);i((r=r.apply(t,null)).next())}));var t,r}(e)),"Spine"===r){e=yield function(e){return t=this,r=function*(){var t;if("zip"===R(e.name)){const r=new(u()),n=yield u().loadAsync(e),o=Object.entries(n.files).filter((e=>!e[0].startsWith("__MACOSX/")&&!e[0].endsWith(".DS_Store")));let a=0;const i=o.find((e=>e[0].endsWith(".json")||e[0].endsWith(".skel")?(a=5,!0):e[0].endsWith(".json.txt")||e[0].endsWith(".skel.txt")?(a=9,!0):void 0)),l=i?i[0].slice(0,-a):"";for(const[e,a]of o){if(a.dir||e.split("/").length>2)continue;V(e);const o=yield null==(t=n.file(e))?void 0:t.async("blob"),i=R(e);o&&("atlas"===i||"txt"===i&&"atlas"===e.slice(-9,-4)?r.file(l+".atlas",o):"txt"===i&&"json"===e.slice(-8,-4)?r.file(l+".json",o):"txt"===i&&"skel"===e.slice(-8,-4)?r.file(l+".skel",o):r.file(e,o))}if(0===Object.keys(r.files).length)throw new Error("zip包解析错误，暂不支持多层文件夹嵌套");return yield r.generateAsync({type:"blob"}).then((t=>new File([t],e.name,{type:"application/zip"})))}return e},new Promise(((e,n)=>{var o=e=>{try{i(r.next(e))}catch(e){n(e)}},a=e=>{try{i(r.throw(e))}catch(e){n(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,a);i((r=r.apply(t,null)).next())}));var t,r}(e);const t=yield function(e){return t=this,r=function*(){const t=yield u().loadAsync(e),r=Object.entries(t.files).filter((e=>!e[0].startsWith("__MACOSX/")&&!e[0].endsWith(".DS_Store"))).find((e=>e[0].endsWith(".json")||e[0].endsWith(".skel")));if(!r)throw new Error("资源中缺少主入口文件，请检查后重新上传");if(r[0].endsWith(".json")){const e=JSON.parse(yield r[1].async("text"));if(e.skeleton.spine.startsWith("3.7"))return 3.7;if(e.skeleton.spine.startsWith("3.8"))return 3.8;if(e.skeleton.spine.startsWith("4.0"))return 4}else{const e=yield r[1].async("blob"),t=yield function(e){return new Promise(((t,r)=>{const n=new FileReader;n.onload=e=>{var r;const n=null==(r=e.target)?void 0:r.result;n&&t(new Uint8Array(n))},n.onerror=e=>r(e),n.readAsArrayBuffer(e)}))}(e),n={3.8:M,4:_};for(const e in n)try{if(n[e](t))return Number(e)}catch(e){console.log(e)}}throw new Error("该Spine版本暂不支持")},new Promise(((e,n)=>{var o=e=>{try{i(r.next(e))}catch(e){n(e)}},a=e=>{try{i(r.throw(e))}catch(e){n(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,a);i((r=r.apply(t,null)).next())}));var t,r}(e);o.spineVersion=t}let a;if("Live2d"===r&&(e=yield function(e){return t=this,r=function*(){var t;if("zip"===R(e.name)){const r=new(u()),n=yield u().loadAsync(e),o=Object.entries(n.files).filter((e=>!e[0].startsWith("__MACOSX/")&&!e[0].endsWith(".DS_Store"))),a=o.filter((e=>e[0].endsWith(".model3.json")));if(0===a.length)throw new Error("缺少Live2D主入口文件，请修正后重新上传");if(a.length>1)throw new Error("存在多个Live2D主入口文件，请修正后重新上传");for(const[e,a]of o){if(a.dir)continue;V(e);const o=yield null==(t=n.file(e))?void 0:t.async("blob");o&&r.file(e,o)}return yield r.generateAsync({type:"blob"}).then((t=>new File([t],e.name,{type:"application/zip"})))}return e},new Promise(((e,n)=>{var o=e=>{try{i(r.next(e))}catch(e){n(e)}},a=e=>{try{i(r.throw(e))}catch(e){n(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,a);i((r=r.apply(t,null)).next())}));var t,r}(e)),"Font"===r){const t=yield(0,j.captureTTF)(URL.createObjectURL(e),e.name.split(".")[0]),{previewUrl:r}=yield(0,d.D5)(t,"cover.png");a=r}const{id:i,url:s}=yield(0,d.SN)(((e,t)=>{for(var r in t||(t={}))Ne.call(t,r)&&Be(e,r,t[r]);if(Re)for(var r of Re(t))Ve.call(t,r)&&Be(e,r,t[r]);return e})({file:e,type:l._g[r],cover:a,extra:JSON.stringify(o)},t));return{id:i,mime:r,name:e.name.split(".").slice(0,-1).join("."),url:s,cover:a,extra:o}}));function ze(e,t,r,n){return Ze(this,null,(function*(){var o;e.forEach((()=>{(0,c.r3)(c.GM.UploadResource,{type:"用户上传量"})}));const{uploadList:s,warningList:p,processList:u}=yield((e,t)=>Ee(void 0,null,(function*(){const r=[],n=[],o=[];if("NativeLoadingVideo"===t||"NativeVideo"===t||"VRVideo"===t)return{uploadList:e,processList:r,warningList:o};const a=(e,t,a)=>{["image","video","audio"].includes(e)?t.size>ue[e]?t.size>fe[e]?i.ZP.error(`${e}类型文件最大限制为${(0,c.td)(fe[e])}`):(r.push(t),o.push({name:t.name,reason:`文件超过${(0,c.td)(ue[e])}`})):we[e].includes(t.type)?a>2048?(r.push(t),o.push({name:t.name,reason:"图片尺寸超过了2048*2048"})):n.push(t):(r.push(t),o.push({name:t.name,reason:"文件格式需要转换"})):n.push(t)};for(let t=0;t<e.length;t++){const r=e[t],n=r.type.split("/")[0];if("image"===n){const{width:e,height:t}=yield(0,l.jL)(r);a(n,r,Math.max(e,t))}else a(n,r,0)}return{uploadList:n,warningList:o,processList:r}})))(e,r);if(0!==p.length){const e=yield new Promise(((e,t)=>{a.Z.confirm({centered:!0,title:u.length>15?`您有${u.length}个文件需要经过转换处理，单次处理不能超过15个文件，本次将为您处理前15张`:`您有${u.length}个文件需要经过转换处理`,icon:_e.createElement(v.Z,null),content:p.map(((e,t)=>_e.createElement("div",{key:t},_e.createElement("span",null,e.name,"(",e.reason,")"),_e.createElement("br",null)))),okText:"开始处理",cancelText:"放弃上传",onOk:()=>{(function({processList:e}){return new Promise((t=>{a.Z.confirm({centered:!0,maskClosable:!1,icon:null,visible:!0,width:"1100px",className:(0,H.iv)({"& .ant-modal-confirm-body > .anticon + .ant-modal-confirm-title + .ant-modal-confirm-content":{marginLeft:0},"& .ant-modal-confirm-btns":{display:"none"}}),bodyStyle:{padding:"10px 20px 20px 10px"},content:Me.createElement(Ae,{list:e,onFinish:e=>t(e)})})}))})({processList:u.length>15?u.splice(0,15):u}).then((t=>Ze(this,null,(function*(){e(t)}))))},onCancel:()=>{t(new Error(`已放弃${u.length}个文件上传`))}})}));s.push(...e)}let d=null!=(o=null==n?void 0:n(s))?o:yield(0,l.j7)((0,l.Le)((0,l.fA)(s,r),r),r);if("Spine"===r?d=yield N(d,0,".atlas"):"DragonBones"===r&&(d=yield N(d,0,"_ske.json")),d.length)return()=>Ze(this,null,(function*(){try{return yield Promise.all(d.map((e=>Te(e,t,r))))}catch(e){throw i.ZP.error(e.message),e}}))}))}var Le=Object.defineProperty,Ue=Object.defineProperties,Fe=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,$e=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable,We=(e,t,r)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Je=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const Ke=(0,n.memo)((e=>{var t=e,{beforeUpload:r}=t,o=((e,t)=>{var r={};for(var n in e)$e.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ye)for(var n of Ye(e))t.indexOf(n)<0&&Qe.call(e,n)&&(r[n]=e[n]);return r})(t,["beforeUpload"]);const a=(0,s.useProject)("id"),{readOnly:l}=(0,s.useEditor)(0,"readOnly");return n.createElement(He,(c=((e,t)=>{for(var r in t||(t={}))$e.call(t,r)&&We(e,r,t[r]);if(Ye)for(var r of Ye(t))Qe.call(t,r)&&We(e,r,t[r]);return e})({},o),Ue(c,Fe({projectId:a,beforeUpload:e=>l?(i.ZP.error("只读模式下无法上传资源"),()=>Promise.resolve(!1)):(null==r?void 0:r(e))||e}))));var c})),He=(0,n.memo)((({onAddResourceEntry:e,setUploading:t,beforeUpload:r,acceptFiles:a,uploading:i,category:c,children:s,className:p,dragger:u,accepts:d,projectId:f,multiple:m=!0})=>{const y=u?o.Z.Dragger:o.Z,b=(0,w.isNil)(d)?c?l.n$[c]:l.kv:d,h=(0,P.Z)(((r,n)=>Je(void 0,null,(function*(){if(n.indexOf(r)!==n.length-1)return!1;const o=yield ze(n,{projectId:f},c,a);return o&&(t(!0),o().then((t=>(t.forEach((()=>{(0,ke.r)(ke.G.UploadResource,{type:"上传成功量"})})),Promise.all(t.map(e))))).catch((e=>console.error(e))).finally((()=>{t(!1)}))),!1}))));return n.createElement(y,{multiple:m,disabled:i,showUploadList:!1,className:p,accept:b,beforeUpload:(e,t)=>Je(void 0,null,(function*(){return r?r(h)(e,t):h(e,t)}))},s)}));var Ge=r(10839),qe=r(42761),Xe=r(99305),et=r(80985);const tt=(0,H.iv)({gridColumnStart:1,gridColumnEnd:"span 2",height:"100%",padding:8}),rt=(0,n.memo)((()=>n.createElement(Ge.Z,{image:Ge.Z.PRESENTED_IMAGE_SIMPLE,description:"没有搜索结果",className:tt}))),nt=(0,n.memo)((()=>{const[e,t]=(0,n.useState)(!1),r=(0,s.useAddNode)(),o=(0,qe.I0)();return n.createElement("div",{className:tt},n.createElement(Ke,{onAddResourceEntry:r,setUploading:t,uploading:e,isTeam:!1,dragger:!0},n.createElement("p",{className:"ant-upload-drag-icon"},e?n.createElement(Xe.Z,null):n.createElement(et.Z,null)),n.createElement("p",{className:"ant-upload-text"},"点击或拖到此区域上传文件、打开",n.createElement(ee.Z,{type:"link",size:"large",disabled:e,onClick:e=>{e.stopPropagation(),o((0,s.changeCategory)("Sprite"))},style:{padding:2}},"资源面板"),"进行添加，或 ",(0,c.zO)("Cmd","Ctrl")," + V 从剪切板直接添加"),n.createElement("p",{className:"ant-upload-hint"},"支持图片、声音、视频、粒子(.plist)、Lottie(.json)")))}));var ot=r(2961),at=r(62255),it=r(26840),lt=r(16066),ct=r(26750),st=r(15252),pt=r(76151),ut=r(34394),dt=r(72299),ft=r(61645),mt=r(23256),yt=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const bt="https://api.figma.com";function ht(e){return yt(this,arguments,(function*({fileKey:e,ids:t,accessToken:r}){const{data:n}=yield ge().get(`${bt}/v1/images/${e}?`,{params:{ids:t},timeout:15e3,headers:{"X-Figma-Token":r}});return n}))}function gt(e,t,r,n,o){return a=this,null,i=function*(){var a,i;const{name:l,type:s,absoluteBoundingBox:p,opacity:u,characters:d,style:f,visible:m,fills:y,isMask:b,children:h}=t.dict[e];if(!1===m)return null;const g=function(e,t,r){return"FRAME"===e||"GROUP"===e&&(!r||t.startsWith("$$"))?"Container":"TEXT"===e?"Text":"Sprite"}(s,l,r),v={editor:{},id:(0,c.xv)(),type:g,props:{name:l.startsWith("$$")?l.slice(2):l,width:(null==p?void 0:p.width)||100,height:(null==p?void 0:p.height)||100,x:p?(null==p?void 0:p.x)-n.x:0,y:p?(null==p?void 0:p.y)-n.y:0,alpha:(null==u?void 0:u.toFixed(2))||1,anchorX:.5,anchorY:.5,rotation:0,scaleX:1,scaleY:1},nodes:[],scripts:[]};if("Sprite"===g&&v.props&&(v.props.url="",v.props._$figmaNodeId=e,o.push(v.props),b&&(v.props.asMask=!0)),"Text"===g&&v.props){const e=null==(a=null==y?void 0:y.find((e=>e.color)))?void 0:a.color;v.props.text=d||"",v.props.fontSize=(null==f?void 0:f.fontSize)||14,v.props.bold=((null==f?void 0:f.fontWeight)||400)>=700,v.props.align="JUSTIFIED"===(null==f?void 0:f.textAlignHorizontal)?"left":null==f?void 0:f.textAlignHorizontal.toLowerCase(),v.props.valign="CENTER"===(null==f?void 0:f.textAlignVertical)?"middle":null==f?void 0:f.textAlignVertical.toLowerCase(),v.props.color=e?(O=e,`rgba(${Math.floor(255*O.r)},${Math.floor(255*O.g)},${Math.floor(255*O.b)},${Math.floor(255*O.a)})`):"rgba(0,0,0,1)",v.props.wordWrap=!0}var O;if(h&&("GROUP"!==s||!r||l.startsWith("$$")))for(let e=0;e<h.length;e++){const n=yield gt(h[e],t,r,{x:(null==p?void 0:p.x)||0,y:(null==p?void 0:p.y)||0},o);n&&(null==(i=v.nodes)||i.push(n))}return v},new Promise(((e,t)=>{var r=e=>{try{o(i.next(e))}catch(e){t(e)}},n=e=>{try{o(i.throw(e))}catch(e){t(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,n);o((i=i.apply(a,null)).next())}));var a,i}var vt=Object.defineProperty,Ot=Object.defineProperties,kt=Object.getOwnPropertyDescriptors,xt=Object.getOwnPropertySymbols,Et=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable,Pt=(e,t,r)=>t in e?vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,jt=(e,t)=>{for(var r in t||(t={}))Et.call(t,r)&&Pt(e,r,t[r]);if(xt)for(var r of xt(t))wt.call(t,r)&&Pt(e,r,t[r]);return e},St=(e,t)=>Ot(e,kt(t));function Ct(e,t,r,n){return o=this,null,a=function*(){var o;const a=new(u()),i=[],c=r.dict[e].absoluteBoundingBox,s=yield gt(e,r,t,{x:(null==c?void 0:c.x)||0,y:(null==c?void 0:c.y)||0},i);if(i.length){const e=i.reduce(((e,t)=>(e[t._$figmaNodeId]=t.name,e)),{}),t=yield ht(St(jt({},n),{ids:i.map((e=>e._$figmaNodeId)).join(",")})),{images:r}=t,a={};for(const t in r)a[t]={type:l._g.Sprite,url:r[t],name:null!=(o=e[t])?o:void 0,distinct:!0};const c=yield(0,ft.OL)(a);for(const e of i){const t=e._$figmaNodeId;c[t]&&c[t].previewUrl&&(e.url=c[t].previewUrl,delete e._$figmaNodeId)}}const p="psd.json";return a.file(p,new File([JSON.stringify(s)],p,{type:"application/json"})),yield a.generateAsync({type:"blob"}).then((t=>new File([t],`${r.documentName}-${r.dict[e].name}_figma.zip`,{type:"application/zip"})))},new Promise(((e,t)=>{var r=e=>{try{i(a.next(e))}catch(e){t(e)}},n=e=>{try{i(a.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,n);i((a=a.apply(o,null)).next())}));var o,a}var It=r(34717),At=Object.defineProperty,Mt=Object.defineProperties,_t=Object.getOwnPropertyDescriptors,Dt=Object.getOwnPropertySymbols,Rt=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,Vt=(e,t,r)=>t in e?At(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Bt=(e,t)=>{for(var r in t||(t={}))Rt.call(t,r)&&Vt(e,r,t[r]);if(Dt)for(var r of Dt(t))Nt.call(t,r)&&Vt(e,r,t[r]);return e},Zt=(e,t)=>Mt(e,_t(t)),Tt=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const zt={inputTooltipTrigger:(0,H.iv)({lineHeight:"32px",color:"#999"}),byGroupTooltipTrigger:(0,H.iv)({marginLeft:"2px",color:"#999"}),tokenTips:(0,H.iv)({display:"inline-block",width:"8%",textAlign:"center"}),frameList:(0,H.iv)({height:400,overflow:"auto","&::-webkit-scrollbar-thumb":{backgroundColor:"#e8e8e8",borderRadius:"2px"},"&::-webkit-scrollbar":{width:"4px"}}),frameItem:(0,H.iv)({display:"inline-block",marginRight:"3%",marginBottom:"8px",width:"22%",cursor:"pointer","&:nth-child(4n+4)":{marginRight:0}}),frameContent:(0,H.iv)({position:"relative",paddingBottom:"100%",border:"1px solid #ebebeb",borderRadius:"4px","&:hover":{borderColor:"#3955f6"},"&[data-active=true]":{borderColor:"#3955f6"}}),framePoster:(0,H.iv)({position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain"}),checkbox:(0,H.iv)({position:"absolute",bottom:4,right:4,opacity:1}),frameName:(0,H.iv)({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",lineHeight:"28px"}),progressBar:(0,H.iv)({position:"absolute",left:0,right:0,bottom:0,padding:"4px 24px",backgroundColor:"#e5e9ff"}),progressMask:(0,H.iv)({position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.7)","& .ant-progress-text":{color:"#fff"}})},Lt=(0,mt.Yo)("editor.figmaToken",(e=>null!=e?e:""),(e=>null!=e?e:""),!0);function Ut({onHide:e,onFinish:t}){const[r]=ot.Z.useForm(),o=(0,s.useProject)("id"),c=(0,n.useMemo)((()=>(0,mt.Yo)(`editor.${o}.figmaUrl`,(e=>null!=e?e:""),(e=>null!=e?e:""),!0)),[o]),[p,u]=(0,n.useState)(!1),[f,m]=(0,n.useState)(!1),[y,b]=(0,n.useState)(null),[h,g]=(0,n.useState)([]),[v,O]=(0,n.useState)({}),[k,x]=(0,n.useState)(0),[E,P]=(0,n.useState)({}),[j,S]=(0,n.useState)(!0),C=(0,n.useRef)({url:c.getValue(),fileKey:"",accessToken:Lt.getValue()}),I=(0,n.useRef)({}),A=(0,n.useRef)(null),{run:M,cancel:_}=(0,It.Z)((()=>{P((e=>{const t=Bt({},e);for(const r in e)t[r]=Math.min(I.current[r],e[r]+1);return t}))}),500,!1),D=(0,n.useCallback)((()=>{e()}),[e]),R=(0,n.useCallback)((()=>{x((e=>e-1))}),[x]),N=(0,n.useCallback)((()=>{r.validateFields().then((e=>Tt(this,[e],(function*({url:e,accessToken:t}){u(!0);const r=e.match(/^(https:\/\/www.figma.com\/file\/)(\w*)\//);if(!r||3!==r.length)return Promise.reject(new Error("请输入正确的Figma项目地址"));C.current={url:e,fileKey:r[2],accessToken:t};try{const n=yield function(e){return yt(this,arguments,(function*({fileKey:e,accessToken:t}){try{const{data:r}=yield ge().get(`${bt}/v1/files/${e}`,{headers:{"X-Figma-Token":t}});return r}catch(e){const{status:t}=e.response;if(404===t)throw new Error("找不到该项目信息");if(403===t)throw new Error("非法用户Token");throw e}}))}({fileKey:r[2],accessToken:t});b(function(e,t){const r={root:t.id,documentName:e,dict:{}},n=(e,t)=>{(t.children||[]).forEach((t=>{n(e,t)})),e.dict[t.id]=St(jt({},t),{children:t.children?t.children.map((e=>e.id)):void 0})};return n(r,t),r}(n.name,n.document)),x((e=>e+1)),Lt.setValue(t),c.setValue(e)}catch(e){i.ZP.error(e.message),u(!1)}})))).catch((e=>{u(!1),e.message&&i.ZP.error(e.message)}))}),[r,c]),V=(0,n.useCallback)((()=>Tt(this,null,(function*(){if(!y)return;const e=Object.keys(v).filter((e=>v[e]));if(!e.length)return void i.ZP.error("请选择需要导入的Frame");m(!0);const r=[],n=[];P(e.reduce(((e,t)=>(e[t]=0,I.current[t]=0,e)),{})),M();for(const t of e){const e=h.find((e=>e.id===t)),a=null==e?void 0:e.cover,c=null==e?void 0:e.name;try{I.current[t]=40;const e=yield Ct(t,j,y,C.current);let i;P((e=>Zt(Bt({},e),{[t]:40})));let c=Promise.resolve({});a&&(c=(0,ft.OL)({cover:{url:a,type:l._g.Sprite}},!0)),I.current[t]=70;const s=c.then((r=>(i=r.cover.previewUrl,P((e=>Zt(Bt({},e),{[t]:70}))),I.current[t]=100,(0,d.SN)({file:e,type:l._g.PSD,cover:i,projectId:o})))).then((({id:n,url:o,cover:a})=>{r.push({id:n,url:o,cover:a,name:e.name.split(".")[0],extra:{},mime:"PSD"}),P((e=>Zt(Bt({},e),{[t]:100})))}));n.push(s)}catch(e){i.ZP.error(`${c}导入出错：${e.message}`),I.current[t]=0}}setTimeout(_,3e3),n.length>0?Promise.all(n).then((()=>{i.ZP.success("导入成功"),m(!1),t(r)})):(I.current={},P({}),m(!1))}))),[v,y,j,o,h,t,M,_]),B=(0,n.useMemo)((()=>[[n.createElement(ee.Z,{key:"cancel",onClick:D},"取消"),n.createElement(ee.Z,{key:"submit",type:"primary",loading:p,onClick:N},"获取项目信息")],[n.createElement(ee.Z,{key:"cancel",disabled:f,onClick:D},"取消"),n.createElement(ee.Z,{key:"prev",disabled:f,onClick:R},"上一步"),n.createElement(ee.Z,{key:"submit",type:"primary",loading:f,onClick:V},"确认")]]),[p,f,D,N,R,V]),Z=(0,n.useMemo)((()=>{const e=Object.values(v).filter((e=>e));return h.length>0&&e.length===h.length}),[h,v]);return(0,n.useEffect)((()=>{if(y){const{fileKey:e,accessToken:t}=C.current;let r=function(e,t=0,r=0){const n=(e,o)=>{let a=[];return e.forEach((e=>{var i,l;const c=o[e];"FRAME"===c.type&&c.absoluteBoundingBox&&((null==(i=c.absoluteBoundingBox)?void 0:i.width)>=t||(null==(l=c.absoluteBoundingBox)?void 0:l.height)>=r)&&a.push(jt({},c)),c.children&&(a=a.concat(n(c.children,o)))})),a},o=e.dict[e.root];return o.children?n(o.children,e.dict):[]}(y,500,500);if(r.length>20)return x((e=>e-1)),u(!1),void i.ZP.error("当前Figma项目Frame数量过多，请简化项目结构，保持项目不超过20个Frame");ht({fileKey:e,ids:r.map((e=>e.id)).join(","),accessToken:t}).then((e=>{const{images:t}=e;r=r.map((e=>{var r;return Zt(Bt({},e),{cover:null!=(r=t[e.id])?r:""})})),u(!1),g(r)})).catch((e=>{let t=e.message;"ECONNABORTED"===e.code&&(t="Figma响应超时，请简化Figma项目结构，减少Frame数量",x((e=>e-1))),u(!1),i.ZP.error(t)}))}}),[y]),n.createElement(a.Z,{title:"导入Figma项目",open:!0,footer:B[k],bodyStyle:{position:"relative"},onCancel:e},0===k&&n.createElement(ot.Z,{form:r,labelCol:{span:6},wrapperCol:{span:17},initialValues:C.current},n.createElement(ot.Z.Item,{label:"Figma项目地址"},n.createElement(ot.Z.Item,{noStyle:!0,name:"url",rules:[{required:!0,message:"请输入Figma项目地址"}]},n.createElement(at.Z,{ref:A,placeholder:"打开Figma项目，复制对应的访问地址",autoComplete:"off",onFocus:()=>{setTimeout((()=>{if(A&&A.current){const e=A.current.input;e.setSelectionRange(0,e.value.length)}}),150)}}))),n.createElement(ot.Z.Item,{label:"Figma用户Token"},n.createElement(ot.Z.Item,{noStyle:!0,name:"accessToken",rules:[{required:!0,message:"请输入Figma用户Token"}]},n.createElement(at.Z,{placeholder:"请输入",autoComplete:"off",style:{width:"92%"}})),n.createElement("div",{className:zt.tokenTips},n.createElement(it.Z,{title:n.createElement("div",null,n.createElement("div",null,"1、登录Figma账号"),n.createElement("div",null,"2、进入Account Settings"),n.createElement("div",null,"3、下滑找到Personal access tokens"),n.createElement("div",null,"4、添加Token并复制"))},n.createElement(dt.Z,{className:zt.inputTooltipTrigger}))))),1===k&&n.createElement(n.Fragment,null,n.createElement(lt.Z,{align:"middle",style:{marginBottom:"12px"}},n.createElement(ct.Z,{span:18},"请选择需要导入的Frame"),n.createElement(ct.Z,{span:4,style:{textAlign:"center"}},"按组导入",n.createElement(it.Z,{title:n.createElement("div",null,"是否将组内图层合并成一个节点"),overlayInnerStyle:{letterSpacing:"pre-line"}},n.createElement(dt.Z,{className:zt.byGroupTooltipTrigger}))),n.createElement(ct.Z,{span:2,style:{textAlign:"center"}},n.createElement(st.Z,{size:"small",checked:j,onChange:e=>S(e)}))),n.createElement(pt.Z,{size:"large",spinning:p},n.createElement("div",{className:zt.frameList},h.map((e=>{var t;return n.createElement("div",{key:e.id,className:zt.frameItem},n.createElement("div",{className:zt.frameContent,"data-active":null!=(t=v[e.id])&&t,onClick:()=>{f||O((t=>Zt(Bt({},t),{[e.id]:!t[e.id]})))}},n.createElement("img",{className:zt.framePoster,src:e.cover,crossOrigin:"anonymous"}),n.createElement(ut.Z,{className:zt.checkbox,checked:v[e.id],disabled:f}),!(0,w.isNil)(E[e.id])&&n.createElement("div",{className:zt.progressMask},n.createElement(G.Z,{type:"circle",percent:E[e.id],width:32}))),n.createElement("div",{className:zt.frameName},e.name))})))),!f&&n.createElement("div",{className:zt.progressBar},n.createElement(ut.Z,{checked:Z,onChange:()=>{const e={};for(const t of h)e[t.id]=!Z;O(e)}},Z?"取消":"","全选"))),n.createElement(ee.Z,{type:"link",style:{position:"absolute",left:"9px",bottom:"-42px"},icon:n.createElement(dt.Z,null),onClick:()=>window.open("https://bytedance.feishu.cn/docs/doccnFRhjF5iXbtCm95Dh1YULUf#")},"查看帮助文档"))}var Ft=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));function Yt(e){e.children.map((t=>{t.children&&Yt(t),t.top-=e.top,t.left-=e.left}))}function $t(e,t){var r;const n={editor:{},id:e.id,type:e.isGroup?"Container":e.texts?"Text":"Sprite",props:{name:e.name,width:e.width,height:e.height,x:e.left,y:e.top,alpha:parseFloat((e.opacity/255).toFixed(2)),anchorX:.5,anchorY:.5,rotation:0,scaleX:1,scaleY:1},nodes:[],scripts:[]};if("Sprite"===n.type&&n.props&&e.blob){const r=e.blob.type.split("/"),o=r[r.length-1];if(["png","jpg","jpeg"].includes(o)){const r=`${e.name}.${o}`;n.props._$imageFile=new File([e.blob],r),t.push(n.props)}}if("Text"===n.type&&e.texts&&n.props){const t=e.texts[0];n.props.text=t.text,n.props.fontSize=t.fontSize,n.props.leading=t.lineHeight,n.props.color=t.color}if(e.children)for(let o=0;o<e.children.length;o++)null==(r=n.nodes)||r.push($t(e.children[e.children.length-1-o],t));return n}const Qt=function(e,t=!1){return Ft(this,null,(function*(){const{layer:r}=e,n=e.name||"",o={name:n.startsWith("$$")?n.slice(2):n,width:e.width,height:e.height,top:e.top,left:e.left,id:(0,c.xv)(),opacity:r.opacity>=0?r.opacity:255,children:[]};if(e.isRoot()||e.isGroup()&&(!t||e.name.startsWith("$$"))){const r=e._children;if(r)for(let e=0;e<r.length;e++){const n=r[e];n.layer.visible&&o.children.push(yield Qt(n,t))}o.isGroup=!0}else r.image&&(yield function(e,t,r){return Ft(this,null,(function*(){if(0===t.width||0===t.height)return;const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const o=n.getContext("2d"),a=(e,t,r)=>new Promise((n=>{e.onload=function(){r.width&&r.height&&(null==o||o.drawImage(e,t.left,t.top,r.width,r.height)),n()},e.onerror=function(){n()}})),i=(e,t,r)=>{const n=t._children.reverse();if(n)for(const t of n)if(t.isGroup())i(e,t,r);else{const{top:n,left:o,width:i,height:l}=t;if(i&&l){const c=t.layer.image.toPng();e.push(a(c,{top:n-r.top,left:o-r.left},{width:i,height:l}))}}};return Promise.resolve().then((()=>{const n=[];if(r)i(n,e,{left:e.left,top:e.top});else try{if(e.width&&e.height){const r=e.layer.image.toPng();n.push(a(r,{top:0,left:0},{width:t.width,height:t.height}))}}catch(e){}return Promise.all(n)})).then((()=>new Promise((e=>{try{n.toBlob((function(r){t.blob=r,t.image=URL.createObjectURL(r),e()}))}catch(t){e()}}))))}))}(e,o,e.isGroup()));return o}))};function Wt({onHide:e,onFinish:t}){const[r]=ot.Z.useForm(),c=(0,s.useProject)("id"),[p,f]=(0,n.useState)(!1),m=(0,n.useCallback)((e=>Array.isArray(e)?e:e&&e.fileList),[]),y=(0,n.useCallback)((()=>{r.validateFields().then((e=>{return t=this,r=[e],n=function*({psdFiles:e,importByGroup:t}){var r;f(!0);const n=[];for(const o of e){const e=new(u()),a=[],i=o.originFileObj,s=(null==(r=i.name.split("/").pop())?void 0:r.split(".")[0])||"PSD",p=yield K().fromDroppedFile(i),f=yield Qt(p.tree(),t);Yt(f),f.name=i.name;const m=$t(f,a);for(let e=0;e<a.length;e+=3){const t=[];for(let r=0;r<3&&!(e+r>=a.length);r++){const n=a[e+r]._$imageFile;t.push((0,d.rB)({file:n,type:l._g.Sprite,cover:"",projectId:c,distinct:!0,fileName:n.name}))}const r=yield Promise.all(t);for(let n=0;n<t.length;n++)a[e+n].url=r[n].url,delete a[e+n]._$imageFile;if(t.length<3)break}const y="psd.json";e.file(y,new File([JSON.stringify(m)],y,{type:"application/json"}));const b=yield e.generateAsync({type:"blob"}).then((e=>new File([e],`${s}_psd.zip`,{type:"application/zip"})));n.push((0,d.rB)({file:b,type:l._g.PSD,cover:"",projectId:c,fileName:b.name}).then((({id:e,url:t,cover:r})=>({id:e,url:t,cover:r,name:`${s}_psd`,extra:{},mime:"PSD"}))))}return Promise.all(n)},new Promise(((e,o)=>{var a=e=>{try{l(n.next(e))}catch(e){o(e)}},i=e=>{try{l(n.throw(e))}catch(e){o(e)}},l=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,i);l((n=n.apply(t,r)).next())}));var t,r,n})).then((r=>{i.ZP.success("导入成功"),t(r),e()})).catch((e=>{f(!1),e.message&&i.ZP.error(e.message,5)}))}),[r,c,e,t]);return n.createElement(a.Z,{title:"导入PSD",open:!0,bodyStyle:{position:"relative"},okText:"确认",cancelText:"取消",okButtonProps:{disabled:p,loading:p},onCancel:e,onOk:y},n.createElement(ot.Z,{form:r,labelCol:{span:5},wrapperCol:{span:18},initialValues:{psd:null,importByGroup:!1}},n.createElement(ot.Z.Item,{label:"上传PSD"},n.createElement(ot.Z.Item,{noStyle:!0,name:"psdFiles",valuePropName:"fileList",getValueFromEvent:m,rules:[{required:!0,message:"请上传PSD文件"}]},n.createElement(o.Z,{showUploadList:!0,accept:"image/vnd.adobe.photoshop",beforeUpload:()=>!1},n.createElement(ee.Z,{icon:n.createElement(le.Z,null)},"选择文件")))),n.createElement(ot.Z.Item,{label:n.createElement(it.Z,{title:n.createElement("div",null,"是否将组内图层合并成一个节点，以$$为前缀命名的组可保持原有结构导入"),overlayInnerStyle:{letterSpacing:"pre-line"}},"是否按组导入")},n.createElement(ot.Z.Item,{noStyle:!0,name:"importByGroup",valuePropName:"checked"},n.createElement(st.Z,{size:"small",defaultChecked:!0})))),n.createElement(ee.Z,{type:"link",style:{position:"absolute",left:"9px",bottom:"-42px"},icon:n.createElement(dt.Z,null),onClick:()=>window.open("https://magicplay.oceanengine.com/tutorials/docs/import-psd")},"查看帮助文档"))}function Jt(e,t,r){return Math.min(r,Math.max(e,t))}function Kt(e,t){return(e%t+t)%t}function Ht(e,t,r,n){const{width:o,height:a,data:i}=e,l=2*r,c=o-1,s=a-1,p=new Array(4),u=new Array(4);return(e,a,d)=>{const f=Math.floor(e),m=Math.floor(a),y=f-r+1,b=m-r+1;for(let t=0;t<l;t++)p[t]=n(e-(y+t)),u[t]=n(a-(b+t));for(let e=0;e<3;e++){let r=0;for(let t=0;t<l;t++){const n=Jt(b+t,0,s);let a=0;for(let t=0;t<l;t++){const r=(h=Jt(y+t,0,c),4*(n*o+h));a+=i[r+e]*p[t]}r+=a*u[t]}t.data[d+e]=Math.round(r)}var h}}const Gt={pz:(e,t,r)=>{e.x=-1,e.y=-t,e.z=-r},nz:(e,t,r)=>{e.x=1,e.y=t,e.z=-r},px:(e,t,r)=>{e.x=t,e.y=-1,e.z=-r},nx:(e,t,r)=>{e.x=-t,e.y=1,e.z=-r},py:(e,t,r)=>{e.x=-r,e.y=-t,e.z=1},ny:(e,t,r)=>{e.x=r,e.y=-t,e.z=-1}};var qt=function({data:e,face:t,rotation:r,interpolation:n,maxWidth:o=1024}){return new Promise(((a,i)=>{try{const i=Math.min(o,e.width/4),l=i,c={x:0,y:0,z:0},s=Gt[t],p=new ImageData(i,l),u="linear"===n?function(e,t){const{width:r,height:n,data:o}=e,a=(e,t)=>4*(t*r+e);return(e,i,l)=>{const c=Jt(Math.floor(e),0,r-1),s=Jt(Math.ceil(e),0,r-1),p=e-c,u=Jt(Math.floor(i),0,n-1),d=Jt(Math.ceil(i),0,n-1),f=i-u,m=a(c,u),y=a(s,u),b=a(c,d),h=a(s,d);for(let e=0;e<3;e++){const r=o[m+e]*(1-p)+o[y+e]*p,n=o[b+e]*(1-p)+o[h+e]*p;t.data[l+e]=Math.ceil(r*(1-f)+n*f)}}}(e,p):"cubic"===n?Ht(e,p,2,(e=>{const t=(e=Math.abs(e))*e,r=e*e*e;return e<=1?1.5*r-2.5*t+1:-.5*r- -2.5*t+-4*e- -2})):"lanczos"===n?Ht(e,p,5,(e=>{if(0===e)return 1;{const t=Math.PI*e;return 5*Math.sin(t)*Math.sin(t/5)/(t*t)}})):function(e,t){const{width:r,height:n,data:o}=e;return(e,a,i)=>{const l=(c=Jt(Math.round(e),0,r-1),4*(Jt(Math.round(a),0,n-1)*r+c));var c;for(let e=0;e<3;e++)t.data[i+e]=o[l+e]}}(e,p);for(let t=0;t<i;t++)for(let n=0;n<l;n++){const o=4*(n*i+t);p.data[o+3]=255,s(c,2*(t+.5)/i-1,2*(n+.5)/l-1);const a=Math.sqrt(c.x*c.x+c.y*c.y+c.z*c.z),d=Kt(Math.atan2(c.y,c.x)+r,2*Math.PI),f=Math.acos(c.z/a);u(e.width*d/Math.PI/2-.5,e.height*f/Math.PI-.5,o)}a(p)}catch(e){i(e)}}))},Xt=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const er=document.createElement("canvas"),tr=er.getContext("2d"),rr={jpg:"image/jpeg",png:"image/png"};function nr(e,t){return er.width=e.width,er.height=e.height,null==tr||tr.putImageData(e,0,0),new Promise(((e,r)=>{er.toBlob((t=>{t?e(t):r(new Error("canvas toBlob error"))}),rr[t],.92)}))}const or={px:{x:2,y:1},nx:{x:0,y:1},py:{x:1,y:0},ny:{x:1,y:2},pz:{x:1,y:1},nz:{x:3,y:1}};function ar(e){return new Promise(((t,r)=>Xt(this,null,(function*(){try{e||r("非法文件");const n=e.name.replaceAll(/[.png|.jpg|.jpeg]/g,""),o=new Image;o.setAttribute("crossOrigin",""),o.src=URL.createObjectURL(e),o.addEventListener("load",(()=>Xt(this,null,(function*(){const{width:e,height:r}=o;er.width=e,er.height=r,null==tr||tr.drawImage(o,0,0);const a=tr.getImageData(0,0,e,r),i=yield function(e){const t=[];for(const[r]of Object.entries(or))t.push(ir(e,r));return Promise.all(t)}(a),l=[];for(const e of i)l.push(nr(e,Or));const c=yield Promise.all(l);t(c.map(((e,t)=>new File([e],`${n}-${Object.keys(or)[t]}.${Or}`))))}))))}catch(e){throw e}}))))}function ir(e,t){return new Promise(((r,n)=>Xt(this,null,(function*(){try{const n={data:e,face:t,rotation:360*Math.PI/180,interpolation:"lanczos"},o=yield qt(Object.assign({},n,{interpolation:"linear"}));r(o)}catch(e){n(e)}}))))}const lr=e=>Xt(void 0,null,(function*(){return[...yield ar(e),e]}));var cr=r(50815),sr=r(3197),pr=Object.defineProperty,ur=Object.defineProperties,dr=Object.getOwnPropertyDescriptors,fr=Object.getOwnPropertySymbols,mr=Object.prototype.hasOwnProperty,yr=Object.prototype.propertyIsEnumerable,br=(e,t,r)=>t in e?pr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hr=(e,t)=>{for(var r in t||(t={}))mr.call(t,r)&&br(e,r,t[r]);if(fr)for(var r of fr(t))yr.call(t,r)&&br(e,r,t[r]);return e},gr=(e,t)=>ur(e,dr(t)),vr=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const Or="jpg",kr=e=>vr(void 0,null,(function*(){let t=[];if("string"!=typeof e[0])for(const r of e){const{downloadUrl:e}=yield(0,d.cT)(r);t.push((0,k.Hn)(e)+`?ext=${e.split(".").pop()}&width=1024`)}else t=e.map((e=>`${(0,k.Hn)(e)}?width=1024`));return t})),xr=()=>{const{dispatch:e}=(0,qe.oR)(),t=(0,s.useProject)("id");return r=>vr(void 0,null,(function*(){r.props.textureUrls=yield kr(r.props.textureUrls),r.props.cover=(0,k.GR)(r.props.textureUrls[0]);const{id:n,orderId:o}=yield(0,sr.aY)({projectId:t,name:r.props.name,sceneContent:JSON.stringify(r)}),a=gr(hr({},r),{id:n,orderId:o});return e((0,s.addCubeMap)(a)),a}))},Er=()=>{const{getState:e,dispatch:t}=(0,qe.oR)();return r=>vr(void 0,null,(function*(){const n=yield(0,cr.E)(yield(0,j.createAsset)(r.name,"Cubemap",r)),o=yield(a=n.files[n.entry],vr(void 0,null,(function*(){var e;if(null==(e=a.editor)?void 0:e.lightingData){const e=a.editor.lightingData.reflectionUrl;if("object"==typeof e){const[t,r]=Object.entries(e.files)[0],{data:n}=yield(0,ft.hM)({file:new File([r],t),name:t,onPlatform:!1,type:0});a.editor.lightingData.reflectionUrl=(0,k.Hn)(n.url)}}return a})));var a;o.props.textureUrls=yield Promise.all(o.props.textureUrls.map((e=>vr(this,null,(function*(){const{downloadUrl:t}=yield(0,d.cT)(new File([n.files[e]],e));return Promise.resolve((0,k.Hn)(t))})))));const i=gr(hr({},o),{name:r.name,cover:(0,k.GR)(o.props.textureUrls[0])}),{id:l,orderId:c}=yield(0,sr.aY)({projectId:e().project.id,name:r.name,sceneContent:JSON.stringify(i)}),p=gr(hr({},i),{id:l,orderId:c});return t((0,s.addCubeMap)(p)),{id:p.id,mime:"Skybox",name:r.name,url:p.orderId,cover:p.props.textureUrls[0]}}))},wr=()=>{const e=Er(),t=(()=>{const{dispatch:e}=(0,qe.oR)(),t=(0,s.useProject)("id");return(r,...n)=>vr(void 0,[r,...n],(function*(r,n={}){var o;let a=[];const i=null!=(o=n.name)?o:"贴图";r&&(a=yield kr(r));const l=yield(0,cr.E)(yield(0,j.createAsset)(i,"Cubemap",a)),c=hr(gr(hr({},l.files[l.entry]),{name:i,cover:r?(0,k.GR)(a[0]):""}),n),{id:p,orderId:u}=yield(0,sr.aY)({projectId:t,name:i,sceneContent:JSON.stringify(c)}),d=gr(hr({},c),{id:p,orderId:u});return e((0,s.addCubeMap)(d)),d}))})(),r=e=>vr(void 0,null,(function*(){const t=[["right","r","px"],["left","l","nx"],["up","u","py"],["down","d","ny"],["front","f","pz"],["back","b","nz"]].map((([e,t,r],n)=>[new RegExp(`(^|[^a-zA-Z\\d])(${e}|${t}|${r})([^a-zA-Z\\d]|$)`,"i"),n])),r=[["4","pz"],["5","nz"],["0","px"],["1","nx"],["2","py"],["3","ny"]],n=e.name;return(new(u())).loadAsync(e).then((e=>vr(this,null,(function*(){var o,a,i;const l=[];for(const[c,s]of Object.entries(e.files)){if(c.startsWith("__MACOSX"))continue;if(c.endsWith(".DS_Store"))continue;if(s.dir)continue;const e=null!=(i=null==(a=null==(o=s.name)?void 0:o.split("/").pop())?void 0:a.split(".").shift())?i:"noneName",p=r.findIndex((t=>t.includes(e))),u=t.find((([e])=>null!==e.exec(s.name))),d=yield s.async("blob");-1!==p?l[p]=new File([d],e):u&&(l[u[1]]=new File([d],e)),void 0===l[6]&&(l[6]=new File([d],n))}return l}))))}));return n=>vr(void 0,null,(function*(){const o=(0,l.fA)(n,"Cubemaps"),a=[],i=[],c=[];o.forEach((e=>{var t,r;["png","jpeg","jpg"].includes(null!=(r=null==(t=e.name)?void 0:t.split(".").pop())?r:"")&&i.push(e),e.name.endsWith(".hdr")&&c.push(e),e.name.endsWith(".zip")&&a.push(e)}));const s=yield(d=i,new Promise(((e,t)=>Xt(void 0,null,(function*(){try{const t=[];for(const e of d){const r=yield lr(e);t.push(r)}e(t)}catch(e){t(e)}}))))),p=yield Promise.all(a.map(r)),u=yield Promise.all(c.map(e));var d,f;return[...yield(f=s.concat(p),vr(void 0,null,(function*(){const e=[];for(const r of f){const n=r.pop(),o=n.name.substring(0,n.name.lastIndexOf(".")),a=yield t(r,hr({name:o},undefined));e.push({id:a.id,mime:"Skybox",name:o,url:a.orderId,cover:a.props.textureUrls[0]})}return e}))),...u]}))},Pr=(0,n.memo)((({onAddResourceEntry:e,setUploading:t,children:r,uploading:a,className:s})=>{const p=wr();return n.createElement(o.Z,{multiple:!0,disabled:a,showUploadList:!1,className:s,accept:l.n$.Cubemaps,beforeUpload:(r,n)=>vr(void 0,null,(function*(){if(n.indexOf(r)!==n.length-1)return!1;n.forEach((()=>{(0,c.r3)(c.GM.UploadResource,{type:"用户上传量"})})),t(!0);try{const t=yield p(n);for(const r of t)yield e(r)}catch(e){i.ZP.error(e.message)}return t(!1),!1}))},r)}));var jr=r(56683),Sr=r(43532),Cr=r(44190),Ir=Object.defineProperty,Ar=Object.defineProperties,Mr=Object.getOwnPropertyDescriptors,_r=Object.getOwnPropertySymbols,Dr=Object.prototype.hasOwnProperty,Rr=Object.prototype.propertyIsEnumerable,Nr=(e,t,r)=>t in e?Ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Vr=(e,t)=>{for(var r in t||(t={}))Dr.call(t,r)&&Nr(e,r,t[r]);if(_r)for(var r of _r(t))Rr.call(t,r)&&Nr(e,r,t[r]);return e},Br=(e,t)=>Ar(e,Mr(t)),Zr=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const Tr=["obj","fbx","gltf","glb"],zr=()=>{const e=(0,s.useProject)("id"),{dispatch:t,getState:r}=(0,qe.oR)();return n=>Zr(void 0,null,(function*(){const o=r().project.scenes.find((e=>e.orderId===n));if(!o)return;const{previewUrl:a}=yield(0,d.D5)(yield(0,j.captureNode3DData)(n),`${n}`);t((0,s.changeEditor)(o.id,{cover:a})),yield(0,sr.aq)({sceneContent:JSON.stringify((0,c.GV)(Br(Vr({},o),{editor:Br(Vr({},o.editor),{cover:a})}))),name:o.name||"PanoramaSpaceNode",id:o.sceneId,projectId:e})}))},Lr=()=>{const e=(0,s.useProject)("id"),{propsMode:t}=(0,s.useProject)("editor"),r=(0,Sr.Z)(),o=zr(),{dispatch:a,getState:i}=(0,qe.oR)(),l=(0,n.useRef)(null),p=(0,n.useRef)("Model"),f=t=>Zr(void 0,null,(function*(){if(null===l.current)throw new Error("上传模型失败：原始文件丢失");const{id:r,url:n}=yield(0,d.SN)({file:t,type:27,projectId:e,name:p.current,multiAnimationLayers:(0,Cr.X)(i().project)});return{id:r,url:n}})),m=(n,l)=>Zr(void 0,null,(function*(){const{data:u}=yield ge().get(l),{orderId:d,id:f}=yield(0,sr.aY)({name:p.current,projectId:e,sceneContent:JSON.stringify(u)});r("Model","project","未分类",{id:n,name:p.current,previewUrl:l}),a((0,s.addComponent)((0,c.m7)(Br(Vr({},u),{id:f,sceneId:f,orderId:d,parentId:l}))));const m=yield(0,jr.Z)(i().project);return a((0,s.restoreState)(Br(Vr({},m),{scenes:m.scenes.map((e=>"Scene"===e.type&&"Product"===t?(0,c.G)(e):e))}))),yield o(d),d})),y=e=>Zr(void 0,null,(function*(){var t,r,n;if(Tr.includes(null!=(n=null==(r=null==(t=e.name)?void 0:t.split("."))?void 0:r.pop())?n:"")){l.current=e;const{id:t,url:r}=yield f(e);return yield m(t,r)}throw new Error("文件无效")})),b=e=>Zr(void 0,null,(function*(){l.current=e;const t=new(u()),r=yield t.loadAsync(e).then((e=>Zr(this,null,(function*(){var t,r;const n={};for(const[o,a]of Object.entries(e.files)){if(o.startsWith("__MACOSX"))continue;if(o.endsWith(".DS_Store"))continue;if(a.dir)continue;const e=null!=(r=null==(t=a.name)?void 0:t.split("/").pop())?r:"noneName",i=yield a.async("blob");n[o]=new File([i],e)}return n}))));if(Object.keys(r).some((e=>{var t,r;return Tr.includes(null!=(r=null==(t=e.split("."))?void 0:t.pop())?r:"")}))){const{id:t,url:r}=yield f(e);return yield m(t,r)}throw new Error("zip 文件无效")}));return e=>Zr(void 0,null,(function*(){for(const t of e)return t.name.endsWith(".zip")?yield b(t):yield y(t)}))},Ur=(0,n.memo)((({setUploading:e,children:t,uploading:r,className:a})=>{const c=Lr();return n.createElement(o.Z,{multiple:!0,disabled:r,showUploadList:!1,className:a,accept:l.n$.Model,beforeUpload:(t,r)=>Zr(void 0,null,(function*(){if(r.indexOf(t)!==r.length-1)return!1;try{e(!0),yield c(r)}catch(e){i.ZP.error(e.message)}finally{return e(!1),!1}}))},t)}))},86128:function(e,t,r){"use strict";r.d(t,{z:function(){return k}});var n=r(61645),o=r(22142),a=r(76637),i=r(51514),l=r(62226),c=r(99674),s=r(47914),p=r(73760),u=Object.defineProperty,d=Object.defineProperties,f=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))y.call(t,r)&&h(e,r,t[r]);if(m)for(var r of m(t))b.call(t,r)&&h(e,r,t[r]);return e},v=(e,t)=>d(e,f(t)),O=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const k=[a.KD.Particle2D,a.KD.ImageSequence,a.KD.Live2d,a.KD.Lottie,a.KD.DragonBones,a.KD.Spine];t.Z=()=>{const[e,t]=(0,o.useState)({loading:void 0,searchKey:""}),{userInfo:{teamId:r}}=(0,i.Pc)();return{state:e,request:e=>O(void 0,null,(function*(){console.log("params:",e),t((t=>v(g({},t),{loading:e.type})));try{return e.sidebarType===a.tI.Store?yield(e=>O(void 0,null,(function*(){const t=yield(0,c._h)(v(g({},(0,p.pick)(e,["keyword","type","page","pageSize"])),{category:e.categoryId,status:s.F6.shelve}));return{data:t.data.map((e=>v(g({},e),{id:`${e.id}`,name:e.name,url:e.url,extra:e.extra}))),pagination:{page:e.page,pageSize:e.pageSize,total:t.total}}})))(e):yield(e=>O(void 0,null,(function*(){const t=yield(0,n.xP)(v(g({teamId:r},e),{types:e.type===a.KD.Effect?k.join(","):e.type}));return{data:t.materialList.map((t=>v(g({},t),{id:`${t.id}`,name:t.name,url:t.url,extra:t.extra,cover:e.type===a.KD.Image?t.previewUrl:t.cover}))),pagination:t.pagination}})))(e)}catch(e){throw e}finally{t((e=>v(g({},e),{loading:void 0})))}})),addViewCountMaterial:e=>O(void 0,null,(function*(){yield(0,c.dM)(e)})),addUsedCountMaterial:e=>O(void 0,null,(function*(){yield(0,c.U8)(e)})),getProjectMaterials:e=>O(void 0,null,(function*(){return{data:(yield(0,n.xP)({projectId:e,status:"2",page:1,pageSize:999})).materialList.map((e=>v(g({},e),{id:`${e.id}`})))}})),getTeamCategories:()=>O(void 0,null,(function*(){const{categories:e}=yield(0,l.Jm)();return e.map((e=>({id:e.id,name:e.name})))}))}}},76637:function(e,t,r){"use strict";var n,o,a,i,l,c,s,p,u,d,f;r.d(t,{KD:function(){return s},Ro:function(){return a},d2:function(){return d},tI:function(){return n}}),(o=n||(n={}))[o.Store=100]="Store",o[o.Team=101]="Team",o[o.AI=102]="AI",(i=a||(a={}))[i.D2=0]="D2",i[i.D3=1]="D3",(c=l||(l={}))[c.Info=0]="Info",c[c.Error=1]="Error",(p=s||(s={}))[p.Component2D=4]="Component2D",p[p.Image=5]="Image",p[p.Video=6]="Video",p[p.Audio=8]="Audio",p[p.Effect=99]="Effect",p[p.Particle2D=13]="Particle2D",p[p.Lottie=12]="Lottie",p[p.DragonBones=23]="DragonBones",p[p.ImageSequence=18]="ImageSequence",p[p.Spine=24]="Spine",p[p.Live2d=30]="Live2d",p[p.Text=29]="Text",p[p.Shape=7]="Shape",p[p.Component3D=32]="Component3D",p[p.Model=27]="Model",p[p.Particle=14]="Particle",p[p.Cubemap=31]="Cubemap",u||(u={}),(f=d||(d={}))[f.rest=0]="rest",f[f.handing=1]="handing",f[f.finish=2]="finish"},76463:function(e,t,r){"use strict";r.d(t,{G:function(){return P},B:function(){return O}});var n=r(48837),o=r(19104),a=r(40985),i=r(42761),l=r(23247),c=r.n(l),s=r(7910),p=r(44190),u=Object.defineProperty,d=Object.defineProperties,f=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))y.call(t,r)&&h(e,r,t[r]);if(m)for(var r of m(t))b.call(t,r)&&h(e,r,t[r]);return e},v=(e,t)=>d(e,f(t));const O=()=>{const{getState:e,dispatch:t}=(0,i.oR)();return{replaceCarModelInProduct:(r,i,...l)=>{return void 0,u=[r,i,...l],d=function*(r,i,l={}){var u,d,f,m;let y;if("string"==typeof i){const{data:e}=yield c().get((0,s.GR)(i));y=e}"number"==typeof i&&(y=(0,a._N)(e().project,i));const b=yield(0,n.createModelNode)("model",i,a.xv,"string"==typeof i?y:(0,a.GV)((0,a.G)(y),["store","type"])),h=e().project,O=h.scenes.find((e=>Object.keys(e.props).includes(`${r}`)));if(O&&b){const n=(0,a.GV)(O),c=(e,t)=>(null==e?void 0:e.find((e=>e.id===t)))||(null==e?void 0:e.map((e=>c(e.nodes,t))).filter((e=>e))[0]),s=c(n.nodes,r);if(s){const e=null==(u=b.scripts)?void 0:u.filter((e=>"Controller"===e.type));s.scripts=s.scripts.filter((e=>"Controller"!==e.type)),e&&e.forEach((e=>{e.props.enabled=!1,s.scripts.push(e)})),s.editor.layerAnimations=null==(d=b.editor)?void 0:d.layerAnimations}if(t((0,o.restoreState)(v(g({},h),{scenes:h.scenes.map((e=>e.id===n.id?(0,a.G)((0,a.m7)(n)):e))}))),t((0,o.changeProps)([r],g({url:i},l))),(0,p.X)(e().project)){const r=(0,a.zh)(e().project),n=r.props[r.id].sceneData||{};t((0,o.changeProps)([(0,a.zh)(e().project).id],{sceneData:v(g({},n),{carAnimations:null!=(m=null==(f=s.editor.layerAnimations)?void 0:f.map((e=>{var t;return null==(t=e[0])?void 0:t[0]})))?m:[]})}))}t((0,o.selectNode)([r]))}},new Promise(((e,t)=>{var r=e=>{try{o(d.next(e))}catch(e){t(e)}},n=e=>{try{o(d.throw(e))}catch(e){t(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,n);o((d=d.apply(undefined,u)).next())}));var u,d}}};var k=r(22142),x=r(76566),E=r(73073),w=r(1850);const P=()=>{const e=(0,k.useRef)(!1),{getState:t,dispatch:r}=(0,i.oR)(),n=(0,E.Be)(),{replaceCarModelInProduct:o}=O(),{onSelectScene:l}=(0,w.$)();return{initialModel3DState:()=>{return void 0,null,r=function*(){var r;if(!1===e.current){const{emptyCar:e,fileId:i}=(0,a.Qw)(),c=t().project.scenes.find((e=>2===e.orderId));let s;if(c&&l(c.id),i){const e=yield x.M4.get(Number(i));e&&(s=yield n(e.files))}if("1"===e)console.log("没有选择汽车模板");else if(s&&c){const[e]=null!=(r=Object.entries(c.props).find((([e,t])=>"Model"===t.type)))?r:[];e&&(yield o(Number(e),s))}}e.current=!0},new Promise(((e,t)=>{var n=e=>{try{a(r.next(e))}catch(e){t(e)}},o=e=>{try{a(r.throw(e))}catch(e){t(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);a((r=r.apply(undefined,null)).next())}));var r},delSearchUrl:()=>{let e=location.href;e=e.replace("emptyCar=1",""),e=e.replace("initialCar=1",""),e=e.replaceAll(/fileId=(.*?)&/g,""),window.history.replaceState({},"",e)}}}},44190:function(e,t,r){"use strict";r.d(t,{X:function(){return n}});const n=e=>e.editor.prevState?n(e.editor.prevState):4===e.settings.category},56002:function(e,t,r){"use strict";r.d(t,{j$:function(){return n},kc:function(){return o},wG:function(){return a}});const n="https://creativelab-proxy.bytedance.com/api/upload/bucket/material/2c7b0c1225eba79ab00b3bfed388c115.png",o="https://creativelab-proxy.bytedance.com/api/upload/bucket/material/2c36f5fb678dc0d3ce37b11ddfe184af.png",a=[{mime:"Animation3D",name:"礼品",props:{position:[0,0,-5]},url:"https://creativelab-proxy.bytedance.com/api/upload/bucket/material/preview/516c43c730a5e8aab9d4cfd4289cff7c/data.json"},{mime:"Animation3D",name:"礼品引导",props:{position:[-1,-2,-5]},url:"https://creativelab-proxy.bytedance.com/api/upload/bucket/material/preview/c09cb348d42cc709b4e3f14fadac003c/data.json"}]},22669:function(e,t,r){"use strict";r.d(t,{LX:function(){return ae},kS:function(){return T},tA:function(){return oe},PL:function(){return ne},KW:function(){return ie},qw:function(){return Z},an:function(){return B},Bk:function(){return z},EV:function(){return L},PF:function(){return re},Yj:function(){return $}});var n=r(61645),o=r(3197),a=r(19104),i=r(42761),l=r(76566),c=r(48837),s=r(49405),p=r(50815),u=r(23247),d=r.n(u),f=r(22142),m=r(40985),y=r(61754),b=r(32078),h=r(71092),g=r(98466),v=r(56002),O=r(7910),k=r(73073),x=r(93422),E=r(50585),w=r(73760),P=Object.defineProperty,j=Object.defineProperties,S=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,M=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_=(e,t)=>{for(var r in t||(t={}))I.call(t,r)&&M(e,r,t[r]);if(C)for(var r of C(t))A.call(t,r)&&M(e,r,t[r]);return e},D=(e,t)=>j(e,S(t)),R=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const N=(e,t)=>D(_({},e),{editor:D(_({},e.editor),{prevState:e.editor.prevState?N(e.editor.prevState,t):void 0}),scenes:e.scenes.find((e=>e.sceneId===t.sceneId))?e.scenes.map((e=>e.sceneId===t.sceneId?t:e)):[...e.scenes,t]}),V=(e,t)=>{var r,n;return e.editor.prevState?D(_({},e),{editor:D(_({},e.editor),{prevState:V(e.editor.prevState,t)}),panoramaDataList:null==(n=e.panoramaDataList)?void 0:n.map((e=>{var r;return null!=(r=t.find((t=>t.id===e.id)))?r:e}))}):D(_({},e),{panoramaDataList:null==(r=e.panoramaDataList)?void 0:r.map((e=>{var r;return null!=(r=t.find((t=>t.id===e.id)))?r:e}))})},B=()=>{const{getState:e}=(0,i.oR)(),{panoramaSpaceId:t,panoramas:r}=(0,i.v9)((({project:{editor:{panoramaEdit:{panoramaSpaceId:e,panoramaDataOrderId:t}},panoramaDataList:r}})=>{var n,o;return{panoramaSpaceId:e,panoramas:null!=(o=null==(n=null==r?void 0:r.find((e=>e.orderId===t)))?void 0:n.panoramas)?o:[]}}),i.wU);return()=>R(void 0,null,(function*(){yield Promise.all((0,m.HE)(e().project).map((t=>(0,o.aq)({sceneContent:JSON.stringify(t),name:t.name||"PanoramaData",id:t.id,projectId:e().project.id}))));const n=(n=>{const o=(0,l.kv)(e().project,t);return r.some((e=>e.id===o.startPanoramaId))?n:(0,l.Ve)(e().project,t,D(_({},o),{startPanoramaId:void 0}))})(e().project);return V(n,(0,m.HE)(n))}))},Z=()=>(e,t)=>(t.forEach((t=>{e=N(e,t)})),e),T=()=>{const{getState:e}=(0,i.oR)();return()=>R(void 0,null,(function*(){const{editor:{prevState:t},scenes:r,settings:n}=(0,m.q7)(e().project);return yield Promise.all(r.reduce(((e,r)=>{const o=D(_({},r),{editor:D(_({},r.editor),{store:n.store})});return t&&"Animation3D"===o.type&&e.push((0,E.E)(t,o)),e}),[]))}))},z=()=>{const{scene:e,projectId:t}=(0,i.v9)((({project:{id:e,editor:{panoramaEdit:{panoramaSpaceId:t},prevState:r}}})=>({scene:null==r?void 0:r.scenes.find((e=>e.props[t])),projectId:e})),i.wU);return()=>R(void 0,null,(function*(){e&&(yield(0,o.aq)({sceneContent:JSON.stringify((0,m.GV)(e)),name:e.name||"PanoramaSpaceNode",id:e.sceneId,projectId:t}))}))},L=()=>{const{getState:e,dispatch:t}=(0,i.oR)(),{trigger:r}=(0,h.Z)("SaveStatus"),n=(0,f.useRef)(),o=(0,a.useProject)("type"),c=(0,f.useRef)([]),s=(0,f.useRef)();return(0,f.useEffect)((()=>{"PanoramaData"===o&&(n.current=e().project);const t=e().project.scenes.find((e=>2===e.orderId));t&&(0,x.mK)(e().project.id,t,void 0)}),[o,e]),(0,f.useEffect)((()=>{const t=(0,x.Gq)((()=>!!(0,l.Yt)(e().project)&&0!==c.current.length));return()=>{t()}}),[e]),{onSaving:(0,f.useCallback)((()=>R(void 0,null,(function*(){try{const p=[],u=(0,x.aY)(e().project).customScripts;if("PanoramaData"===e().project.type&&n.current){const{scenes:d,panoramaDataList:f,materials:m}=n.current,{scenes:b,panoramaDataList:h,materials:g}=e().project,v=s.current;c.current.push(!0),r("保存中..."),o=e().project,(!(a=n.current)||a.name!==o.name||a.settings!==o.settings||(null==(i=a.editor.cover)?void 0:i.split("?orderId=")[1])!==(null==(l=o.editor.cover)?void 0:l.split("?orderId=")[1])||(0,w.zip)(o.scenes,a.scenes).some((([e,t])=>!t||t.orderId!==(null==e?void 0:e.orderId))))&&(yield(0,x.zL)(t,e().project,n.current)),JSON.stringify(f)!==JSON.stringify(h)&&h&&(yield Promise.all(h.map((t=>R(this,null,(function*(){try{yield(0,x.dM)(e().project.id,t,null==f?void 0:f.find((({id:e})=>e===t.id)))}catch(e){console.error(e),p.push(t.id+"")}return t})))))),d&&(yield Promise.all(b.map((t=>R(this,null,(function*(){try{return yield(0,x.mK)(e().project.id,t,d.find((({orderId:e})=>e===t.orderId))),t}catch(e){console.error(e),p.push(t.name)}})))))),yield Promise.all(g.map((t=>R(this,null,(function*(){try{return yield(0,x.cv)(e().project.id,t,m.find((({id:e})=>e===t.id))),t}catch(e){console.error(e),p.push(t.name)}}))))),yield Promise.all(u.map((t=>R(this,null,(function*(){try{return yield(0,x.p_)(e().project.id,t,null==v?void 0:v.find((({orderId:e})=>e===t.orderId))),t}catch(e){console.error(e),p.push(t.name)}}))))),0!==p.length&&y.ZP.error(`${p.reduce(((e,t)=>`${e}${t}、`),"")}保存失败`)}n.current=e().project,s.current=u,c.current.shift(),r("已自动保存至云端")}catch(e){c.current=[]}var o,a,i,l}))),[e,t,r])}};var U=r(14766),F=r.n(U),Y=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const $=()=>({uploadXingfuliAsset:e=>Y(void 0,null,(function*(){if(e.name.endsWith(".zip")){const t=new(F());if(yield t.loadAsync(e).then((t=>Y(this,null,(function*(){for(const[r,n]of Object.entries(t.files))if(!r.startsWith("__MACOSX")&&!r.endsWith(".DS_Store")&&!n.dir&&/.*source_interactioin.json/.exec(r)){const t=yield n.async("blob");e=new File([t],"xingfuli.json",{type:"application/json"})}})))),e.name.endsWith(".zip"))throw new Error("zip 包缺少 source_interactioin.json 文件")}const{url:t}=yield(0,g.SN)({file:e,type:0,name:e.name});return t}))});var Q=Object.defineProperty,W=Object.defineProperties,J=Object.getOwnPropertyDescriptors,K=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,q=(e,t,r)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,X=(e,t)=>{for(var r in t||(t={}))H.call(t,r)&&q(e,r,t[r]);if(K)for(var r of K(t))G.call(t,r)&&q(e,r,t[r]);return e},ee=(e,t)=>W(e,J(t)),te=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const re=()=>{const{trigger:e}=(0,h.Z)("editorSender"),{getState:t}=(0,i.oR)();return r=>{var n,o;const{panoramaEdit:a}=t().project.editor,i=null==(o=null==(n=(0,m.HE)(t().project).find((e=>e.orderId===a.panoramaDataOrderId)))?void 0:n.panoramas)?void 0:o.find((e=>e.id===a.panoramaId));e({type:c.ActionType.EditorState,state:"PanoramaMode",data:X({fixedCameraView:null==i?void 0:i.fixedCameraView,fixedCameraViewOnce:null==i?void 0:i.fixedCameraViewOnce,enabled:void 0!==a.type,cubemapUrl:null==i?void 0:i.cubemapUrl,rotation:null==i?void 0:i.rotation},r)})}},ne=()=>{const{canIntoPanorama:e,url:t,id:r}=(0,i.v9)((({project:e})=>{const{editor:t,props:r}=(0,m.zh)(e),{nodeIds:n}=(0,m.bN)(t.selected),o=r[n[0]];return{canIntoPanorama:"PanoramaSpace"===(null==o?void 0:o.type),url:Number(null==o?void 0:o.dataUrl),id:Number(n[0])}}),i.wU);return{canIntoPanorama:e,nodeComponentUrl:t,panoramaSpaceId:r}},oe=()=>{const{dispatch:e,getState:t}=(0,i.oR)(),[r,n]=(0,f.useState)(!1),o=re();return{loading:r,onEditPanorama:(0,f.useCallback)(((r,i,c)=>te(void 0,null,(function*(){const s=null!=c?c:t().project,{panoramaEdit:{mainSceneId:p}}=s.editor;let u=(0,m.q7)(s);u=ee(X({},u),{editor:ee(X({},u.editor),{contextMenu:void 0})}),(()=>{te(this,null,(function*(){var c,d,f,b,h,g,v;try{n(!0);const y=s.scenes.find((e=>"Scene"===e.type&&1===e.orderId)),O=null!=(c=s.scenes.find((e=>e.id===p)))?c:(0,l.y_)(t().project)?s.scenes.find((e=>"主场景"===e.name)):(0,m.zh)(s),k=(0,m.HE)(s),x=k.find((e=>e.orderId===r));if(!x)throw new Error;const E=null!=(f=null==(d=x.panoramas[0])?void 0:d.id)?f:0,w=x.panoramas.map((e=>(0,m.vk)(s,e.nodesComponentUrl))).filter((e=>void 0!==e)),P=null!=(b=x.panoramas.find((e=>{var t,r,n;return e.id===(null==(n=null==(r=null==(t=u.scenes.find((e=>e.id===u.editor.selectedSceneId)))?void 0:t.props)?void 0:r[i])?void 0:n.startPanoramaId)})))?b:(0,l.wJ)(x),j=(0,a.newCase)((y?[y]:[]).concat([O,...w]),"PanoramaData",u);j.name=s.name,j.extra=u.extra,j.editor.readOnly=u.editor.readOnly,j.editor.panoramaEdit=ee(X({},u.editor.panoramaEdit),{panoramaDataOrderId:null!=(h=x.orderId)?h:0,panoramaId:null!=(g=null==P?void 0:P.id)?g:E,panoramaSpaceId:i,mainSceneId:O.id,type:"panorama"}),P&&(j.editor.selectedSceneId=null==(v=(0,m.vk)(s,null==P?void 0:P.nodesComponentUrl))?void 0:v.id),j.settings.enabled3d=!0,j.settings=u.settings,j.panoramaDataList=k,j.materials=u.materials,j.id=u.id,e((0,a.restoreState)(j)),e((0,a.changeCategory)("")),o({enabled:!0})}catch(e){y.ZP.error("不能编辑全景,请上传全景文件"),console.error(e),n(!1)}}))})()}))),[t,e,o])}},ae=()=>{const{getState:e,dispatch:t}=(0,i.oR)(),{panoramaEdit:r}=(0,a.useProject)("editor"),n=re();return o=>{if(o&&r.panoramaId){const n=(0,l.Di)(e().project,r.panoramaId);n&&(t((0,a.changeEditor)(0,{selectedSceneId:null==n?void 0:n.id,panoramaEdit:ee(X({},r),{type:"panorama"})})),t((0,a.changeEditor)(n.id,{edit3d:!0,selected:{}})))}else{const n=e().project.scenes.find((e=>e.id===r.mainSceneId));n&&(t((0,a.changeEditor)(0,{selectedSceneId:n.id,panoramaEdit:ee(X({},r),{type:void 0})})),t((0,a.changeEditor)(n.id,{edit3d:!1,selected:{}})),t((0,a.changeCategory)("")))}n()}},ie=()=>{const e=(0,a.useAddNode)(),t=(0,a.useAddNodeWith3D)(),{onEditPanorama:r}=oe(),{dispatch:u,getState:y}=(0,i.oR)(),{onChange:h}=(0,a.useEditor)(0,"loading"),x=(0,k.Eu)(),{projectId:E,projectName:w}=(0,i.v9)((({project:e})=>({projectId:null==e?void 0:e.id,projectName:e.name})),i.wU),P=(0,f.useRef)(!1),j=(e,t="全景图")=>te(void 0,null,(function*(){e.cover=(0,O.GR)(e.props.textureUrls[0]),e.name=t;const{id:r,orderId:n}=yield(0,o.aY)({projectId:E,name:t,sceneContent:JSON.stringify(e)});return ee(X({},e),{id:r,orderId:n})})),S=e=>te(void 0,null,(function*(){const{id:t,orderId:r}=yield(0,o.aY)({projectId:E,name:null!=w?w:"PanoramaData",sceneContent:JSON.stringify(e)});return e.id=t,e.orderId=r,u((0,a.addPanoramaViewer)(e)),r})),C=(e,t,r="panoramaNodeComponent")=>te(void 0,null,(function*(){let n=(0,a.newScene)(r,{loading:!1,type:"Animation3D",edit3d:!0,isOpen:!1});const{id:i,orderId:l}=yield(0,o.aY)({projectId:E,name:"Space",sceneContent:JSON.stringify(n)});return n=(0,m.oY)(n,i,l),n.props[n.id].spaceId=e,n.props[n.id].panoramaId=t,u((0,a.addComponent)(n)),l})),I=()=>te(void 0,null,(function*(){return yield l.wh()})),A=(e,t="全景图")=>te(void 0,null,(function*(){let r=0;const o={};e.forEach((e=>{o[r++]={type:s._g.Sprite,url:e}}));const i=yield(0,n.OL)(o),l=yield(0,p.E)(yield(0,c.createAsset)(t,"Cubemap",Object.values(i).map((e=>(0,O.Hn)(e.url)+`?ext=${e.url.split(".").pop()}&width=1024`)))),d=yield j(l.files[l.entry],t);return u((0,a.addCubeMap)(d)),d.orderId})),M=e=>te(void 0,null,(function*(){const t=yield d().get(e,{responseType:"blob"}),{url:r}=yield(0,g.SN)({file:new File([t.data],"幸福里模型.glb"),type:27,projectId:E,name:"未命名"}),{data:n}=yield d().get(r),{orderId:i,id:l}=yield(0,o.aY)({name:"未命名",projectId:E,sceneContent:JSON.stringify(n)});return u((0,a.addComponent)((0,m.m7)(ee(X({},n),{id:l,sceneId:l,orderId:i,parentId:r})))),i})),_=e=>te(void 0,null,(function*(){const t=yield(0,l.qg)(e,A,C,M);return t.forEach(l.Tx),yield Promise.all((yield t).map(S))})),D=e=>te(void 0,null,(function*(){return yield d().get(e)})),R=e=>te(void 0,null,(function*(){var t;let r=[];if(e&&(P.current=!1),!1===P.current)try{let o=0;const{assetType:i,imgId:c,emptyVR:s,initialVR:p}=(0,m.Qw)(),d=null!=e?e:window.localStorage.getItem(`vrhouse_${(0,m.Qw)().vrhouse}`);if("0"===i||"1"===i){const e=yield l.M4.get(Number(c));e&&(o=(yield x(e.files))[0].url)}if(d)r=yield(e=>te(void 0,null,(function*(){const{data:t}=yield D(e),r=yield _(t);return u((0,a.restoreState)(yield(0,l.E9)(y().project,r[0],v.wG))),r})))(d);else if(o||"1"===s){const e=yield(n={cubemapOrderId:o},te(void 0,[n],(function*({cubemapOrderId:e}){const t=(0,m.xv)(),r=yield I(),n=yield N(r.id,e);r.panoramaIds.push(n.id);const o={id:t,type:"PanoramaData",spaces:[r],modelUrl:"",totalSize:[1,1,1],panoramas:[n],landMarkUrl:"",plan:{viewerUrl:"",planUrl:""}};return yield S(o)})));r.push(e)}if("1"===s)yield V(r[0]);else if("1"===p&&(d||o)){const e=y().project.scenes.find((e=>"Scene"===e.type&&"主场景"===e.name));if(e){const n=null==(t=Object.entries(e.props).find((([,e])=>"PanoramaSpace"===e.type)))?void 0:t[0];u((0,a.changeEditor)(0,{selectedSceneId:e.id})),n&&u((0,a.changeProps)([Number(n)],{dataUrl:r[0],startPanoramaId:-1}))}}}catch(e){throw e}var n;return P.current=!0,r})),N=(e,t=0)=>te(void 0,null,(function*(){const r=yield l.Qv(e,C),n=yield C(e,r.id);return ee(X({},r),{nodesComponentUrl:n,cubemapUrl:t})})),V=(r="")=>te(void 0,null,(function*(){return yield t("PanoramaSpace",(()=>te(this,null,(function*(){return yield e({mime:"PanoramaSpace",name:"全景空间",url:r,edit3d:!0},!0)}))))}));return window.getStatecz=y,{initialPanoramaState:R,createPanorama:N,createSpace:I,createPanoramaSpaceNode:V,createCubemapResourceScene:j,createPanoramaHotSpot:()=>{t("PanoramaHotSpot",(()=>{e({mime:"PanoramaHotSpot",name:"热点",url:""},!0)}))},delSearchUrl:()=>{let e=location.href;e=e.replace("emptyVR=1",""),e=e.replace("initialVR=1",""),e=e.replaceAll(/imgId=(.*?)&/g,""),e=e.replaceAll(/assetType=(.*?)&/g,""),e=e.replaceAll(/vrhouse=(.*?)&/g,""),window.history.replaceState({},"",e),window.localStorage.removeItem(`vrhouse_${(0,m.Qw)().vrhouse}`)},initialGiftMode:()=>te(void 0,null,(function*(){var e,t;const r=y().project.scenes.find((e=>"主场景"===e.name)),n=null==(e=(0,m.GV)(r).nodes)?void 0:e.find((e=>"Scene3D"===e.type)),o=null==(t=null==n?void 0:n.nodes)?void 0:t.find((e=>"PanoramaSpace"===e.type));if(o){const e=yield R();0!==e.length&&u((0,a.changeProps)([o.id],{dataUrl:e[0],startPanoramaId:-1}))}})),autoEnterPanoramaEdit:e=>te(void 0,null,(function*(){const t=e?(0,l.mT)(y().project):(0,l.rT)(y().project);t&&r(t.props.dataUrl,t.id)})),replaceDataInPanoramaEdit:(e,t)=>te(void 0,null,(function*(){h(!0);let n=[];try{const{data:a}=yield D(e);n=yield _(a);const i=yield(0,l.E9)(y().project,n[0],v.wG),{panoramaEdit:{mainSceneId:c}}=i.editor,s=i.scenes.find((e=>e.id===c));if(!s||"Scene"!==s.type)throw new Error("无法获取 mainScene");s.props[t].dataUrl=n[0],yield(0,o.aq)({sceneContent:JSON.stringify((0,m.GV)(s)),name:s.name||"Scene",id:s.sceneId,projectId:i.id}),yield r(n[0],t,i)}catch(e){b.Z.error({title:"错误",content:`替换看房数据失败:${e.message}`}),console.error(e)}finally{h(!1)}return n}))}}},76566:function(e,t,r){"use strict";r.d(t,{Ve:function(){return _},Tx:function(){return R},Qv:function(){return P},wh:function(){return S},M4:function(){return z},wJ:function(){return M},Di:function(){return I},oU:function(){return A},mT:function(){return T},rT:function(){return Z},kv:function(){return D},E9:function(){return N},y_:function(){return V},Yt:function(){return B},qg:function(){return C}});var n=r(61645),o=r(7910),a=r(19104),i=r(49405),l=r(40985),c=r(23247),s=r.n(c),p=r(73760),u=r(56002),d=r(78134);class f extends d.Z{constructor(){super("VRUploadDatabase"),this.version(1).stores({VRUpload:"id, files"}),this.VRUpload=this.table("VRUpload")}}const m=new f;var y=Object.defineProperty,b=Object.defineProperties,h=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,k=(e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,x=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&k(e,r,t[r]);if(g)for(var r of g(t))O.call(t,r)&&k(e,r,t[r]);return e},E=(e,t)=>b(e,h(t)),w=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const P=(e,t)=>w(void 0,null,(function*(){const r=(0,l.xv)(),n={id:r,type:"Panorama",name:"未命名",pathways:[],position:[0,0,0],rotation:[0,0,0],cubemapUrl:0,groundPosition:[0,0,0]};return n.nodesComponentUrl=yield t(e,r),n})),j=(e=0)=>e/Math.PI*180,S=(e="区域")=>w(void 0,null,(function*(){return{id:(0,l.xv)(),name:e,panoramaIds:[],type:"Space"}})),C=(e,t,r,a)=>w(void 0,null,(function*(){var c,s,p,d,f,m,y,b,h,g,v,O,k,w,P,S,C,I,A,M,_;const D=[],R=null==(c=null==e?void 0:e.interactionData)?void 0:c.totalSize;for(let a=0;a<(null==(s=null==e?void 0:e.interactionData)?void 0:s.scenesData.length);a++){const c=null!=(p=e.interactionData.mapPathPrefix)?p:"",s=null!=(d=e.interactionData.mapPathSuffix)?d:"",N=null==(f=null==e?void 0:e.interactionData)?void 0:f.scenesData[a],V=(0,l.xv)(),B={id:V,type:"PanoramaData",spaces:[],modelUrl:"",totalSize:R?[R.x,R.y,R.z]:[0,0,0],panoramas:[],landMarkUrl:"",plan:{viewerUrl:"",planUrl:""}},Z={},T={};for(let e=0;e<(null==N?void 0:N.panoBoxes.length);e++){const n=null==N?void 0:N.panoBoxes[e];if(!n)continue;let o=null==(m=Z[n.space])?void 0:m.id;void 0===o&&(o=(0,l.xv)(),Z[n.space]={id:o,names:[]},B.spaces.push({id:o,name:n.spaceName,panoramaIds:[],type:"Space"}));const a=(0,l.xv)(),i=null!=(b=null==(y=Z[n.space].names)?void 0:y.filter((e=>e===n.name)))?b:[];T[n.id]=a;const p=n.name?`${n.name}${i.length+1}`:"未命名";B.panoramas.push({id:a,name:p,type:"Panorama",pathways:n.pathways,position:[null==(h=n.position)?void 0:h.x,null==(g=n.position)?void 0:g.y,null==(v=n.position)?void 0:v.z],rotation:[j(null==(O=n.rotation)?void 0:O.x),j(null==(k=n.rotation)?void 0:k.y),j(null==(w=n.rotation)?void 0:w.z)],groundPosition:[null==(P=n.groundPosition)?void 0:P.x,null==(S=n.groundPosition)?void 0:S.y,null==(C=n.groundPosition)?void 0:C.z],bestCameraView:n.bestCameraView,cubemapUrl:yield t(n.panoUrl.map((e=>`${c}${e}${s}`)),p),nodesComponentUrl:yield r(a,V,null!=(I=n.name)?I:"未命名")}),null==(A=Z[n.space].names)||A.push(n.name),null==(_=null==(M=B.spaces.find((e=>e.id===o)))?void 0:M.panoramaIds)||_.push(a)}if(B.panoramas.forEach((e=>{e.pathways=e.pathways.map((e=>T[e])).filter((e=>e))})),B.landMarkUrl=(0,o.Hn)(u.kc),B.plan.viewerUrl=(0,o.Hn)(u.j$),N.scenePlane){const e=yield(0,n.OL)({0:{type:i._g.Sprite,url:`${c}${N.scenePlane}${s}`}});B.plan=E(x({},B.plan),{planUrl:(0,o.Hn)(e[0].url)})}D.push(B)}return e.modelUrl&&(yield a(e.modelUrl)),D})),I=(e,t)=>{let r;return(0,l.HE)(e).forEach((n=>{var o;const a=null==(o=n.panoramas.find((e=>e.id===t)))?void 0:o.nodesComponentUrl;"number"==typeof a&&(r=(0,l.vk)(e,a))})),r},A=(e,t)=>{let r;return(0,l.HE)(e).forEach((e=>{e.spaces.forEach((n=>{n.id===t&&(r=e.panoramas.find((e=>e.id===n.panoramaIds[0])))}))})),r?(0,l.vk)(e,r.nodesComponentUrl):void 0},M=e=>{for(let t=0;t<e.spaces.length;t++){const r=e.spaces[t],n=e.panoramas.find((e=>r.panoramaIds.find((t=>t===e.id))));if(n)return n}},_=(e,t,r)=>{var n;const o=null==(n=e.editor.prevState)?void 0:n.scenes.find((t=>{var r;return t.id===(null==(r=e.editor.prevState)?void 0:r.editor.selectedSceneId)}));return o&&e.editor.prevState?E(x({},e),{editor:E(x({},e.editor),{prevState:E(x({},e.editor.prevState),{scenes:e.editor.prevState.scenes.map((e=>{if(o.id!==e.id)return e;const n=(0,p.cloneDeep)(e.props);return n[t]&&(n[t]=x(x({},n[t]),r)),E(x({},e),{props:n})}))})})}):e},D=(e,t)=>{const r=e.scenes.find((t=>t.id===e.editor.selectedSceneId)),n=null==r?void 0:r.props[t];return null!=n?n:e.editor.prevState?D(e.editor.prevState,t):void 0},R=e=>{if(0===e.panoramas.length)throw new Error("数据错误：缺少全景节点");const t=e.spaces.reduce(((e,t)=>[...e,...t.panoramaIds]),[]);for(let r=0;r<e.panoramas.length;r++){const n=e.panoramas[r].id;if(t.includes(n))return}throw new Error("数据错误：缺少全景节点")},N=(e,t,r)=>w(void 0,null,(function*(){var n,o,i;const c=null==(o=null==(n=e.panoramaDataList)?void 0:n.find((e=>e.orderId===t)))?void 0:o.panoramas[0].nodesComponentUrl;let p=e.scenes.find((e=>e.orderId===c));if(!p)return e;const u=yield Promise.all(r.map((e=>w(this,[e],(function*({mime:e,url:t,name:r,props:n}){var o,i,c,p;const u=yield(0,a.getNewNode)(e,r,t);if((0,l.W6)(u.type)&&u.props){const{data:e}=yield s().get(t);if(u.editor=E(x({},u.editor),{state:[{name:"默认状态",id:-1,duration:null==(o=e.props)?void 0:o.duration},...null!=(c=null==(i=e.editor)?void 0:i.state)?c:[]]}),!(null==(p=u.props.compProps)?void 0:p.length)){const{props:{[e.id]:{compProps:t}}}=(0,l.G)((0,l.m7)(e));u.props.compProps=t}}return E(x({},u),{props:x(x({},u.props),n)})}))))),d=(0,l.GV)(p);return d.nodes=[...null!=(i=null==d?void 0:d.nodes)?i:[],...u],p=(0,l.m7)(d),E(x({},e),{scenes:e.scenes.map((e=>e.orderId===c?p:e))})})),V=e=>e.editor.prevState?V(e.editor.prevState):2===e.settings.category,B=e=>V(e)&&"PanoramaData"===e.type,Z=e=>{var t,r,n,o;const a=e.scenes.find((e=>"主场景"===e.name));if(a)return null==(o=null==(n=null==(r=null==(t=(0,l.GV)(a))?void 0:t.nodes)?void 0:r.find((e=>"Scene3D"===e.type)))?void 0:n.nodes)?void 0:o.find((t=>{var r,n;return"PanoramaSpace"===t.type&&(null==(r=t.props)?void 0:r.dataUrl)&&(null==(n=e.panoramaDataList)?void 0:n.some((e=>{var r;return e.orderId===(null==(r=t.props)?void 0:r.dataUrl)})))}))},T=e=>{var t,r,n,o,a;const i=e.scenes.find((e=>"主场景"===e.name));if(i)return null==(a=null==(o=null==(n=null==(r=null==(t=(0,l.GV)(i))?void 0:t.nodes)?void 0:r.find((e=>"Scene3D"===e.type)))?void 0:n.nodes)?void 0:o.reverse())?void 0:a.find((t=>{var r,n;return"PanoramaSpace"===t.type&&(null==(r=t.props)?void 0:r.dataUrl)&&(null==(n=e.panoramaDataList)?void 0:n.some((e=>{var r;return e.orderId===(null==(r=t.props)?void 0:r.dataUrl)})))}))},z={set:(e,t)=>w(void 0,null,(function*(){try{m.transaction("rw",m.VRUpload,(()=>{m.VRUpload.toArray().then((r=>{r.length>20&&m.VRUpload.limit(1).delete(),m.VRUpload.add({id:e,files:t})}))}))}catch(e){console.log(e)}})),get:e=>w(void 0,null,(function*(){return yield m.VRUpload.where({id:e}).first()}))}},58584:function(e,t,r){"use strict";r(40985)},36954:function(e,t,r){"use strict";r.d(t,{tQ:function(){return s},zD:function(){return i},qM:function(){return V},M9:function(){return B},mg:function(){return N},Ns:function(){return u},ij:function(){return _},AT:function(){return j},he:function(){return v},VO:function(){return R},l$:function(){return Z},Ld:function(){return y},hS:function(){return A}});var n=r(19104),o=r(40985),a=r(7910);function*i({scenes:e}){var t;const r=l();for(const n of e)for(const[e,i]of Object.entries(n.props)){if("Script"===i.type&&(null==(t=i.enabled)||t)&&c(i.scripts)){const[{id:t,type:i}]=(0,o.qC)(n.nodes,Number(e),!0);"Sprite"===i&&"string"==typeof n.props[t].url&&(yield r((0,a.GR)(n.props[t].url)).then((e=>{if(e>.3)return(0,a.F3)("您在“",{text:n.name},"”中为“",{text:n.props[t].name},"”设置了下载APP事件。检测到该下载按钮实际点击区域与可视区域不一致，存在审核风险")})).catch((()=>(0,a.F3)("您在“",{text:n.name},"”中为“",{text:n.props[t].name},"”设置了下载APP事件，但无法检测按钮背景图的透明区域是否合规"))))}"Button"===i.type&&"string"==typeof i.url&&i.url&&(yield r((0,a.GR)(i.url)).then((e=>{if(e>.3)return(0,a.F3)("为保护用户体验，转化按钮",{text:i.name},"的背景图片透明区域不能多于30%")})))}}const l=()=>{const e=document.createElement("canvas"),t=e.getContext("2d");return e.height=100,e.width=100,e=>new Promise(((r,n)=>{const o=new Image;o.crossOrigin="anonymous",o.onload=()=>{var e;const{width:n,height:a}=o;null==t||t.clearRect(0,0,100,100),null==t||t.drawImage(o,0,0,n,a,0,0,100,100);const i=null!=(e=null==t?void 0:t.getImageData(0,0,100,100).data)?e:[];let l=0;for(let e=3;e<i.length;e+=4)i[e]<15&&l++;r(0!==i.length?4*l/i.length:0)},o.onerror=()=>{n(new Error(`图片加载失败，无法检验其透明度：${e}`))},o.src=e}))},c=(e=[],t="DownloadApp")=>e.reduce(((e,{props:{script:r,scripts:n,enabled:o=!0,elseScripts:a}})=>e||o&&(r===t||c(n,t)||c(a,t))),!1);function s({scenes:e}){var t,r;const n=[];for(const a of e.filter((({type:e})=>"Scene"===e)))for(const[e,i]of Object.entries(a.props))if("Script"===i.type&&(null==(t=i.enabled)||t)&&c(i.scripts,"DirectDownload")){const[{id:t}]=(0,o.qC)(a.nodes,Number(e),!0);n.push({id:t,name:null!=(r=i.name)?r:""})}return n}var p=r(47567);function u({scenes:e,settings:{typeOfPlay:t}}){if(4!==t)return;const r=e.find((({orderId:t})=>(0,p.v4)(t,e)===p.ZS.Unused));r&&(0,a.g_)({text:r.name},"视频场景未被使用");const n=e.filter((({orderId:t})=>(0,p.v4)(t,e)===p.ZS.Start));n.length?n.length>1&&(0,a.g_)("有且只有一个开始视频场景"):(0,a.g_)("没有开始视频场景"),(0,p.U3)(n[0].props)&&(0,a.g_)("开始视频不能为循环视频");for(const{props:t,name:r}of e)for(const{type:n,name:o,jumpSceneId:i}of Object.values(t))"PVVideo"!==n&&"number"==typeof i&&e.every((({orderId:e})=>e!==i))&&(0,a.g_)({text:r},"的",{text:o},"未正确设置跳转视频")}var d=r(98466),f=r(48837),m=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));function y(e,t){return m(this,arguments,(function*({scenes:e},t){const r=b();let n=0;for(const{props:i,nodes:l,type:c,name:s}of e){const e=new FormData;for(const[a,{type:c}]of Object.entries(i))if("Button"===c&&(n++,t)){const[t]=(0,o.Pe)((0,o.qC)(l,Number(a)).slice(0,1),i),n=yield r(yield(0,f.captureNodeData)(t));e.append("files[]",yield(0,d.Od)(n))}if(t&&Array.from(e.keys()).length){const{data:{data:r}}=yield d.dJ.post("material/predictImages",e);for(const{words:e}of r)e.some((({text:e})=>e.includes(t)))||(0,a.g_)(`为保护用户体验，请确保${"Scene"===c?"场景":"组件"}“`,{text:s},"”里下载按钮的“下载”字样足够明确")}}return n}))}const b=()=>{const e=document.createElement("canvas"),t=e.getContext("2d");return e.height=100,e.width=100,r=>new Promise(((n,o)=>{const a=new Image;a.crossOrigin="anonymous",a.onload=()=>{var r;const{width:o,height:i}=a;e.width=o,e.height=i,null==t||t.clearRect(0,0,o,i),null==t||t.drawImage(a,0,0,o,i,0,0,o,i);const l=null==t?void 0:t.getImageData(0,0,o,i);if(l){const e=null!=(r=l.data)?r:[];for(const t of function*(e,t,r){for(const r of h(e,3))for(const n of h(t,3)){const t=[];for(const o of r)for(const r of n)t.push(4*(o+e*r));yield t}}(o,i)){const r=[0,0,0];for(const n of t)for(let t=0;t<r.length;t++){let o=e[n+t];o-=o%32,r[t]+=o}const n=Math.floor(r.reduce(((e,t)=>e+t))/3/t.length);for(let o=0;o<r.length;o++)for(const r of t)e[r+o]=n}null==t||t.putImageData(l,0,0)}n(e.toDataURL("image/png"))},a.onerror=()=>{o(new Error(`图片加载失败，无法检验其透明度：${r}`))},a.src=r}))};function*h(e,t){for(let r=0;r<e;r+=t)yield Array.from(g(r,Math.min(r+t,e)))}function*g(e,t){for(;e<t;)yield e++}function*v({id:e,props:t,name:r,editor:n}){n.playable||Object.values(t).map((({type:e})=>Number("Video"===e))).reduce(((e,t)=>e+t),0)>1&&(yield{type:`DoubleVideo:${e}`,message:(0,a.F3)({text:r},"内建议只使用一个视频，否则可能导致加载率偏低"),warning:"同一场景内建议只使用一个视频，否则可能导致加载率偏低"})}var O=Object.defineProperty,k=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(e,t,r)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,P=(e,t)=>{for(var r in t||(t={}))x.call(t,r)&&w(e,r,t[r]);if(k)for(var r of k(t))E.call(t,r)&&w(e,r,t[r]);return e};function*j({id:e,props:t,nodes:r,name:n,editor:o}){o.loading&&!r.length&&(yield{type:`LoadingSceneEmpty:${e}`,message:(0,a.F3)("为保护用户体验，加载场景",{text:n},"不能没有节点内容"),warning:(0,a.F3)("为保护用户体验，加载场景",{text:n},"不能没有节点内容")});const i=C(),l=[];for(const[e,o]of Object.entries(t)){const{type:c,fontSize:s=30,text:p,name:u}=o;"Button"===c&&(l.push(P(P({},o),S({props:t,nodes:r},Number(e)))),i(o)&&(yield{type:`TextWidthTooLong:${e}`,message:(0,a.F3)("为保护用户体验，场景",{text:n},"的转化按钮",{text:u},"文案宽度不能超过按钮区域"),warning:(0,a.F3)("为保护用户体验，转化按钮",{text:u},"文案宽度不能超过按钮区域")}),p&&s<30&&(yield{type:`ButtonFontTooSmall:${e}`,message:(0,a.F3)("为保护用户体验，",{text:n},"的转化按钮",{text:u},"字体大小不得小于30px"),warning:(0,a.F3)("为保护用户体验，转化按钮",{text:u},"字体大小不得小于30px")}))}l.length>3&&(yield{type:`ButtonTooMany:${e}`,message:(0,a.F3)("为保护用户体验，",{text:n},"内转化按钮数量不得超过3个；","当前",...l.map((({name:e})=>({text:e}))).map((e=>[e,"、"])).flat().slice(0,-1),`共${l.length}个`),warning:(0,a.F3)("为保护用户体验，同一场景内转化按钮数量不得超过3个；","当前",...l.map((({name:e})=>({text:e}))).map((e=>[e,"、"])).flat().slice(0,-1),`共${l.length}个`)})}const S=({nodes:e,props:t},r)=>(0,o.qC)(e,r).reduce(((e,{id:r})=>{const{x:n=0,y:o=0}=t[r];return e.x+=n,e.y+=o,e}),{x:0,y:0}),C=()=>{const e=document.createElement("canvas").getContext("2d");return({text:t="",fontSize:r=16,italic:n=!1,bold:o=!1,width:a=0})=>!!e&&(e.font=`${n?"italic":"normal"} normal ${o?"bold":"normal"} ${r}px sans-serif`,e.measureText(t).width>a)},I=e=>{if(Array.isArray(e))return e.forEach(I);if(e&&"object"==typeof e){const{callee:t,accept:r,default:n,value:o=n,name:a,tooltip:i}=e,l=()=>{try{if(r&&!new RegExp(r,"i").test(o))return!0}catch(e){console.log(e)}return!1};if("Riko.useString"===t&&l())throw new Error(i||`${a}不符合“${r}”`);I(Object.values(e))}};function*A({props:e,nodes:t,name:r}){for(const[n,i]of Object.entries(e))try{I(i)}catch(e){const l=(()=>{if("Script"===i.type){const[{name:e}]=(0,o.qC)(t,Number(n),!0);return[{text:e},"的",{text:i.name}]}return[{text:i.name}]})();yield{type:`UseStringAccept:${n}`,message:(0,a.F3)({text:r},...l,e.message),warning:(0,a.F3)(...l,e.message)}}}var M=r(73760);function*_({id:e,props:t}){const{name:r="",compProps:n=[]}=t[e];for(const{ids:e,type:i,name:l,props:c,enabled:s=!0}of n)if(s&&["Sprite","Video","Sound","Script_PlaySound"].includes(i)){const n=c.find((({key:e})=>"url"===e));n&&n.default===D((0,o.$U)(t,e[0]),e.slice(1),"url")&&(yield(0,a.F3)("检查到「",{text:r},"-",{text:l},"」未替换素材"))}}const D=(e,t,r)=>{var n;if(!t.length)return e[r];const{compProps:o}=e;for(const{ids:e,props:a}of o)if((0,M.isEqual)(e,t))return null==(n=a.find((({key:e})=>e===r)))?void 0:n.value};function*R({props:e,nodes:t,name:r}){var n,i;for(const[l,c]of Object.entries(e))if("Video"===c.type){const[{scripts:s}]=(0,o.qC)(t,Number(l));for(const{id:t}of s.filter((({type:e})=>"Controller"===e)))(null!=(n=e[t].duration)?n:0)>15e3&&(yield{type:`LongController:${t}`,message:(0,a.F3)("您在“",{text:r},"”中使用的“",{text:c.name},"”，视频长度超过15秒，建议视频长度在1s-15s，以免影响加载速度"),warning:"建议视频长度小于15秒，以免影响加载速度"}),(null!=(i=e[t].duration)?i:0)<1e3&&(yield{type:`ShortController:${t}`,message:(0,a.F3)("您在“",{text:r},"”中使用的“",{text:c.name},"”，视频长度不足1秒，建议视频长度在1s-15s，以免影响作品体验"),warning:"建议视频长度大于1秒，以免影响作品体验"})}}function*N({props:e,nodes:t,name:r,editor:n}){var o,i,l,c;if(!n.loading||!n.playable)return;t.filter((({type:e})=>"Video"===e)).length||(yield(0,a.F3)("加载页",{text:r},"的字段",{text:"背景视频上传"},"未设置"));const[s,p]=t.filter((({type:e})=>"Text"===e));(null==(o=e[null==s?void 0:s.id])?void 0:o.text)&&"加载页的主标题"!==(null==(i=e[null==s?void 0:s.id])?void 0:i.text)||(yield(0,a.F3)("加载页",{text:r},"的字段",{text:"主标题"},"未设置")),(null==(l=e[null==p?void 0:p.id])?void 0:l.text)&&"加载页的副标题"!==(null==(c=e[null==p?void 0:p.id])?void 0:c.text)||(yield(0,a.F3)("加载页",{text:r},"的字段",{text:"副标题"},"未设置"))}function V(e){if(3!==e.settings.typeOfPlay)return"";const t=(0,o.qU)(e).scenes.map((e=>Array.from(B(e)))).filter((e=>e.length));return t.length?`${t.length}个场景内共存在${t.flat().length}个互动元素会出现在限制区`:""}function*B({type:e,props:t,nodes:r,name:n}){var a;if("Scene"!==e)return;const i={};for(const[e,l]of Object.entries(t))if("Animation"===l.type||"Script"===l.type&&(null==(a=l.enabled)||a)&&["Click","LongPress","MouseDown","MouseUp","Gesture","Drag"].includes(l.script)){const a=(0,o.qC)(r,Number(e),"Animation"!==l.type),c=e=>{if(!e.length)return[];let{width:r=0,height:o=0}=t[e[0].id];const{name:a=""}=t[e[0].id];let[c,s]=e.reduce(((e,{id:r})=>{var n,o;return e[0]+=null!=(n=t[r].x)?n:0,e[1]+=null!=(o=t[r].y)?o:0,e}),[0,0]);if("Gesture"===l.script){const{gestureType:e=1,distance:t=100}=l;switch(e){case 0:c-=t,r+=t;break;case 1:r+=t;break;case 2:s-=t,o+=t;break;case 3:o+=t}}return!i[e[0].id]&&(c<0||s<204||c+r>750||s+o>1072)?(i[e[0].id]=!0,[{type:`NotInPlayableArea:${e[0].id}`,sceneName:n,nodeName:a}]):[]};yield*c(a),"Drag"===l.script&&l.targetId>0&&(yield*c((0,o.qC)(r,l.targetId)))}}function*Z(e){for(const t of[n.checkSceneCompliance,n.checkSceneLoopVideo,n.checkSceneDoubleVideo,n.checkUseStringAccept])yield*t(e)}},19104:function(e,t,r){"use strict";r.d(t,{JoinGroupIcon:function(){return y.L7},SplitGroupIcon:function(){return y.e4},addComponent:function(){return d.addComponent},addCubeMap:function(){return d.addCubeMap},addCustomScript:function(){return d.addCustomScript},addFromNode:function(){return d.addFromNode},addMaterial:function(){return d.addMaterial},addPanoramaViewer:function(){return d.addPanoramaViewer},addScene:function(){return d.addScene},addScript:function(){return d.addScript},addState:function(){return d.addState},addTexture2D:function(){return d.addTexture2D},alignAction:function(){return d.alignAction},changeCanvasScale:function(){return d.changeCanvasScale},changeCategory:function(){return p.cg},changeDatabase:function(){return p.Ew},changeEditor:function(){return d.changeEditor},changeMoment:function(){return d.changeMoment},changeProps:function(){return d.changeProps},changeProvider:function(){return p.wf},checkComponentCircleRef:function(){return y.De},checkDirectDownloadScript:function(){return b.tQ},checkDownloadOpacity:function(){return b.zD},checkOperandError:function(){return y.yc},checkPlayableAreaAll:function(){return b.qM},checkPlayableAreaBase:function(){return b.M9},checkPlayableScene:function(){return b.mg},checkPlayableVideoState:function(){return b.Ns},checkSceneCompProps:function(){return b.ij},checkSceneCompliance:function(){return b.AT},checkSceneDoubleVideo:function(){return b.he},checkSceneLoopVideo:function(){return b.VO},checkSceneWarnings:function(){return b.l$},checkScripts:function(){return y.lZ},checkStateDownloadText:function(){return b.Ld},checkUseStringAccept:function(){return b.hS},consumeEvent:function(){return y.qf},copyScene:function(){return d.copyScene},createScriptComponent:function(){return y.as},delScript:function(){return d.delScript},deleteCubemap:function(){return d.deleteCubemap},deleteCustomScript:function(){return d.deleteCustomScript},deleteMaterial:function(){return d.deleteMaterial},deleteScene:function(){return d.deleteScene},deleteState:function(){return d.deleteState},getNewNode:function(){return d.getNewNode},getProjectHeight:function(){return y.H0},groupActions:function(){return d.groupActions},joinDuration:function(){return y.mF},joinGroup:function(){return d.joinGroup},maxEndTime:function(){return m.Z},minStartTime:function(){return m.W},nameWithOrder:function(){return y.Qf},newCase:function(){return d.newCase},newScene:function(){return d.newScene},newSceneAsync:function(){return d.newSceneAsync},pauseIcon:function(){return y.lA},playIcon:function(){return y.Iw},playScript:function(){return d.playScript},reorderScene:function(){return d.reorderScene},replaceAllNodes:function(){return d.replaceAllNodes},restoreState:function(){return d.restoreState},selectNode:function(){return d.selectNode},selectScript:function(){return d.selectScript},setOpenKeys:function(){return d.setOpenKeys},setSettings:function(){return d.setSettings},splitGroup:function(){return d.splitGroup},updateCustomScript:function(){return d.updateCustomScript},updateGlobalVars:function(){return d.updateGlobalVars},updateMaterial:function(){return d.updateMaterial},updatePanoramaData:function(){return d.updatePanoramaData},updateTexture2D:function(){return d.updateTexture2D},useAddNode:function(){return y.g0},useAddNodeWith3D:function(){return y.Ej},useBlueprintHotkeys:function(){return y.i1},useCanAddScripts:function(){return y.fn},useEditor:function(){return y.jE},useEditorCount:function(){return y.cm},useEditorHotkeys:function(){return y.Bv},useEmitter:function(){return y.qV},useGetSelected:function(){return y.$k},useGrouping:function(){return y.ai},useHasUserPermission:function(){return y.kt},useIdeMessage:function(){return y.zY},useImbot:function(){return y.GW},useMoment:function(){return y.ww},useNodesEditor:function(){return y.zm},useOnAddComponent:function(){return y.DF},useOnAddCustomScript:function(){return y.a$},useOnAddNodeFromFiles:function(){return y.XF},useOnAddScripts:function(){return y.yJ},useOnArrowKeys:function(){return y.Tc},useOnChangeEditor:function(){return y.mG},useOnCopy:function(){return y.r2},useOnDelete:function(){return y.LT},useOnDeleteCustomScript:function(){return y.Ep},useOnDropNodes:function(){return y.Yb},useOnEditComponent:function(){return y.Fg},useOnIntoButton:function(){return y.ss},useOnIntoComponent:function(){return y.I7},useOnMask:function(){return y.i5},useOnPaste:function(){return y.kY},useOnPostMessage:function(){return y.gn},useOnPreview:function(){return y.AD},useOnPutBottom:function(){return y.Wx},useOnRedo:function(){return y.k4},useOnRenameCustomScript:function(){return y._H},useOnSaveCustomScript:function(){return y.fc},useOnSelectAll:function(){return y.ep},useOnUndo:function(){return y.n},usePlaying:function(){return y.gU},useProject:function(){return y.PY},useProjectHeight:function(){return y.rk},useProps:function(){return y.wN},useProvideEvent:function(){return y.nx},useScene:function(){return y.$r},useScriptError:function(){return y.Og},useSelected:function(){return y.vt},useSettings:function(){return y.rV},useSubscribe:function(){return y.Q3},useUserInfo:function(){return y.Pc}});var n=r(40985),o=r(30027),a=r(53836),i=r(85349),l=r(7910),c=r(57690),s=r(61485),p=(r(58584),r(35035)),u=r(67343),d=r(63414),f=r(61754),m=r(44207),y=r(42753),b=r(36954),h=Object.defineProperty,g=Object.defineProperties,v=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t)=>{for(var r in t||(t={}))k.call(t,r)&&E(e,r,t[r]);if(O)for(var r of O(t))x.call(t,r)&&E(e,r,t[r]);return e},P=(e,t)=>g(e,v(t));const j=[s.Z],[S]=(0,i.Um)({title:"Redux日志",flagBit:2,onChange(){location.reload()}});S&&j.push((0,c.createLogger)());const C=(0,o.MT)((0,o.UY)({project:d.default,resource:p.ZP,userinfo:u.Z}),(0,a.Uo)((0,o.md)(...j)));window.editorScene=(e=!0)=>{var t;const r=(0,n.zh)(C.getState().project,void 0,!1),{editor:{selected:o}}=r,a=Object.keys(o).map(Number);if(!e||!a.length||1===a.length&&a[0]===r.id){const e=(0,n.GV)(r);return(0,l.zp)(JSON.stringify(e),{onCopySuccess:()=>console.log("The JSON data has been copied!")}),e}const[,i=r]=(0,n.qC)(r.nodes,a[0]),c=null==(t=(0,n.Pe)([i],r.props)[0].nodes)?void 0:t.filter((({id:e})=>a.includes(e)));return(0,l.zp)(JSON.stringify(c),{onCopySuccess:()=>console.log("The JSON data has been copied!")}),c},window.replaceSelectedScene=e=>{try{(0,n.m7)((0,n.GV)(e))}catch(e){return void f.ZP.error(e.message)}const{getState:t,dispatch:r}=C,{project:o}=t(),{editor:{selectedSceneId:a}}=o,i=(0,n.zh)(o,void 0,!1);r((0,d.restoreState)(P(w({},o),{scenes:o.scenes.map((t=>t.id===a?(0,n.m7)(P(w({},(0,n.GV)(e)),{id:i.id,sceneId:i.sceneId})):t))})))},t.default=C},63414:function(e,t,r){"use strict";r.d(t,{addComponent:function(){return zr},addCubeMap:function(){return _a},addCustomScript:function(){return qr},addFromNode:function(){return ke},addMaterial:function(){return Xn},addNode:function(){return Oe},addPanoramaViewer:function(){return ui},addScene:function(){return ha},addScript:function(){return _e},addState:function(){return ut},addTexture2D:function(){return _i},alignAction:function(){return Ht},changeCanvasScale:function(){return pr},changeEditor:function(){return P},changeMoment:function(){return m},changeProps:function(){return U.jo},copyScene:function(){return ll},default:function(){return xl},delNode:function(){return Fe},delScript:function(){return Ye},deleteCubemap:function(){return Ya},deleteCustomScript:function(){return pn},deleteMaterial:function(){return Oo},deleteScene:function(){return Ko},deleteState:function(){return Et},getInnerNodeId:function(){return L},getNewNode:function(){return be},groupActions:function(){return Rt},joinGroup:function(){return Gt},moveNode:function(){return et},newCase:function(){return sl},newScene:function(){return il},newSceneAsync:function(){return al},playScript:function(){return ia},redoAction:function(){return Kt},reorderScene:function(){return Or},replaceAllNodes:function(){return re.WM},restoreState:function(){return kl},selectNode:function(){return T},selectScript:function(){return z},setOpenKeys:function(){return X},setSettings:function(){return Bo},splitGroup:function(){return qt},undoAction:function(){return Jt},updateCustomScript:function(){return kn},updateGlobalVars:function(){return Un},updateMaterial:function(){return po},updateNodeId:function(){return he},updatePanoramaData:function(){return ki},updateScriptId:function(){return ge},updateTexture2D:function(){return Yi}});var n=r(48837),o=Object.defineProperty,a=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))s.call(t,r)&&p(e,r,t[r]);return e},d=(e,t)=>a(e,i(t));const f=Symbol("ChangeMoment"),m=(e,t=!1)=>({type:f,playing:t,moment:e});var y=Object.defineProperty,b=Object.defineProperties,h=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,k=(e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,x=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&k(e,r,t[r]);if(g)for(var r of g(t))O.call(t,r)&&k(e,r,t[r]);return e},E=(e,t)=>b(e,h(t));const w=n.ActionType.EditorProperty,P=(e,t,r=!1,n)=>({type:w,nodeId:e,partial:t,playing:r,flag:n});var j=(e,t)=>{if(t.type===w){const{nodeId:r,partial:n}=t;return(0,re.$H)([e],(e=>{var o;if(e.id===r){const[o,a]=(0,U.Ft)(e.editor||{},n);for(const e of["edit3d","stateId"])e in n&&(t.undo=P(r,a));return E(x({},e),{editor:o})}return(null==(o=e.scripts)?void 0:o.find((({id:e})=>e===r)))?E(x({},e),{scripts:e.scripts.map((e=>{if(e.id===r){const[t]=(0,U.Ft)(e.editor||{},n);return E(x({},e),{editor:t})}return e}))}):e}))[0]}return e},S=r(40985),C=r(73760),I=Object.defineProperty,A=Object.defineProperties,M=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,N=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,V=(e,t)=>{for(var r in t||(t={}))D.call(t,r)&&N(e,r,t[r]);if(_)for(var r of _(t))R.call(t,r)&&N(e,r,t[r]);return e},B=(e,t)=>A(e,M(t));const Z=n.ActionType.Select,T=e=>({type:Z,ids:e,playing:!0}),z=e=>({type:Z,ids:e});function L(e,t){const r=(0,S.v$)(e),{props:n}=e,o=e=>{for(const r of e)if(Array.isArray(r)){const e=o(r);if(e)return e}else if(r&&"object"==typeof r){if(r.id===t&&"string"==typeof r.type)return r;const e=o(Object.values((0,C.omit)(r,"default")));if(e)return e}};for(const[e,t]of Object.entries(n)){const n=o(Object.values(t));if(n){if("Script"===t.type){const[{id:t}]=(0,S.qC)(r,Number(e),!0);return[t,n]}return[Number(e),n]}}return[0,{}]}var U=r(84215),F=Object.defineProperty,Y=Object.defineProperties,$=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,K=(e,t,r)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,H=(e,t)=>{for(var r in t||(t={}))W.call(t,r)&&K(e,r,t[r]);if(Q)for(var r of Q(t))J.call(t,r)&&K(e,r,t[r]);return e},G=(e,t)=>Y(e,$(t));const q=Symbol("SetOpenKeys"),X=(e,{openKeys:t,enabled:r})=>({type:q,ids:e,openKeys:t,enabled:r}),ee=(e,t)=>{const{editor:r={}}=e,{openKeys:n=r.openKeys,enabled:o=r.enabled}=t;return G(H({},e),{editor:G(H({},r),{openKeys:n,enabled:o})})};var te=r(7910),re=r(93800),ne=r(41946),oe=r(98466),ae=Object.defineProperty,ie=Object.defineProperties,le=Object.getOwnPropertyDescriptors,ce=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,ue=(e,t,r)=>t in e?ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,de=(e,t)=>{for(var r in t||(t={}))se.call(t,r)&&ue(e,r,t[r]);if(ce)for(var r of ce(t))pe.call(t,r)&&ue(e,r,t[r]);return e},fe=(e,t)=>ie(e,le(t)),me=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const ye=n.ActionType.AddNode,be=(e,t,r)=>me(void 0,null,(function*(){const o=yield(0,n.createNode)(t,e.startsWith("image/")?"Sprite":e.startsWith("audio/")?"Sound":e.startsWith("video/")?"Video":e.startsWith("text/")?"Text":e,S.xv,(0,te.Hn)(r));if("Video"===o.type){const{props:{poster:e}={}}=o;if(e instanceof Blob)try{const{downloadUrl:t}=yield(0,oe.cT)(e);if(t)return fe(de({},o),{props:fe(de({},o.props),{poster:(0,te.Hn)(t)})})}catch(e){return o}}return o})),he=(e=[])=>e.map((e=>fe(de({},e),{id:(0,S.xv)(),props:(0,C.mapValues)(e.props,((e,t)=>"compProps"!==t?e:e.map((e=>fe(de({},e),{props:e.props.map((e=>e.key.startsWith("$")&&e.value?fe(de({},e),{value:(0,S.s_)(e.value,(e=>fe(de({},e),{id:(0,S.xv)()})))}):e))}))))),scripts:ge(e.scripts),nodes:he(e.nodes)}))),ge=(e=[])=>e.map((e=>"Blueprint"===e.type?(0,ne.UG)(e).newScript:fe(de({},e),{id:(0,S.xv)(),props:(0,C.mapValues)(e.props,((e,t)=>{if(t.startsWith("$"))return(0,S.s_)(e,(e=>fe(de({},e),{id:(0,S.xv)()})));switch(t){case"id":return(0,S.xv)();case"scripts":case"elseScripts":return ge(e);default:return e}}))}))),ve=e=>me(void 0,null,(function*(){const t=(0,te.Hn)(e).split("/").slice(0,-1).join("/"),r=e=>(e.forEach((e=>{var n;(null==(n=e.props)?void 0:n.url)&&(0,C.isString)(e.props.url)&&(e.props.url=e.props.url.startsWith("https")?(0,te.Hn)(e.props.url):`${t}/${e.props.url}`),r(e.nodes||[])})),e);return fetch(e,{credentials:"same-origin",mode:"cors"}).then((e=>e.json())).then((e=>he([e]))).then((e=>r(e)[0]))})),Oe=(e,t=(e=>Promise.resolve(e)))=>me(void 0,null,(function*(){var r=e,{mime:n,url:o,name:a}=r,i=((e,t)=>{var r={};for(var n in e)se.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ce)for(var n of ce(e))t.indexOf(n)<0&&pe.call(e,n)&&(r[n]=e[n]);return r})(r,["mime","url","name"]);return de({type:ye,node:yield t("PSD"===n?yield ve(o):yield be(n,a,o))},i)})),ke=(e,t,r,n,o)=>({type:ye,parentId:e,node:r,index:t,startPos:n,endPos:o});var xe=Object.defineProperty,Ee=Object.defineProperties,we=Object.getOwnPropertyDescriptors,Pe=Object.getOwnPropertySymbols,je=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,Ce=(e,t,r)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ie=(e,t)=>{for(var r in t||(t={}))je.call(t,r)&&Ce(e,r,t[r]);if(Pe)for(var r of Pe(t))Se.call(t,r)&&Ce(e,r,t[r]);return e},Ae=(e,t)=>Ee(e,we(t));const Me=n.ActionType.AddScript,_e=(e,t)=>({type:Me,nodeId:e,script:t});var De=Object.defineProperty,Re=Object.defineProperties,Ne=Object.getOwnPropertyDescriptors,Ve=Object.getOwnPropertySymbols,Be=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable,Te=(e,t,r)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ze=(e,t)=>{for(var r in t||(t={}))Be.call(t,r)&&Te(e,r,t[r]);if(Ve)for(var r of Ve(t))Ze.call(t,r)&&Te(e,r,t[r]);return e},Le=(e,t)=>Re(e,Ne(t));const Ue=n.ActionType.Delete,Fe=e=>({type:Ue,id:e}),Ye=Fe;function $e(e,t,r){for(const n of e){delete t[n.id],delete r[n.id];for(const e of n.scripts)delete t[e.id];$e(n.nodes,t,r)}}var Qe=Object.defineProperty,We=Object.defineProperties,Je=Object.getOwnPropertyDescriptors,Ke=Object.getOwnPropertySymbols,He=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable,qe=(e,t,r)=>t in e?Qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Xe=n.ActionType.MoveNode,et=(e,t,r)=>({type:Xe,nodeId:e,parentId:t,index:r});var tt=Object.defineProperty,rt=Object.defineProperties,nt=Object.getOwnPropertyDescriptors,ot=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable,lt=(e,t,r)=>t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ct=(e,t)=>{for(var r in t||(t={}))at.call(t,r)&&lt(e,r,t[r]);if(ot)for(var r of ot(t))it.call(t,r)&&lt(e,r,t[r]);return e},st=(e,t)=>rt(e,nt(t));const pt=Symbol("AddState"),ut=(e,t)=>({type:pt,stateItem:{name:e,id:t}}),dt=({props:e,nodes:t},r,n)=>{var o;const a={};for(const[i,l]of Object.entries(e))if(n)if(l.state){const t=l.state[n],c=(0,S.w2)((0,S.uz)(t.scripts,e),a).map((e=>st(ct({},e),{editor:st(ct({},e.editor),{enabled:!1})})));a[Number(i)]=st(ct({},l),{state:st(ct({},l.state),{[r]:st(ct({},t),{scripts:c})}),compProps:null==(o=l.compProps)?void 0:o.map((e=>{var t;return ct(ct({},e),e.state?{state:st(ct({},e.state),{[r]:null==(t=e.state)?void 0:t[n]})}:{})}))})}else a[Number(i)]=l;else{const[n]=(0,S.qC)(t,Number(i));a[Number(i)]=n?st(ct({},l),{state:st(ct({},l.state),{[r]:{scripts:(0,S.w2)((0,S.uz)(n.scripts||[],e),a).map((e=>st(ct({},e),{editor:st(ct({},e.editor),{enabled:!1})})))}})}):l}return a};var ft=Object.defineProperty,mt=Object.defineProperties,yt=Object.getOwnPropertyDescriptors,bt=Object.getOwnPropertySymbols,ht=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable,vt=(e,t,r)=>t in e?ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ot=(e,t)=>{for(var r in t||(t={}))ht.call(t,r)&&vt(e,r,t[r]);if(bt)for(var r of bt(t))gt.call(t,r)&&vt(e,r,t[r]);return e},kt=(e,t)=>mt(e,yt(t));const xt=Symbol("DeleteState"),Et=e=>({type:xt,id:e});var wt=Object.defineProperty,Pt=Object.defineProperties,jt=Object.getOwnPropertyDescriptors,St=Object.getOwnPropertySymbols,Ct=Object.prototype.hasOwnProperty,It=Object.prototype.propertyIsEnumerable,At=(e,t,r)=>t in e?wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Mt=(e,t)=>{for(var r in t||(t={}))Ct.call(t,r)&&At(e,r,t[r]);if(St)for(var r of St(t))It.call(t,r)&&At(e,r,t[r]);return e},_t=(e,t)=>Pt(e,jt(t));const Dt=[(e,t)=>t.type===f?d(u({},e),{editor:d(u({},e.editor),{moment:t.moment})}):e,j,(e,{type:t,ids:r})=>{var n;if(t===Z){const t={},o=(0,S.v$)(e);for(const e of r){const[n]=(0,S.qC)(o,e,!0);if(!n){Object.keys(t).length&&console.warn(`The selecting script id ${e} not existing:`,r);break}n.id in t?t[n.id].push(e):t[n.id]=[e]}if(Object.keys(t).length)return B(V({},e),{editor:B(V({},e.editor),{selectedInnerNode:void 0,selected:t})});if(!r.length)return B(V({},e),{editor:B(V({},e.editor),{selectedInnerNode:void 0,selected:{}})});const a=(0,S.qC)(e.nodes,r[0]),i=(a[1]||e).nodes.filter((({id:e})=>r.includes(e))).map((({id:e})=>e));for(const t of a.slice(1))(null==(n=t.editor)?void 0:n.isCollapsed)&&(e=j(e,P(t.id,{isCollapsed:!1})));if(i.length)return B(V({},e),{editor:B(V({},(0,C.omit)(e.editor,"selectedInnerNode")),{selected:Object.fromEntries(i.map((e=>[e,[]])))})});const l=r.reduce(((r,n)=>{const[o]=L(e,n);return o&&(r.push(n),t[o]=[]),r}),[]);return B(V({},e),{editor:B(V({},e.editor),{selected:t,selectedInnerNode:l})})}return e},U.ZP,(e,t)=>{if(t.type===pt){const{editor:{state:r=[],stateId:n}}=e;return st(ct({},e),{props:dt(st(ct({},e),{nodes:e.nodes[0].nodes}),t.stateItem.id,n),editor:st(ct({},e.editor),{state:[...r,t.stateItem]})})}return e},(e,t)=>{if(t.type===xt){const{props:r,editor:{state:n=[],stateId:o}}=e,a=n.filter((({id:e})=>e!==t.id)),i=[];return kt(Ot({},e),{props:Object.fromEntries(Object.entries(r).map((([e,r])=>[e,kt(Ot({},r),{state:r.state?Object.fromEntries(Object.entries(r.state).filter((([e,r])=>{var n;return Number(e)===t.id&&(null==(n=r.scripts)||n.forEach((e=>{i.push(e.id)}))),Number(e)!==t.id}))):void 0,compProps:r.compProps?r.compProps.map((e=>{var r=e,{state:n}=r,o=((e,t)=>{var r={};for(var n in e)ht.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&bt)for(var n of bt(e))t.indexOf(n)<0&&gt.call(e,n)&&(r[n]=e[n]);return r})(r,["state"]);return kt(Ot({},o),{state:n?Object.fromEntries(Object.entries(n).filter((([e])=>Number(e)!==t.id))):void 0})})):void 0})])).filter((([e])=>!i.includes(Number(e))))),editor:kt(Ot({},e.editor),{state:a,stateId:o===t.id?void 0:o})})}return e},(e,t)=>{var r,n,o,a,i,l,c;if(t.type===Me){const s=Ie({},e.props),{editor:{stateId:p}}=e,u=(0,S.HA)([t.script],s)[0];if("Scene"===e.type&&e.id===t.nodeId)return Ae(Ie({},e),{scripts:[u].concat(null!=(r=e.scripts)?r:[]),props:s});if(p&&(null==(o=null==(n=s[t.nodeId])?void 0:n.state)?void 0:o[p]))return s[t.nodeId].state=Ae(Ie({},s[t.nodeId].state),{[p]:Ae(Ie({},null==(i=null==(a=s[t.nodeId])?void 0:a.state)?void 0:i[p]),{scripts:[...(null==(c=null==(l=s[t.nodeId])?void 0:l.state)?void 0:c[p].scripts)||[],u]})}),Ae(Ie({},e),{props:s});{const r=(0,re.$H)(e.nodes,(e=>e.id===t.nodeId?(t.undo=Ye(u.id),Ae(Ie({},e),{scripts:e.scripts.concat(u)})):e));if(r!==e.nodes)return Ae(Ie({},e),{props:s,nodes:r})}}return e},(e,t)=>{const{type:r,nodeId:n,parentId:o,index:a}=t;if(r===Xe){const[r,l]=(0,re.Pd)(e.nodes,n);if(!l)return e;const c=(0,re.ID)(e.id,r,o,a,l);if(c===r)return e;const[,s=e]=(0,S.qC)(e.nodes,n);if(s){const{id:e,nodes:r}=s;t.undo=et(n,e,r.findIndex((({id:e})=>e===n)))}return i=((e,t)=>{for(var r in t||(t={}))He.call(t,r)&&qe(e,r,t[r]);if(Ke)for(var r of Ke(t))Ge.call(t,r)&&qe(e,r,t[r]);return e})({},e),We(i,Je({nodes:c}))}var i;return e},(e,t)=>{if(t.type===ye){const r=de({},e.props),n=(0,S.I_)([t.node],r,e.editor)[0],o=(0,re.ID)(e.id,e.nodes,t.parentId,t.index,n);if(o!==e.nodes)return t.undo=Fe(t.node.id),fe(de({},e),{props:r,nodes:o})}return e},(e,t)=>{var r,n;if(t.type===Ue){const[o,a]=(0,re.Pd)(e.nodes,t.id);if(a){const[,r=e]=(0,S.qC)(e.nodes,t.id);r&&(t.undo=ke(r.id,r.nodes.findIndex((({id:e})=>e===a.id)),(0,S.Pe)([a],e.props)[0]));const n=ze({},e.editor.selected),i=ze({},e.props);return $e([a],i,n),Le(ze({},e),{editor:Le(ze({},e.editor),{selected:n}),nodes:o,props:i})}if(e.editor.stateId&&(!(0,S.W6)(e.type)||e.nodes[0]!==(0,S.qC)(e.nodes,t.id,!0)[0]))return Le(ze({},e),{editor:Le(ze({},e.editor),{selected:{}}),props:Object.entries(e.props).reduce(((r,[n,o])=>{var a,i;if(Number(n)===t.id)return r;const l=null==(a=o.state)?void 0:a[e.editor.stateId];return(null==(i=null==l?void 0:l.scripts)?void 0:i.find((({id:e})=>e===t.id)))?r[Number(n)]=Le(ze({},o),{state:Le(ze({},o.state),{[e.editor.stateId]:Le(ze({},l),{scripts:l.scripts.filter((({id:e})=>e!==t.id))})})}):r[Number(n)]=o,r}),{})});{const o=(0,re.$H)(e.nodes,(r=>r.scripts.find((e=>e.id===t.id))?Le(ze({},r),{scripts:r.scripts.filter((n=>n.id!==t.id||(t.undo=_e(r.id,Le(ze({},n),{props:e.props[n.id]})),!1)))}):r));if(o!==e.nodes){const a=e.props,{[r=t.id]:i}=a,l=((e,t)=>{var r={};for(var n in e)Be.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ve)for(var n of Ve(e))t.indexOf(n)<0&&Ze.call(e,n)&&(r[n]=e[n]);return r})(a,[(n=r,"symbol"==typeof n?n:n+"")]),c=Object.entries(e.editor.selected).map((([e,r])=>[e,r.filter((e=>e!==t.id))]));return Le(ze({},e),{editor:Le(ze({},e.editor),{selected:Object.fromEntries(c)}),props:l,nodes:o})}}}return e},(e,t)=>t.type===q?t.ids.length>1?((e,{ids:[t,...r],openKeys:n,enabled:o})=>{var a;return G(H({},e),{props:G(H({},e.props),{[t]:G(H({},e.props[t]),{compProps:null==(a=e.props[t].compProps)?void 0:a.map((e=>(0,C.isEqual)(e.ids,r)?G(H({},e),n?{props:e.props.map((e=>G(H({},e),{enabled:n.includes(e.key)})))}:{enabled:o}):e))})})})})(e,t):e.props[t.ids[0]]?((e,t)=>G(H({},e),{nodes:(0,re.$H)(e.nodes,(e=>e.id===t.ids[0]?ee(e,t):e.scripts.find((({id:e})=>e===t.ids[0]))?G(H({},e),{scripts:e.scripts.map((e=>e.id===t.ids[0]?ee(e,t):e))}):e))}))(e,t):((e,t)=>{const{id:r,props:n}=(0,S.Nf)(e.props,t.ids[0]).reduce(((e,r)=>G(H({},r),{props:H(G(H({},r.props),{scripts:r.props.scripts.map((r=>r.id===e.id?e.id===t.ids[0]?ee(e,t):e:r))}),"Conditions"===r.props.script?{elseScripts:r.props.elseScripts.map((r=>r.id===e.id?e.id===t.ids[0]?ee(e,t):e:r))}:{})})));return G(H({},e),{props:G(H({},e.props),{[r]:n})})})(e,t):e],Rt=(e,t)=>({type:n.ActionType.Group,actions:e,flag:t});function Nt(e,t){if(t.type===n.ActionType.Group){const r=t.actions,o=r.reduce(((e,t)=>Nt(e,t)),e);return t.undo={type:n.ActionType.Group,actions:r.map((e=>e.undo)).filter(Boolean).reverse()},o}for(const r of Dt){if((0,S.W6)(e.type)){const n=_t(Mt({},e),{nodes:[e],scripts:[]}),o=r(n,t);if(o!==n){const{scripts:e,nodes:t}=o.nodes[0];return _t(Mt({},o),{scripts:e,nodes:t})}}const n=r(e,t);if(n!==e)return n}return e}var Vt=Object.defineProperty,Bt=Object.defineProperties,Zt=Object.getOwnPropertyDescriptors,Tt=Object.getOwnPropertySymbols,zt=Object.prototype.hasOwnProperty,Lt=Object.prototype.propertyIsEnumerable,Ut=(e,t,r)=>t in e?Vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ft=(e,t)=>{for(var r in t||(t={}))zt.call(t,r)&&Ut(e,r,t[r]);if(Tt)for(var r of Tt(t))Lt.call(t,r)&&Ut(e,r,t[r]);return e},Yt=(e,t)=>Bt(e,Zt(t));const $t=Array.from(Object.values(n.ActionType)),Qt=Symbol("UndoAction"),Wt=Symbol("RedoAction"),Jt=()=>({type:Qt}),Kt=()=>({type:Wt}),Ht=e=>({type:n.ActionType.Align,align:e}),Gt=(e,t)=>({type:n.ActionType.JoinGroup,parentId:e,childIds:t}),qt=e=>({type:n.ActionType.SplitGroup,parentId:e});var Xt=(e,t)=>{const{redoStack:r,undoStack:o}=e.history;if(t.type===Qt){const t=e.history.redoStack.slice();let r=o.length,a=e,i=!1;for(;r--;){const e=o[r];if(e.undo&&e.flag!==n.ActionFlag.SideEffect){if(i&&e.flag!==n.ActionFlag.Continuous)break;if(a=Nt(a,e.undo),t.push(e),!i&&e.flag===n.ActionFlag.Continuous)break;i=!0}}return Yt(Ft({},a),{history:{undoStack:o.slice(0,r+1),redoStack:t}})}if(t.type===Wt){let t=r.length;if(!t)return e;const o=e.history.undoStack.slice();let a=e;for(;t;){const e=r[--t];if(a=Nt(a,e),o.push(e),e.flag!==n.ActionFlag.Continuous)break}return Yt(Ft({},a),{history:{undoStack:o,redoStack:r.slice(0,t)}})}if([n.ActionType.Align,n.ActionType.SplitGroup,n.ActionType.JoinGroup].includes(t.type))return Yt(Ft({},e),{history:Yt(Ft({},e.history),{undoStack:o.concat(t)})});const a=Nt(e,t);return a!==e&&$t.includes(t.type)?(t.flag===n.ActionFlag.SideEffect&&delete t.undo,Yt(Ft({},a),{history:{undoStack:t.flag===n.ActionFlag.EditorOnly?o:o.concat(t),redoStack:t.undo?[]:r}})):a},er=Object.defineProperty,tr=Object.defineProperties,rr=Object.getOwnPropertyDescriptors,nr=Object.getOwnPropertySymbols,or=Object.prototype.hasOwnProperty,ar=Object.prototype.propertyIsEnumerable,ir=(e,t,r)=>t in e?er(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lr=(e,t)=>{for(var r in t||(t={}))or.call(t,r)&&ir(e,r,t[r]);if(nr)for(var r of nr(t))ar.call(t,r)&&ir(e,r,t[r]);return e},cr=(e,t)=>tr(e,rr(t));const sr=n.ActionType.Scale,pr=(e,t)=>({type:sr,scale:e,setCenter:t,playing:!0});var ur=r(64021),dr=Object.defineProperty,fr=Object.defineProperties,mr=Object.getOwnPropertyDescriptors,yr=Object.getOwnPropertySymbols,br=Object.prototype.hasOwnProperty,hr=Object.prototype.propertyIsEnumerable,gr=(e,t,r)=>t in e?dr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const vr=Symbol("ReorderScene"),Or=(e,t)=>({type:vr,startIndex:e,endIndex:t});var kr=Object.defineProperty,xr=Object.defineProperties,Er=Object.getOwnPropertyDescriptors,wr=Object.getOwnPropertySymbols,Pr=Object.prototype.hasOwnProperty,jr=Object.prototype.propertyIsEnumerable,Sr=(e,t,r)=>t in e?kr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Cr=(e,t)=>{for(var r in t||(t={}))Pr.call(t,r)&&Sr(e,r,t[r]);if(wr)for(var r of wr(t))jr.call(t,r)&&Sr(e,r,t[r]);return e},Ir=(e,t)=>xr(e,Er(t)),Ar=Object.defineProperty,Mr=Object.defineProperties,_r=Object.getOwnPropertyDescriptors,Dr=Object.getOwnPropertySymbols,Rr=Object.prototype.hasOwnProperty,Nr=Object.prototype.propertyIsEnumerable,Vr=(e,t,r)=>t in e?Ar(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Br=(e,t)=>{for(var r in t||(t={}))Rr.call(t,r)&&Vr(e,r,t[r]);if(Dr)for(var r of Dr(t))Nr.call(t,r)&&Vr(e,r,t[r]);return e},Zr=(e,t)=>Mr(e,_r(t));const Tr=Symbol("AddComponent"),zr=e=>({type:Tr,component:e}),Lr=(e,t,r=0)=>e.editor.prevState?Zr(Br({},e),{editor:Zr(Br({},e.editor),{prevState:Lr(e.editor.prevState,t,r+1)}),scenes:[t,...e.scenes]}):Zr(Br({},e),{scenes:[t,...e.scenes]});var Ur=Object.defineProperty,Fr=Object.defineProperties,Yr=Object.getOwnPropertyDescriptors,$r=Object.getOwnPropertySymbols,Qr=Object.prototype.hasOwnProperty,Wr=Object.prototype.propertyIsEnumerable,Jr=(e,t,r)=>t in e?Ur(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Kr=(e,t)=>{for(var r in t||(t={}))Qr.call(t,r)&&Jr(e,r,t[r]);if($r)for(var r of $r(t))Wr.call(t,r)&&Jr(e,r,t[r]);return e},Hr=(e,t)=>Fr(e,Yr(t));const Gr=Symbol("AddCustomScript"),qr=e=>({type:Gr,script:e});var Xr=Object.defineProperty,en=Object.defineProperties,tn=Object.getOwnPropertyDescriptors,rn=Object.getOwnPropertySymbols,nn=Object.prototype.hasOwnProperty,on=Object.prototype.propertyIsEnumerable,an=(e,t,r)=>t in e?Xr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ln=(e,t)=>{for(var r in t||(t={}))nn.call(t,r)&&an(e,r,t[r]);if(rn)for(var r of rn(t))on.call(t,r)&&an(e,r,t[r]);return e},cn=(e,t)=>en(e,tn(t));const sn=Symbol("DeleteCustomScript"),pn=e=>({type:sn,id:e});var un=Object.defineProperty,dn=Object.defineProperties,fn=Object.getOwnPropertyDescriptors,mn=Object.getOwnPropertySymbols,yn=Object.prototype.hasOwnProperty,bn=Object.prototype.propertyIsEnumerable,hn=(e,t,r)=>t in e?un(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gn=(e,t)=>{for(var r in t||(t={}))yn.call(t,r)&&hn(e,r,t[r]);if(mn)for(var r of mn(t))bn.call(t,r)&&hn(e,r,t[r]);return e},vn=(e,t)=>dn(e,fn(t));const On=Symbol("UpdateCustomScript"),kn=(e,t)=>({type:On,id:e,partial:t});var xn=Object.defineProperty,En=Object.defineProperties,wn=Object.getOwnPropertyDescriptors,Pn=Object.getOwnPropertySymbols,jn=Object.prototype.hasOwnProperty,Sn=Object.prototype.propertyIsEnumerable,Cn=(e,t,r)=>t in e?xn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,In=(e,t)=>{for(var r in t||(t={}))jn.call(t,r)&&Cn(e,r,t[r]);if(Pn)for(var r of Pn(t))Sn.call(t,r)&&Cn(e,r,t[r]);return e},An=(e,t)=>En(e,wn(t));const Mn=Symbol("ResetCustomScripts");var _n=Object.defineProperty,Dn=Object.defineProperties,Rn=Object.getOwnPropertyDescriptors,Nn=Object.getOwnPropertySymbols,Vn=Object.prototype.hasOwnProperty,Bn=Object.prototype.propertyIsEnumerable,Zn=(e,t,r)=>t in e?_n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Tn=(e,t)=>{for(var r in t||(t={}))Vn.call(t,r)&&Zn(e,r,t[r]);if(Nn)for(var r of Nn(t))Bn.call(t,r)&&Zn(e,r,t[r]);return e},zn=(e,t)=>Dn(e,Rn(t));const Ln=Symbol("UpdateGlobalVars"),Un=e=>({type:Ln,store:e});var Fn=Object.defineProperty,Yn=Object.defineProperties,$n=Object.getOwnPropertyDescriptors,Qn=Object.getOwnPropertySymbols,Wn=Object.prototype.hasOwnProperty,Jn=Object.prototype.propertyIsEnumerable,Kn=(e,t,r)=>t in e?Fn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Hn=(e,t)=>{for(var r in t||(t={}))Wn.call(t,r)&&Kn(e,r,t[r]);if(Qn)for(var r of Qn(t))Jn.call(t,r)&&Kn(e,r,t[r]);return e},Gn=(e,t)=>Yn(e,$n(t));const qn=Symbol("AddMaterial"),Xn=e=>({type:qn,material:e});var eo=Object.defineProperty,to=Object.defineProperties,ro=Object.getOwnPropertyDescriptors,no=Object.getOwnPropertySymbols,oo=Object.prototype.hasOwnProperty,ao=Object.prototype.propertyIsEnumerable,io=(e,t,r)=>t in e?eo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lo=(e,t)=>{for(var r in t||(t={}))oo.call(t,r)&&io(e,r,t[r]);if(no)for(var r of no(t))ao.call(t,r)&&io(e,r,t[r]);return e},co=(e,t)=>to(e,ro(t));const so=Symbol("UpdateMaterial"),po=(e,t,r)=>({type:so,id:e,orderId:r,material:t});var uo=Object.defineProperty,fo=Object.defineProperties,mo=Object.getOwnPropertyDescriptors,yo=Object.getOwnPropertySymbols,bo=Object.prototype.hasOwnProperty,ho=Object.prototype.propertyIsEnumerable,go=(e,t,r)=>t in e?uo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const vo=Symbol("DeleteMaterial"),Oo=e=>({type:vo,id:e});var ko=Object.defineProperty,xo=Object.getOwnPropertySymbols,Eo=Object.prototype.hasOwnProperty,wo=Object.prototype.propertyIsEnumerable,Po=(e,t,r)=>t in e?ko(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,jo=(e,t)=>{for(var r in t||(t={}))Eo.call(t,r)&&Po(e,r,t[r]);if(xo)for(var r of xo(t))wo.call(t,r)&&Po(e,r,t[r]);return e},So=Object.defineProperty,Co=Object.defineProperties,Io=Object.getOwnPropertyDescriptors,Ao=Object.getOwnPropertySymbols,Mo=Object.prototype.hasOwnProperty,_o=Object.prototype.propertyIsEnumerable,Do=(e,t,r)=>t in e?So(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ro=(e,t)=>{for(var r in t||(t={}))Mo.call(t,r)&&Do(e,r,t[r]);if(Ao)for(var r of Ao(t))_o.call(t,r)&&Do(e,r,t[r]);return e},No=(e,t)=>Co(e,Io(t));const Vo=n.ActionType.SetSettings,Bo=(e,t=!1)=>({type:Vo,settings:e,global:t});function Zo(e,t){const r=t(e);return r.editor.prevState?No(Ro({},r),{editor:No(Ro({},r.editor),{prevState:Zo(r.editor.prevState,t)})}):r}var To=Object.defineProperty,zo=Object.defineProperties,Lo=Object.getOwnPropertyDescriptors,Uo=Object.getOwnPropertySymbols,Fo=Object.prototype.hasOwnProperty,Yo=Object.prototype.propertyIsEnumerable,$o=(e,t,r)=>t in e?To(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Qo=(e,t)=>{for(var r in t||(t={}))Fo.call(t,r)&&$o(e,r,t[r]);if(Uo)for(var r of Uo(t))Yo.call(t,r)&&$o(e,r,t[r]);return e},Wo=(e,t)=>zo(e,Lo(t));const Jo=Symbol("DeleteScene"),Ko=e=>({type:Jo,id:e});var Ho=Object.defineProperty,Go=Object.defineProperties,qo=Object.getOwnPropertyDescriptors,Xo=Object.getOwnPropertySymbols,ea=Object.prototype.hasOwnProperty,ta=Object.prototype.propertyIsEnumerable,ra=(e,t,r)=>t in e?Ho(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,na=(e,t)=>{for(var r in t||(t={}))ea.call(t,r)&&ra(e,r,t[r]);if(Xo)for(var r of Xo(t))ta.call(t,r)&&ra(e,r,t[r]);return e},oa=(e,t)=>Go(e,qo(t));const aa=n.ActionType.PlayScript,ia=e=>na({type:aa},e);var la=Object.defineProperty,ca=Object.defineProperties,sa=Object.getOwnPropertyDescriptors,pa=Object.getOwnPropertySymbols,ua=Object.prototype.hasOwnProperty,da=Object.prototype.propertyIsEnumerable,fa=(e,t,r)=>t in e?la(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ma=(e,t)=>{for(var r in t||(t={}))ua.call(t,r)&&fa(e,r,t[r]);if(pa)for(var r of pa(t))da.call(t,r)&&fa(e,r,t[r]);return e},ya=(e,t)=>ca(e,sa(t));const ba=Symbol("AddScene"),ha=(e,t)=>({type:ba,scene:e,index:t});var ga=r(66234),va=r(24113),Oa=r(23515),ka=r(41502),xa=Object.defineProperty,Ea=Object.defineProperties,wa=Object.getOwnPropertyDescriptors,Pa=Object.getOwnPropertySymbols,ja=Object.prototype.hasOwnProperty,Sa=Object.prototype.propertyIsEnumerable,Ca=(e,t,r)=>t in e?xa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ia=(e,t)=>{for(var r in t||(t={}))ja.call(t,r)&&Ca(e,r,t[r]);if(Pa)for(var r of Pa(t))Sa.call(t,r)&&Ca(e,r,t[r]);return e},Aa=(e,t)=>Ea(e,wa(t));const Ma=Symbol("AddCubemap"),_a=e=>({type:Ma,cubemap:e}),Da=(e,t)=>e.editor.prevState?Aa(Ia({},e),{editor:Aa(Ia({},e.editor),{prevState:Da(e.editor.prevState,t)})}):Aa(Ia({},e),{cubemaps:[t,...e.cubemaps]});var Ra=Object.defineProperty,Na=Object.defineProperties,Va=Object.getOwnPropertyDescriptors,Ba=Object.getOwnPropertySymbols,Za=Object.prototype.hasOwnProperty,Ta=Object.prototype.propertyIsEnumerable,za=(e,t,r)=>t in e?Ra(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,La=(e,t)=>{for(var r in t||(t={}))Za.call(t,r)&&za(e,r,t[r]);if(Ba)for(var r of Ba(t))Ta.call(t,r)&&za(e,r,t[r]);return e},Ua=(e,t)=>Na(e,Va(t));const Fa=Symbol("DeleteCubeMap"),Ya=e=>({type:Fa,id:e}),$a=(e,t)=>e.editor.prevState?Ua(La({},e),{editor:Ua(La({},e.editor),{prevState:$a(e.editor.prevState,t)})}):Ua(La({},e),{cubemaps:t?e.cubemaps.filter((e=>e.id!==t)):[]});var Qa=Object.defineProperty,Wa=Object.defineProperties,Ja=Object.getOwnPropertyDescriptors,Ka=Object.getOwnPropertySymbols,Ha=Object.prototype.hasOwnProperty,Ga=Object.prototype.propertyIsEnumerable,qa=(e,t,r)=>t in e?Qa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Xa=(e,t)=>{for(var r in t||(t={}))Ha.call(t,r)&&qa(e,r,t[r]);if(Ka)for(var r of Ka(t))Ga.call(t,r)&&qa(e,r,t[r]);return e};const ei=Symbol("UpdateCubeMap");var ti=Object.defineProperty,ri=Object.defineProperties,ni=Object.getOwnPropertyDescriptors,oi=Object.getOwnPropertySymbols,ai=Object.prototype.hasOwnProperty,ii=Object.prototype.propertyIsEnumerable,li=(e,t,r)=>t in e?ti(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ci=(e,t)=>{for(var r in t||(t={}))ai.call(t,r)&&li(e,r,t[r]);if(oi)for(var r of oi(t))ii.call(t,r)&&li(e,r,t[r]);return e},si=(e,t)=>ri(e,ni(t));const pi=Symbol("AddPanoramaViewer"),ui=e=>({type:pi,panoramaData:e}),di=(e,t)=>e.panoramaDataList?si(ci({},e),{panoramaDataList:[t,...e.panoramaDataList]}):si(ci({},e),{editor:si(ci({},e.editor),{prevState:e.editor.prevState?di(e.editor.prevState,t):void 0})}),fi=Symbol("DeletePanoramaViewer");var mi=Object.defineProperty,yi=Object.getOwnPropertySymbols,bi=Object.prototype.hasOwnProperty,hi=Object.prototype.propertyIsEnumerable,gi=(e,t,r)=>t in e?mi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vi=(e,t)=>{for(var r in t||(t={}))bi.call(t,r)&&gi(e,r,t[r]);if(yi)for(var r of yi(t))hi.call(t,r)&&gi(e,r,t[r]);return e};const Oi=Symbol("UpdatePanoramaViewer"),ki=(e,t)=>({type:Oi,id:e,props:t});var xi=Object.defineProperty,Ei=Object.defineProperties,wi=Object.getOwnPropertyDescriptors,Pi=Object.getOwnPropertySymbols,ji=Object.prototype.hasOwnProperty,Si=Object.prototype.propertyIsEnumerable,Ci=(e,t,r)=>t in e?xi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ii=(e,t)=>{for(var r in t||(t={}))ji.call(t,r)&&Ci(e,r,t[r]);if(Pi)for(var r of Pi(t))Si.call(t,r)&&Ci(e,r,t[r]);return e},Ai=(e,t)=>Ei(e,wi(t));const Mi=Symbol("AddTexture2D"),_i=e=>({type:Mi,texture2D:e}),Di=(e,t)=>Ai(Ii({},e),{editor:Ai(Ii({},e.editor),{prevState:e.editor.prevState?Di(e.editor.prevState,t):void 0}),texture2Ds:[t,...e.texture2Ds]});var Ri=Object.defineProperty,Ni=Object.defineProperties,Vi=Object.getOwnPropertyDescriptors,Bi=Object.getOwnPropertySymbols,Zi=Object.prototype.hasOwnProperty,Ti=Object.prototype.propertyIsEnumerable,zi=(e,t,r)=>t in e?Ri(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Li=(e,t)=>{for(var r in t||(t={}))Zi.call(t,r)&&zi(e,r,t[r]);if(Bi)for(var r of Bi(t))Ti.call(t,r)&&zi(e,r,t[r]);return e},Ui=(e,t)=>Ni(e,Vi(t));const Fi=Symbol("UpdateTexture2D"),Yi=(e,t)=>({type:Fi,orderId:e,props:t}),$i=(e,t,r)=>Ui(Li({},e),{editor:Ui(Li({},e.editor),{prevState:e.editor.prevState?$i(e.editor.prevState,t,r):void 0}),texture2Ds:e.texture2Ds.map((e=>e.orderId!==t?e:Ui(Li({},e),{props:Li(Li({},e.props),r)})))}),Qi=[(e,t)=>{if(t.type===n.ActionType.EditorProperty){if(0===t.nodeId)return Ir(Cr({},e),{editor:Cr(Cr({},e.editor),t.partial)});if(t.nodeId===e.editor.selectedSceneId)return e;const r=e.scenes.find((e=>e.id===t.nodeId));if(r)return Ir(Cr({},e),{scenes:e.scenes.map((e=>e!==r?e:Ir(Cr({},e),{editor:Cr(Cr({},e.editor),t.partial)})))})}return e},(e,t)=>t.type===n.ActionType.Property&&0===t.ids[0]?jo(jo({},e),t.partial):e,(e,t)=>t.type===aa?oa(na({},e),{editor:oa(na({},e.editor),{editorTaskStack:e.editor.editorTaskStack.concat(t)})}):e,(e,{type:t,scene:r,index:n})=>t===ba?ya(ma({},e),{editor:"Animation"!==r.type?ya(ma({},e.editor),{selectedSceneId:r.id}):e.editor,scenes:[...e.scenes.slice(0,n),r,...e.scenes.slice(n)]}):e,function e(t,{type:r,component:n}){return r===Tr?"Project"===t.type?Zr(Br({},t),{scenes:[n,...t.scenes]}):"PanoramaData"===t.type&&!1===n.editor.isOpen?Lr(t,n):Zr(Br({},t),{editor:Zr(Br({},t.editor),{prevState:e(t.editor.prevState,{type:r,component:n})})}):t},function e(t,{type:r,script:n}){return r===Gr?"Project"===t.type?Hr(Kr({},t),{customScripts:[n,...t.customScripts]}):Hr(Kr({},t),{editor:Hr(Kr({},t.editor),{prevState:e(t.editor.prevState,{type:r,script:n})})}):t},function e(t,{type:r,material:n}){return r===qn?"Project"===t.type?Gn(Hn({},t),{materials:[n,...t.materials]}):Gn(Hn({},t),{materials:[n,...t.materials],editor:Gn(Hn({},t.editor),{prevState:e(t.editor.prevState,{type:r,material:n})})}):t},function(e,{type:t,id:r,orderId:n,material:o}){if(t===so){const t=e.materials.findIndex((e=>n?e.orderId==n:e.id===r)),a=e.materials.slice();if(t>=0){const r=e.materials.splice(t,1)[0];return a.splice(t,1,co(lo({},r),{material:o})),"Project"===e.type?co(lo({},e),{materials:a}):co(lo({},e),{materials:a,editor:co(lo({},e.editor),{prevState:co(lo({},e.editor.prevState),{materials:a})})})}return e}return e},function e(t,{type:r,id:n}){if(r===sn){if(t.customScripts.some((({id:e})=>e===n))){const e=t.customScripts.filter((({id:e})=>e!==n));return cn(ln({},t),{customScripts:e})}if(t.editor.prevState)return cn(ln({},t),{editor:cn(ln({},t.editor),{prevState:e(t.editor.prevState,{type:r,id:n})})})}return t},function e(t,{type:r,id:n,partial:o}){if(r===On){if("Project"===t.type){const e=t.customScripts.map((e=>e.id===n?gn(gn({},e),o):e));return vn(gn({},t),{customScripts:e})}return vn(gn({},t),{editor:vn(gn({},t.editor),{prevState:e(t.editor.prevState,{type:r,id:n,partial:o})})})}return t},function e(t,r){return r.type===n.PlayerActionType.GlobalVariable||r.type===Ln?zn(Tn({},t),{settings:zn(Tn({},t.settings),{store:Tn({},r.store)}),editor:zn(Tn({},t.editor),{prevState:t.editor.prevState&&e(t.editor.prevState,r)})}):t},function e(t,{type:r,scripts:n}){return r===Mn?"Project"===t.type?An(In({},t),{customScripts:n}):An(In({},t),{editor:An(In({},t.editor),{prevState:e(t.editor.prevState,{type:r,scripts:n})})}):t},(e,{type:t,startIndex:r,endIndex:n})=>{if(t===vr){const t=(0,ur.q)(e.scenes,r,n);return o=((e,t)=>{for(var r in t||(t={}))br.call(t,r)&&gr(e,r,t[r]);if(yr)for(var r of yr(t))hr.call(t,r)&&gr(e,r,t[r]);return e})({},e),fr(o,mr({scenes:t}))}var o;return e},function e(t,{type:r,id:n}){if(r===Jo){if(t.scenes.some((({id:e})=>e===n))){const e=t.scenes.filter((({type:e})=>"Scene"===e)),r=t.scenes.filter((({id:e})=>e!==n));if(t.editor.selectedSceneId!==n||e.every((({id:e})=>e!==n)))return Wo(Qo({},t),{scenes:r});const o=e.findIndex((({id:e})=>e===n));return Wo(Qo({},t),{editor:Wo(Qo({},t.editor),{selectedSceneId:e[o===e.length-1?o-1:o+1].id}),scenes:r})}if(t.editor.prevState)return Wo(Qo({},t),{editor:Wo(Qo({},t.editor),{prevState:e(t.editor.prevState,{type:r,id:n})})})}return t},(e,t)=>t.type===sr?cr(lr({},e),{editor:cr(lr({},e.editor),{canvasScale:t.scale,editorTaskStack:e.editor.editorTaskStack.concat(t)})}):e,(e,t)=>{if(t.type===Vo){if(t.global&&e.editor.prevState)return Zo(e,(e=>No(Ro({},e),{settings:Ro(Ro({},e.settings),t.settings)})));const r=Ro(Ro({},e.settings),t.settings);return No(Ro({},e),{editor:No(Ro({},e.editor),{editorTaskStack:e.editor.editorTaskStack.concat(No(Ro({},t),{settings:(0,C.omit)(r,["active","taskStack"])}))}),settings:r})}return e},function(e,{type:t,id:r}){if(t===vo&&"Project"===e.type){const t=r?e.materials.filter((({id:e})=>e!==r)):[];return n=((e,t)=>{for(var r in t||(t={}))bo.call(t,r)&&go(e,r,t[r]);if(yo)for(var r of yo(t))ho.call(t,r)&&go(e,r,t[r]);return e})({},e),fo(n,mo({materials:t}))}var n;return e},ga.Z,va.Z,Oa.Z,ka.Z,function(e,{type:t,cubemap:r}){return t===Ma?Da(e,r):e},function(e,{type:t,id:r}){return t===Fa?$a(e,r):e},function(e,{type:t,orderId:r,props:n}){if(t===ei&&"Project"===e.type){const t=e.cubemaps.find((e=>e.orderId!==r));return t&&(t.props=Xa(Xa({},t.props),n)),o=Xa({},e),a={cubemaps:e.cubemaps},Wa(o,Ja(a))}var o,a;return e},function(e,{type:t,panoramaData:r}){return t===pi?di(e,r):e},function(e,{type:t,id:r}){if(t===fi){const t=r?(0,S.HE)(e).filter((({id:e})=>e!==r)):[];return(0,S.QR)(e,t)}return e},function(e,{type:t,id:r,props:n}){return t===Oi?(0,S.QR)(e,(0,S.HE)(e).map((e=>e.id===r?vi(vi({},e),n):e))):e},function(e,{type:t,texture2D:r}){return t===Mi?Di(e,r):e},function(e,{type:t,orderId:r,props:n}){return t===Fi?$i(e,r,n):e}];var Wi=r(60350),Ji=r(43559),Ki=(r.p,r(40182)),Hi=r.p+"images/976fc6c451e4e6a52935.png";const Gi={w750h1334:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAAHOCAYAAAB+e3fYAAAUO0lEQVR4Xu3cd8hliVkG8HdiCyb2rmCvKFbQrKioiOYPhaDGLrZYEbv/2IOKvdfE3hsqiAURVNS4gg0Lgr0rFizIxr4rL56RjzVZnzg3s3fO8/tgyWbmnfPd9/fc+3znnHtnb40vAgQIHAK3SBAgQOC2gELwXCBA4H8EFIInAwECCsFzgACB/y3gDMGzggABZwieAwQIOEPwHCBA4BEEXDJ4ehAg4JLBc4AAAZcMngMECLhk8BwgQCARcA8hUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCKgEBIlMwRKBBRCSdDWJJAIKIREyQyBEgGFUBK0NQkkAgohUTJDoERAIZQEbU0CiYBCSJTMECgRUAglQVuTQCJwmkJ4wrs+8JRbt269Y7K0GQIXF3jwoafe//2P+9WLH/cuH/A0hXDfk5/5pTPz0XfZz7cj8N8Ctx584v3f+/gfv9c5FMK9nqDHfx0CCuE6crj9KJwhXFcedY9GIVxX5ArhuvKoezQK4boiVwjXlUfdo1EI1xX5fe/2wJNuPXTrLa/rUXk0LQK35jFPf8b3Pfa37/V9T3NT8V4PwuMncA0CCuEaUvAYCFyJgEK4kiA8DALXIKAQriEFj4HAlQgohCsJwsMgcA0CCuEaUvAYCFyJgEK4kiAe4WF82Mz8/cz86Mz80114uE+emcfMzA/PzH/MzHvPzJ/MzE/OzIN34fv7Fo+igEJ4FPHDb/37M7P/fODM/Fn4Z+5k7Edm5vlm5v1m5p9n5meOfz7mKIg7ObY/e+UCCuHKA5qZP5yZPzheoHejEH7sKIT3nZm/m5n3mJk/PkrBGcL1P1/u6BEqhDviuyt/+FkVwsvMzOvOzMvNzAMz81sz8zsPezQvMjNvPDMve1wC/PXM/NrM7P/e/nremXnDmXnVmfnPmdm/z/9VNwrhb2bmjWbmH2bm92bm8TPz+jPz6zPz6jPzGvsXf4/C2j+7lxj7tb/28jPzBjPzEjPz58fMKxz//kd3Rc43eY4FFMJzTHbX/8DDC2FfkJ97vJBfemaeeZTBt8zMVxyP7jVn5gtn5k1mZmf2nsC+uH9xZt7ruBexv/ZJM/M+M/PKx/2BfaHv/J6R7BnCls0PzswvzMynz8zrzcx3HMd506NI9jm0L/CvmZn9b1Ls12sdxbJls4XwF8djfMVjbh+brysUUAhXGMrDHtLNQtgX1l427Iv2nWbm546f2N88M/vT9+1m5udn5ldm5nWOF/G+UJ9nZvYewKcd9yJ2/iNn5vNn5h+P4tj7Bc+Ymdc+biBuIeyv7ff42Zn5qONsYf8jIHv2sWWyx37zmfmh4+zjSccZwJ4RbBHsMfYS5G1n5ttm5oVm5rNn5lOun73zESqE68/9ZiG81Mz88sx85sx81sz8+/Hw952Abz9+mu+L8AuOS4CPO/73cTPznscLeH9vX5B7jI8/zjT2kmO/Xvj4ab+F8kiF8Jszc/Mvku3lxEPH9/jb4ybo02bmY2fmX49C+ryjlPbsRiFc6fNOIVxpMDce1s1C+IjjRbxvRX7TjZkXPd6a3NP7dz5+/W1m5r6Z2d/bew57P2HvO3zxzHzOzOwLdn9/zyxufu27DC/wfxTCJ87M19/4Q985M292XI689XFm8gkz89U3Zj50Zr7ouKxQCFf6vFMIVxrMsymET56ZD5iZLYQ97b/99YI3rvff5bgU2J/wL3bcP9jT/P2ruXvZ8CXH73/jcU9g7x/c/PqumdkzkUc6Q9gzkv1cxO2vvX/xFsdnFraI9gW/ZydbOre/PuQoo73PoBCu9HmnEK40mGdTCE88Tvv3ev5rj9P0Hd2bfb8xMz9wvNj2swN7b+AdjtP3ndkPHH33zHzZzHzq8dN6bzDefqdiZ/ZG494v2HsHj1QI++f23sCzKoT9s790XLbs99l3L/a4W2ZbBLcvWa5fvvARKoTrD/3mJcN+UnFvKu4LbkthS2Dv3O/NwX3B742+nzperHtjby8J9p2C/Ym/1/B7drGn+h88Mx9+lMI3HDcbt0Def2aePjM/fQeFsO9k7OPa+xt7E3OPtY/jqTOz70y4qXjFzzmFcMXhHA/tZiHsi3yv3/eG4t4I/NPjHYd9K3I/avyU4yfyvlvwajNz/8z8y/GuwP7//dzBXjq81XFfYW9E7r/v3BbH3ih8/uOdhf/vGcK+RbnvKuzZyN5Q/N3j7cktpcceNzM/4/rZOx+hQrj+3PfG3F8e7+vvJwc3syccp+CvdHy+YM8Q9j7B3unfr32bca/V9y3B/bWfOG707XX83vR796M49lgfNDP763tavzf9Xvy49/CVx0/5fTdif+J/68y8ynHavzcm9zMLt7/2nsZetuz33Hcc9msLYD/+vDcbv+coqC2Cvdm4H37ydYUCCuEKQ7nHH9L+PYi9h7E3J/c+x78dn3DcDyPtGcyezdx+m/MeX/V8D18hnC/TR3ujPdPYy4aXPD7gtJcs+27H2x83LPddkNtnMo/2Y/X9HyagEDwlnhsCe2mxlwf7acotg7+ama+bmS8/LnGeG9/TMS8goBAugOgQBM4ioBDOkqQ9CFxAQCFcANEhCJxFQCGcJUl7ELiAgEK4AKJDEDiLgEI4S5L2IHABAYVwAUSHIHAWAYVwliTtQeACAgrhAogOQeAsAgrhLEnag8AFBBTCBRAdgsBZBBTCWZK0B4ELCCiECyA6BIGzCCiEsyRpDwIXEFAIF0B0CAJnEVAIZ0nSHgQuIKAQLoDoEATOIqAQzpKkPQhcQEAhXADRIQicRUAhnCVJexC4gIBCuACiQxA4i4BCOEuS9iBwAQGFcAFEhyBwFgGFcJYk7UHgAgIK4QKIDkHgLAIK4SxJ2oPABQQUwgUQHYLAWQQUwlmStAeBCwgohAsgOgSBswgohLMkaQ8CFxBQCBdAdAgCZxFQCGdJ0h4ELiCgEC6A6BAEziKgEM6SpD0IXEBAIVwA0SEInEVAIZwlSXsQuICAQrgAokMQOIuAQjhLkvYgcAEBhXABRIcgcBYBhXCWJO1B4AICCuECiA5B4CwC/wW541PeLaYozwAAAABJRU5ErkJggg==",w686h386:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAACSCAYAAACjQLTgAAANaklEQVR4Xu3ba2xbZxkH8HOO75dc3MQ+SXx8iZc0cZKmaaqtKyANNg3Q0OjQ6FYJhDTBh2lsAwESYhIDhMQ0NI1d2Nj4gDQNjbGBNka/MCiIbR2gkWhJcyO1kyY5ceNL4tiOryf2QWeKpzRl65v02OTs/fdb28fved7f8+bfc2yXZfALAhCAwJYACwkIQAACVQEEAs4CBCDwvgACAYcBAhBAIOAMQAAClwvgDgGnAgIQwB0CzgAEIIA7BJwBCEDgQwTwyIDjAQEI4JEBZwACEMAjA84ABCCARwacAQhAgEQA7yGQKKEGApQIIBAoGTS2CQESAQQCiRJqIECJAAKBkkFjmxAgEUAgkCihBgKUCCAQKBk0tgkBEgEEAokSaiBAiQACgZJBY5sQIBFAIJAooQYClAggECgZNLYJARIBBAKJEmogQIkAAoGSQWObECARQCCQKKEGApQIIBAoGTS2CQESAQQCiRJqIECJAAKBkkFjmxAgEUAgkCihBgKUCCAQKBk0tgkBEgEEAokSaiBAiQACgZJBY5sQIBFAIJAooQYClAggECgZNLYJARIBBAKJEmogQIkAAoGSQWObECARQCCQKKEGApQIIBAoGTS2CQESAQQCiRJqIECJAAKBkkFjmxAgEUAgkCihBgKUCCAQKBk0tgkBEgEEAokSaiBAiQACgZJBY5sQIBFAIJAooQYClAggECgZNLYJARIBBAKJEmogQIkAAoGSQWObECARQCCQKKEGApQIIBAoGTS2CQESAQQCiRJqIECJAAKBkkFjmxAgEUAgkCihBgKUCCAQKBk0tgkBEgEEAokSaiBAiQACgZJBY5sQIBFAIJAooQYClAggECgZNLYJARIBBAKJEmogQIkAAoGSQWObECARQCCQKKEGApQIIBAoGTS2CQESAQQCiRJqIECJAAKBkkFjmxAgEUAgkCihBgKUCCAQKBk0tgkBEgEEAokSaiBAiQACgZJBY5sQIBFAIJAooQYClAggECgZNLYJARIBTQXC8ZM5mWRTqIHAPhM4+4+XrZ/YZz39z3YQCFqYEnrUugACoRYTxB1CLVSxZh0EEAi1QEYg1EIVa9ZBAIFQC2QEQi1UsWYdBBAItUBGINRCFWvWQQCBUAtkBEItVLFmHQQQCHVAxiUgAAGVBTT1saPKe8dyEIDADgEEAo4EBCDwvgACAYcBAhBAIOAMQAAClwvgDgGnAgIQwB0CzgAEIIA7BC2dgerdW73/h+fO6/6/+tDSrD4yveKRYX+OUn/kyJFsoVCYmp6ePlLPFnt6ep63Wq0nRVE8FI/Hz7vd7rtdLtfjkUjk9mg0erqeveBa9RdAINTfnOSK+qNHj0r5fH56amqqj+QFatUEg8EXrVbrHQsLC8FEIvEfQRDu5Xn+yYsXL94WiUT+oNZ1sM7+FEAg7M+57JtAYBjG6HA4LMlkMsswzOb+5EJXagkgENSSVHedDwwEh8Nxi9Pp/LrJZPJFo9Gfx2KxZxmG2fk+A9va2nrK6XTeazabhUwm85Yoig8UCoWFnW22tLScaG9v/36lUknPzc3d1dnZ+fD2O4TGxsZug8FwfT6fP5PL5SJWq7XDYrHcVCwW/yRJUoPP5/uF2Wz2xuPxxy5evPjMzvUbGhpaXS7Xkzab7WgsFntsZWXllwcOHLi9VCqtbGxs/F1dNqx2tQIIhKsVrM3rLwuEjo4OL8/z4xzHNcmynJdlWeY4ziLLcikajR5bXl4eU1pxOByDfr//LMdx9kqlovyrzrAsa2FZlksmkz+dm5v77lbL+sHBwSmDwdAty3JBCRWlTpKkFYPBwH/QI4PH47nN5XK9UigU3jGbzdcqvTAMo2dZ1lAulzPvvvtuM8MwFeWygUDgEYfD8S1ZljdlWS4q65fL5XWlt3w+/8bMzMzNteHDqnsVQCDsVa62r7ssEAYHB0WDweBOJpNPl0ql74iiWPH5fPe3trY+LMuyNDo6amIYhhsaGorqdLqWxcXFW+Lx+BnlB53n+aNut/vtcrmcGBsb8zEMU+jt7X3NZrPdmk6nT+fz+TtEUZQ7OzuVH+B7WJZlrhQIsixXIpHIV/V6/W+NRqPRbrfPGAyGtpWVla8sLy8/73K5jguC8Fa5XE4vLS0dWltbW3G5XNcKgvBXlmXN2Wz2LwiE2h6ivayOQNiLWu1fc0kg2O32vp6enklJkpbHx8eF7Zfv6ek5Y7fbbwyFQjenUqmzgUDgIZZldeFw+L5tddzw8HBSlmVDJBJxRqPR0tDQ0BrHcdzS0hIfj8c3tmoNg4ODIYPB4LlSIGSz2ddnZmY+W31c6evrO2GxWF7NZDKPzs7Ofrurq+ulpqamk+Fw+Ib19fU3qr10dHTc197e/gQCofaHaC9XQCDsRa32r7kkEARBuJ/n+cfX19e/EQ6Hn9h+ebfb/bm2trbTmUzmpdnZ2TurP9gNDQ3XNzY2XmcymfpsNtvHjUbjwUqlUhRF0bm5uXkgEAiES6XS1Llz5w5vXy8YDP7GarXeeaVAWFtb+/H8/PyD1dcKgnCM5/l/ZjKZJ2dnZ+8fGBiYNplMvSMjI3aGYd57dFF+OZ3ONo/HE8nlcmdwh1D7g7TbKyAQditWn/pLAsHr9T7odDp/VCwWPzMxMfH69ha8Xm+f0+mczOfzf5uamrqR53nlTcJf6XS6A0pduVzeqFQq5/V6/YAsy2UlEAwGg9De3j4hSdI74+Pjx7ev19/f/7TZbL77SoGwM5wEQbiO5/l/VQPh0KFDC0aj0TsyMmJRHlGq12hubm7u7OyM4j2E+hyk3V4FgbBbsfrUXxIIbW1t97jd7qeSyeQDc3NzD21vgef5OwVBeDGRSDwaj8cfCQaDSwzD6FZWVk4mk8mzuVwuqXxcODw8vCrLskkUxVZZlhu9Xu+CJEnhc+fO9e64Q3jBarWeutpA6O3tPWuz2T42MjKivMmYql6jqanpmq6urhAeGepzkHZ7FQTCbsXqU39JIFgsFndfX9+S8snC6OioftvHjOzAwMCsyWTqmpycvMZms/n9fr/y8eDp6enpW6ut2u1258GDB5eV3y8uLrYkEonM0NBQnOO45lgs5hdF8b2/U75zcPjw4UW9Xu+62kDw+/0/aWlp+V4qlXooFAo9sLU+293d/UJjY+MpBEJ9DtJur4JA2K1Yfeov+5QhGAz+22q1Hi0UCm+Fw+EvcRy36fF4fma32+/Y3NxcHhsbE8xmc6C/vz9cLpfX5ufnr02lUnGTyeQKBoNndDqd8umCHAqFWlKpVNLj8dzjcrme2tzcFGdmZm7S6XQZn8/3nNVqVT4KlK82EJRHA7/fP6fT6ZrT6fSzsVjsd8obilar9YRCiECoz0Ha7VUQCLsVq099NRCmpqam+rcuae/v73/TZDINKt8p2PqzcrFYnJ2fn/9UNpuNKn8WCASedzgcp5TvBlRbLZVKk6lU6k2n03n30tLSF2Ox2O+Vv+vu7n6moaHhLpZljcrvle8jSJKkPPsf3BkIoiieiEajr3k8nhMul+vVK72HoKzX0tJyzOPxvMJxnFP55EP5XkQ6nX6xubn5a+l0+o/nz5//fH04cRVSAQQCqVSd6/x+f28+ny9Go9H5bZdm29ra+nQ63bDyZ5IkjcdisckdXyl+r4bjOCU4jCzLjoqiOK08Dvj9fu/q6moik8kkqrfwPM936nS6Y8r3nIrF4ht6vb5ktVodFy5cmGMYptTU1ORwOBx8NpsVlY8nnU6n3WazCclkMqrcaVR78/v9ZoZh/Mp7FrFYTAmn1q03E4s8zws6nc64sbERNxqNfp/PN7K6uvr4hQsXvllnVlzuCgIIBByRmgh4vd4fOp3OHywsLHwykUhUv6LMBQKB5xwOx5dDodCnU6nUn2tycSy6ZwEEwp7p8MIPE3C5XIcFQXhHuXvJ5XIvMwyzynHccYvFcr0kSXPj4+NB5Q4EivtLAIGwv+bxkeqmubn5Br/f/2uO43jl/zpUKpWcJElvT0xMfIFhmOq3Iz9Se9b6ZhAIWp8g+oeAigIIBBUxsRQEtC6AQND6BNE/BFQUQCCoiImlIKB1AQSC1ieI/iGgogACQUVMLAUBrQsgELQ+QfQPARUFEAgqYmIpCGhdAIGg9QmifwioKIBAUBETS0FA6wIIBK1PEP1DQEUBBIKKmFgKAloXQCBofYLoHwIqCiAQVMTEUhDQugACQesTRP8QUFEAgaAiJpaCgNYFEAhanyD6h4CKAggEFTGxFAS0LoBA0PoE0T8EVBRAIKiIiaUgoHUBBILWJ4j+IaCiAAJBRUwsBQGtCyAQtD5B9A8BFQUQCCpiYikIaF0AgaD1CaJ/CKgogEBQERNLQUDrAggErU8Q/UNARQEEgoqYWAoCWhdAIGh9gugfAioKIBBUxMRSENC6AAJB6xNE/xBQUQCBoCImloKA1gUQCFqfIPqHgIoCCAQVMbEUBLQugEDQ+gTRPwRUFEAgqIiJpSCgdQEEgtYniP4hoKIAAkFFTCwFAa0LIBC0PkH0DwEVBRAIKmJiKQhoXQCBoPUJon8IqCiAQFARE0tBQOsCCAStTxD9Q0BFAQSCiphYCgJaF/gvCJusz9OqcNoAAAAASUVORK5CYII="};var qi=Object.defineProperty,Xi=Object.defineProperties,el=Object.getOwnPropertyDescriptors,tl=Object.getOwnPropertySymbols,rl=Object.prototype.hasOwnProperty,nl=Object.prototype.propertyIsEnumerable,ol=(e,t,r)=>t in e?qi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const al=(e,...t)=>{return void 0,r=[e,...t],o=function*(e,t={}){return t.enabled3d?il(e,(r=((e,t)=>{for(var r in t||(t={}))rl.call(t,r)&&ol(e,r,t[r]);if(tl)for(var r of tl(t))nl.call(t,r)&&ol(e,r,t[r]);return e})({},t),o={nodes:[yield(0,n.createNode)("3D场景","Scene3D",Ki.x,"")],edit3d:!0},Xi(r,el(o)))):il(e,t);var r,o},new Promise(((e,t)=>{var n=e=>{try{i(o.next(e))}catch(e){t(e)}},a=e=>{try{i(o.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,a);i((o=o.apply(undefined,r)).next())}));var r,o},il=(e,{loading:t=!1,playable:r,type:n="Scene",width:o=750,height:a=1334,nodes:i=[],edit3d:l=!1,isOpen:c=!0}={})=>{const s=(0,Ki.x)();return r?((e,t,r)=>({name:"加载场景",id:e,sceneId:916,orderId:1,type:"Scene",editor:{selected:{},scale:50,count:140,moment:0,playable:!0,loading:!0,capture:Hi,dataVersion:Wi.M},props:{[e]:{type:"Scene",name:"加载场景",width:t,height:r,x:0,y:0},1654484707107:{x:0,y:0,width:750,height:1334,rotation:0,anchorX:.5,anchorY:.5,fillType:0,scaleX:1,scaleY:1,alpha:1,enabled:!0,color:"black",top:!0,bottom:!0,center:!0,name:"蒙层",url:"https://lf6-cdn2-tos.bytegoofy.com/byte-creativelab/platform/fe/images/26aa440110c228290ce5.png",_editor:{name:"mask",originWidth:311,originHeight:555},type:"Sprite"},1654484707108:{x:0,y:1066,width:750,height:34,rotation:0,anchorX:.5,anchorY:.5,scaleX:1,scaleY:1,alpha:1,enabled:!0,name:"主标题文案",text:"加载页的主标题",fontSize:34,layoutByPercent:!0,color:"rgba(255,255,255,1)",align:"center",valign:"middle",top:!0,bottom:!0,center:!0,wordWrap:!0,bold:!0,italic:!1,type:"Text"},1654484707109:{x:0,y:1122,width:750,height:29,rotation:0,anchorX:.5,anchorY:.5,scaleX:1,scaleY:1,alpha:1,enabled:!0,layoutByPercent:!0,name:"副标题文案",text:"加载页的副标题",fontSize:29,color:"rgba(255,255,255,1)",align:"center",valign:"middle",wordWrap:!0,bold:!0,italic:!1,type:"Text",top:!0,bottom:!0,center:!0},1656473199114:{x:195,y:706,width:360,height:360,rotation:0,anchorX:.5,anchorY:.5,scaleX:1,scaleY:1,top:!0,bottom:!0,center:!0,alpha:1,enabled:!0,layoutByPercent:!0,name:"试玩图标",url:"material/private/preview/4b3f06ff990f5b0e0ff59f4030bf74a1/sequence.json",_editor:{name:"试玩图标",originWidth:360,originHeight:360,cover:"https://creativelab-proxy.bytedance.com/api/upload/bucket/files/images/d9b574d367be6f84456c002938cd3866.png"},type:"FrameAnime"},1656473199115:{script:"Controller",name:"试玩图标",time:0,duration:1100,loop:!0,type:"Controller"}},nodes:[{id:1654484707107,type:"Sprite",editor:{isLocked:!0,isHidden:!1},name:"蒙层",enabled:!0,scripts:[],nodes:[]},{id:1654484707108,type:"Text",editor:{isLocked:!0,isHidden:!1},name:"主标题文案",enabled:!0,scripts:[],nodes:[]},{id:1654484707109,type:"Text",editor:{isLocked:!0,isHidden:!1},name:"副标题文案",enabled:!0,scripts:[],nodes:[]},{id:1656473199114,type:"FrameAnime",editor:{isLocked:!0,isHidden:!1,animations:[["试玩图标",1100]]},name:"试玩图标",enabled:!0,scripts:[{id:1656473199115,type:"Controller",name:"试玩图标",time:0,duration:1100,loop:!0,script:"Controller"}],nodes:[]}],history:{undoStack:[],redoStack:[]}}))(s,o,a):t?((e,t,r)=>({name:"加载场景",id:e,sceneId:916,orderId:1,type:"Scene",editor:{selected:{},scale:50,count:140,moment:0,loading:!0,capture:Gi[`w${t}h${r}`],dataVersion:Wi.M},props:{[e]:{type:"Scene",name:"加载场景",width:t,height:r,x:0,y:0},1624850268102:{name:"rectangle",shapeType:"rectangle",x:(t-460)/2,y:r-98-67-36,width:460,height:18,rotation:0,anchorX:.5,anchorY:.5,scaleX:1,scaleY:1,fillColor:"rgba(57,85,246,1)"},1614087902139:{name:"文本节点",x:(t-196)/2,y:r-98-67,width:196,height:98,text:"loading",fontSize:48,color:"rgba(51,51,51,1)",rotation:0,anchorX:.5,anchorY:.5,scaleX:1,scaleY:1,align:"center",top:!1,bottom:!0,left:!1,right:!1,center:!1,middle:!1}},nodes:[{id:1624850268102,name:"rectangle",type:"Shape",editor:{isLocked:!1,isHidden:!1},scripts:[],nodes:[]},{id:1614087902139,name:"文本节点",type:"Text",editor:{isLocked:!1,isHidden:!1},scripts:[],nodes:[]}],history:{undoStack:[],redoStack:[]}}))(s,o,a):(0,Ji.m7)({id:s,sceneId:s,orderId:s,type:n,editor:{loading:t,dataVersion:Wi.M,edit3d:l,isOpen:c},props:{name:e,width:o,height:a},nodes:i})};function ll(e,t=!0){const r=(0,Ji.GV)(e);return r.id=(0,Ki.x)(),t&&r.props&&(r.props.name=`${e.name} 复制`),(0,Ji.m7)(r)}const cl=(e="Project",t)=>{var r;return["Component","Model","Particle3D"].includes(e)?"Project":["PanoramaData"].includes(e)?null!=(r=null==t?void 0:t.editor.propsMode)?r:"Project":"Product"},sl=(e,t="Project",r)=>{var n;return{id:0,type:t,name:t,teamId:"",editor:{prevState:r,dataVersion:Wi.t,selectedSceneId:e[0].id,loading:"Project"===t,soundVolume:100,canvasScale:1,playRate:1,playing:0,editorTaskStack:[],settingsOn:!["Component","Model","Particle3D","PanoramaData"].includes(t),sceneMode:cl(t,r),propsMode:cl(t,r),count:200,readOnly:!1,panoramaEdit:{panoramaDataOrderId:0,panoramaId:0,spaceId:0,panoramaSpaceId:0,mainSceneId:0,type:void 0}},scenes:e,customScripts:[],materials:[],cubemaps:[],texture2Ds:[],settings:{basePath:(0,te.zC)(),store:(null==(n=e[0])?void 0:n.editor.store)||{},typeOfPlay:0,multiTouchEnabled:!1}}};var pl=Object.defineProperty,ul=Object.defineProperties,dl=Object.getOwnPropertyDescriptors,fl=Object.getOwnPropertySymbols,ml=Object.prototype.hasOwnProperty,yl=Object.prototype.propertyIsEnumerable,bl=(e,t,r)=>t in e?pl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hl=(e,t)=>{for(var r in t||(t={}))ml.call(t,r)&&bl(e,r,t[r]);if(fl)for(var r of fl(t))yl.call(t,r)&&bl(e,r,t[r]);return e},gl=(e,t)=>ul(e,dl(t));const vl="RestoreState",Ol=sl([il("加载场景",{loading:!0}),il("主场景")],"Project"),kl=e=>({type:vl,state:e});function xl(e=Ol,t){if(t.type===vl)return t.state;if(e.editor.playing&&!t.playing)return xl((({selectedSceneId:e,prevState:t,canvasScale:r,playRate:n,soundVolume:o,count:a},{selected:i,scale:l,moment:c})=>{if(!t||t.editor.playing)throw new Error("Project's preState is corrupted!");return gl(hl({},t),{editor:gl(hl({},t.editor),{selectedSceneId:e,canvasScale:r,soundVolume:o,playRate:n,count:a}),scenes:t.scenes.map((t=>t.id!==e?t:gl(hl({},t),{editor:gl(hl({},t.editor),{selected:i,moment:c,scale:l})})))})})(e.editor,(0,S.zh)(e).editor),t);const r=((e,t)=>{for(const r of Qi){const n=r(e,t);if(n!==e)return n}return e})(e,t);if(r!==e)return r;const{editor:{selectedSceneId:o},scenes:{length:a}}=e,i=e.scenes.findIndex((({id:e})=>e===o));for(let r=0;r<a;r++){const o=e.scenes[(r+i+a)%a],l=Xt(o,t);if(l!==o){const r=gl(hl({},e),{scenes:e.scenes.map((e=>e.id===o.id?l:e))});return t.type===n.ActionType.Select&&e.editor.settingsOn&&(r.editor=gl(hl({},r.editor),{settingsOn:!1})),t.type===n.ActionType.Select&&e.editor.panoramaEdit.type&&(r.editor=gl(hl({},r.editor),{panoramaEdit:gl(hl({},e.editor.panoramaEdit),{type:void 0})})),r}}return e}},84215:function(e,t,r){"use strict";r.d(t,{Ft:function(){return v},jo:function(){return g}});var n=r(40985),o=r(48837),a=r(73760),i=r(93800),l=Object.defineProperty,c=Object.defineProperties,s=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&f(e,r,t[r]);if(p)for(var r of p(t))d.call(t,r)&&f(e,r,t[r]);return e},y=(e,t)=>c(e,s(t)),b=(e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r};const h=o.ActionType.Property,g=(e,t,r)=>m({type:h,ids:e,partial:t},r);t.ZP=(e,t)=>{if(t.type===h){const{stateId:r}=e.editor,[l,...c]=t.ids,[s,p]=O(e.props,l,(e=>0!==c.length?k(c,e,t.partial,r):t.replace?t.partial.type||!e.type?[(0,a.cloneDeep)(t.partial),e]:[(0,a.cloneDeep)(y(m({},t.partial),{type:e.type})),e]:v(e,(0,a.cloneDeep)(t.partial),r)));if(p)return t.undo=y(m({},t),{partial:p}),t.flag!==o.ActionFlag.Continuous&&e.props[l]&&0===c.length?function(e,t,{partial:r,replace:o}){const l=n.Xj.reduce(((e,t)=>(t in r&&e.push([t,r[t]]),e)),[]);if(!l.length)return e;const c=Object.fromEntries(l);if(t===e.id)return m(m({},e),c);const s=(0,i.$H)(e.nodes,(e=>e.id===t?m(m({},e),c):e.scripts.find((({id:e})=>e===t))?y(m({},e),{scripts:e.scripts.map((e=>e.id===t?o?x(e,r):m(m({},e),c):e))}):e));return s===e.nodes&&e.editor.stateId?y(m({},e),{props:(0,a.mapValues)(e.props,(n=>{var a,i;const l=null==(a=n.state)?void 0:a[e.editor.stateId];return(null==(i=null==l?void 0:l.scripts)?void 0:i.find((({id:e})=>e===t)))?y(m({},n),{state:y(m({},n.state),{[e.editor.stateId]:y(m({},l),{scripts:l.scripts.map((e=>e.id===t?o?x(e,r):m(m({},e),c):e))})})}):n}))}):y(m({},e),{nodes:s})}(y(m({},e),{props:s}),l,t):y(m({},e),{props:s});console.warn("No such id in current scene",t)}return e};const v=(e,t,r)=>{var n,o;if(r&&(null==(n=e.state)?void 0:n[r])){const[n,a]=v(null==(o=e.state)?void 0:o[r],t);return[y(m({},e),{state:y(m({},e.state),{[r]:n})}),a]}return[m(m({},e),t),Object.keys(t).reduce(((t,r)=>(t[r]=null==e?void 0:e[r],t)),{})]},O=(e,t,r)=>{const o={};let i;const l=e=>{const o={};for(const l of["scripts","elseScripts"])if(Array.isArray(e[l])){o[l]=[];for(const c of e[l])if(i)o[l].push(c);else if(c.id===t){const[e,t]=r(c.props);i=t,o[l].push(y(m({},c),{props:e}))}else o[l].push(y(m({},c),{props:(0,a.mapValues)(c.props,((e,o)=>o.startsWith("$")?(0,n.s_)(e,(e=>{if((null==e?void 0:e.id)===t){const[t,...n]=r(y(m({},e.props),{state:e.state})),o=t,{state:a}=o,l=b(o,["state"]),[c]=n;return i=c,y(m({},e),{props:l,state:a})}return e})):e))}))}return i?m(m({},e),o):e};for(const[n,a]of Object.entries(e)){const e=Number(n);if(i)o[e]=a;else if(e===t){const[t,n]=r(a);o[e]=t,i=n}else o[e]=l(a)}return[i?o:e,i]},k=(e,t,r,o)=>{let i={};const l=t.compProps.map((t=>{var l,c,s;return(0,a.isEqual)(t.ids,e)?y(m({},t),o?{name:null!=(l=r.name)?l:t.name,state:y(m({},t.state),{[o]:m(m({},null==(c=t.state)?void 0:c[o]),r)})}:{name:null!=(s=r.name)?s:t.name,props:t.props.map((e=>e.key in r?(i[e.key]=e.value,y(m({},e),{value:r[e.key]})):e))}):y(m({},t),{props:t.props.map((t=>t.key.startsWith("$")?y(m({},t),{value:(0,n.s_)(t.value,(t=>{if(t.id===e[e.length-1]){const[e,...n]=v(y(m({},t.props),{state:t.state}),r,o),a=e,{state:l}=a,c=b(a,["state"]),[s]=n;return i=s,y(m({},t),{props:c,state:l})}return t}))}):t))})}));return[y(m({},t),{compProps:l}),i]},x=(e,t)=>{const r={[e.id]:t};return(0,n.HA)((0,n.uz)([e],r),r)[0]}},93800:function(e,t,r){"use strict";r.d(t,{$H:function(){return m},ID:function(){return f},Pd:function(){return d},WM:function(){return y}});var n=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&s(e,r,t[r]);if(i)for(var r of i(t))c.call(t,r)&&s(e,r,t[r]);return e},u=(e,t)=>o(e,a(t));const d=(e,t)=>{for(const r of e){if(r.id===t)return[e.filter((e=>e.id!==t)),r];const[n,o]=d(r.nodes,t);if(o){const{id:t}=r;return[e.map((e=>e.id===t?u(p({},e),{nodes:n}):e)),o]}}return[e]},f=(e,t,r,n,o)=>{for(const{id:e,nodes:a}of t){const i=f(e,a,r,n,o);if(i!==a)return t.map((t=>t.id===e?u(p({},t),{nodes:i}):t))}return e===r?n<0||n>=t.length?t.concat(o):[...t.slice(0,n),o,...t.slice(n)]:t},m=(e,t)=>{for(const r of e){const n=t(r),{id:o}=r;if(n!==r)return e.map((e=>e.id===o?n:e));const a=m(r.nodes,t);if(a!==r.nodes)return e.map((e=>e.id===o?u(p({},e),{nodes:a}):e))}return e};function y(e,t){return e.reduce(((e,r)=>{const n=t(r);return n.nodes.length&&(n.nodes=y(n.nodes,t)),e.push(n),e}),[])}},23515:function(e,t,r){"use strict";r.d(t,{B:function(){return f},Z:function(){return m}});var n=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&s(e,r,t[r]);if(i)for(var r of i(t))c.call(t,r)&&s(e,r,t[r]);return e},u=(e,t)=>o(e,a(t));const d=Symbol("DeleteLayerCollisions"),f=e=>({type:d,key:e});function m(e,{type:t,key:r}){var n;if(t===d){const t=null!=(n=e.settings.layerCollisions)?n:{};return t[`${r}`]&&delete t[`${r}`],u(p({},e),{settings:u(p({},e.settings),{layerCollisions:t})})}return e}},41502:function(e,t,r){"use strict";r.d(t,{Z:function(){return m},y:function(){return f}});var n=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&s(e,r,t[r]);if(i)for(var r of i(t))c.call(t,r)&&s(e,r,t[r]);return e},u=(e,t)=>o(e,a(t));const d=Symbol("UpdateLayerName"),f=e=>({type:d,key:e});function m(e,{type:t,key:r}){var n;if(t===d){const t=null!=(n=e.settings.layerCollisionName)?n:[];return u(p({},e),{settings:u(p({},e.settings),{layerCollisionName:t.filter((({key:e})=>e!==r))})})}return e}},66234:function(e,t,r){"use strict";r.d(t,{Z:function(){return m},p:function(){return f}});var n=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&s(e,r,t[r]);if(i)for(var r of i(t))c.call(t,r)&&s(e,r,t[r]);return e},u=(e,t)=>o(e,a(t));const d=Symbol("UpdateLayerCollisions"),f=(e,t)=>({type:d,key:e,value:t});function m(e,{type:t,key:r,value:n}){var o;if(t===d){const t=p({},null!=(o=e.settings.layerCollisions)?o:{});return t[`${r}`]=n,u(p({},e),{settings:u(p({},e.settings),{layerCollisions:t})})}return e}},24113:function(e,t,r){"use strict";r.d(t,{Z:function(){return m},o:function(){return f}});var n=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&s(e,r,t[r]);if(i)for(var r of i(t))c.call(t,r)&&s(e,r,t[r]);return e},u=(e,t)=>o(e,a(t));const d=Symbol("UpdateLayerName"),f=(e,t)=>({type:d,idx:e,value:t});function m(e,{type:t,idx:r,value:n}){var o;if(t===d){const t=[...null!=(o=e.settings.layerCollisionName)?o:[]];return t.splice(r,1,n),u(p({},e),{settings:u(p({},e.settings),{layerCollisionName:t})})}return e}},35035:function(e,t,r){"use strict";r.d(t,{cg:function(){return a},Ew:function(){return O},wf:function(){return v},ZP:function(){return k}});var n=r(30027);const o=Symbol("ChangeCategory"),a=e=>({type:o,playing:["Logging",""].includes(e),category:e});var i=Object.defineProperty,l=Object.defineProperties,c=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&d(e,r,t[r]);if(s)for(var r of s(t))u.call(t,r)&&d(e,r,t[r]);return e},m=(e,t)=>l(e,c(t));const y=Symbol("ChangeDatabase"),b=Symbol("ChangeProvider"),h={provider:"project",public:[],project:[],private:[],shared:[]},g={Effect:h,Sprite:h,Sound:h,Video:h,NativeLoadingVideo:h,NativeVideo:h,PVAlphaVideo:h,VRVideo:h,Animation:h,PSD:h,Lottie:h,Particle:h,FrameAnime:h,DragonBones:h,Spine:h,Live2d:h,CustomScript:h,Font:h,Material:h,Cubemaps:h,Model:h,Animation3D:h,Particle3D:h,Texture2D:h,AlphaVideo:h},v=(e,t)=>({type:b,category:e,provider:t}),O=(e,t,r)=>({type:y,category:e,provider:t,data:r});var k=(0,n.UY)({category:(e="",t)=>t.type===o?t.category:e,database:(e=g,t)=>t.type===y?m(f({},e),{[t.category]:m(f({},e[t.category]),{[t.provider]:t.data})}):t.type===b?m(f({},e),{[t.category]:m(f({},e[t.category]),{provider:t.provider})}):e})},42753:function(e,t,r){"use strict";r.d(t,{L7:function(){return Er},e4:function(){return vr},De:function(){return Et},yc:function(){return se},lZ:function(){return ce},qf:function(){return En},as:function(){return b},H0:function(){return rt},mF:function(){return rr},Qf:function(){return h},lA:function(){return Xt},Iw:function(){return er},g0:function(){return xt},Ej:function(){return kt},i1:function(){return Kr.i1},fn:function(){return xe},jE:function(){return qr.jE},cm:function(){return qr.cm},Bv:function(){return Kr.Bv},qV:function(){return Jr},$k:function(){return or},ai:function(){return jr},kt:function(){return Yr},zY:function(){return fe},GW:function(){return Qr},ww:function(){return Xr},zm:function(){return Z},DF:function(){return Bt},a$:function(){return v},XF:function(){return wt},yJ:function(){return Ee},Tc:function(){return T},mG:function(){return qr.mG},r2:function(){return He},LT:function(){return ze},Ep:function(){return O},Yb:function(){return z},Fg:function(){return Zt},ss:function(){return R},I7:function(){return Tt},i5:function(){return sn},kY:function(){return Ne},gn:function(){return o},AD:function(){return nr},Wx:function(){return K},k4:function(){return Gr},_H:function(){return k},fc:function(){return x},ep:function(){return ar},n:function(){return Hr},gU:function(){return tr},PY:function(){return ot},rk:function(){return nt},wN:function(){return Pn},nx:function(){return xn},$r:function(){return at},Og:function(){return ie},vt:function(){return ir},rV:function(){return st},Q3:function(){return zt},Pc:function(){return $r}});var n=r(22142);function o(e,t){const r=(0,n.useRef)(t);r.current=t,(0,n.useEffect)((()=>{const t=t=>{try{const{type:n}=JSON.parse(t.data);n===e&&t.source.postMessage(JSON.stringify({type:n,data:r.current()}),t.origin)}catch({message:e}){}};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}}),[e,r])}var a=r(42761),i=r(3197),l=r(19104),c=r(40985),s=r(8385),p=Object.defineProperty,u=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));function b(e,t,r){return y(this,null,(function*(){return(0,i.aY)({projectId:e,name:t,sceneContent:JSON.stringify(r)})}))}const h=(e,t)=>{const r=t.reduce(((t,r)=>{const n=new RegExp(`${(0,s.V)(e)}(?:$|_(\\d+))`).exec((0,s.V)(r.name));if(n){const e=Number(n[1]||0);e>t&&(t=e)}return t}),-1);return r>-1?(0,s.o)(`${(0,s.V)(e)}_${r+1}`):e},g=({customScripts:e,editor:{prevState:t}},r)=>!e.some((e=>e.name.slice(0,-3)===r.slice(0,-3)))&&(!t||g(t,r));function v(){const{getState:e,dispatch:t}=(0,a.oR)();return(0,n.useCallback)(((r,n,o,a="",i=0)=>y(this,null,(function*(){const{project:s}=e(),p=s.id;r=h(r,(0,c.o$)(e().project).customScripts);const{id:u,orderId:d}=yield b(p,r,{type:"CustomScript",jsCode:a,ideCode:o||"",language:n,status:i});return t((0,l.addCustomScript)({id:u,orderId:d,name:r,type:"CustomScript",jsCode:a,ideCode:o||"",language:n,status:i})),{id:u,orderId:d,projectId:p}}))),[e,t])}function O(){const{getState:e,dispatch:t}=(0,a.oR)();return(0,n.useCallback)(((r,n,o=!0)=>y(this,null,(function*(){const{project:a}=e();if(o&&(0,c.rz)(a,n))throw new Error("脚本正在使用，无法删除");yield(0,i.r4)(r).then((()=>{t((0,l.deleteCustomScript)(r))}))}))),[e,t])}function k(){const{getState:e,dispatch:t}=(0,a.oR)();return(0,n.useCallback)(((r,n)=>y(this,null,(function*(){const{project:o}=e(),a=o.id;if(g(o,n))return yield(0,i.aq)({id:r,projectId:a,name:n}),t((0,l.updateCustomScript)(r,{name:n})),{id:r,name:n};throw new Error("项目中已有同名脚本，请修改后重新提交")}))),[e,t])}function x(){const{dispatch:e}=(0,a.oR)();return(0,n.useCallback)(((t,r,n)=>y(this,null,(function*(){return e((0,l.updateCustomScript)(t,((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&m(e,r,t[r]);if(u)for(var r of u(t))f.call(t,r)&&m(e,r,t[r]);return e})({name:r},n))),{id:t,name:r,content:n}}))),[e])}var E=r(63414),w=r(48837),P=Object.defineProperty,j=Object.defineProperties,S=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,M=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_=(e,t)=>{for(var r in t||(t={}))I.call(t,r)&&M(e,r,t[r]);if(C)for(var r of C(t))A.call(t,r)&&M(e,r,t[r]);return e};const D=({project:e})=>{if(0!==e.settings.typeOfPlay)return!1;const{editor:{selected:t},props:r}=(0,c.zh)(e),{nodeIds:n}=(0,c.bN)(t);return 1===n.length&&"Sprite"===r[n[0]].type},R=()=>{const{dispatch:e,getState:t}=(0,a.oR)();return{canIntoButton:(0,a.v9)(D),onIntoButton:(0,n.useCallback)((()=>{return void 0,null,r=function*(){if(D(t())){const{id:o,editor:{selected:a},nodes:i,props:l}=(0,c.zh)(t().project),[s]=Object.keys(a).map(Number),[{nodes:p},{id:u,nodes:d}={id:o,nodes:i}]=(0,c.qC)(i,s),f=yield(0,w.createNode)(l[s].name,"Button",c.xv,l[s].url);e((0,E.groupActions)([(0,E.delNode)(s),(0,E.addFromNode)(u,d.findIndex((({id:e})=>e===s)),(r=_({},f),n={props:_(_({},f.props),l[s]),nodes:(0,c.Pe)(p,l)},j(r,S(n))))])),e((0,E.selectNode)([f.id]))}var r,n},new Promise(((e,t)=>{var n=e=>{try{a(r.next(e))}catch(e){t(e)}},o=e=>{try{a(r.throw(e))}catch(e){t(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);a((r=r.apply(undefined,null)).next())}));var r}),[e,t])}};var N=r(93696),V=r.n(N),B=r(61754);function Z(){const{dispatch:e,getState:t}=(0,a.oR)(),[r,o]=(0,a.v9)((({project:e})=>{const{editor:{selected:t},nodes:r}=(0,c.zh)(e),n=Object.keys(t).map(Number).map((e=>(0,c.qC)(r,e)[0])).filter((e=>e));return n.length?[n.every((e=>{var t;return null==(t=e.editor)?void 0:t.isHidden})),n.every((e=>{var t;return null==(t=e.editor)?void 0:t.isLocked}))]:[void 0,void 0]}),V());return{hiddenStatus:r,lockedStatus:o,onChange:(0,n.useCallback)((r=>{if((0,c.uj)(t))return void B.ZP.warning("不允许执行该操作");const{editor:{selected:n}}=(0,c.zh)(t().project),o=Object.keys(n).map(Number);e((0,E.groupActions)(o.map((e=>(0,E.changeEditor)(e,r)))))}),[e,t])}}const T=()=>{const e=(0,a.I0)();return(0,n.useCallback)((({key:t,shiftKey:r})=>e(((e,n)=>{const{editor:{selected:o,scale:a,selectedInnerNode:i},nodes:l,props:s}=(0,c.zh)(n().project),{scriptIds:p,nodeIds:u}=(0,c.bN)(o);if(p.length)e((0,E.groupActions)(p.map((e=>{var n;const o=null==(n=(0,c.qC)(l,e,!0)[0])?void 0:n.scripts.find((({id:t})=>t===e));if(o){const n=r?a:10,{type:i,time:l,duration:c=0}=o;switch(t){case"ArrowLeft":return(0,E.changeProps)([e],{time:Math.max(l-n,0)});case"ArrowRight":return(0,E.changeProps)([e],{time:l+n})}if("Script"!==i)switch(t){case"ArrowDown":return(0,E.changeProps)([e],{duration:Math.max(c-n,0)});case"ArrowUp":return(0,E.changeProps)([e],{duration:c+n})}}return(0,E.groupActions)([])})))),(0,E.selectScript)(p);else if(u.length){const o=r?10:1;(null==i?void 0:i.length)?e((0,E.groupActions)(i.map((e=>{const[r,{id:a,props:i}]=(0,E.getInnerNodeId)((0,c.zh)(n().project),e);if(r)switch(t){case"ArrowLeft":return(0,E.changeProps)([r,a],{x:i.x-o});case"ArrowRight":return(0,E.changeProps)([r,a],{x:i.x+o});case"ArrowUp":return(0,E.changeProps)([r,a],{y:i.y-o});case"ArrowDown":return(0,E.changeProps)([r,a],{y:i.y+o});default:return(0,E.groupActions)([])}return(0,E.groupActions)([])})))):e((0,E.groupActions)(u.map((e=>{switch(t){case"ArrowLeft":return(0,E.changeProps)([e],{x:s[e].x-o});case"ArrowRight":return(0,E.changeProps)([e],{x:s[e].x+o});case"ArrowUp":return(0,E.changeProps)([e],{y:s[e].y-o});case"ArrowDown":return(0,E.changeProps)([e],{y:s[e].y+o})}return(0,E.groupActions)([])}))))}}))),[e])},z=()=>{const{dispatch:e,getState:t}=(0,a.oR)();return{isDroppable:(0,n.useCallback)(((e,r,n)=>{var o;const{editor:{selected:a},id:i,nodes:l}=(0,c.zh)(t().project);if("node"===n){if((0,c.qC)(l,e).some((({id:e})=>e in a)))return!1;for(const t of Object.keys(a)){for(const n of(0,c.qC)(l,Number(t)))if(n.id===i){if(n.id===e)return"inside"===r;if(!(0,c.qC)(n.nodes,e).length)return!1;break}break}}else if((null==(o=(0,c.qC)(l,e)[0])?void 0:o.id)===i)return"inside"===r;return!0}),[t]),onDropNodes:(0,n.useCallback)(((r,n,o)=>{const a=(0,c.zh)(t().project),i=(0,c.gz)(a.nodes,null!=o?o:Object.keys(a.editor.selected).map(Number)).map((({id:e})=>e)),l=(0,c.qC)(a.nodes,r);if(l.some((({id:e})=>i.includes(e))))throw new Error("Should not drop parent into children.");const[s,p=a]=l;if("inside"===n)s.nodes.some((({id:e})=>i.includes(e)))?e((0,E.groupActions)(i.map((e=>(0,E.moveNode)(e,r,s.nodes.length-1))))):e((0,E.groupActions)(i.map(((e,t)=>(0,E.moveNode)(e,r,s.nodes.length+t)))));else{const{id:t,nodes:o}=p,a=o.findIndex((({id:e})=>e===r))+Number("after"===n),l=o.slice(0,a).map((({id:e})=>e));let c=0;e((0,E.groupActions)(i.map(((e,r)=>(0,E.moveNode)(e,t,a+r-(l.includes(e)?++c:c))))))}}),[e,t])}};var L=Object.defineProperty,U=Object.defineProperties,F=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,W=(e,t,r)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const J=(e,t=!1)=>{var r;const{editor:{selected:n},nodes:o}=(0,c.zh)(e.project),{scriptIds:a,nodeIds:i}=(0,c.bN)(n);if(a.length||!i.length)return{canPutBottom:0,canPutTop:0};const l=(null==(r=(0,c.qC)(o,i[0])[1])?void 0:r.nodes)||o;return{canPutTop:(()=>{let e=l.length-1;for(;e&&i.includes(l[e].id);)e--;if(!l.slice(0,e).some((({id:e})=>i.includes(e))))return 0;if(e===l.length-1)for(;t&&!i.includes(l[e-1].id);)e--;return l[e].id})(),canPutBottom:(()=>{let e=0;for(;e<l.length&&i.includes(l[e].id);)e++;if(!l.slice(e).some((({id:e})=>i.includes(e))))return 0;if(0===e)for(;t&&!i.includes(l[e+1].id);)e++;return l[e].id})()}},K=()=>{const{getState:e}=(0,a.oR)(),{onDropNodes:t}=z();return r=((e,t)=>{for(var r in t||(t={}))$.call(t,r)&&W(e,r,t[r]);if(Y)for(var r of Y(t))Q.call(t,r)&&W(e,r,t[r]);return e})({},(0,a.v9)(J,a.wU)),o={onPutBottom:(0,n.useCallback)(((r=!1)=>{const{canPutBottom:n}=J(e(),r);n&&t(n,"before")}),[e,t]),onPutTop:(0,n.useCallback)(((r=!1)=>{const{canPutTop:n}=J(e(),r);n&&t(n,"after")}),[e,t])},U(r,F(o));var r,o};var H=r(99045),G=r(13564),q=Object.defineProperty,X=Object.defineProperties,ee=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,oe=(e,t,r)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ae=(e,t)=>{for(var r in t||(t={}))re.call(t,r)&&oe(e,r,t[r]);if(te)for(var r of te(t))ne.call(t,r)&&oe(e,r,t[r]);return e};const ie=e=>{try{return(0,a.v9)((({project:t})=>le(e,t)))}catch(e){return""}},le=(e={},t,r=!1)=>{var n;const o=(0,c.zh)(t);if("number"==typeof e)return le(o.props[e],t,!0)||ce(null==(n=o.props[e])?void 0:n.scripts,t,!0);switch(e.script){case"Drag":return pe(o,e.targetId);case"EventListener":return e.event?"":"未设置事件名称";case"DataListener":if(!e.key)return"未设置变量名";switch(e.key){case"SupportShake":case"SceneLoadingProgress":return"";default:const{store:r={}}=t.settings;return e.key in r?"":"变量名不存在"}default:{const n=ae(ae({},G.p_),H.FP)[e.script];return n&&n.checkError?n.checkError(e,{deep:r,project:t}):""}}},ce=(e=[],t,r)=>{if(r)for(const a of e){const e=le("Effect"===a.type?(n=ae({},a.props),o={script:a.type},X(n,ee(o))):a.props,t,r);if(e)return e}var n,o;return""},se=(e,t)=>{switch(typeof e){case"number":case"boolean":return"";case"string":return e.length?"":"未输入字符串内容";case"object":if(Array.isArray(e)){for(const r of e){const e=se(r,t);if(e)return e}return""}switch(e.type){case"node":if(e.ids&&-1!==e.ids[0]){const r=(0,c.v$)((0,c.zh)(t)),[n]=(0,c.qC)(r,e.ids[0]);if(!n)return"素材节点已被删除"}return e.key?"":"未选择素材属性";case"res":return e.url?"":"未上传素材资源";case"store":{if(!e.key)return"未选择全局变量";if(["SupportShake","SceneLoadingProgress"].includes(e.key))return"";const{settings:{store:r={}}}=t;return e.key in r?"":"全局变量已被删除"}case"func":return void 0!==e.source&&se(e.source,t)||void 0!==e.value&&se(e.value,t)||"";case"mouse":case"event":case"scene":return"";default:return(0,c.Ak)(e)}default:return(0,c.Ak)(e)}},pe=(e,t,r="目标节点")=>void 0===t?`未设置${r}`:t>0&&!e.props[t]?`${r}不存在`:"";var ue=r(15303);const de=window.location.origin;function fe(){const e=(0,l.useOnAddCustomScript)(),t=(0,l.useOnDeleteCustomScript)(),r=(0,l.useOnRenameCustomScript)(),o=(0,l.useOnSaveCustomScript)(),{readOnly:i}=(0,l.useEditor)(0,"readOnly"),s=(0,l.useProject)("id"),{getState:p,dispatch:u}=(0,a.oR)();(0,n.useEffect)((()=>{const n=n=>{return a=this,null,d=function*(){const{type:a,params:d,id:f,projectId:m}=n.data;if(!f||n.origin!==window.location.origin)return;const y=n.source&&(b=n.source,/Window|global/.test({}.toString.call(b))||b==b.document&&b.document!=b)?n.source:null;var b;if(s!==m)return void(null==y||y.postMessage({id:f,error:new Error(JSON.stringify({code:-2,message:"项目Id不一致"}))},de));switch(a){case"initial":null==y||y.postMessage({id:f,result:{readOnly:i}},de);break;case"addCustomScript":yield e(d.name,d.language).then((({id:e,orderId:t})=>{null==y||y.postMessage({id:f,result:{id:e,orderId:t}},de)})).catch((e=>{null==y||y.postMessage({id:f,error:new Error(JSON.stringify({code:-1,message:e.message}))},de)}));break;case"deleteCustomScript":yield t(d.id,d.orderId).then((()=>{null==y||y.postMessage({id:f,result:null},de)})).catch((e=>{null==y||y.postMessage({id:f,error:new Error(JSON.stringify({code:-1,message:e.message}))},de)}));break;case"renameCustomScript":yield r(d.id,d.name).then((()=>{null==y||y.postMessage({id:f,result:null},de)})).catch((e=>{null==y||y.postMessage({id:f,error:new Error(JSON.stringify({code:-1,message:e.message}))},de)}));break;case"saveCustomScript":yield o(d.id,d.name,d.content).then((()=>{null==y||y.postMessage({id:f,result:null},de)})).catch((e=>{null==y||y.postMessage({id:f,error:new Error(JSON.stringify({code:-1,message:e.message}))},de)}))}const h=(0,c.o$)(p().project).customScripts;if(h.length){const e=yield(0,ue.ud)(h);u((0,l.setSettings)({jsCode:e},!0))}},new Promise(((e,t)=>{var r=e=>{try{o(d.next(e))}catch(e){t(e)}},n=e=>{try{o(d.throw(e))}catch(e){t(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,n);o((d=d.apply(a,null)).next())}));var a,d};return window.addEventListener("message",n),()=>{window.removeEventListener("message",n)}}),[s,e,t,r,o,i,p,u])}var me=Object.defineProperty,ye=Object.defineProperties,be=Object.getOwnPropertyDescriptors,he=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,Oe=(e,t,r)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ke=(e,t)=>{for(var r in t||(t={}))ge.call(t,r)&&Oe(e,r,t[r]);if(he)for(var r of he(t))ve.call(t,r)&&Oe(e,r,t[r]);return e};const xe=()=>(0,a.v9)((e=>{var t;const{type:r}=e.project,n=(0,c.zh)(e.project),{editor:{selected:o},props:a}=n,i=(0,c.v$)(n),{nodeIds:l}=(0,c.bN)(o),s="Model"!==r&&l.length>0&&l.every((e=>{var t;return"Sound"!==(null==(t=a[e])?void 0:t.type)}));return{canAddBlueprint:1===l.length&&(null==(t=(0,c.qC)(i,l[0]))?void 0:t[0].scripts.every((({script:e})=>"Blueprint"!==e))),canAddEffect:s,canAddScript:s&&l.every((e=>{var t;return"Button"!==(null==(t=a[e])?void 0:t.type)}))}}),a.wU),Ee=()=>{const{dispatch:e,getState:t}=(0,a.oR)();return(0,n.useCallback)(((r,n,o={},a=!1)=>{const i=(({editor:{selected:e,scale:t},props:r,nodes:n},o,a)=>{if(o)return Object.entries(e).reduce(((e,[t,n])=>(n.forEach((n=>{e.push((0,l.delScript)(n)),e.push((0,l.addScript)(Number(t),a(r[n].time)))})),e)),[]);const{scriptIds:i,nodeIds:s}=(0,c.bN)(e);return s.map((e=>{return(0,l.addScript)(e,a((r=(0,c.qC)(n,e)[0].scripts,i.length&&(r=r.filter((({id:e})=>i.includes(e)))),r.reduce(((e,{time:r,duration:n})=>Math.max(e,r+(n||t))),0)+t)));var r}))})((0,c.zh)(t().project),a,(e=>{var t,i,l;return{id:(0,c.xv)(),type:r,props:a||(null!=(t=n.time)?t:0)<0?(i=ke({},n),l={time:e},ye(i,be(l))):n,editor:o}}));i.length&&(e((0,l.groupActions)(i)),e((0,l.selectScript)(i.filter((({type:e})=>e===w.ActionType.AddScript)).map((({script:{id:e}})=>e)))))}),[e,t])};var we=r(51908),Pe=Object.defineProperty,je=Object.defineProperties,Se=Object.getOwnPropertyDescriptors,Ce=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable,Me=(e,t,r)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_e=(e,t)=>{for(var r in t||(t={}))Ie.call(t,r)&&Me(e,r,t[r]);if(Ce)for(var r of Ce(t))Ae.call(t,r)&&Me(e,r,t[r]);return e},De=(e,t)=>je(e,Se(t)),Re=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const Ne=()=>{const{dispatch:e,getState:t}=(0,a.oR)(),r=(0,n.useCallback)((()=>{var e,r;const{type:n}=t().project;return"Model"!==n&&Boolean(null==(r=null==(e=we.BR.getValue())?void 0:e.scripts)?void 0:r.length)}),[t]);return{canPasteNodes:(0,n.useCallback)((()=>{var e,r;const{type:n}=t().project;return"Model"!==n&&Boolean(null==(r=null==(e=we.BR.getValue())?void 0:e.nodes)?void 0:r.length)}),[t]),canPasteScripts:r,onPaste:(0,n.useCallback)((r=>Re(void 0,null,(function*(){const{userinfo:n,project:o}=t();let a=we.BR.getValue();if(!a||String(a.userId)!==String(null==n?void 0:n.userId))return;a.projectId!==o.id&&a[o.id]&&(a=a[o.id]);const i=(0,c.zh)(o),l=(0,c.v$)(i),{nodeIds:s,scriptIds:p}=(0,c.bN)(i.editor.selected),{projectId:u=0,events:d,scripts:f,nodes:m,position:y}=a,{copyNode:b,copyScript:h,createScenes:g}=(0,we.O6)(o,u),v=[],O=(e,t)=>{void 0!==t?v.splice(t,0,e):v.push(e)};try{if(e((0,E.changeEditor)(0,{loading:u!==o.id})),null==d?void 0:d.length){const{set:e}=En();if(!(yield e((()=>Re(this,null,(function*(){return(0,E.updateScriptId)(yield h(d))[0]})))))){const e=p.filter((e=>{var t;const[r]=(0,c.qC)(l,e,!0);return null==(t=null==r?void 0:r.scripts)?void 0:t.find((({id:t,type:r})=>t===e&&"Script"===r))})).map((e=>Re(this,null,(function*(){const t=(0,E.updateScriptId)(yield h(d));return(0,E.changeProps)([e],{scripts:(i.props[e].scripts||[]).concat(t)})}))));e.length&&O((0,E.groupActions)(yield Promise.all(e)))}}else if(null==f?void 0:f.length){const e=(e,t)=>{const[r]=(0,c.qC)(l,t);let n=!1;try{return e.filter((e=>"Controller"===e.type?(e.id!==r.id&&(n=!0),e.id===r.id):"Effect"===e.type?"Sound"!==r.type:"Blueprint"!==e.type||r.scripts.every((e=>"Blueprint"!==e.type))))}finally{n&&B.ZP.warning("控制条只能粘贴到自身节点")}},t=r?r-Math.min(...f.map((({props:{time:e=0}})=>e))):0,n=yield h(f),o=s.reduce(((r,o)=>r.concat((0,E.updateScriptId)(e(n,o)).map((e=>{var r;return(0,E.addScript)(o,De(_e({},e),{props:De(_e({},e.props),{time:(null!=(r=e.props.time)?r:0)+t})}))})))),[]);if(o.length)return O((0,E.groupActions)(o)),O((0,E.selectScript)(o.map((({script:{id:e}})=>e)))),f.map((e=>{var t;return null==(t=e.props)?void 0:t.name})).filter(Boolean).join(",")}else if(null==m?void 0:m.length){const{contextMenu:t}=o.editor,r=t&&t.x+t.x>=0?t:void 0,n=(0,E.updateNodeId)(yield b(m));if(s.length){const[,e=i]=s.reduce(((e,t)=>e.length?e:(0,c.qC)(l,t)),[]);let t=Math.max(...s.map((t=>e.nodes.findIndex((e=>e.id===t)))))+1;0===t&&(t=e.nodes.length),O((0,E.groupActions)(n.map(((n,o)=>(0,E.addFromNode)(e.id,t+o,n,y,r)))))}else O((0,E.groupActions)(n.map(((e,t)=>(0,E.addFromNode)(i.id,i.nodes.length+t,e,y,r)))));setTimeout((()=>{e((0,E.selectNode)(n.map((e=>e.id))))}))}}finally{const{components:t,customScripts:r,materials:n,texture2Ds:o}=yield g();for(const e of t)O((0,E.addComponent)(e),0);for(const e of r)O((0,E.addCustomScript)(e));for(const e of n)O((0,E.addMaterial)(e),0);for(const e of o)O((0,E.addTexture2D)(e),0);for(const t of v)e(t);e((0,E.changeEditor)(0,{loading:!1}))}}))),[e,t])}};var Ve=r(56793),Be=r.n(Ve);const Ze=(e,t,r)=>{var n,o;const a=e.findIndex((e=>t.includes(e)));return null!=(o=null!=(n=e.slice(a).find((e=>!t.includes(e))))?n:e.slice(0,a).pop())?o:r},Te=e=>{const t=(0,c.zh)(e.project),{scriptIds:r,nodeIds:n}=(0,c.bN)(t.editor.selected);return r.length?((e,t)=>{var r;const n={};for(const o of t){if(n[o])continue;const[a]=(0,c.qC)(e,o,!0);if(a){if(a.scripts.forEach((({id:e})=>n[e]=!0)),"Controller"===(null==(r=a.scripts.find((({id:e})=>e===o)))?void 0:r.type)&&a.scripts.filter((({type:e})=>"Controller"===e)).every((({id:e})=>t.includes(e))))return!1;if((0,c.W6)(a.type)&&a.scripts.filter((({id:e})=>t.includes(e))).some((e=>"Blueprint"===e.type)))return!1}}return Object.values(n).some(Boolean)})((0,c.v$)(t),r)?1:0:n.some((e=>"Camera"===t.props[e].type))?((e,t)=>{const r=e.nodes.find((e=>"Scene3D"===e.type));return!r||r.nodes.some((e=>"Camera"===e.type&&!t.includes(e.id)))})(t,n)?2:0:n.some((e=>"PVVideo"===t.props[e].type))||n.some((e=>"VRVideo"===t.props[e].type))||n.some((e=>"VR3D场景"===t.props[e].name))?0:n.length>0?2:0},ze=()=>{const{dispatch:e,getState:t}=(0,a.oR)();return{canDelete:(0,a.v9)(Te),onDelete:(0,n.useCallback)((r=>{const n=(0,c.zh)(t().project),{del:o}=En();if(r)Le(e,n,r);else{if(o())return;if(Te(t())){const{scriptIds:t,nodeIds:r}=(0,c.bN)(n.editor.selected);t.length?Le(e,n,{scriptIds:t}):Le(e,n,{nodeIds:r})}}}),[e,t])}},Le=(e,t,{nodeIds:r,scriptIds:n})=>{const o=(0,c.v$)(t);if(null==n?void 0:n.length){e((0,E.groupActions)(n.map((e=>(0,E.delScript)(e)))));const t=n.map((e=>{const t=(0,c.qC)(o,e,!0);return{scriptId:Ze(t[0].scripts.slice().filter((({type:e})=>"Blueprint"!==e)).sort((({time:e},{time:t})=>e-t)).map((({id:e})=>e)),n),parentIds:t.map((({id:e})=>e))}})),r=t.map((({scriptId:e})=>e)).filter(Boolean);if(r.length)e((0,E.selectScript)(r));else{const r=t.map((({parentIds:e})=>e.reverse())),{length:n}=r.reduce(((e,t)=>t.slice(0,Be()(e,t).findIndex((([e,t])=>e!==t))+1)));e(n?(0,E.selectNode)(r.map((e=>e[n-1]))):(0,E.selectNode)([]))}}else if(null==r?void 0:r.length){e((0,E.groupActions)(r.map((e=>(0,E.delNode)(e)))));const{id:t,nodes:n=o}=(0,c.qC)(o,r[0])[1]||{},a=Ze(n.map((({id:e})=>e)),r,t);e((0,E.selectNode)(a?[a]:[]))}};var Ue=r(7910),Fe=Object.defineProperty,Ye=Object.defineProperties,$e=Object.getOwnPropertyDescriptors,Qe=Object.getOwnPropertySymbols,We=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,Ke=(e,t,r)=>t in e?Fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const He=()=>{const{getState:e}=(0,a.oR)(),{onDelete:t}=ze(),r=(0,n.useCallback)((({project:e})=>Object.keys((0,c.zh)(e).editor.selected).length>0),[]);return{canCopy:(0,a.v9)(r),onCopy:(0,n.useCallback)(((n=!1)=>{const o=r(e());if((0,c.uj)(e))return void B.ZP.warning("不允许执行该操作");if(!o)return;const{userinfo:a,project:i}=e(),s=(0,c.zh)(i),{editor:{selected:p},props:u}=s,d=(0,c.v$)(s),{scriptIds:f,nodeIds:m}=(0,c.bN)(p),{get:y}=(0,l.consumeEvent)(),b=y();if(b){if("DownloadApp"===b.props.script)return B.ZP.warning(`不能${n?"剪切":"复制"}下载APP事件`),we.BR.setValue(null);(0,Ue.zp)(b.props.name),we.BR.setValue({userId:null==a?void 0:a.userId,projectId:i.id,events:[b]})}else if(f.length){const e=f.reduce(((e,t)=>{const[r]=(0,c.qC)(d,t,!0),n=null==r?void 0:r.scripts.find((({id:e})=>e===t));var o,a;return n&&e.push((o=((e,t)=>{for(var r in t||(t={}))We.call(t,r)&&Ke(e,r,t[r]);if(Qe)for(var r of Qe(t))Je.call(t,r)&&Ke(e,r,t[r]);return e})({},n),a={id:r.id,props:u[n.id]},Ye(o,$e(a)))),e}),[]);e.length&&((0,Ue.zp)(e.map((({props:{name:e}})=>e)).join(",")),we.BR.setValue({userId:null==a?void 0:a.userId,projectId:i.id,scripts:e}))}else if(m.length){const{contextMenu:e}=i.editor,t=(0,c.gz)(d,m);(0,Ue.zp)(t.map((({name:e})=>e)).join(",")),we.BR.setValue({userId:null==a?void 0:a.userId,projectId:i.id,nodes:(0,c.Pe)(t,u),position:e&&e.x+e.x>=0?e:void 0})}n&&t(),B.ZP.success((n?"剪切":"复制")+"成功")}),[e,t])}};var Ge=r(50585),qe=r(60439),Xe=r(46641),et=r(73073),tt=r(73760);const rt=({type:e,settings:t,scenes:[r]},n)=>{const{width:o=750,height:a=1334}="Component"===e?r.props[r.id]:t;return n?{width:n,height:Math.floor(a/o*n)}:{width:o,height:a}},nt=e=>(0,a.v9)((({project:t})=>rt(t,e)),a.wU),ot=e=>(0,a.v9)((({project:t})=>t[e]),tt.isEqual),at=e=>(0,a.v9)((({project:t})=>(0,c.zh)(t)[e]),tt.isEqual);var it=r(23247),lt=r.n(it),ct=r(63361);const st=e=>(0,a.v9)((({project:t})=>t.settings[e]),tt.isEqual);var pt=r(8702),ut=Object.defineProperty,dt=Object.defineProperties,ft=Object.getOwnPropertyDescriptors,mt=Object.getOwnPropertySymbols,yt=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,ht=(e,t,r)=>t in e?ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gt=(e,t)=>{for(var r in t||(t={}))yt.call(t,r)&&ht(e,r,t[r]);if(mt)for(var r of mt(t))bt.call(t,r)&&ht(e,r,t[r]);return e},vt=(e,t)=>dt(e,ft(t)),Ot=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const kt=()=>{const{getState:e}=(0,a.oR)();return(0,n.useCallback)(((t,r)=>Ot(void 0,null,(function*(){const n=e().project.type,{editor:{edit3d:o}}=(0,c.zh)(e().project),a=(0,c.zh)(e().project,void 0,!1).nodes.find((e=>"Scene3D"===e.type));if("Project"!==n||!o||a||"scene3D"===t)if("Model"!==n||"Model"===t){if("Particle3D"!==n||"Particle3D"===t)return yield Promise.resolve(r());B.ZP.error("编辑粒子时，只允许添加粒子")}else B.ZP.error("编辑模型时，只允许添加模型");else B.ZP.error("缺少3D场景，无法添加节点!")}))),[e])},xt=()=>{const{dispatch:e,getState:t}=(0,a.oR)(),r=(()=>{const{getState:e}=(0,a.oR)();return()=>{var t,r;return null!=(r=null==(t=e().project.materials.find((e=>"TrailMaterial"===e.material.type)))?void 0:t.orderId)?r:""}})(),o=(0,Xe.nm)(),{onParticleNodeToScene:i}=(0,ct.Rv)();return(0,n.useCallback)(((n,...a)=>Ot(void 0,[n,...a],(function*({mime:n,name:a,url:l,position:s,targetId:p,cover:u,dropWhere:d,extra:f,mapNode:m,edit3d:y},b=!1){var h;console.log("!:",n,a,l);const g=(0,c.zh)(t().project);if(n.startsWith("PV")){const e=["PVButton","PVClickArea","PVSlider"];if("PVAlphaVideo"===n||"PVGuider"===n){if(Object.values(g.props).some((({type:t})=>e.includes(t)))){if("PVAlphaVideo"===n)throw new Error("循环视频不能添加出框视频")}else if("PVGuider"===n)throw new Error("无跳转组件不能添加手势引导");if(Object.values(g.props).some((({type:e})=>"PVAlphaVideo"===e)))throw new Error("不能重复添加出框视频")}else if(e.includes(n)&&Object.values(g.props).some((({type:e})=>"PVAlphaVideo"===e)))throw new Error("出框视频场景不能添加跳转组件")}y=null!=y?y:g.editor.edit3d;const[v,O]=((e,t,r,n,o=!1)=>{if(r&&n){const[t,o=e]=(0,c.qC)(e.nodes,r);return t?"inside"===n?[r,t.nodes.length]:[o.id,o.nodes.findIndex((e=>e.id===r))+Number("after"===n)]:[e.id,e.nodes.length]}if(o&&"Scene3D"!==t&&(0,pt.N7)(t)){const t=e.nodes.find((e=>"Scene3D"===e.type));if(t)return[t.id,0];throw new Error("缺少3D场景节点")}const a=Object.keys(e.editor.selected).map(Number);if(a.length){const[t,r=e]=(0,c.qC)(e.nodes,a[0]);if(t)return[r.id,Math.max(...a.map((e=>r.nodes.findIndex((t=>t.id===e)))))+1]}return[e.id,e.nodes.length]})((0,c.zh)(t().project,void 0,!1),n,p,d,y);b&&e((0,E.changeEditor)(0,{loading:!0}));try{const p=()=>Ot(this,null,(function*(){var e,r;if("string"==typeof l)return(0,E.addNode)({parentId:v,index:O,mime:n,name:a,url:l,endPos:s},(e=>Ot(this,null,(function*(){var t,r,n,o,s,p;if((0,c.W6)(e.type)&&e.props){delete e.props.sceneData;const{data:a}=yield lt().get((0,Ue.GR)(l));if(e.editor=vt(gt({},e.editor),{state:[{name:"默认状态",id:-1,duration:null==(t=a.props)?void 0:t.duration},...null!=(n=null==(r=a.editor)?void 0:r.state)?n:[]]}),!(null==(o=e.props.compProps)?void 0:o.length)){const{props:{[a.id]:{compProps:t}}}=(0,c.G)((0,c.m7)(a));e.props.compProps=t}}if("Particle3D"===e.type){const t=yield i(e);e.props.url=t}if(null==(s=e.props)?void 0:s.url){const t={name:a};if(Object.assign(t,{originWidth:e.props.width,originHeight:e.props.height}),f&&"object"==typeof f){const{size:e}=f;Object.assign(t,{size:e})}"Particle"===e.type&&(t.textureName=a),u&&(t.cover=u),e.props._editor=t}return null!=(p=null==m?void 0:m(e))?p:e}))));let o;if("PanoramaSpace"===n)return o=yield(0,w.createNode)(a,n,c.xv,l),(0,E.addFromNode)(v,O,vt(gt({},o),{editor:gt({},o.editor)}),void 0,s);{const n=(0,c._N)(t().project,l);o=yield("Model"===n.type?w.createModelNode:"Particle3D"===n.type?w.createParticle3DNode:w.createAnimationNode)(a,Et(t().project,l),c.xv,(0,c.GV)((0,c.G)(n),["store","type"]));const i=null==(e=(0,c.GV)(n).scripts)?void 0:e.find((e=>"Blueprint"===e.type));return(0,E.addFromNode)(v,O,vt(gt({},o),{props:(0,tt.omit)(o.props,"sceneData"),editor:vt(gt({},o.editor),{state:[{name:"默认状态",id:-1,duration:n.props[n.id].duration},...null!=(r=n.editor.state)?r:[]]}),scripts:[...o.scripts||[],i&&vt(gt({},i),{props:vt(gt({},i.props),{scripts:[],inputs:[]}),editor:vt(gt({},i.editor),{nodeType:"node"}),id:(0,c.xv)()})].filter(Boolean)}),void 0,s)}})),d=yield p();return"Trail3D"===(null==(h=d.node)?void 0:h.type)&&d.node.props&&(yield o(),d.node.props.materialUrls=[r()]),e(d),e((0,E.selectNode)([d.node.id])),d.node.id}catch(e){throw B.ZP.error(e.message||e||`无法添加节点${a}`),e}finally{b&&e((0,E.changeEditor)(0,{loading:!1}))}}))),[e,t,r,o])},Et=(e,t)=>{if(["Project","PanoramaData"].includes(e.type)||"number"!=typeof t)return t;const r=e.scenes[0],n=(0,c._N)(e,t);if(!n.sceneId||r.sceneId===n.sceneId)throw new Error("当前组件不能添加自身作为节点，否则循环引用");const o=({props:t},r)=>Object.values(t).some((({type:t,url:n})=>"Animation"===t&&"number"==typeof n&&(n===r||o((0,c._N)(e,n),r))));if(o(n,r.orderId))throw new Error(`当前组件不有添加“${n.name}”作为节点，否则循环引用`);return t},wt=()=>{const e=ot("id"),t=xt(),r=(0,a.I0)(),o=st("typeOfPlay");return{onAddNode:t,onAddNodeFromFiles:(0,n.useCallback)(((n,a)=>Ot(void 0,null,(function*(){if(4===o&&n.some((e=>e.type.startsWith("video"))))throw new Error("每个场景只允许存在一个视频");const i=yield(0,et.Kf)(n,{projectId:e});if(i){r((0,E.changeEditor)(0,{loading:!0}));try{return i().then((e=>Promise.all(e.map((e=>t(gt(gt({},e),a))))))).then((()=>!0))}finally{r((0,E.changeEditor)(0,{loading:!1}))}}return!1}))),[r,t,e])}};var Pt=r(39089),jt=r(76566),St=Object.defineProperty,Ct=Object.defineProperties,It=Object.getOwnPropertyDescriptors,At=Object.getOwnPropertySymbols,Mt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable,Dt=(e,t,r)=>t in e?St(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Rt=(e,t)=>{for(var r in t||(t={}))Mt.call(t,r)&&Dt(e,r,t[r]);if(At)for(var r of At(t))_t.call(t,r)&&Dt(e,r,t[r]);return e},Nt=(e,t)=>Ct(e,It(t)),Vt=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const Bt=({is3D:e=!1})=>{const{dispatch:t,getState:r}=(0,a.oR)(),o=(0,l.useEmitter)("LoadComponent");return(0,n.useCallback)((()=>{const n=(0,c.q7)(r().project),a=()=>Vt(void 0,null,(function*(){const r=(0,l.newCase)([(0,l.newScene)("互动组件",{loading:!1,type:e?"Animation3D":"Animation",edit3d:e})],"Component",n);r.id=n.id,r.editor.readOnly=n.editor.readOnly,r.settings=n.settings,t((0,l.restoreState)(r)),t((0,l.changeCategory)(""))}));["Component","PanoramaData"].includes(n.type)?o({loadComponent:a}):a()}),[r,t,o])},Zt=()=>{const{dispatch:e,getState:t}=(0,a.oR)(),[r,o]=(0,n.useState)(!1),i=(0,l.useEmitter)("LoadComponent");return{loading:r,onEditComponent:(0,n.useCallback)(((r,n=!1)=>Vt(void 0,null,(function*(){let a=(0,c.q7)(t().project);a=Nt(Rt({},a),{editor:Nt(Rt({},a.editor),{contextMenu:void 0})});const s=()=>Vt(this,null,(function*(){let n=(0,c.q7)(t().project);n=Nt(Rt({},n),{editor:Nt(Rt({},n.editor),{contextMenu:void 0})});try{o(!0);const t=yield(0,c.sH)(n,r),a=(0,l.newCase)([t],"Component",n);a.settings=Rt({},n.settings),["Animation3D"].includes(t.type)?(t.editor.edit3d=!0,a.settings.enabled3d=!0):a.settings.enabled3d=!1,a.editor.readOnly="string"==typeof r||n.editor.readOnly,a.materials=n.materials,a.id=n.id,e((0,l.restoreState)(a)),e((0,l.changeCategory)("")),(0,Pt.E9)(String(r))}catch(e){B.ZP.error("不能打开互动组件"),o(!1)}}));["Component","PanoramaData"].includes(a.type)&&!(0,jt.y_)(t().project)?i({loadComponent:s,skip:n}):s()}))),[t,e,i])}},Tt=()=>{const{dispatch:e,getState:t}=(0,a.oR)(),{onDelete:r}=ze(),o=(0,qe.QO)(),i=xt();return{canIntoComponent:(0,a.v9)((({project:e})=>{var t;const{editor:r,props:n}=(0,c.zh)(e),{nodeIds:o,scriptIds:a}=(0,c.bN)(r.selected);if(a.length||!o.length)return{can:"none"};if(o.length>1||!(0,c.W6)(null==(t=n[o[0]])?void 0:t.type))return e.editor.readOnly?{can:"none"}:{can:"into"};const{url:i=""}=n[o[0]];return"string"==typeof i&&i.includes(".json")||e.editor.readOnly?{can:"view",url:i}:{can:"edit",url:i}}),a.wU),onIntoComponent:(0,n.useCallback)((()=>Vt(void 0,null,(function*(){const{editor:{selected:n,edit3d:a}}=(0,c.zh)(t().project),{nodeIds:s,scriptIds:p}=(0,c.bN)(n);if(p.length||!s.length)return;const u=(0,c.xv)();e((0,E.joinGroup)(u,s)),e((0,l.changeEditor)(0,{loading:!0})),setTimeout((()=>Vt(this,null,(function*(){var n,s;try{const{project:p}=t(),d=(0,c.zh)(p),{x:f,y:m,position:y,width:b,height:h}=null!=(s=null==(n=d.props)?void 0:n[u])?s:{},[{nodes:g}]=(0,c.qC)(d.nodes,u),[{name:v}]=g.slice(-1),O=(0,c.m7)((0,c.GV)(Nt(Rt({},d),{editor:Nt(Rt({},d.editor),{isOpen:!0}),nodes:g,name:v,id:u,type:a?"Animation3D":"Animation",props:Nt(Rt({},d.props),{[u]:{type:a?"Animation3D":"Animation",name:v,height:h,width:b}}),scripts:[]}))),k=yield o(u,b,h),x=yield(0,Ge.E)(p,Nt(Rt({},O),{editor:Nt(Rt({},O.editor),{capture:k})}),!0);e((0,l.addComponent)(x));const w=yield i({dropWhere:"before",targetId:u,mime:x.type,url:x.orderId,name:x.name});e((0,E.changeProps)([w],a?{position:y}:{x:f,y:m})),r({nodeIds:[u]}),e((0,l.selectNode)([w]))}finally{e((0,l.changeEditor)(0,{loading:!1}))}}))))}))),[e,t,i,o,r])}},zt=(e,t=1e3)=>{const{getState:r,dispatch:o,subscribe:i}=(0,a.oR)(),l=(0,n.useRef)(e);l.current=e,(0,n.useEffect)((()=>i((0,tt.debounce)((()=>{l.current(r,o)}),t))),[t])};var Lt=r(89763),Ut=r(62414),Ft=r(33058),Yt=Object.defineProperty,$t=Object.defineProperties,Qt=Object.getOwnPropertyDescriptors,Wt=Object.getOwnPropertySymbols,Jt=Object.prototype.hasOwnProperty,Kt=Object.prototype.propertyIsEnumerable,Ht=(e,t,r)=>t in e?Yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Gt=(e,t)=>{for(var r in t||(t={}))Jt.call(t,r)&&Ht(e,r,t[r]);if(Wt)for(var r of Wt(t))Kt.call(t,r)&&Ht(e,r,t[r]);return e},qt=(e,t)=>$t(e,Qt(t));const Xt=n.createElement(Ft.Z,{component:Ut.Z}),er=n.createElement(Ft.Z,{component:e=>n.createElement(Lt.Z,qt(Gt({},e),{theme:"filled"}))}),tr=()=>{const e=(0,a.v9)((({project:e})=>e.editor.playing)),t=(0,a.v9)((({project:e})=>!(0,c.zh)(e).nodes.length)),{dispatch:r,getState:o}=(0,a.oR)(),i=(0,n.useRef)(null);return{playing:e,disabled:t,onStopAndReset:(0,n.useCallback)((()=>{const{playing:e,prevState:t}=o().project.editor;e?t&&r((0,l.restoreState)(qt(Gt({},t),{editor:Gt({},t.editor)}))):r((0,l.changeMoment)(0))}),[r,o]),onPlayOrStop:(0,n.useCallback)(((e=!1)=>{var t;const n=o().project,{settings:{enabled3d:a}}=n;if(n.editor.playing){const e=i.current;i.current=null,r((0,l.changeEditor)(0,Object.assign({playing:0,canvasScale:(null==(t=n.editor.prevState)?void 0:t.editor.canvasScale)||1},e&&{selectedSceneId:e})))}else a&&r((0,l.changeCanvasScale)(1,!0)),i.current=n.editor.selectedSceneId,setTimeout((()=>r((0,l.restoreState)(qt(Gt({},n),{editor:Object.assign(qt(Gt({},n.editor),{prevState:n,playing:1}),a?{canvasScale:1}:{}),scenes:n.scenes.map((t=>{const r=qt(Gt({},t),{editor:qt(Gt({},t.editor),{selected:{}})});return e&&t.id===n.editor.selectedSceneId&&t.editor.moment>=t.editor.scale*n.editor.count&&(r.editor.moment=0),r}))})))))}),[r,o])}},rr=(e,t)=>{const r=t.map((t=>(0,c.qC)(e,Number(t))[0])).filter((e=>e)),n=(e,t,r)=>e.reduce((([e,t],{nodes:r,scripts:o})=>{for(const{time:r,duration:n=0}of o.filter((({type:e})=>"Script"!==e)))e=Math.min(e,r),t=Math.max(t,r+n);return n(r,e,t)}),[t,r]),[o,a]=n(r,Number.MAX_SAFE_INTEGER,0);return[Math.min(o,a),a,r]},nr=()=>{const{dispatch:e,getState:t,subscribe:r}=(0,a.oR)(),{playing:o,onPlayOrStop:i}=tr();return{playing:o,onPreview:(0,n.useCallback)((n=>{const{nodes:o}=(0,c.zh)(t().project),[a,l]=rr(o,[n]);e((0,E.changeMoment)(a)),i(),e((0,E.selectNode)([n]));const s=setTimeout((()=>{t().project.editor.playing&&e((0,E.changeMoment)(l))}),l-a);setTimeout((()=>{const e=r((()=>{t().project.editor.playing||(clearTimeout(s),e())}))}))}),[e,t,i,r])}},or=()=>{const{getState:e}=(0,a.oR)();return(0,n.useCallback)((()=>{const{editor:{selected:t}}=(0,c.zh)(e().project);return(0,c.bN)(t)}),[e])},ar=()=>{const{dispatch:e,getState:t}=(0,a.oR)();return(0,n.useCallback)((()=>{const{editor:{selected:r},nodes:n}=(0,c.zh)(t().project),o=Object.keys(r).map(Number);if(o.length){const[,t]=(0,c.qC)(n,o[0]);if(t)return e((0,E.selectNode)(t.nodes.map((({id:e})=>e))))}return e((0,E.selectNode)(n.map((({id:e})=>e))))}),[e,t])};function ir(e,t=!1,r=!1,o=!1){const{dispatch:i,getState:l}=(0,a.oR)(),s=(0,a.v9)((r=>{const{editor:{selected:n},props:a}=(0,c.zh)(r.project);if(e){const r=lr(a,e,o);return t?e in n&&(!o||0===n[e].length):Object.values(n).some((e=>e.includes(r)))}if(0===e)return(0,c.bN)(n)}),tt.isEqual),p=(0,n.useCallback)((({ctrlKey:e,metaKey:t,shiftKey:r,currentTarget:n,target:a},s,p=!1,u=!1)=>{var d,f;if(u&&n&&n!==a)return;const m=(0,c.zO)(t,e),{editor:{selected:y},props:b}=(0,c.zh)(l().project);if(!p){if(!m)return i((0,E.selectScript)(s.map((e=>lr(b,e,o)))));const{scriptIds:e}=(0,c.bN)(y);return i((0,E.selectScript)((0,tt.xor)(e,s.map((e=>lr(b,e,o))))))}if(1!==s.length)throw new Error("Please specify one and only on id when selecting nodes!");const[h]=s;if(!m&&!r)return i((0,E.selectNode)([h]));{const e=l().project;if(e.editor.playing)return i((0,E.selectNode)([h]));const t=(0,c.zh)(e),r=Object.keys(t.editor.selected).map(Number);if(r.includes(h))i(m?(0,E.selectNode)(r.filter((e=>e!==h))):(0,E.selectNode)(r.slice(0,r.indexOf(h)+1)));else if(r.length&&(null==(d=(0,c.qC)([t],r[0])[1])?void 0:d.nodes.some((e=>e.id===h))))if(m)i((0,E.selectNode)(r.concat(h)));else{const e=(null==(f=(0,c.qC)([t],r[0])[1])?void 0:f.nodes.map((({id:e})=>e)))||[],n=e.indexOf(r[0]),o=e.indexOf(h);i(n>o?(0,E.selectNode)(e.slice(o,n+1).reverse()):(0,E.selectNode)(e.slice(n,o+1)))}else i((0,E.selectNode)([h]))}}),[i,l,o]);return{selected:s,onSelectId:p,onSelect:(0,n.useCallback)((n=>p(n,[e||0],t,r)),[r,e,t,p])}}const lr=(e,t,r)=>{if(e[t]||!r)return t;try{return(0,c.Nf)(e,t).pop().id}catch(e){return t}};var cr,sr,pr,ur=["title","titleId"];function dr(){return dr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dr.apply(this,arguments)}var fr,mr,yr,br,hr,gr=function(e,t){var r=e.title,o=e.titleId,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ur);return n.createElement("svg",dr({width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":o},a),r?n.createElement("title",{id:o},r):null,cr||(cr=n.createElement("path",{d:"M18 0H0V18H18V0Z",fill:"white",fillOpacity:.01})),sr||(sr=n.createElement("rect",{x:9,y:9,width:6,height:6,rx:.5,fill:"white",stroke:"currentColor",strokeWidth:1.5})),pr||(pr=n.createElement("rect",{x:3,y:3,width:8,height:8,rx:.5,fill:"white",stroke:"currentColor",strokeWidth:1.5})))},vr=(0,n.forwardRef)(gr),Or=(r.p,["title","titleId"]);function kr(){return kr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kr.apply(this,arguments)}var xr=function(e,t){var r=e.title,o=e.titleId,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Or);return n.createElement("svg",kr({width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":o},a),r?n.createElement("title",{id:o},r):null,fr||(fr=n.createElement("path",{d:"M2 16V2",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),mr||(mr=n.createElement("path",{d:"M16 16V2",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),yr||(yr=n.createElement("path",{d:"M2 2L16 2",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),br||(br=n.createElement("path",{d:"M2 16L16 16",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),hr||(hr=n.createElement("path",{d:"M6 6H9.6V8.4H12V12H8.4V9.6H6V6Z",fill:"white",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))},Er=(0,n.forwardRef)(xr);r.p;const wr=e=>{const{editor:{selected:t}}=(0,c.zh)(e.project);return Object.keys(t).map(Number).length>0},Pr=e=>{const{editor:{selected:t},nodes:r}=(0,c.zh)(e.project),n=Object.keys(t).map(Number),o=(0,c.qC)(r,n[0])[0];return 1===n.length&&!t[n[0]].length&&(null==o?void 0:o.nodes.length)>0},jr=()=>{const{dispatch:e,getState:t}=(0,a.oR)();return{canSplitGroup:(0,a.v9)(Pr),canJoinGroup:(0,a.v9)(wr),onJoinGroup:(0,n.useCallback)((()=>{if(wr(t())){const{editor:{selected:r}}=(0,c.zh)(t().project);return e((0,l.joinGroup)((0,c.xv)(),Object.keys(r).map(Number))),!0}return!1}),[e,t]),onSplitGroup:(0,n.useCallback)((()=>{if(Pr(t())){const{editor:{selected:r}}=(0,c.zh)(t().project);return e((0,l.splitGroup)(Object.keys(r).map(Number)[0])),!0}return!1}),[e,t])}};var Sr=r(67343),Cr=r(98466),Ir=Object.defineProperty,Ar=Object.defineProperties,Mr=Object.getOwnPropertyDescriptors,_r=Object.getOwnPropertySymbols,Dr=Object.prototype.hasOwnProperty,Rr=Object.prototype.propertyIsEnumerable,Nr=(e,t,r)=>t in e?Ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;let Vr="https://magicplay.oceanengine.com/static-cloud/invoke/beta_function";(0,Ue.cM)({online:!0})||(Vr+="_boe");let Br=!0;var Zr=()=>{const{getState:e,dispatch:t}=(0,a.oR)();(0,n.useEffect)((()=>{Br&&!e().userinfo&&(Br=!1,(0,Cr.bG)().then((e=>{return void 0,null,r=function*(){var r;try{yield lt().post(Vr,{online:(0,Ue.cM)({release:!0}),userId:e.userId,advId:new URLSearchParams(location.search).get("aadvid"),cusId:null==(r=e.customerInfo)?void 0:r.customerId}).then((({data:{permissions:r}})=>{var n;t((0,Sr.g)((n=((e,t)=>{for(var r in t||(t={}))Dr.call(t,r)&&Nr(e,r,t[r]);if(_r)for(var r of _r(t))Rr.call(t,r)&&Nr(e,r,t[r]);return e})({},e),Ar(n,Mr({permissions:r})))))}))}catch(r){t((0,Sr.g)(e))}},new Promise(((e,t)=>{var n=e=>{try{a(r.next(e))}catch(e){t(e)}},o=e=>{try{a(r.throw(e))}catch(e){t(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);a((r=r.apply(undefined,null)).next())}));var r})).catch((()=>{Br=!0})))}),[e,t])},Tr=r(95721);let zr=!1,Lr=!1;function Ur(e){zr?Tr.Z.show(e):console.warn("Imbot not bo init",e)}var Fr=r(38241);const Yr=e=>(Zr(),(0,a.v9)((({userinfo:t})=>null==t?void 0:t.permissions.includes(e)))),$r=()=>(Zr(),(0,a.v9)((({userinfo:e})=>e))),Qr=()=>{const e=Yr("imbot");return(0,n.useEffect)((()=>{e&&"development"!==Fr.env.Mode&&(zr||Lr||(Lr=!0,function(){return e=this,t=function*(){let e="https://magicplay.oceanengine.com/static-cloud/invoke/bot_service";(0,Ue.cM)({online:!0})||(e+="_boe");const{data:t}=yield lt().get(e);return t},new Promise(((r,n)=>{var o=e=>{try{i(t.next(e))}catch(e){n(e)}},a=e=>{try{i(t.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,a);i((t=t.apply(e,null)).next())}));var e,t}().then((e=>{Tr.Z.init({env:e.env,platToken:e.platToken,getSignatureUrl:e.signatureUrl,getSignatureHeaders:e.signatureHeaders,version:"v4",entryOptions:{theme:e.entry.theme,bottom:e.entry.bottom},user:e.user,showEntry:e.entry.show,moveable:e.moveable,startQuestion:e.startQuestion,onShow:()=>{(0,c.r3)(c.GM.SmartRobot,null)}}),Lr=!1,zr=!0}))))}),[e]),{showImDialog:Ur}},Wr={};function Jr(e,t){return(0,n.useEffect)((()=>{if(t){const r="function"!=typeof t?e=>t.current=e:t;return Wr[e]?Wr[e].push(r):Wr[e]=[r],()=>{Wr[e].splice(Wr[e].indexOf(r),1)}}}),[e,t]),(0,n.useCallback)((t=>{var r;null==(r=Wr[e])||r.slice().forEach((e=>e(t)))}),[e])}var Kr=r(8523);const Hr=()=>{const e=(0,a.I0)(),t=(0,a.v9)((({project:e})=>(0,c.zh)(e).history.undoStack.some((({undo:e,flag:t})=>e&&t!==w.ActionFlag.SideEffect))),a.wU),r=(0,n.useCallback)((()=>{e((0,E.undoAction)())}),[e]);return(0,Kr.Bv)(`${(0,c.zO)("command","control")}+z`,r),{canUndo:t,onUndo:r}},Gr=()=>{const e=(0,a.I0)(),t=(0,a.v9)((({project:e})=>(0,c.zh)(e).history.redoStack.filter((({flag:e})=>e!==w.ActionFlag.Continuous)).length)),r=(0,n.useCallback)((()=>{e((0,E.redoAction)())}),[e]);return(0,Kr.Bv)(`${(0,c.zO)("command","control")}+shift+z`,r),{redoSteps:t,onRedo:r}};var qr=r(17981);const Xr=e=>{const t=(0,a.v9)((({project:t})=>{const{moment:r}=(0,c.zh)(t).editor;return e?Math.min(null!=r?r:0,e):r})),{dispatch:r,getState:o}=(0,a.oR)();return{moment:t,onChange:(0,n.useCallback)((e=>{const{editor:{count:t}}=o().project,{editor:{scale:n}}=(0,c.zh)(o().project);r((0,E.changeMoment)(Math.max(Math.min(e,t*n),0)))}),[r,o])}};var en=Object.defineProperty,tn=Object.defineProperties,rn=Object.getOwnPropertyDescriptors,nn=Object.getOwnPropertySymbols,on=Object.prototype.hasOwnProperty,an=Object.prototype.propertyIsEnumerable,ln=(e,t,r)=>t in e?en(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const cn=({project:e})=>{var t;const{editor:{selected:r},props:n}=(0,c.zh)(e),{nodeIds:o,scriptIds:a}=(0,c.bN)(r);if(1===o.length)return{disabled:!1,asMask:Boolean(null==(t=n[o[0]])?void 0:t.asMask),canApplyMask:!1};const i=a.length>0||0===o.length||o.some((e=>n[e].asMask));return{disabled:i,asMask:!1,canApplyMask:!i&&o.length>1}},sn=()=>{const{dispatch:e,getState:t}=(0,a.oR)();return r=((e,t)=>{for(var r in t||(t={}))on.call(t,r)&&ln(e,r,t[r]);if(nn)for(var r of nn(t))an.call(t,r)&&ln(e,r,t[r]);return e})({},(0,a.v9)(cn,a.wU)),o={onMask:(0,n.useCallback)((()=>{const{editor:{selected:r},nodes:n}=(0,c.zh)(t().project),o=Object.keys(r).map(Number),{disabled:a,asMask:i,canApplyMask:l}=cn(t());if(l){if(!a){const[{id:t}]=(0,c.gz)(n,o).slice(-1);e((0,E.changeProps)([t],{asMask:!0})),e((0,E.joinGroup)((0,c.xv)(),o))}}else e((0,E.changeProps)(o,{asMask:!i}))}),[e,t])},tn(r,rn(o));var r,o};var pn=r(3207),un=Object.defineProperty,dn=Object.defineProperties,fn=Object.getOwnPropertyDescriptors,mn=Object.getOwnPropertySymbols,yn=Object.prototype.hasOwnProperty,bn=Object.prototype.propertyIsEnumerable,hn=(e,t,r)=>t in e?un(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gn=(e,t)=>{for(var r in t||(t={}))yn.call(t,r)&&hn(e,r,t[r]);if(mn)for(var r of mn(t))bn.call(t,r)&&hn(e,r,t[r]);return e},vn=(e,t)=>dn(e,fn(t)),On=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const kn=[],xn=(e,t,r)=>{const o=(0,pn.useCurrent)({get(){for(const[n]of wn(t,r)){const t=n.find((({id:t})=>t===e));if(t)return t}},set(n,o=!1){return On(this,null,(function*(){if(o)return r(t.concat(yield n())),!0;for(const[o,a]of wn(t,r)){const t=o.findIndex((({id:t})=>t===e))+1;if(t>0)return a([...o.slice(0,t),yield n(),...o.slice(t)]),!0}return!1}))},del(){for(const[n,o]of wn(t,r))if(n.some((({id:t})=>t===e)))return o(n.filter((({id:t})=>t!==e))),!0;return!1}});(0,n.useEffect)((()=>(kn.push(o),()=>{kn.splice(kn.findIndex((e=>e===o)),1)})),[o])},En=()=>({get(){for(let e=kn.length-1;e>-1;e--){const t=kn[e].current.get();if(t)return t}},del(){for(let e=kn.length-1;e>-1;e--)if(kn[e].current.del())return!0;return!1},set(e){return On(this,null,(function*(){for(let t=kn.length-1;t>-1;t--)if(yield kn[t].current.set(e))return!0;return kn.length>0&&(yield kn[0].current.set(e,!0)),!1}))}});function*wn(e,t){yield[e,t];for(let r=0;r<e.length;r++)for(const n of["scripts","elseScripts"]){const{[n]:o=[]}=e[r].props;yield*wn(o,(o=>{const a=e.slice();a[r]=vn(gn({},e[r]),{props:vn(gn({},e[r].props),{[n]:o})}),t(a)}))}}function Pn(e,t,r){const o=(0,a.v9)((({project:n})=>{const{props:{[e]:o}}=(0,c.zh)(n);return t?o[t]||r:o}),a.wU),i=(0,a.I0)();return{[null!=t?t:"props"]:o,onChange:(0,n.useCallback)(((r,n)=>{i((0,E.changeProps)([e],t?{[t]:r}:r,n))}),[i,e,t])}}},51908:function(e,t,r){"use strict";r.d(t,{BR:function(){return E},KL:function(){return j},O6:function(){return w}});var n=r(23247),o=r.n(n),a=r(23256),i=r(2502),l=r(40985),c=r(61645),s=r(73760),p=r(3197),u=r(7910),d=r(23936),f=Object.defineProperty,m=Object.defineProperties,y=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&v(e,r,t[r]);if(b)for(var r of b(t))g.call(t,r)&&v(e,r,t[r]);return e},k=(e,t)=>m(e,y(t)),x=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const E=(0,a.Yo)("editor.clipboard",(e=>{try{return JSON.parse(e)}catch(e){return null}}),JSON.stringify,!0),w=(e,t,r=!1)=>{const n=!r&&t===e.id,a=e.id===t?Promise.resolve(e):(0,i.Kl)(t);return j(e,n,!1,((e,t)=>"number"==typeof t||"string"==typeof t&&t.includes("payload=")),(e=>x(void 0,null,(function*(){const{scenes:t}=P(yield a);if("number"==typeof e){const r=t.find((t=>t.orderId===e));return[null==r?void 0:r.sceneId,r]}{const{data:t}=yield o().get(e),r=(0,l.m7)(t);return[e,r]}}))),((e,t)=>x(void 0,null,(function*(){const{customScripts:r}=P(yield a);if(void 0===e&&t){const e=r.find((e=>e.name===t));return[null==e?void 0:e.id,e]}if("number"==typeof e){const t=r.find((t=>t.orderId===e));return[null==t?void 0:t.id,t]}{const{searchParams:t}=new URL((0,u.GR)(e)),{name:r}=yield(0,c.pR)(t.get("payload")||"",25).catch((()=>({name:"未知脚本"}))),{data:n}=yield o().get(e),a=k(O({},(0,s.omit)(n,"tsCode")),{ideCode:n.ideCode?n.ideCode:"typescript"===n.language?n.tsCode:n.jsCode,type:"CustomScript",name:r});return[e,a]}}))),{getOldMaterial(e){return x(this,null,(function*(){return"number"==typeof e?(yield a).materials.find((t=>t.orderId===e)):e}))},getOldTexture2D(e){return x(this,null,(function*(){return(yield a).texture2Ds.find((t=>t.orderId===e))}))}},r)},P=({editor:e,scenes:t,customScripts:r,cubemaps:n,materials:o,texture2Ds:a,panoramaDataList:i=[]})=>{var l,c;if(e.prevState){const s=P(e.prevState);return{customScripts:r.concat(s.customScripts.filter((({orderId:e})=>!r.some((t=>t.orderId===e))))),scenes:t.concat(s.scenes.filter((({orderId:e})=>!t.some((t=>t.orderId===e))))),cubemaps:n.concat(s.cubemaps.filter((({orderId:e})=>!n.some((t=>t.orderId===e))))),texture2Ds:a.concat(s.texture2Ds.filter((({orderId:e})=>!a.some((t=>t.orderId===e))))),materials:o.concat(s.materials.filter((({orderId:e})=>!o.some((t=>t.orderId===e))))),panoramaDataList:i.concat(null!=(c=null==(l=s.panoramaDataList)?void 0:l.filter((({orderId:e})=>!i.some((t=>t.orderId===e)))))?c:[])}}return{customScripts:r,scenes:t,cubemaps:n,materials:o,panoramaDataList:i,texture2Ds:a}},j=(e,t,r,n,o,a,i,c)=>{const u=(0,s.memoize)(o),f=(0,s.memoize)(a),{scenes:m,customScripts:y,cubemaps:b,texture2Ds:h,materials:g,panoramaDataList:v=[]}=P(e);let E=Math.max(...m.map((({orderId:e,id:t})=>t===e?0:e)),...y.map((({orderId:e,id:t})=>t===e?0:e)),...b.map((({orderId:e,id:t})=>t===e?0:e)),...h.map((({orderId:e,id:t})=>t===e?0:e)),...g.map((({orderId:e,id:t})=>t===e?0:e)),...v.map((({orderId:e,id:t})=>t!==e&&e?e:0)));const w=[],j=[],S=[],C=[],I=e=>x(void 0,null,(function*(){try{const[t,r]=yield u(e),n=m.concat(j).find((e=>e.parentId===t));if(n)return n.orderId;if(!r)throw new Error;const o=j.push(k(O({},r),{parentId:c?void 0:t,orderId:++E})),a=(0,l.GV)(j[o-1]);return j[o-1]=(0,l.m7)(k(O({},a),{nodes:yield D(a.nodes),scripts:yield _(a.scripts)})),j[o-1].orderId}catch(e){return void console.log(e)}})),A=e=>x(void 0,null,(function*(){try{const[t,r]=yield f(e),n=y.concat(w).find((e=>e.parentId===t));if(n)return n.orderId;if(!r)return new Error;const o=k(O({},r),{parentId:c?void 0:t,orderId:++E});return w.push(o),(0,d.M)(o.ideCode,a,(({orderId:e})=>{A(e)})),o.orderId}catch(e){return}})),M=e=>x(void 0,null,(function*(){return t?e:Object.fromEntries(yield Promise.all(Object.entries(e||{}).map((e=>x(this,[e],(function*([e,t]){var r;switch(t.callee){case"Riko.useRes":return"Component"===t.type&&n("Component",t.value)?[e,k(O({},t),{value:yield I(t.value)})]:[e,t];case"Riko.useArray":const o=t.value.map((e=>x(this,null,(function*(){const{v:r}=yield M({v:(0,l.a$)(t.defaultItem,e)});return(0,l.Xm)(r)}))));return[e,k(O({},t),{value:yield Promise.all(o)})];case"Riko.useObject":case"object":return[e,k(O({},t),{value:yield M(null!=(r=t.value)?r:t.default)})];case"Riko.useEvent":return[e,k(O({},t),{value:yield _(t.value)})];default:return[e,t]}}))))))})),_=(...e)=>x(void 0,[...e],(function*(e=[]){return t?e:Promise.all(e.map((e=>x(this,null,(function*(){if(r&&"ChangeScene"===e.props.script&&n("Component",e.props.sceneId))return k(O({},e),{props:k(O({},e.props),{sceneId:yield I(e.props.sceneId),scripts:e.props.scripts&&(yield _(e.props.scripts))})});if("CustomScript"===e.props.script){const t=yield M((0,s.pickBy)(e.props,((e,t)=>t.startsWith("$")&&e)));return k(O({},e),{props:k(O(O({},e.props),t),{url:n("CustomScript",e.props.url)?yield A(e.props.url):e.props.url,scripts:e.props.scripts&&(yield _(e.props.scripts))})})}return"CloneComponent"===e.props.script&&n("Component",e.props.url)?k(O({},e),{props:k(O({},e.props),{url:yield I(e.props.url),scripts:e.props.scripts&&(yield _(e.props.scripts))})}):k(O({},e),{props:k(O({},e.props),{scripts:e.props.scripts&&(yield _(e.props.scripts))})})})))))})),D=(...e)=>x(void 0,[...e],(function*(e=[]){if(t)return e;const r=(...e)=>x(this,[...e],(function*(e=[]){return Promise.all(e.map((e=>x(this,null,(function*(){const t=e.props.filter((({key:e,value:t})=>t&&e.startsWith("$")));if(t.length){const r=yield M(Object.fromEntries(t.map((({key:e,value:t})=>[e,t]))));return k(O({},e),{props:e.props.map((e=>r[e.key]?k(O({},e),{value:r[e.key]}):e))})}return e})))))})),o=e=>x(this,null,(function*(){return n("Component",e)?I(e):e})),a=e=>x(this,null,(function*(){if(t||!(null==i?void 0:i.getOldMaterial))return e;const r=yield i.getOldMaterial(e);if("string"==typeof r)return e;if(r){r.orderId=++E;for(let e=0,t=Object.entries(r.material.props);e<t.length;e++){const[n,o]=t[e];if(n.endsWith("Url")&&"number"==typeof o){const e=yield l(o);r.material.props[n]=e}}return S.push(r),r.orderId}return""})),l=e=>x(this,null,(function*(){if(t||!(null==i?void 0:i.getOldTexture2D))return;const r=yield i.getOldTexture2D(e);return r?(r.orderId=++E,C.push(r),r.orderId):void 0}));return Promise.all(e.map((e=>x(this,null,(function*(){var t,n,i,l;return"Animation"===e.type||"Animation3D"===e.type?k(O({},e),{props:k(O({},e.props),{compProps:yield r(null==(t=e.props)?void 0:t.compProps),url:yield o(null==(n=e.props)?void 0:n.url)}),scripts:yield _(e.scripts),nodes:yield D(e.nodes)}):["Model","Particle3D"].includes(e.type)?k(O({},e),{props:k(O({},e.props),{url:yield o(null==(i=e.props)?void 0:i.url)}),scripts:yield _(e.scripts),nodes:yield D(e.nodes)}):["ParticleSystem3D"].includes(e.type)||e.type.endsWith("MeshSprite3D")?k(O({},e),{props:O(O({},e.props),(null==(l=e.props)?void 0:l.materialUrls)?{materialUrls:yield Promise.all(e.props.materialUrls.map((e=>a(e))))}:{}),scripts:yield _(e.scripts),nodes:yield D(e.nodes)}):k(O({},e),{scripts:yield _(e.scripts),nodes:yield D(e.nodes)})})))))}));return{copyNode:D,copyScript:_,createScenes(){return x(this,null,(function*(){if(e.editor.readOnly)return{components:j,customScripts:w,materials:S,texture2Ds:C};const t=yield(0,p.to)(e.id,[w.map((e=>({name:e.name,orderId:e.orderId,sceneContent:JSON.stringify(e)}))),j.map((e=>({name:e.name,orderId:e.orderId,sceneContent:JSON.stringify((0,l.GV)(e))}))),S.map((e=>({name:e.name,orderId:e.orderId,sceneContent:JSON.stringify(e)}))),C.map((e=>({name:e.name,orderId:e.orderId,sceneContent:JSON.stringify(e.props)})))].flat());return{components:j.map((e=>{const{id:r,orderId:n}=t.find((({orderId:t})=>t===e.orderId));return(0,l.oY)(e,r,n)})),customScripts:w.map((e=>k(O({},e),{id:t.find((({orderId:t})=>t===e.orderId)).id}))),materials:S.map((e=>k(O({},e),{id:t.find((({orderId:t})=>t===e.orderId)).id}))),texture2Ds:C.map((e=>k(O({},e),{id:t.find((({orderId:t})=>t===e.orderId)).id})))}}))}}}},17981:function(e,t,r){"use strict";r.d(t,{cm:function(){return s},jE:function(){return l},mG:function(){return c}});var n=r(22142),o=r(42761),a=r(40985),i=r(63414);function l(e,t){const r=t||e,l=(0,o.v9)((({project:t})=>{if(0===e)return t.editor[r];const{nodes:n,editor:o}=(0,a.zh)(t);return e===r?o[r]:((0,a.qC)(n,e)[0].editor||{})[r]}),o.wU),{dispatch:c,getState:s}=(0,o.oR)();return{[r]:l,onChange:(0,n.useCallback)(((n,o=!1)=>{const{editor:{selectedSceneId:a}}=s().project;c((0,i.changeEditor)(t?e:a,{[r]:n},o))}),[c,s,e,r,t])}}const c=()=>{const e=(0,o.I0)();return(0,n.useCallback)(((t,r,n=!1)=>{e((0,i.changeEditor)(t,r,n))}),[e])},s=()=>{const e=(0,o.v9)((({project:e})=>e.editor.count)),{dispatch:t,getState:r}=(0,o.oR)();return{count:e,onChangeCount:(0,n.useCallback)(((e,n)=>{const{editor:{count:o}}=r().project;if(o<n||o>e+n+20||o<e+.382*n){const r=10*Math.ceil(Math.max(e+.618*n,n)/10);t((0,i.changeEditor)(0,{count:Math.min(r,1200)},!0))}}),[t,r])}}},8523:function(e,t,r){"use strict";r.d(t,{i1:function(){return i},Bv:function(){return a}});var n=r(41204),o=r(17981);const a=(e,t,r,a)=>{const{enableBlueprint:i}=(0,o.jE)(0,"enableBlueprint"),l={enabled:Boolean(!i)};(0,n.y)(e,t,r||l,a||[])},i=(e,t,r,a)=>{const{enableBlueprint:i}=(0,o.jE)(0,"enableBlueprint"),l={enabled:Boolean(i)};(0,n.y)(e,t,r||l,a)}},67343:function(e,t,r){"use strict";r.d(t,{g:function(){return o}});const n=Symbol("UserInfo"),o=e=>({type:n,userinfo:e});t.Z=(e=null,t)=>t.type===n?t.userinfo:e},44207:function(e,t,r){"use strict";r.d(t,{Z:function(){return n},W:function(){return o}});const n=(e,t=!0,r=0)=>e.reduce(((e,{scripts:r,nodes:o})=>{for(const{time:t=0,enabled:n=!0,duration:o=0}of r)n&&(e=Math.max(e,t+o));return t?n(o,t,e):e}),r),o=(e,t=!0,r=Number.MAX_SAFE_INTEGER)=>e.reduce(((e,{scripts:r,nodes:n})=>{for(const{time:t}of r)e=Math.min(e,t);return t?o(n,t,e):e}),r)%Number.MAX_SAFE_INTEGER},79565:function(e,t,r){"use strict";r.d(t,{ZP:function(){return et},Gt:function(){return Fe}});var n=r(22142),o=r(62255),a=r(88902),i=r(81958),l=r.p+"5d4467046740de967ce00ac650fddd8c.svg",c=r(84648);const s=c.reduce(((e,{list:t})=>(t.forEach((({name:t})=>e[t]={default:l})),e)),{});var p=r.p+"5d4467046740de967ce00ac650fddd8c.svg",u=r(36683);const d=u.reduce(((e,{list:t})=>(t.forEach((({name:t})=>e[t]={default:p})),e)),{});var f=r.p+"82cc88d9c96ee44bbc1d33cc80eb9086.svg",m=r(78903);const y=m.reduce(((e,{list:t})=>(t.forEach((({name:t})=>e[t]={default:f})),e)),{});var b=r.p+"57d27a152fa19c185a04a7a4c1acd041.svg",h=r.p+"ffbf1e5c909974f05e294702da7f4465.svg",g=r(94580);const v=g.reduce(((e,{list:t})=>(t.forEach((({name:t})=>e[t]={default:b})),e)),{}),O=g.reduce(((e,{list:t})=>(t.forEach((({name:t})=>e[t]={default:h})),e)),{});var k=r.p+"11cfceb102b4a1273920a5e41b931d24.svg",x=r(34326),E=Object.defineProperty,w=Object.defineProperties,P=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,A=(e,t)=>{for(var r in t||(t={}))S.call(t,r)&&I(e,r,t[r]);if(j)for(var r of j(t))C.call(t,r)&&I(e,r,t[r]);return e},M=(e,t)=>w(e,P(t));const _=x.map((e=>M(A({},e),{list:[...e.list].map((e=>M(A({},e),{props:A({loop:!0},e.props)})))}))),D=_.reduce(((e,{list:t})=>(t.forEach((({name:t})=>e[t]={default:k})),e)),{});var R=r.p+"11cfceb102b4a1273920a5e41b931d24.svg",N=r(24648),V=Object.defineProperty,B=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,U=(e,t,r)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,F=(e,t)=>{for(var r in t||(t={}))z.call(t,r)&&U(e,r,t[r]);if(T)for(var r of T(t))L.call(t,r)&&U(e,r,t[r]);return e},Y=(e,t)=>B(e,Z(t));const $=N.map((e=>Y(F({},e),{list:[...e.list].map((e=>Y(F({},e),{props:F({loop:!0},e.props)})))}))),Q=$.reduce(((e,{list:t})=>(t.forEach((({name:t})=>e[t]={default:R})),e)),{});var W=r(60730),J=r.p+"cdb195381f51f36c099040f4ea683441.svg",K=Object.defineProperty,H=Object.defineProperties,G=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable,te=(e,t,r)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,re=(e,t)=>{for(var r in t||(t={}))X.call(t,r)&&te(e,r,t[r]);if(q)for(var r of q(t))ee.call(t,r)&&te(e,r,t[r]);return e},ne=(e,t)=>H(e,G(t));const oe=W.map((e=>ne(re({},e),{list:[...e.list].map((e=>ne(re({},e),{props:re({isInEffect:!1},e.props)})))}))),ae=oe.reduce(((e,{list:t})=>(t.forEach((({name:t})=>e[t]={default:J})),e)),{});var ie=r(73760);function le(e,t){e="editor._effectChanger."+e;const[r,...n]=t;let o=sessionStorage.getItem(e);if(o&&(o=JSON.parse(o),(0,ie.isArray)(o))){const e=[],t={};for(const e of n)for(const r of e.list)t[`${r.script}_${r.name}`]=r;for(const r of o)t[r]&&e.push(t[r]);if(e.length<10)for(const t of r.list)if(o.indexOf(`${t.script}_${t.name}`)<0&&e.push(t),10===e.length)break;return e}return t[0].list}var ce=r(78203),se=r(42761),pe=r(40985),ue=r(19104),de=r(61542),fe=r.n(de),me=r(93379),ye=r.n(me),be=r(7795),he=r.n(be),ge=r(90569),ve=r.n(ge),Oe=r(3565),ke=r.n(Oe),xe=r(19216),Ee=r.n(xe),we=r(44589),Pe=r.n(we),je=r(14307),Se={};Se.styleTagTransform=Pe(),Se.setAttributes=ke(),Se.insert=ve().bind(null,"head"),Se.domAPI=he(),Se.insertStyleElement=Ee(),ye()(je.Z,Se),je.Z&&je.Z.locals&&je.Z.locals;var Ce=Object.defineProperty,Ie=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,_e=(e,t,r)=>t in e?Ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const De="effect-changer";var Re=({onQueryChange:e,onClick:t,defaultIcon:r,keyword:o,active:a,icons:i,group:l,title:c,data:s})=>{const{onStartPreview:p,onStopPreview:u}=Ne(),d=o?s.filter((e=>e.name.includes(o))):s;return(0,n.useEffect)((()=>{o&&(null==e||e(l,d.length))}),[d,o,l,e]),d.length>0?n.createElement(n.Fragment,null,c&&n.createElement("div",{className:`${De}-effect-title`},c),n.createElement("div",{style:{padding:"0 0 16px"}},fe()(d,5).map(((e,o)=>n.createElement("div",{key:o,style:{display:"flex",flexWrap:"wrap"}},e.map((({script:e,name:o,duration:c,props:s},d)=>n.createElement("div",{key:d,className:(0,pe.xG)({[`${De}-effect-item`]:1,active:`${e}_${o}`===a}),onClick:()=>{(0,ie.isNil)(l)||function(e,t){e="editor._effectChanger."+e;let r=sessionStorage.getItem(e);const n=`${t.script}_${t.name}`;if(r)if(r=JSON.parse(r),(0,ie.isArray)(r)){const t=r.indexOf(n);t>=0&&r.splice(t,1),10===r.length&&r.pop(),r.unshift(n),sessionStorage.setItem(e,JSON.stringify(r))}else sessionStorage.setItem(e,JSON.stringify([n]));else sessionStorage.setItem(e,JSON.stringify([n]))}(l,{script:e,name:o}),t(((e,t)=>{for(var r in t||(t={}))Ae.call(t,r)&&_e(e,r,t[r]);if(Ie)for(var r of Ie(t))Me.call(t,r)&&_e(e,r,t[r]);return e})({script:e,name:o,duration:c,__script:[l,`${e}_${o}`]},(0,ie.cloneDeep)(s)))},onMouseLeave:u,onMouseEnter:()=>{p({script:e,name:o,duration:c,props:s})}},n.createElement("div",null,n.createElement("img",{src:(i[o]||r).default,alt:o})),n.createElement("div",null,o))))))))):null};const Ne=()=>{const{dispatch:e,getState:t}=(0,se.oR)();return{onStopPreview:()=>{e((0,ue.playScript)({scriptId:0}))},onStartPreview:(0,i.Z)((r=>{const{editor:{selected:n}}=(0,pe.zh)(t().project),{nodeIds:[o]}=(0,pe.bN)(n);e((0,ue.playScript)({script:{nodeId:o,scriptData:{id:0,type:"Effect",props:(0,ie.cloneDeep)(r)}}}))}),400).run}};var Ve=r.p+"f910b7de6087f293d09a151fbf8b3efc.svg",Be=Object.defineProperty,Ze=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,Le=(e,t,r)=>t in e?Be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ue=(e,t)=>{for(var r in t||(t={}))Te.call(t,r)&&Le(e,r,t[r]);if(Ze)for(var r of Ze(t))ze.call(t,r)&&Le(e,r,t[r]);return e},Fe=([e,t]=[])=>{const r=null==t?void 0:t.split("_")[1];return(0,n.useMemo)((()=>{const t=(e,t)=>t&&e[t]||Object.values(e)[0];return t(t({maskOutEffect:v,maskInEffect:O,maskEffect:O,baseEffect:s,loopEffect:D,outEffect:Ue(Ue({},ae),v),inEffect:Ue(Ue({},y),O)},e),r)}),[e,r])},Ye=Object.defineProperty,$e=Object.defineProperties,Qe=Object.getOwnPropertyDescriptors,We=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable,He=(e,t,r)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ge=(e,t)=>{for(var r in t||(t={}))Je.call(t,r)&&He(e,r,t[r]);if(We)for(var r of We(t))Ke.call(t,r)&&He(e,r,t[r]);return e},qe=(e,t)=>$e(e,Qe(t));const Xe={inEffect:!0,outEffect:!0,loopEffect:!0,baseEffect:!0};function et({onClick:e,__script:[t,r]=[]}){const{edit3d:l}=(0,ue.useEditor)("edit3d"),[p,f]=(0,n.useState)(""),[b,h]=(0,n.useState)(Ge({},Xe)),k=(0,n.useRef)(Ge({},Xe)),x=n.createElement(o.Z,{className:"effect-changer-effect-input",placeholder:"请输入",maxLength:10,prefix:n.createElement(ce.Z,null),onChange:({target:{value:e}})=>{k.current=Ge({},Xe),f(e)}}),{run:E}=(0,i.Z)((()=>h(Ge({},k.current))),100,[p]),w=(e,t)=>{t>0&&(k.current[e]=!1)};return n.createElement("div",{className:"effect-changer-effect-container"},n.createElement(a.Z,{defaultActiveKey:t||"inEffect",tabBarExtraContent:x,onChange:()=>E()},n.createElement(a.Z.TabPane,{tab:"进场",key:"inEffect"},p&&b.inEffect&&n.createElement(tt,null),!p&&n.createElement(Re,{title:m[0].name,active:r,data:l?[]:le("inEffect",[...m,...g]),group:"inEffect",icons:Ge(Ge({},y),O),defaultIcon:y["一直显示"],keyword:p,onClick:e}),m.slice(1).map((t=>n.createElement(Re,{key:`in_${t.key}`,title:t.name,active:r,data:l?[]:t.list,group:"inEffect",icons:y,defaultIcon:y["一直显示"],keyword:p,onClick:e,onQueryChange:w}))),n.createElement(Re,{key:`in_${g[0].key}`,title:g[0].name,active:r,data:l?[]:g[0].list,group:"inEffect",icons:O,defaultIcon:O["三叶草"],keyword:p,onClick:e,onQueryChange:w})),n.createElement(a.Z.TabPane,{tab:"退场",key:"outEffect"},p&&b.outEffect&&n.createElement(tt,null),!p&&n.createElement(Re,{title:oe[0].name,active:r,data:l?[]:le("outEffect",[...oe,...g]),group:"outEffect",icons:Ge(Ge({},ae),v),defaultIcon:ae["一直显示"],keyword:p,onClick:e}),oe.slice(1).map((t=>n.createElement(Re,{key:`in_${t.key}`,title:t.name,active:r,data:l?[]:t.list,group:"outEffect",icons:ae,defaultIcon:ae["一直显示"],keyword:p,onClick:e,onQueryChange:w}))),n.createElement(Re,{key:`out_${g[0].key}`,title:g[0].name,active:r,data:l?[]:g[0].list.map((e=>qe(Ge({},e),{props:qe(Ge({},e.props),{isInEffect:!1})}))),group:"outEffect",icons:v,defaultIcon:v["三叶草"],keyword:p,onClick:e,onQueryChange:w})),n.createElement(a.Z.TabPane,{tab:"循环",key:"loopEffect"},l?n.createElement(Re,{title:$[0].name,active:r,data:$[0].list,group:"loopEffect3D",icons:Q,defaultIcon:D["呼吸效果"],keyword:p,onClick:e}):n.createElement(n.Fragment,null,p&&b.loopEffect&&n.createElement(tt,null),!p&&n.createElement(Re,{title:_[0].name,active:r,data:le("loopEffect",_),group:"loopEffect",icons:D,defaultIcon:D["上下振动"],keyword:p,onClick:e}),_.slice(1).map((t=>n.createElement(Re,{key:`loop_${t.key}`,title:t.name,active:r,data:l?[]:t.list,group:"loopEffect",icons:D,defaultIcon:D["上下振动"],keyword:p,onClick:e,onQueryChange:w}))))),n.createElement(a.Z.TabPane,{tab:"通用",key:"baseEffect"},l?n.createElement(Re,{active:r,data:u[0].list,group:"baseEffect3D",icons:d,defaultIcon:d["位移动画"],keyword:p,onClick:e,onQueryChange:w}):n.createElement(n.Fragment,null,p&&b.baseEffect&&n.createElement(tt,null),n.createElement(Re,{active:r,data:l?u[0].list:c[0].list,group:"baseEffect",icons:l?d:s,defaultIcon:s["一直显示"],keyword:p,onClick:e,onQueryChange:w})))))}function tt(){return n.createElement("div",{style:{paddingTop:"30px",textAlign:"center",color:"#999"}},n.createElement("img",{src:Ve,style:{maxWidth:"100%"}}),n.createElement("div",null,"没有找到相关动画"))}},96193:function(e,t,r){"use strict";r.d(t,{G:function(){return n.Gt}});var n=r(79565),o=r(82305),a=r(40985),i=r(73760),l=r(22142),c=Object.defineProperty,s=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const f=(0,o.Z)((e=>l.createElement(n.ZP,((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&d(e,r,t[r]);if(s)for(var r of s(t))u.call(t,r)&&d(e,r,t[r]);return e})({},e))),"添加动画",410,"EffectChanger");t.Z=e=>{let t={bottom:100,right:40};if(!(0,i.isNil)(e)){const r=e.getBoundingClientRect();t={top:r.top+4,left:r.left-400-4}}return({title:e,__script:r,onChange:n,onClose:o})=>l.createElement(f,{title:e,__script:r,defaultPos:t,defaultHeight:576,onClose:o,onClick:e=>{(0,a.r3)(a.GM.AnimationType,{name:e.name});const t=(0,a.xv)();n({id:t,props:e,type:"Effect"}),o()}})}},92181:function(e,t,r){"use strict";r.d(t,{q:function(){return k}});var n=r(22142),o=r(90812),a=r(88158),i=r(35001),l=r(70983),c=r(86274),s=r(44128),p=r(25961),u=r(12278),d=r(82305),f=r(83413),m=Object.defineProperty,y=Object.defineProperties,b=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const k=n.createContext({}),x=({eleType:e,onChange:t,acceptFiles:r})=>n.createElement(k.Provider,{value:{onChange:t,acceptFiles:r}},(e=>{switch(e){case"Sprite":return n.createElement(a.Z,null);case"Sound":return n.createElement(i.Z,null);case"NativeLoadingVideo":return n.createElement(l.B1,null);case"AlphaVideo":case"PVAlphaVideo":return n.createElement(l.p_,null);case"NativeVideo":return n.createElement(l.qS,null);case"Video":return n.createElement(l.ZP,null);case"VRVideo":return n.createElement(l.Ic,null);case"Animation":case"CustomScript":return n.createElement(p.Z,{defaultCategory:e});case"Animation3D":return n.createElement(f.Z,null);case"Lottie":case"FrameAnime":case"Particle":case"DragonBones":case"Spine":return n.createElement(o.Z,{defaultCategory:e});case"Cubemaps":return n.createElement(c.Z,null);case"Model":return n.createElement(u.Z,null);case"Texture2D":return n.createElement(s.Z,null);default:return null}})(e));t.Z=({selector:e="",top:t=4,left:r=-284}={})=>{const o=(0,d.Z)(x,"更换资源",280,`${null!=e?e:Date.now()}}`);return a=>{var i;let l={top:0,left:0};if(e){const n=null==(i=document.querySelector(e))?void 0:i.getBoundingClientRect();n&&(l={top:n.top+t,left:n.left+r})}return n.createElement(o,(c=((e,t)=>{for(var r in t||(t={}))g.call(t,r)&&O(e,r,t[r]);if(h)for(var r of h(t))v.call(t,r)&&O(e,r,t[r]);return e})({},a),y(c,b({defaultPos:l,defaultHeight:520}))));var c}}},3391:function(e,t,r){"use strict";var n=r(22142),o=r(70072),a=r(50969),i=r(92187),l=r(62732);t.Z=(0,n.memo)((({disabled:e=!1,visibleKey:t,placement:r="bottom",trigger:c,children:s,content:p,title:u})=>{const[d,f]=(0,n.useState)(!1),[m,y]=(0,i.Em)(t,{disabled:e||void 0!==c&&!d,byStep:void 0===c}),b=n.createElement("div",null,n.createElement("p",{className:(0,l.iv)({marginBottom:0,color:"white"})},p),n.createElement("div",{className:(0,l.iv)({display:"flex",justifyContent:"flex-end"})},n.createElement(o.Z,{size:"small",className:(0,l.iv)({marginTop:"6px",fontSize:"12px",color:"#3955F6"}),onClick:()=>{y(!1)}},"我知道了")));return n.createElement(a.Z,{color:"#3955F6",title:u,trigger:c,placement:r,open:m,content:b,onOpenChange:e=>f(e),overlayClassName:(0,l.iv)({".ant-popover-arrow":{borderTopColor:"#3955F6!important",borderLeftColor:"#3955F6!important",borderRightColor:"#3955F6!important",borderBottomColor:"#3955F6!important","span::before":{background:"linear-gradient(270deg,rgb(57, 85, 246),rgb(57, 85, 246)) no-repeat -10px -10px"}},".ant-popover-title":{borderBottom:"none",paddingTop:12,color:"white"},".ant-popover-inner-content":{paddingTop:0,maxWidth:256}})},s)}))},82305:function(e,t,r){"use strict";r.d(t,{Z:function(){return v}});var n=r(22142),o=r(14540),a=r(27885),i=r(48585),l=r(73760),c=r(26494),s=r(92187),p=r(62732),u=r(5635),d=Object.defineProperty,f=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&b(e,r,t[r]);if(f)for(var r of f(t))y.call(t,r)&&b(e,r,t[r]);return e};const g={content:(0,p.iv)({position:"absolute",zIndex:100,top:0,left:0,display:"flex",flexDirection:"column",paddingBottom:"12px",boxShadow:"0 3px 6px -4px rgba(0,0,0,.12), 0 6px 16px 0 rgba(0,0,0,.08), 0 9px 28px 8px rgba(0,0,0,.05)"}),header:(0,p.iv)({position:"relative",padding:"16px",cursor:"move"}),headerTitle:(0,p.iv)({paddingRight:"16px",color:"rgba(0, 0, 0, 0.85)",fontWeight:500,fontSize:"14px",lineHeight:"20px"}),headerClose:(0,p.iv)({position:"absolute",top:0,right:0,padding:"16px",color:"rgba(0, 0, 0, 0.45)",lineHeight:"20px",cursor:"pointer"}),contentBody:(0,p.iv)({position:"relative",flex:1}),contentScrollBox:(0,p.iv)({position:"absolute",top:0,bottom:0,left:0,right:0,overflow:"auto","&::-webkit-scrollbar-thumb":{backgroundColor:"#e8e8e8",borderRadius:"2px"},"&::-webkit-scrollbar":{width:"4px"}}),resizeY:(0,p.iv)({position:"absolute",bottom:0,left:0,right:0,height:"12px",borderTop:"1px solid #E8E8E8",textAlign:"center",fontSize:"0 !important",verticalAlign:"middle",cursor:"ns-resize","& .i-icon":{fontSize:"0 !important"}})};function v(e,t,r,d){return b=>{var v=b,{onClose:O,title:k,defaultPos:x,defaultHeight:E}=v,w=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&f)for(var n of f(e))t.indexOf(n)<0&&y.call(e,n)&&(r[n]=e[n]);return r})(v,["onClose","title","defaultPos","defaultHeight"]);const[P,j]=(0,n.useState)({top:0,left:0}),[S,C]=(0,n.useState)(E||500),I=(0,n.useRef)(null),A=(0,n.useRef)(null),M=(0,n.useRef)({w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}),_=(0,n.useRef)({offset:P,height:S});_.current={offset:P,height:S};const{isDragging:D,calculatedState:R}=(0,s.c0)(I,{originData:{x:P.left,y:P.top}}),{isDragging:N,calculatedState:V}=(0,s.c0)(A,{originData:{y:S}}),B=(0,c.Z)((()=>{let e=sessionStorage.getItem("editor._draggingModalOffset."+d),t=sessionStorage.getItem("editor._draggingModalHeight."+d);t=t?JSON.parse(t):t;const n={},o=t&&(0,l.isNumber)(t)&&t<M.current.h?t:E||500;x&&((0,l.isNil)(x.top)?(0,l.isNil)(x.bottom)||(n.top=M.current.h-o-x.bottom):n.top=x.top,(0,l.isNil)(x.left)?(0,l.isNil)(x.right)||(n.left=M.current.w-r-x.right):n.left=x.left,n.top=n.top?Math.min(n.top,M.current.h-o):n.top,n.left=n.left?Math.min(n.left,M.current.w-r):n.left),e&&(e=JSON.parse(e),(0,l.isObject)(e)&&(0,l.isNumber)(e.top)&&(0,l.isNumber)(e.left)&&(n.left=Math.min(e.left,M.current.w-r),n.top=Math.min(e.top,M.current.h-o))),C(o),_.current.height=o,j((e=>{const t=h(h({},e),n);return _.current.offset=t,t}))}));(0,n.useLayoutEffect)((()=>{const e=()=>{M.current={w:document.documentElement.clientWidth,h:document.documentElement.clientHeight},B()};return window.addEventListener("resize",e),B(),()=>{window.removeEventListener("resize",e)}}),[B]),(0,n.useLayoutEffect)((()=>(D&&document.getElementsByTagName("html")[0].classList.add("global-dragging-cursor"),()=>{sessionStorage.setItem("editor._draggingModalOffset."+d,JSON.stringify(_.current.offset)),document.getElementsByTagName("html")[0].classList.remove("global-dragging-cursor")})),[D]),(0,n.useEffect)((()=>{if(!D)return;const{x:e,y:t}=R;if(e&&t){const n=Math.min(Math.max(e,0),M.current.w-r),o=Math.min(Math.max(t,0),M.current.h-_.current.height);j({top:o,left:n})}}),[D,R]),(0,n.useLayoutEffect)((()=>(N&&document.getElementsByTagName("html")[0].classList.add("global-resize-y-cursor"),()=>{sessionStorage.setItem("editor._draggingModalHeight."+d,_.current.height.toString()),document.getElementsByTagName("html")[0].classList.remove("global-resize-y-cursor")})),[N]),(0,n.useEffect)((()=>{if(N&&V.y){const e=Math.min(Math.max(V.y,200),M.current.h-_.current.offset.top);C(e)}}),[N,V]);const{token:Z}=u.Z.useToken(),T=n.createElement("div",{className:(0,p.cx)(g.content,(0,p.iv)({background:Z.colorBgContainer})),style:{width:`${r}px`,height:`${S}px`,transform:`translate3d(${P.left}px,${P.top}px,0 )`},onClick:e=>e.stopPropagation()},n.createElement("div",{className:g.header,ref:I},n.createElement("div",{className:g.headerTitle},k||t)),n.createElement("div",{className:g.headerClose,onMouseDown:e=>e.stopPropagation(),onClick:O},n.createElement(a.Z,null)),n.createElement("div",{className:g.resizeY,ref:A},n.createElement(i.Z,{theme:"outline",size:"10",fill:"#333"})),n.createElement("div",{className:g.contentBody},n.createElement("div",{className:g.contentScrollBox},n.createElement(e,h({},w)))));return o.createPortal(T,document.body)}}},92187:function(e,t,r){"use strict";r.d(t,{c0:function(){return P},b:function(){return p},kL:function(){return h},_0:function(){return u},RL:function(){return y},xx:function(){return a},RA:function(){return o},Em:function(){return m}});var n=r(22142);const o=e=>{const t=(0,n.useRef)(null),[r,o]=(0,n.useState)(0);return(0,n.useEffect)((()=>{const{current:e}=t;if(e){const t=()=>{o(e.duration)};return e.addEventListener("loadedmetadata",t),()=>{e.removeEventListener("loadedmetadata",t)}}}),[e]),{ref:t,duration:r,display:`${Math.max(r,.1).toFixed(1)}s`}},a=e=>{const t=(0,n.useState)((()=>location.search.includes(`visible=${e}`))),[r]=t;return(0,n.useEffect)((()=>{const t=new URL(location.href);r?t.searchParams.set("visible",e):t.searchParams.delete("visible"),history.replaceState(void 0,"",t.href)}),[r,e]),t};var i=r(40985);let l={ctrlMeta:!1,shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1};const c=[],s=({ctrlKey:e,metaKey:t,shiftKey:r,altKey:n})=>{l={ctrlMeta:(0,i.zO)(t,e),shiftKey:r,altKey:n,ctrlKey:e,metaKey:t};for(const e of c)e(l)};for(const e of["keydown","keyup"])document.addEventListener(e,s);const p=(e,t)=>{const[r,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const r=({[e]:r=!1})=>{null==t||t(r),o(r)};return c.push(r),r(l),()=>{c.splice(c.indexOf(r),1)}}),[e,t]),r},u=(e,t)=>{const r=(0,n.useRef)(t);return(0,n.useMemo)((()=>e(r.current,r.current=t)),t)},d=[],f=(e,t)=>1===e||-1===e?d.includes(t)?d[0]===t:1===d.push(t):0!==e,m=(e,{nextValue:t,threshold:r,before:o,byStep:a=!0,disabled:i=!1}={})=>{const[l,c]=(0,n.useState)((()=>{const n=localStorage.getItem(`editor.popup.${e}`)||sessionStorage.getItem(`editor.popup.${e}`);if(!n)return 1;if(t)return n===t?0:1;const a=Number(n);return o&&a<o||r&&Date.now()-a>r?1:0}));return(0,n.useEffect)((()=>()=>{var e;const t=d.indexOf(c);t>-1&&(d.splice(t,1),0===t&&(null==(e=d[0])||e.call(d,(e=>-e))))}),[e]),[!i&&(a?f(l,c):0!==l),(0,n.useCallback)(((r,n=!0)=>{var o;r?c(2):(n?localStorage.setItem(`editor.popup.${e}`,null!=t?t:String(Date.now())):sessionStorage.setItem(`editor.popup.${e}`,null!=t?t:String(Date.now())),d[0]===c&&(d.shift(),null==(o=d[0])||o.call(d,(e=>-e))),c(0))}),[e,t])]},y=(e,t)=>{const[r,o]=m(e,t),[a,i]=(0,n.useState)(!1);return{setRemember:i,setVisible:(0,n.useCallback)((e=>{o(e,a)}),[a,o]),remember:a,visible:r}},b=e=>{},h=(e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER,{reserved:r=!1,vertical:o=!1,current:a=!1,storage:i="",onChange:l=b}={})=>{const[c,s]=(e=>{if(!e)return(0,n.useState)(0);const t=(0,n.useState)((()=>Number(localStorage.getItem(e))));return localStorage.setItem(e,String(t[0])),t})(i),[p,u]=(0,n.useState)(!1),d=(0,n.useRef)(void 0),f=(0,n.useRef)({clientX:0,clientY:0});return(0,n.useEffect)((()=>{if(p){let e=0;const t=()=>{var t;u(!1),null==(t=d.current)||t.call(d,e),d.current=void 0},r={mouseleave:t,mouseup:t,mousemove({clientY:t,clientX:r}){const n=o?t-f.current.clientY:r-f.current.clientX;f.current={clientX:r,clientY:t},e=Math.max(e,Math.abs(n)),s((e=>(l(e+n),e+n)))}};for(const[e,t]of Object.entries(r))document.addEventListener(e,t);return()=>{for(const[e,t]of Object.entries(r))document.removeEventListener(e,t)}}s(r?r=>Math.max(Math.min(r,t),e):0)}),[p,t,e,r,o]),{accumulative:Math.max(Math.min(c,t),e),activated:p,activate:(0,n.useCallback)((({button:e,target:t,currentTarget:r,clientX:n,clientY:o},i)=>{0!==e||a&&t!==r?null==i||i(0):(u(!0),d.current=i,f.current={clientX:n,clientY:o})}),[a])}};var g=r(73760),v=Object.defineProperty,O=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t)=>{for(var r in t||(t={}))k.call(t,r)&&E(e,r,t[r]);if(O)for(var r of O(t))x.call(t,r)&&E(e,r,t[r]);return e};const P=(e,t={})=>{const[r,o]=(0,n.useState)(!1),[a,i]=(0,n.useState)({x:0,y:0}),[l,c]=(0,n.useState)(t.originData||{x:0,y:0}),s=(0,n.useRef)({}),p=(0,n.useRef)(l);return p.current=t.originData||{x:0,y:0},(0,n.useEffect)((()=>{const r=e=>{if(t.disabled)return;i({x:0,y:0}),o(!0),s.current={pos:{x:e.pageX,y:e.pageY},origin:w({},p.current),isDragging:!0};const r={};(0,g.isNil)(s.current.origin.x)||(r.x=s.current.origin.x),(0,g.isNil)(s.current.origin.y)||(r.y=s.current.origin.y),c(r)},n=e.current;return e.current.addEventListener("mousedown",r),()=>{n.removeEventListener("mousedown",r)}}),[e,t.disabled]),(0,n.useEffect)((()=>{if(!r)return;const e=e=>{if(!s.current.isDragging)return;const{pageX:t,pageY:r}=e,n=t-s.current.pos.x,o=r-s.current.pos.y;i({x:n,y:o});const a={};(0,g.isNil)(s.current.origin.x)||(a.x=s.current.origin.x+n),(0,g.isNil)(s.current.origin.y)||(a.y=s.current.origin.y+o),c(a)},t=t=>{e(t),o(!1),s.current={}};return window.addEventListener("mousemove",e),window.addEventListener("mouseup",t),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t),o(!1)}}),[r]),{isDragging:r,dragOffset:a,calculatedState:l}}},47567:function(e,t,r){"use strict";r.d(t,{bh:function(){return $},W8:function(){return at},ZS:function(){return n},U3:function(){return p},zl:function(){return f},v4:function(){return d},Qs:function(){return u}});var n,o,a=r(91694),i=r(63500),l=r(82302),c=r(61618),s=r(45698);(o=n||(n={}))[o.Invalid=-1]="Invalid",o[o.Unused=0]="Unused",o[o.Start=1]="Start",o[o.Normal=2]="Normal",o[o.Loop=3]="Loop",o[o.End=4]="End";const p=e=>Object.values(e).reduce(((e,{jumpSceneId:t})=>e+Number("number"==typeof t)),0)>1,u=e=>{switch(e){case 1:return"开始";case 2:return"普通";case 3:return"循环";case 4:return"结束";case 0:return"未用";case-1:return"无效"}},d=(e,t)=>{const r=t.find((t=>t.orderId===e));if(!r)return-1;const n=Object.values(r.props).some((({jumpSceneId:e})=>t.find((({orderId:t})=>t===e)))),o=t.some((({props:e})=>Object.values(e).some((({jumpSceneId:e})=>e===r.orderId))));return o&&p(r.props)?3:n&&o?2:n?1:o?4:0},f=e=>{const t=(r,n={},o=1)=>{if(!r.length)return n;const a=[];return r.forEach(((t,i)=>{r.length>1?n[t.orderId]=`${o}.${i+1}`:n[t.orderId]=`${o}`,Object.values(t.props).forEach((({jumpSceneId:t})=>{const r=e.find((({orderId:e})=>e===t));r&&a.push(r)}))})),t(a.filter((({orderId:e})=>!n[e])),n,o+1)};return t(e.filter((({orderId:t})=>1===d(t,e))))};var m=r(19104),y=r(42761),b=r(31284),h=r(14270),g=r(10268),v=r(80926),O=r(26840),k=r(45858),x=r(92187),E=r(22142),w=r(71092),P=r(7910),j=r(62732),S=r(22142);const[C,I]=[108,192],A=(0,j.iv)({outline:"6px solid #fd9c04"});var M={start:({selected:e})=>S.createElement("div",{className:(0,j.iv)({textAlign:"center",fontSize:12,width:C+24,height:I+12+20,background:"#ffccc7",borderRadius:4,display:"flex",justifyContent:"center",alignItems:"center"},e&&A)},"开始",S.createElement(a.HH,{type:"source",position:b.P.Right,style:{height:12,width:12,right:-6}})),video:({data:{url:e="",name:t="",type:r=""},selected:n})=>{const{ref:o,display:i}=(0,x.RA)(e),[l,c]=(0,E.useState)(!1);(0,E.useEffect)((()=>{var e;null==(e=o.current)||e.addEventListener("ended",(function(){c(!1)}))}),[]),(0,E.useEffect)((()=>{o.current&&(l?(o.current.currentTime=0,o.current.play()):o.current.pause())}),[l]);const{trigger:s}=(0,w.Z)("VideoPlayableVideoPlaying",(e=>{e!==c&&c(!1)})),p=l?h.Z:g.Z,u=S.createElement("div",{className:(0,j.iv)({textAlign:"center",fontSize:12,padding:"12px 12px 0",background:"#cfebfc",borderRadius:4,position:"relative"},n&&A)},S.createElement("video",{key:e,ref:o,preload:"metadata",src:(0,P.GR)(e),className:(0,j.iv)({width:C,height:I,objectFit:"contain",borderRadius:4,background:"#fafafa",display:"block",margin:"0 auto"})}),S.createElement(p,{className:(0,j.iv)({position:"absolute",top:"50%",left:"50%",color:"#333",transform:"translate(-50%, -50%)",transition:"200ms",cursor:"pointer",fontSize:36,opacity:0,"&:hover":{opacity:.62}}),onClick:()=>{o.current&&(c(!l),s(c))}}),S.createElement(v.Z.Text,{type:"secondary",className:(0,j.iv)({display:"block",width:C,height:20,lineHeight:"20px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})},S.createElement(O.Z,{placement:"bottom",title:t},t)),S.createElement(a.HH,{type:"target",position:b.P.Left,style:{height:12,width:12,left:-6}}),S.createElement(a.HH,{type:"source",position:b.P.Right,style:{height:12,width:12,right:-6}}));return r?S.createElement(k.Z.Ribbon,{text:`${r} ${i}`,color:"#8acbf5"},u):u}},_=r(73760),D=Object.defineProperty,R=Object.defineProperties,N=Object.getOwnPropertyDescriptors,V=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,T=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z=(e,t)=>{for(var r in t||(t={}))B.call(t,r)&&T(e,r,t[r]);if(V)for(var r of V(t))Z.call(t,r)&&T(e,r,t[r]);return e},L=(e,t)=>R(e,N(t));var U=r(86286),F=r(32078),Y=r(22142),$=({onClose:e})=>{const{ref:t,isFullscreen:r,setFull:n,exitFull:o}=(0,U.Z)(),{edges:b,onConnect:h,onEdgesChange:g}=(()=>{const e=(0,y.v9)((({project:{scenes:e}})=>e)),{dispatch:t,getState:r}=(0,y.oR)(),[n,o]=(0,E.useState)(""),a=[];for(const{id:t,props:r}of e){const o=p(r);for(const[i,{jumpSceneId:l,type:c,name:s}]of Object.entries(r)){const r=e.find((({orderId:e})=>e===l));if(r&&(!o||"PVVideo"!==c)){const e=`${t}-${i}`;a.push({id:e,zIndex:1,source:String(t),animated:o,label:o?s:"自动跳转",target:String(r.id),selected:e===n,style:{stroke:e===n?"pink":"#333"}})}}}return{edges:a,onConnect:({source:e,target:n})=>{var o;if(e===n)return;const{project:a}=r(),[i,l]=[e,n].map((e=>a.scenes.find((t=>t.id===Number(e))))),c=i.nodes.filter((({id:e,type:t})=>"PVVideo"!==t&&"number"==typeof i.props[e].jumpSceneId));if(c.length){const{id:e}=null!=(o=c.find((({id:e})=>!a.scenes.find((({orderId:t})=>i.props[e].jumpSceneId===t)))))?o:c[c.length-1];return t((0,m.restoreState)(L(z({},a),{scenes:a.scenes.map((t=>t.id===i.id?L(z({},t),{props:L(z({},t.props),{[e]:L(z({},t.props[e]),{jumpSceneId:l.orderId})})}):t))})))}return t((0,m.restoreState)(L(z({},a),{scenes:a.scenes.map((e=>e.id===i.id?L(z({},e),{props:(0,_.mapValues)(e.props,(e=>"PVVideo"===e.type?L(z({},e),{jumpSceneId:l.orderId}):e))}):e))})))},onEdgesChange:e=>{const{project:n}=r();for(const r of e)switch(r.type){case"remove":const[e,a]=r.id.split("-").map(Number);t((0,m.restoreState)(L(z({},n),{scenes:n.scenes.map((t=>t.id===e?L(z({},t),{props:(0,_.mapValues)(t.props,((e,t)=>Number(t)===a?L(z({},e),{jumpSceneId:0}):e))}):t))})));break;case"select":o((e=>r.selected&&r.id!==e?r.id:""))}}}})(),{nodes:v,onNodesChange:k}=(()=>{const{dispatch:e}=(0,y.oR)(),t=(0,y.v9)((({project:{scenes:e}})=>e)),r=f(t);return{nodes:t.map((({id:e,props:n,name:o="（未命名）",orderId:a,editor:{position:i}},l)=>{var c,s;const{url:p=""}=null!=(c=Object.values(n).find((({type:e})=>"PVVideo"===e)))?c:{};return{type:"video",id:String(e),position:null!=i?i:{x:C+l*(I+C),y:I},data:{url:p,name:o,type:`${null!=(s=r[a])?s:""} ${u(d(a,t))}`}}})),onNodesChange:t=>{return r=function*(){for(const r of t)"position"===r.type&&r.position&&e((0,m.changeEditor)(Number(r.id),{position:r.position}))},new Promise(((e,t)=>{var n=e=>{try{a(r.next(e))}catch(e){t(e)}},o=e=>{try{a(r.throw(e))}catch(e){t(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);a((r=r.apply(void 0,null)).next())}));var r}}})();return Q(),Y.createElement(F.Z,{title:"视频故事板",centered:!0,open:!0,footer:null,width:1334,onCancel:e,maskClosable:!1,bodyStyle:{height:750,padding:0},className:(0,j.iv)({maxWidth:"unset"})},Y.createElement("div",{ref:t,style:{width:"100%",height:"100%"}},Y.createElement(a.ZP,{fitView:!0,nodes:v,edges:b,nodeTypes:M,onConnect:h,attributionPosition:"bottom-left",onEdgesChange:g,onNodesChange:k},Y.createElement(i.i,null),Y.createElement(l.i,{showInteractive:!1,style:{bottom:32}},Y.createElement(l.C,{onClick:()=>{r?o():n()}},Y.createElement(O.Z,{getPopupContainer:()=>t.current,title:r?"退出全屏":"进入全屏",placement:"right"},r?Y.createElement(c.Z,null):Y.createElement(s.Z,null)))))))};const Q=()=>{const{onChange:e}=(0,m.useEditor)(0,"enableBlueprint");(0,E.useEffect)((()=>(e(!0),()=>{e(!1)})),[e])};var W=r(40985),J=r(61754),K=r(28985),H=r(14908),G=r(16969),q=r(70072),X=r(14766),ee=r.n(X),te=r(98466);var re=r(78296),ne=r(50509),oe=r(27002),ae=r(22142),ie=Object.defineProperty,le=Object.defineProperties,ce=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable,de=(e,t,r)=>t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fe={custom:({id:e,sourceX:t,sourceY:r,targetX:n,targetY:o,sourcePosition:i,targetPosition:l,style:c={},markerEnd:s,label:p="自动跳转"})=>{const{setEdges:u}=(0,oe.u)(),d=(0,a.OQ)({sourceX:t,sourceY:r,sourcePosition:i,targetX:n,targetY:o,targetPosition:l}),[f,m]=(0,a.Pp)({sourceX:t,sourceY:r,targetX:n,targetY:o});return ae.createElement(ae.Fragment,null,ae.createElement("path",{id:e,style:c,className:"react-flow__edge-path",d:d,markerEnd:s}),ae.createElement(re.Z,{overlay:ae.createElement(ne.Z,{onClick:({key:t})=>{u((r=>r.map((r=>{return r.id===e?(n=((e,t)=>{for(var r in t||(t={}))pe.call(t,r)&&de(e,r,t[r]);if(se)for(var r of se(t))ue.call(t,r)&&de(e,r,t[r]);return e})({},r),o={label:t,style:{stroke:r.selected?"pink":"#333"},animated:"自动跳转"!==t},le(n,ce(o))):r;var n,o}))))}},ae.createElement(ne.Z.Item,{key:"自动跳转"},"自动跳转"),ae.createElement(ne.Z.Item,{key:"互动跳转"},"互动跳转"))},ae.createElement(a.f6,{x:f,y:m,label:`${p} *`,labelStyle:{fill:"#333"},labelShowBg:!0,labelBgStyle:{fill:"#fff"},labelBgPadding:[2,4],labelBgBorderRadius:2})))}},me=r(60350),ye=r(48837),be=Object.defineProperty,he=Object.defineProperties,ge=Object.getOwnPropertyDescriptors,ve=Object.getOwnPropertySymbols,Oe=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,xe=(e,t,r)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ee=(e,t)=>{for(var r in t||(t={}))Oe.call(t,r)&&xe(e,r,t[r]);if(ve)for(var r of ve(t))ke.call(t,r)&&xe(e,r,t[r]);return e},we=(e,t)=>he(e,ge(t)),Pe=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const je=(e,t)=>Pe(void 0,null,(function*(){return yield Promise.all(t.map((r=>Pe(this,[r],(function*({id:r,position:n,nextIds:o,isLoopVideo:a}){const{name:i,url:l}=e.find((e=>e.id===r)),c=yield Ce(i,l,1===o.length?t.findIndex((({id:e})=>e===o[0]))+1:0);if(!a)return Se([c],n);const s=1280/(o.length+1);return Se([...o.map(((e,r)=>Ie(t.findIndex((t=>t.id===e))+1,s*(r+1)))),c].reverse(),n)})))))})),Se=(e,t)=>{var r,n,o;const a=(0,W.xv)();return we(Ee({},(0,W.m7)({id:a,type:"Scene",scripts:[],editor:{scale:50,moment:0,edit3d:!1,dataVersion:me.M,dragOffsetX:0,dragOffsetY:0,position:t},props:{name:null!=(o=null==(n=null==(r=e.find((({type:e})=>"PVVideo"===e)))?void 0:r.props)?void 0:n.name)?o:"视频场景",width:720,height:1280},nodes:e})),{sceneId:a,orderId:1})},Ce=(e,t,r)=>Pe(void 0,null,(function*(){const n=(0,W.kj)(yield(0,ye.createNode)(e,"PVVideo",W.xv,t),720,1280);return n.props=we(Ee({},n.props),{jumpSceneId:r}),n.editor=we(Ee({},n.editor),{isLocked:!0}),n.scripts[0].props.loop=!0,n})),Ie=(e,t)=>({id:(0,W.xv)(),type:"PVClickArea",editor:{isLocked:!1,isHidden:!1},scripts:[],nodes:[],props:{x:120,y:t-60,width:480,height:120,rotation:0,anchorX:.5,anchorY:.5,scaleX:1,scaleY:1,alpha:1,enabled:!0,name:"点击热区",shapeType:"rectangle",fillColor:"#2860ED88",showGuide:!1,jumpSceneId:e,_editor:{lockedRatio:!1}}});var Ae=r(3207),Me=r(41204),_e=Object.defineProperty,De=Object.defineProperties,Re=Object.getOwnPropertyDescriptors,Ne=Object.getOwnPropertySymbols,Ve=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable,Ze=(e,t,r)=>t in e?_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Te=e=>e.reduce(((e,t)=>e.concat(t.selected?t.id:[])),[]);var ze=Object.defineProperty,Le=Object.defineProperties,Ue=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,Qe=(e,t,r)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,We=(e,t)=>{for(var r in t||(t={}))Ye.call(t,r)&&Qe(e,r,t[r]);if(Fe)for(var r of Fe(t))$e.call(t,r)&&Qe(e,r,t[r]);return e},Je=(e,t)=>Le(e,Ue(t));const Ke=e=>{const t=(0,_.countBy)(e,"source");return e.map((e=>{if("0"===e.source)return e;const r=t[e.source]>1;return We(Je(We({},e),{zIndex:1,type:r?"default":"custom",style:{stroke:e.selected?"pink":"#333"}}),r?{label:"互动跳转",animated:!0}:{})}))};var He=r(73073),Ge=r(29923),qe=r(63150),Xe=r(76151),et=r(22142),tt=({projectId:e,videoEntries:t,setVideoEntries:r})=>et.createElement("div",{className:(0,j.iv)({display:"flex",columnGap:16,rowGap:24,flexWrap:"wrap"})},t.map((({id:e,url:n,name:o})=>et.createElement("div",{key:e,className:(0,j.iv)({display:"flex",position:"relative",flexDirection:"column",textAlign:"center",borderRadius:4})},et.createElement(Ge.Z,{style:{position:"absolute",right:0,cursor:"pointer",zIndex:100},onClick:()=>r(t.filter((t=>t.id!==e)))}),et.createElement("video",{src:n,className:(0,j.iv)({width:C,height:I,objectFit:"contain",display:"block",background:"#eee"})}),et.createElement(v.Z.Text,{type:"secondary",className:(0,j.iv)({width:C,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})},o)))),et.createElement(rt,{projectId:e,empty:!t.length,setVideoEntries:r}));const rt=({projectId:e,empty:t,setVideoEntries:r})=>{const[n,o]=(0,E.useState)(!1);return et.createElement(He.S2,{category:"NativeVideo",dragger:t,className:(0,j.iv)({"& .ant-upload":{padding:"0 !important"}}),projectId:e,uploading:n,setUploading:o,onAddResourceEntry:e=>{r((t=>t.concat(e).sort(((e,t)=>(0,W.$I)(e.name,t.name)))))}},et.createElement(Xe.Z,{spinning:n},et.createElement(v.Z.Text,{type:"secondary",className:(0,j.cx)((0,j.iv)({display:"flex",cursor:"pointer",justifyContent:"center",flexDirection:"column",alignItems:"center",background:"#eee",borderRadius:4,rowGap:12,height:I,width:C}),t&&(0,j.iv)({width:1294,height:750}))},et.createElement(qe.Z,null),et.createElement("div",null,t?"点击或拖拽到此处新增视频":"新增视频"))))};var nt=r(22142),ot=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())})),at=({projectId:e,onFinish:t})=>{const[r,n]=(0,E.useState)(0),[o,p]=(0,E.useState)([]),{nodes:u,edges:d,onNodesChange:f,onConnect:m,onEdgesChange:y}=(e=>{const[t,r]=(0,a.Rr)([]),[n,o]=(0,a.ll)([]);return(0,E.useEffect)((()=>{if(e.length){const t=Array.from({length:e.length+1}).map(((e,t)=>{const[r,n]=[Math.floor((t+1)/6),(t+1)%6];return{x:C+n*(C+I),y:I+r*(I+C)}})),n=e.map((({id:e,url:r,name:n},o)=>({type:"video",id:String(e),position:t[o+1],data:{url:r,name:n}})));r((e=>[{type:"start",id:"0",position:t[0],data:{url:"",name:""}},...n].map(((r,n)=>{const o=e.find((({id:e})=>e===r.id));return o?Je(We({},o),{position:t.some((({x:e,y:t})=>e===o.position.x&&o.position.y===t))?t[n]:o.position}):r})))),n.length&&o((e=>e.some((({source:e,target:t})=>"0"===e&&n.some((({id:e})=>e===t))))?e:e.concat((0,b.c)({source:"0",target:n[0].id,sourceHandle:null,targetHandle:null,zIndex:1},e))))}}),[e,r,o]),{nodes:t,edges:n,onNodesChange:e=>r((t=>(0,b.y)(e.filter((({type:e})=>"remove"!==e)),t))),onConnect:e=>{e.source!==e.target&&o((t=>{var r;return Ke("0"===e.source?(0,b.c)(e,t.filter((({source:t,target:r})=>"0"!==t&&r!==e.target))):e.target!==(null==(r=t.find((({source:e})=>"0"===e)))?void 0:r.target)?(0,b.c)(e,t):t)}))},onEdgesChange:e=>{o((t=>Ke((0,b.x)(e.filter((e=>{var r;return"remove"!==e.type||"0"!==(null==(r=t.find((({id:t})=>t===e.id)))?void 0:r.source)})),t))))}}})(r?o:[]),{ref:h,isFullscreen:g,setFull:v,exitFull:k}=(0,U.Z)(),[x,w]=(0,E.useState)(!1),[P,S]=(0,E.useState)(!1);!function(e,t){const r=(0,Ae.useCurrent)(Te(e));(0,Me.y)(`${(0,W.zO)("command","control")}+d`,(()=>t((e=>r.current.reduce(((t,r,n)=>{const o=e.find((e=>e.id===r));var a,i;return o&&t.push((a=((e,t)=>{for(var r in t||(t={}))Ve.call(t,r)&&Ze(e,r,t[r]);if(Ne)for(var r of Ne(t))Be.call(t,r)&&Ze(e,r,t[r]);return e})({},o),i={id:String(Date.now()+n)},De(a,Re(i)))),t}),[...e]))))),(0,E.useEffect)((()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&"d"===e.key&&e.preventDefault()};for(const t of["keydown","keyup","keypress"])document.addEventListener(t,e);return()=>{for(const t of["keydown","keyup","keypress"])document.removeEventListener(t,e)}}),[])}(u,p);const A=[{title:"上传视频",subTitle:"至少上传两个",nextDisabled:o.length<2,Component:nt.createElement(tt,{projectId:e,videoEntries:o,setVideoEntries:p})},{title:"连线视频",subTitle:"至少一条连线",nextClick:()=>ot(void 0,null,(function*(){try{w(!0),t(yield((e,t,r)=>je(e,((e,t)=>{if(t=t.filter((({source:t,target:r})=>[t,r].every((t=>e.some((({id:e})=>e===t)))))),!e.filter((({id:e})=>t.some((({target:t})=>t===e))&&t.every((({source:t})=>t!==e)))).length)throw new Error("不能没有结束视频");const r=(n,o=[])=>{var a;for(const i of n){if(o.some((e=>e.id===i)))continue;const n={id:i,position:null==(a=e.find((e=>e.id===i)))?void 0:a.position,isLoopVideo:t.some((({source:e,animated:t})=>e===i&&t)),nextIds:e.filter((e=>t.find((({source:t,target:r})=>t===i&&r===e.id)))).map((({id:e})=>e))};"0"!==i&&o.push(n),o=r(n.nextIds,o)}return o};return r(e.filter((({id:e})=>t.every((({target:t})=>t!==e)))).map((({id:e})=>e)))})(t,r)))(o,u,d))}catch(e){J.ZP.error(e.message)}finally{w(!1)}})),Component:nt.createElement(a.ZP,{fitView:!0,nodes:u,edges:d,nodeTypes:M,edgeTypes:fe,attributionPosition:"bottom-left",onNodesChange:f,onEdgesChange:y,onConnect:m},nt.createElement(i.i,null),nt.createElement(l.i,{showInteractive:!1,style:{bottom:32}},nt.createElement(l.C,{onClick:()=>{g?k():v()}},nt.createElement(O.Z,{getPopupContainer:()=>h.current,title:g?"退出全屏":"进入全屏",placement:"right"},g?nt.createElement(c.Z,null):nt.createElement(s.Z,null)))))}];return nt.createElement("div",{className:(0,j.iv)({position:"relative"})},nt.createElement("div",{className:(0,j.iv)({width:"62%",margin:"24px auto 16px"})},nt.createElement(K.Z,{current:r},A.map((({title:e,subTitle:t},o)=>nt.createElement(K.Z.Step,{key:o,title:e,subTitle:t,disabled:o>r,onStepClick:()=>{o<=r&&n(o)}}))))),nt.createElement("div",{ref:h,className:(0,j.iv)({flex:1,width:"100%",height:750})},A[r].Component),nt.createElement(H.Z,{className:(0,j.iv)({width:"100%",justifyContent:"flex-end",paddingTop:16})},!r&&nt.createElement(G.Z,{multiple:!1,showUploadList:!1,disabled:P,beforeUpload:t=>ot(void 0,null,(function*(){var r;try{S(!0);const n=yield(e=>{return t=function*(){const t=new FormData;t.append("file",e);const{data:r}=yield te.dJ.post("/faas/video_edit",t);return r.data},new Promise(((e,r)=>{var n=e=>{try{a(t.next(e))}catch(e){r(e)}},o=e=>{try{a(t.throw(e))}catch(e){r(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);a((t=t.apply(void 0,null)).next())}));var t})(t),o=new Uint8Array(n.video_data.data).buffer,a=yield ee().loadAsync(o),i=[];null==(r=a.folder("resources"))||r.forEach(((e,t)=>{i.push(t.async("blob").then((t=>new File([t],e,{type:"video/mp4"}))))})),console.log("response",n);const l=yield Promise.all(i),c=yield(0,He.Kf)(l,{projectId:e,isTeam:!1},"NativeVideo");c&&(yield c().then((e=>{p((t=>t.concat(e).sort(((e,t)=>(0,W.$I)(e.name,t.name)))))})))}catch(e){throw J.ZP.error(e.message),e}finally{return S(!1),!1}}))},nt.createElement(q.Z,{type:"primary",loading:P},"智能裁剪视频")),r?nt.createElement(q.Z,{onClick:()=>n(r-1)},"上一步"):null,nt.createElement(q.Z,{type:"primary",loading:x,disabled:A[r].nextDisabled,onClick:A[r].nextClick||(()=>n(r+1))},r<A.length-1?"下一步":"完成")))}},47709:function(e,t,r){"use strict";r.r(t),r.d(t,{LENGTH:function(){return a},OFF_HEAD:function(){return n},OFF_TAIL:function(){return o},ms2px:function(){return l},px2ms:function(){return i}});const n=2,o=4,a=10,i=(e,t,r=!1)=>r?i(e-n*a,t):Math.floor(e*t/a),l=(e,t)=>Math.floor(e*a/t)},21703:function(e,t,r){"use strict";r.d(t,{G:function(){return n},r:function(){return y}});var n,o,a=r(7910),i=r(85328),l=r.n(i),c=Object.defineProperty,s=Object.defineProperties,p=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function y(e,t){for(const e in t)null===t[e]&&(t[e]="be_null");var r,o;t?window.collectEvent(l()(n[e]),(r=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&m(e,r,t[r]);if(u)for(var r of u(t))f.call(t,r)&&m(e,r,t[r]);return e})({},t),o={platform:(0,a.cM)({release:!0})?"magicplay":"clab"},s(r,p(o)))):window.collectEvent(l()(n[e]),{platform:(0,a.cM)({release:!0})?"magicplay":"clab"})}(o=n||(n={}))[o.DataAction=0]="DataAction",o[o.UserSelectEventTrigger=1]="UserSelectEventTrigger",o[o.UserAddEventScript=2]="UserAddEventScript",o[o.SelectResource=3]="SelectResource",o[o.OriginResource=4]="OriginResource",o[o.OriginEffect=5]="OriginEffect",o[o.OriginComponent=6]="OriginComponent",o[o.OperationButton=7]="OperationButton",o[o.SceneLibrary=8]="SceneLibrary",o[o.CraftSuggestion=9]="CraftSuggestion",o[o.SmartRobot=10]="SmartRobot",o[o.RiskAlert=11]="RiskAlert",o[o.UploadResource=12]="UploadResource",o[o.CompressProduct=13]="CompressProduct",o[o.ProductType=14]="ProductType",o[o.ProductStatus=15]="ProductStatus",o[o.SyncLoadingTime=16]="SyncLoadingTime",o[o.UseResource=17]="UseResource",o[o.Tutorial=18]="Tutorial",o[o.VideoCompressDuration=19]="VideoCompressDuration",o[o.EventTracking=20]="EventTracking",o[o.CompressResource=21]="CompressResource",o[o.CodeMode=22]="CodeMode",o[o.GlobalLog=23]="GlobalLog",o[o.CreateGlobalVar=24]="CreateGlobalVar",o[o.LookOncallService=25]="LookOncallService",o[o.AnimationType=26]="AnimationType"},74860:function(e,t,r){"use strict";function n(e,t){return location.search.includes(`${e}=${t}`)}r.d(t,{C:function(){return n}})},43047:function(e,t,r){"use strict";r.d(t,{P:function(){return n},F:function(){return Ea}});var n={};r.r(n),r.d(n,{And:function(){return ga},Auto:function(){return ue},Blueprint:function(){return Kn.Z},Boolean:function(){return zo},ChangeScene:function(){return et},ChangeState:function(){return un},Click:function(){return te},CloneComponent:function(){return Re},Color:function(){return wo},Compare:function(){return ca},Compute:function(){return fa},Conditions:function(){return Rt},CopyText:function(){return Tr},Count:function(){return Go},CustomScript:function(){return Qe},DataListener:function(){return E},Destroy:function(){return Sn},DirectDownload:function(){return ze},DownloadApp:function(){return wt},Drag:function(){return be},Effect:function(){return Jn},EmitEvent:function(){return br},EventListener:function(){return h},FollowMouse:function(){return It},Gesture:function(){return B},GotoAndPlay:function(){return gt},GotoAndStop:function(){return dt},Keyboard:function(){return go},LongPress:function(){return M},Loop:function(){return xe},ModifyData:function(){return Qt},Mouse:function(){return lo},MouseDown:function(){return Y},MouseUp:function(){return ie},Number:function(){return Qo},Or:function(){return xa},PhysicsBehavior:function(){return Ce},PhysicsCollide:function(){return u},Play:function(){return qr},PlayEffect:function(){return zt},PlaySound:function(){return _r},Print:function(){return on},Quake:function(){return On},RemoveScene:function(){return it},Replay:function(){return Bn},RigidBody:function(){return kr},Settings:function(){return _n},Shaken:function(){return K},Stop:function(){return Qr},Switch:function(){return Ro},Time:function(){return Io},Track:function(){return Un},Visible:function(){return na},default:function(){return eo}});var o,a,i=r(22142),l=["title","titleId"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}var s,p=function(e,t){var r=e.title,n=e.titleId,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,l);return i.createElement("svg",c({t:1664270392160,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":14037,width:48,height:48,ref:t,"aria-labelledby":n},s),r?i.createElement("title",{id:n},r):null,o||(o=i.createElement("path",{d:"M733.6 622v0zM548.1 135.8l64 143.1L630 101.1l-81.9 34.7zM361.2 40.3L289 138.7l253.3 114.7L361.2 40.3z m416.3-19.2l-124 255.6 215-176.2-91-79.4zM1023.7 662.6c-5.6-27.3-15.1-49.2-42.7-49.2-0.8 0-1.7 0-2.6 0.1-5.7-3.4-9.7-9.1-10.9-15.7-7.7-32.1-16.1-64.2-20.9-97-4.3-45.3-36.5-83-80.6-94.2-15.5-5.2-31.3-9.2-47-13.8-31.3-9.1-63.7-13.6-96.3-13.6-8.7 0-17.4 0.3-26.1 1-19.1 2.8-38.3 4.8-57.4 7.8 6.1 16.1 12.3 32.2 18.6 48.2 54.7 2.7 109.3 6.5 163.9 11.5 19.8 2.9 39.1 8.5 57.4 16.7 9 3.5 16.1 10.6 19.7 19.5 11 43.2 19.9 87.2 30.4 135-37 5.3-74.2 8-111.5 8-28.1 0-56.1-1.5-84.1-4.5 3.8 16.6 6.7 33.3 8.7 50.2 5.2 64.1 10.3 128.3 14.4 192.5l102 10.6c0.5 22.7 3.9 45.3 10.1 67.1 22.6 7.3 46.1 11 69.7 11 8 0 15.9-0.4 23.9-1.3 7.6-10.3 12.1-22.6 13-35.4 3.5-26.6 4.6-53.7 6.4-80.6 3.2-50 6.3-100 9.5-150.3l31.1-6.3c1.5-5.8 1.9-11.6 1.3-17.3zM919 817.3l-53.6-5.5-48.4-5c-2.8-39.5-5.9-78.5-8.9-116.1 3.2 0 6.5 0.1 9.7 0.1 36.5 0 73.4-2.4 109.6-7.1-0.3 5.2-0.7 10.4-1 15.6-0.4 6.6-4.9 12.3-11.2 14.3-19.4 6.1-38.5 13.2-57.2 21.3-7 4.3-11.5 11.7-12.3 20 2.9 8 9.1 14.5 17 17.7 9.8 3.4 19.9 5.5 30.2 6.2 3.8 0.1 7.6 0.2 11.4 0.2 9.2 0 16.6 7.8 16 17-0.4 6.9-0.9 14.1-1.3 21.3z","p-id":14038})),a||(a=i.createElement("path",{d:"M756.4 570.6c0-0.1 0-0.2-0.1-0.3-5.9-26.2-29.1-44-54.8-44-4.1 0-8.2 0.4-12.3 1.4-8.6-2.6-15.6-9-19-17.4-20.8-45.9-40.8-92.2-59.9-138.9-9.6-27.2-32.7-47.4-61-53.3-37.4-7.5-75.6-10.7-113.5-15.7a500.655 500.655 0 0 0-162.9 15.5c-20.8 5.5-42.1 10.4-62.6 16.8-56.5 11.7-99.5 57.8-107.2 115-6.4 40.1-17.6 79.3-27.9 118.5-1.8 8.2-7.1 15.2-14.5 19.1-1.2 0-2.3-0.1-3.4-0.1-36.8 0-49.4 26.8-56.9 60.3-0.8 7-0.3 14.1 1.7 20.9l41.4 7.8c4.2 61.5 8.3 122.4 12.5 183.5 2.4 32.8 3.8 65.8 8.5 98.3 1.5 16 7.5 31 17.4 43.4 10.6 1 21.2 1.5 31.8 1.5 31.3 0 62.5-4.5 92.7-13.4 8.3-26.5 12.9-54.1 13.5-81.9l367.2-34.9c11.2 26.1-3.4 61 26.3 78.2 8.1 0.6 16.3 0.9 24.4 0.9 32.8 0 65.4-5 96.7-14.8 7.1-12.1 10.4-26.1 9.6-40.1-4.8-77.7-11.5-155.3-18.4-232.9-2.3-16.9-5.5-33.7-9.5-50.3l42.3-17.1c1.2-8.7 0.5-17.6-2.1-26zM166.7 428.9c5.1-11.2 14.5-19.8 26.1-23.8 24.5-10.1 50.3-17 76.6-20.5 78.8-6.7 157.7-11.3 236.8-14.9 1.8-0.1 3.5-0.2 5.3-0.2 29.7 0 55.8 20.7 62.3 50.1 13.9 41.5 31.3 81.7 49 127v0.2c-112.5 37.9-230.1 57.1-348.2 57.1-49.5 0-99-3.4-148.3-10.1 13.9-58.4 25.7-112.1 40.4-164.9z m488.7 458.3c-1.1-11.7-3.4-25.4-9.5-39.7l-18.4-43L581 809l-367.2 34.9-56.7 5.4-1.3 56.9c-0.2 10-1.1 19.9-2.6 29.8-8.9 1.3-17.8 2.2-26.8 2.7-2.4-19.5-3.7-39.6-5.1-60.8-0.5-7.4-1-15-1.5-22.5-0.9-13.5-1.9-27.2-2.8-40.8-1-14 10.4-25.9 24.5-25.4 11 0.4 22 0.4 33 0.1 13.7-0.9 27.2-3.5 40.2-7.6 10.2-3.6 18.4-11.5 22.5-21.6-1.1-10.4-7.2-19.6-16.4-24.6-32.1-12.8-64.9-23.5-98.3-32.1 0 0-0.1 0-0.1-0.1-8.1-3.7-13.8-11.3-14.4-20.3-0.3-3.7-0.5-7.4-0.8-11l-1.1-16.4 11.3 1.5c51.8 7.1 104.7 10.7 157 10.7 125.6 0 249.6-20.3 368.6-60.4l5.2-1.8L654 629c0 0.1 0 0.1 0.1 0.2 3.1 12.5-3.2 25.3-14.9 30.8-31.2 14.6-61.5 31.3-90.6 49.8-9.4 6.3-11.9 19-5.6 28.4 3.8 5.6 10.1 9 16.9 9.1v-0.1c17.3 1.1 34.6 1.1 51.8 0 8.6-1.5 17.1-3.2 25.5-5.1 16-3.7 31.5 7.7 32.9 24.1 3.3 39.5 6.3 78.8 8.9 118.2-7.7 1.3-15.6 2.2-23.6 2.8z","p-id":14039})))},u=(0,i.forwardRef)(p),d=(r.p,["title","titleId"]);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}var m,y,b=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,d);return i.createElement("svg",f({t:1657002011617,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":42496,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,s||(s=i.createElement("path",{d:"M512 64c-211.2 0-384 172.8-384 384v160c0 54.4 41.6 96 96 96h64c54.4 0 96-41.6 96-96v-96c0-54.4-41.6-96-96-96h-64c-9.6 0-22.4 3.2-32 6.4 16-166.4 153.6-294.4 320-294.4s304 128 320 294.4c-9.6-3.2-19.2-6.4-32-6.4h-64c-54.4 0-96 41.6-96 96v96c0 54.4 41.6 96 96 96h64c9.6 0 19.2-3.2 28.8-3.2-12.8 73.6-76.8 131.2-156.8 131.2h-6.4c-12.8-38.4-48-64-89.6-64h-64c-54.4 0-96 41.6-96 96s41.6 96 96 96h64c41.6 0 76.8-25.6 89.6-64h6.4c124.8 0 224-99.2 224-224v-224c0-211.2-172.8-384-384-384z m-288 416h64c19.2 0 32 12.8 32 32v96c0 19.2-12.8 32-32 32h-64c-19.2 0-32-12.8-32-32v-96c0-19.2 12.8-32 32-32z m352 416h-64c-19.2 0-32-12.8-32-32s12.8-32 32-32h64c19.2 0 32 12.8 32 32s-12.8 32-32 32z m256-288c0 19.2-12.8 32-32 32h-64c-19.2 0-32-12.8-32-32v-96c0-19.2 12.8-32 32-32h64c19.2 0 32 12.8 32 32v96z","p-id":42497})))},h=(0,i.forwardRef)(b),g=(r.p,["title","titleId"]);function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(this,arguments)}var O,k,x=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,g);return i.createElement("svg",v({t:1657004635013,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":5517,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,m||(m=i.createElement("path",{d:"M869 112H155c-23.75 0-43 19.25-43 43v714c0 23.75 19.25 43 43 43h380c23.75 0 43-19.25 43-43s-19.25-43-43-43H198V198h628v628h-52c-23.75 0-43 19.25-43 43s19.25 43 43 43h95c23.75 0 43-19.25 43-43V155c0-23.75-19.25-43-43-43z",fill:"#333333","p-id":5518})),y||(y=i.createElement("path",{d:"M392.02 423c0-14.24 3.56-24.92 17.8-28.48 24.92-7.12 46.28-17.8 71.2-10.68 21.36 3.56 35.6 14.24 46.28 39.16 3.56 14.24 7.12 32.04 14.24 46.28 3.57-3.56 3.57-7.12 7.12-10.68 10.68-17.8 21.36-35.6 35.6-53.4 7.12-7.12 14.24-17.8 24.92-21.36 17.8-10.68 35.6-3.56 46.28 10.68s10.68 39.16-3.56 53.4c-14.24 17.8-32.04 21.36-49.84 17.8-3.56 0-10.68 0-14.24-3.56-7.12-3.56-14.24 0-21.36 7.12-3.56 7.12-10.68 14.24-14.24 21.36 0 3.56-3.56 7.12 0 10.68 7.12 28.48 14.24 56.96 21.36 81.88 7.12 24.92 24.92 35.6 49.84 28.48 7.12 0 10.68-3.56 17.8-3.56 0 17.8-3.56 21.36-17.8 28.48-21.36 10.68-46.28 17.8-71.2 14.24-21.36-3.56-39.16-14.24-46.28-39.16-3.56-14.24-7.12-32.04-14.24-49.84-3.56 3.56-3.56 7.12-7.12 10.68-10.68 17.8-21.36 39.16-35.6 56.96-7.12 10.68-17.8 17.8-28.48 21.36-17.8 7.12-35.6 0-42.72-14.24-7.12-14.24-7.12-39.16 3.56-53.4 14.24-17.8 32.04-21.36 53.4-17.8 3.56 0 7.12 0 10.68 3.56 10.68 7.12 17.8 3.56 21.36-7.12 3.56-7.12 10.68-14.24 14.24-21.36 3.56-3.56 3.56-7.12 0-10.68-7.12-24.92-10.68-49.84-17.8-71.2-10.68-32.04-24.92-42.72-53.4-32.04-7.12-3.56-10.68-3.56-17.8-3.56zM678.18 690c28.48-56.96 46.28-113.92 46.28-178s-10.68-121.04-39.16-178h42.72c3.56 0 3.56 3.56 3.56 3.56 35.6 60.52 49.84 128.16 42.72 202.91-7.12 53.4-28.48 99.68-53.4 142.41 0 3.56-3.56 3.56-7.12 3.56-10.68 3.56-21.36 3.56-35.6 3.56zM337.26 334c-53.4 121.04-49.84 238.52 10.68 356h-39.16s-3.56 0-3.56-3.56c-24.92-42.72-46.28-85.44-53.4-135.28-10.68-74.76 0-145.96 39.16-210.04 3.56-3.56 7.12-7.12 10.68-7.12h35.6zM610.43 868.99a42.99 42.99 0 0 0 21.5 37.24 43.006 43.006 0 0 0 43 0 43.012 43.012 0 0 0 21.5-37.24c0-15.37-8.19-29.56-21.5-37.24a43.006 43.006 0 0 0-43 0 42.99 42.99 0 0 0-21.5 37.24z m0 0",fill:"#333333","p-id":5519})))},E=(0,i.forwardRef)(x),w=(r.p,["title","titleId"]);function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P.apply(this,arguments)}var j,S,C,I,A=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,w);return i.createElement("svg",P({t:1664270307184,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":10849,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,O||(O=i.createElement("path",{d:"M488.097337 250.083556V169.665422a68.266667 68.266667 0 0 1 68.266667-68.266666h8.8064a68.266667 68.266667 0 0 1 68.266666 68.266666v283.0336c17.840356-6.7584 52.246756-38.729956 94.162489 32.312889 7.008711-2.230044 14.290489-3.436089 21.572267-3.436089 44.282311 0 80.258844 41.870222 80.258844 93.297778V823.068444c0 54.909156-24.302933 115.620978-61.8496 154.692267-20.935111 21.777067-43.485867 33.837511-63.670044 33.837511H458.697159c-45.966222 0-66.605511-34.087822-83.285333-61.485511l-0.455111-0.773689c-0.6144-1.069511-1.683911-2.412089-2.639645-3.640889l-0.318578-0.523377c-0.455111-0.682667-1.024-1.410844-1.388088-2.070756l-2.343823-3.413333-0.273066-0.318578-114.824534-176.719645a94.981689 94.981689 0 0 1-13.653333-70.109866 92.706133 92.706133 0 0 1 38.183822-59.551289 88.109511 88.109511 0 0 1 89.201778-6.485333V331.1616c-0.182044-51.359289 38.547911-93.252267 86.084267-93.252267 15.473778 0 26.8288 4.437333 35.111822 12.196978z m264.920178 675.703466c19.433244-29.696 30.583467-65.240178 30.583466-97.393778v-255.317333c0-20.8896-12.879644-39.003022-27.534222-39.003022a19.569778 19.569778 0 0 0-9.284267 2.389333V625.777778c-1.137778 14.973156-13.152711 26.578489-27.648 26.669511-14.5408 0-26.646756-11.832889-27.625244-26.669511l-0.045511-77.459911-1.6384-21.754311c-1.456356-19.364978-13.858133-35.202844-27.716267-35.202845-6.121244 0-12.447289 3.413333-17.408 9.102222v96.574578c-0.068267 15.792356-12.447289 28.580978-27.716266 28.603733-15.246222-0.068267-22.232178-12.834133-22.300445-28.603733V162.360889c-4.824178-16.520533-23.460978-23.074133-35.157333-23.074133-7.964444 0-26.237156 10.24-26.237156 23.074133V619.815822c0 13.994667-5.893689 25.463467-19.410489 25.463467h-5.984711c-13.562311 0-24.621511-11.4688-24.621511-25.463467V332.276622l-0.136533-10.126222c0-21.526756-15.109689-38.934756-33.792-38.934756-18.659556 0-33.792 17.453511-33.792 38.912l1.206044 279.438223c0.091022 0.841956 0.113778 1.729422 0.091022 2.594133v110.842311c-0.2048 14.267733-10.513067 26.2144-24.211911 28.034845a27.761778 27.761778 0 0 1-30.264889-20.798578l-10.376533-31.3344a37.614933 37.614933 0 0 0-24.007111-16.611556 36.636444 36.636444 0 0 0-28.330667 5.870934c-17.271467 12.014933-21.845333 36.226844-10.285511 54.112711l118.3744 181.885155 0.386845 0.500622 1.4336 2.2528 1.820444 2.776178c1.137778 1.820444 2.343822 3.549867 3.413333 4.892445l0.750934 1.001244 0.591644 1.251556c18.432 30.446933 25.531733 37.046044 39.5264 37.046044h253.269334c7.441067-0.159289 25.918578-12.583822 44.077511-40.095289z",fill:"#000000","p-id":10850})),k||(k=i.createElement("path",{d:"M373.500359 183.9104A138.740622 138.740622 0 0 0 352.86107 182.044444a113.777778 113.777778 0 0 0-66.651022 206.006045l0.136533-0.068267c10.399289 11.514311 12.6976 22.300444 6.849423 32.290134-3.549867 6.098489-17.681067 11.264-27.283912 7.327288-6.530844-2.6624-14.836622-8.8064-24.871822-18.386488l9.398045-4.391823-9.443556 4.391823A159.288889 159.288889 0 0 1 386.084181 140.014933a204.891022 204.891022 0 0 1 393.739378 17.931378c3.595378 16.9984 2.002489 28.103111-4.755911 33.359645-7.827911 6.075733-17.567289 6.894933-24.348444 2.139022a43.2128 43.2128 0 0 1-13.266489-15.746845l-0.045511 0.022756a159.3344 159.3344 0 0 0-302.535112-37.728711c-2.321067 8.328533-4.892444 20.980622-8.647111 32.676978-4.004978 12.333511-11.992178 17.6128-24.007111 15.837866L373.454848 184.092444l0.045511-0.2048z",fill:"#000000","p-id":10851})))},M=(0,i.forwardRef)(A),_=(r.p,["title","titleId"]);function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D.apply(this,arguments)}var R,N,V=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,_);return i.createElement("svg",D({t:1664270339930,className:"icon",viewBox:"0 0 1223 1024",xmlns:"http://www.w3.org/2000/svg","p-id":13071,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,j||(j=i.createElement("path",{d:"M725.491512 956.515902l-0.499512-0.84917c-0.674341-1.173854-1.848195-2.67239-2.872195-3.996098l-0.349659-0.574439c-0.524488-0.749268-1.148878-1.548488-1.548487-2.297756l-2.572488-3.721366-0.299708-0.349658-126.001951-193.960586a104.248195 104.248195 0 0 1-14.985366-76.949853 101.750634 101.750634 0 0 1 41.884098-65.361171 96.705561 96.705561 0 0 1 97.90439-7.118049v-324.183415C716.00078 220.78439 758.484293 174.829268 810.683317 174.829268c52.124098 0 94.682537 45.955122 94.682537 102.4v104.148293a75.925854 75.925854 0 0 1 23.77678-3.87122c24.675902 0 48.003122 11.88839 64.437073 32.418342a80.046829 80.046829 0 0 1 43.18283-13.386927 78.673171 78.673171 0 0 1 48.702439 17.208195c10.86439 8.491707 19.980488 19.480976 26.599024 32.243512 7.692488-2.422634 15.684683-3.746341 23.701854-3.746341 48.577561 0 88.064 45.955122 88.064 102.4v272.433951c0 60.266146-26.648976 126.876098-67.883708 169.784195-22.977561 23.901659-47.703415 37.138732-69.85678 37.138732H816.902244c-50.450732 0-73.10361-37.413463-91.410732-67.484098z m366.067512 17.133269c8.167024 0 28.472195-13.636683 48.377756-43.832195 21.354146-32.593171 33.592195-71.605073 33.592196-106.89561V542.695024c0-22.902634-14.136195-42.78322-30.245464-42.783219a21.479024 21.479024 0 0 0-10.190049 2.622439v98.004293h-0.099902c-1.148878 16.433951-14.336 29.171512-30.245463 29.246439-15.959415 0-29.221463-12.987317-30.295415-29.221464h-0.049951V515.496585l-1.82322-23.876683c-1.573463-21.27922-15.185171-38.637268-30.395317-38.637268-6.743415 0-13.661659 3.746341-19.131317 9.990244v105.996488c-0.049951 17.333073-13.636683 31.34439-30.420293 31.394341-16.733659-0.074927-30.295415-14.086244-30.345365-31.394341v-93.258927l-2.272781-10.889366c-3.746341-18.132293-16.334049-31.768976-29.146537-31.768975-8.741463 0-17.482927 6.193951-23.402146 16.259122l-0.974049 105.147317v39.53639c0 15.335024-12.163122 27.947707-26.998634 27.947707h-6.568585c-14.910439 0-27.02361-12.612683-27.02361-27.947707V278.403122l-0.174829-11.139122c0-23.601951-16.583805-42.708293-37.088781-42.708293-20.48 0-37.063805 19.156293-37.063805 42.708293l1.323708 306.700488c0.074927 0.924098 0.099902 1.873171 0.099902 2.822244v121.68117c-0.249756 15.659707-11.563707 28.771902-26.574049 30.769952a30.470244 30.470244 0 0 1-33.217561-22.827708l-11.413853-34.391414a41.284683 41.284683 0 0 0-26.349269-18.232195 40.210732 40.210732 0 0 0-31.069658 6.443707c-18.981463 13.187122-24.001561 39.761171-11.288976 59.392l129.898147 199.630049 0.424585 0.549463 1.598439 2.44761 1.998049 3.072c1.223805 1.998049 2.547512 3.896195 3.721366 5.369756l0.84917 1.098927 0.624391 1.373658c20.230244 33.417366 28.022634 40.635317 43.382634 40.635317h277.978536v-0.199804 0.049951z",fill:"#000000","p-id":13072})),S||(S=i.createElement("path",{d:"M586.926829 268.312976v49.951219h-449.560975v-49.951219zM124.578341 386.44761l-87.88917-87.864195a7.492683 7.492683 0 0 1 0-10.589659l87.88917-87.889171a7.492683 7.492683 0 0 1 12.787513 5.29483v175.753365a7.492683 7.492683 0 0 1-12.787513 5.29483z",fill:"#000000","p-id":13073})),C||(C=i.createElement("path",{d:"M12.487805 137.365854v-49.95122h449.560975v49.95122z",fill:"#000000","p-id":13074})),I||(I=i.createElement("path",{d:"M474.836293 19.23122l87.88917 87.864195a7.492683 7.492683 0 0 1 0 10.589658l-87.88917 87.889171a7.492683 7.492683 0 0 1-12.787513-5.319805V24.526049a7.492683 7.492683 0 0 1 12.787513-5.319805z",fill:"#000000","p-id":13075})))},B=(0,i.forwardRef)(V),Z=(r.p,["title","titleId"]);function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T.apply(this,arguments)}var z,L,U,F=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Z);return i.createElement("svg",T({t:1664270277890,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":10525,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,R||(R=i.createElement("path",{d:"M512 960c-247.039484 0-448-200.960516-448-448S264.960516 64 512 64 960 264.960516 960 512 759.039484 960 512 960zM512 128c-211.744443 0-384 172.255557-384 384s172.255557 384 384 384 384-172.255557 384-384S723.744443 128 512 128z","p-id":10526})),N||(N=i.createElement("path",{d:"M694.559548 522.144013c-12.54369-12.607338-33.375299-12.640022-45.951673-0.063647l-104.608735 103.903454L543.99914 319.327402c0-17.759333-14.208843-32.160839-32.00086-32.160839-17.759333 0-32.00086 14.399785-32.00086 32.160839l0 308.319849-105.215966-106.688456c-12.480043-12.607338-32.704421-12.736353-45.311759-0.25631-12.640022 12.512727-12.672705 32.895364-0.192662 45.504421l159.359226 161.055342c6.271845 6.335493 14.592447 9.567746 22.880366 9.567746 8.160624 0 16.383174-3.168606 22.624056-9.311437 0.032684-0.063647 0.032684-0.063647 0.063647-0.127295 0.032684 0 0.063647 0 0.096331-0.063647l160.191802-159.679183C707.072275 555.104744 707.103239 534.720387 694.559548 522.144013z","p-id":10527})))},Y=(0,i.forwardRef)(F),$=(r.p,["title","titleId"]);function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q.apply(this,arguments)}var W,J=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,$);return i.createElement("svg",Q({t:1664270368377,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":13520,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,z||(z=i.createElement("path",{d:"M705.172 314.875l-303.419-175.179c0 0-43.179-25.856-69.597 19.905l-314.176 543.66c0 0-29.968 42.475 15.653 68.816l307.722 177.662c0 0 41.823 25.042 67.052-18.656l314.997-545.593c0 0 27.377-44.285-18.23-70.615zM497.158 223.925l87.131 50.306-12.609 21.839-87.131-50.307 12.609-21.838zM464.469 205.053c6.020 3.476 8.096 11.154 4.606 17.202-3.491 6.045-11.196 8.113-17.216 4.638-6.009-3.47-8.071-11.177-4.581-17.22 3.491-6.046 11.181-8.086 17.188-4.619zM212.715 817.205c-12.028-6.943-16.13-22.37-9.163-34.436 6.953-12.044 22.378-16.228 34.404-9.284 12.032 6.946 16.116 22.394 9.163 34.437-6.967 12.067-22.373 16.23-34.404 9.283zM416.602 818.362l-306.818-177.142 252.324-437.039 306.819 177.142-252.325 437.039z","p-id":13521})),L||(L=i.createElement("path",{d:"M776.175 207.346l-25.821 44.794c29.276 16.737 50.183 43.945 58.951 76.548 8.842 32.732 4.366 66.902-12.753 96.398l44.794 25.824c23.809-41.271 30.137-89.487 17.721-135.574-12.24-45.936-41.691-84.308-82.891-107.988v0z","p-id":13522})),U||(U=i.createElement("path",{d:"M1006.593 276.628c-22.893-85.455-77.51-156.67-154.077-201.076l-25.821 44.794c64.602 37.236 110.717 97.509 130.036 169.609 19.149 71.946 9.191 147.187-28.118 211.66l44.596 25.77c44.281-76.494 56.127-165.548 33.382-250.753v0z","p-id":13523})))},K=(0,i.forwardRef)(J),H=(r.p,["title","titleId"]);function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G.apply(this,arguments)}var q,X,ee=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,H);return i.createElement("svg",G({t:1664269989621,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":1683,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,W||(W=i.createElement("path",{d:"M775.779 418.172l-2.051 0c-15.159 0-27.6 4.355-39.583 11.771-10.486-30.584-37.159-52.615-71.513-52.615-15.16 0-29.638 4.354-41.62 11.77-10.487-30.583-37.172-52.615-71.527-52.615-13.399 0-25.85 3.357-36.873 9.255l0-78.691c0-42.861-32.418-77.606-75.59-77.606-43.173 0-78.17 34.745-78.17 77.606l0 301.282-47.49-47.295c-30.528-30.306-84.558-25.992-110.55 0s-43.038 78.308-5.818 115.528l218.306 216.875c4.504 4.471 9.455 8.2 14.663 11.353 39.803 32.47 85.412 51.692 181.857 51.692 220.324 0 240.728-118.865 240.728-265.492L850.548 495.777C850.547 452.917 818.952 418.172 775.779 418.172zM809.403 650.988c0 124.069-0.593 224.647-199.585 224.647-84.298 0-134.907-18.796-173.246-56.858L229.904 613.455c-18.285-18.285-13.687-41.664 1.282-56.633 14.968-14.968 42.441-15.486 56.902-1.131 0 0 36.259 36.045 67.498 67.1 23.641 23.502 44.408 44.145 44.408 44.145l0-391.72c0-20.302 16.578-36.76 37.028-36.76 20.449 0 34.448 16.459 34.448 36.76l0 249.154 0.415 0c-0.27 1.32-0.415 2.685-0.415 4.085 0 11.278 9.21 20.423 20.571 20.423 11.36 0 20.57-9.144 20.57-20.423 0-1.4-0.144-2.765-0.415-4.085l0.415 0L512.611 422.257c0-20.302 14.795-36.761 35.245-36.761 0 0 36.232-0.49 36.232 36.761l0 134.787 0.415 0c-0.27 1.321-0.415 2.686-0.415 4.085 0 11.279 9.21 20.423 20.57 20.423 11.361 0 20.571-9.143 20.571-20.423 0-1.399-0.144-2.764-0.415-4.085l0.415 0 0-93.942c0-20.303 14.559-36.762 35.01-36.762 0 0 36.983 2.303 36.983 36.762l0 118.449 0.415 0c-0.269 1.32-0.415 2.686-0.415 4.085 0 11.279 9.21 20.423 20.571 20.423s20.055-9.143 20.055-20.423c0-1.399-0.136-2.765-0.392-4.085l0.392 0 0-80.872c0-20.302 15.255-36.761 35.704-36.761 0 0 35.851-1.45 35.851 36.761C809.403 500.679 809.403 617.954 809.403 650.988zM328.307 382.755l0-68.631c-6.531-14.641-10.24-30.817-10.24-47.884 0-65.037 52.723-117.76 117.76-117.76s117.76 52.723 117.76 117.76c0 8.884-1.05 17.509-2.935 25.82 14.812 0.578 28.176 6.726 37.904 16.597 3.771-13.518 5.99-27.685 5.99-42.417 0-87.658-71.062-158.72-158.72-158.72s-158.72 71.062-158.72 158.72C277.107 312.36 296.898 353.755 328.307 382.755z","p-id":1684})))},te=(0,i.forwardRef)(ee),re=(r.p,["title","titleId"]);function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ne.apply(this,arguments)}var oe,ae=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,re);return i.createElement("svg",ne({t:1664270248076,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":8849,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,q||(q=i.createElement("path",{d:"M512 960c-247.039484 0-448-200.960516-448-448S264.960516 64 512 64 960 264.960516 960 512 759.039484 960 512 960zM512 128c-211.744443 0-384 172.255557-384 384s172.255557 384 384 384 384-172.255557 384-384S723.744443 128 512 128z","p-id":8850})),X||(X=i.createElement("path",{d:"M694.463217 458.367639l-158.495686-160.25545c-9.34412-9.471415-23.167639-11.840129-34.784142-7.135385-0.736245 0.287273-1.312512 0.992555-2.016073 1.343475-2.975944 1.47249-5.951888 3.072275-8.447897 5.5356-0.032684 0.032684-0.032684 0.063647-0.063647 0.096331-0.032684 0.032684-0.063647 0.032684-0.096331 0.063647l-159.359226 158.911974c-12.512727 12.480043-12.54369 32.735385-0.063647 45.248112 6.239161 6.271845 14.463432 9.407768 22.65674 9.407768 8.160624 0 16.352211-3.103239 22.591372-9.34412l103.616181-103.296224 0 305.056632c0 17.695686 14.336138 31.99914 32.00086 31.99914s32.00086-14.303454 32.00086-31.99914L544.00258 397.247252l104.959656 106.112189c6.239161 6.335493 14.496116 9.504099 22.751351 9.504099 8.12794 0 16.25588-3.072275 22.496761-9.247789C706.783282 491.199355 706.912297 470.944013 694.463217 458.367639z","p-id":8851})))},ie=(0,i.forwardRef)(ae),le=(r.p,["title","titleId"]);function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ce.apply(this,arguments)}var se,pe=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,le);return i.createElement("svg",ce({t:1664270841275,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":2948,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,oe||(oe=i.createElement("path",{d:"M512 896c-209.962667 0-384-173.994667-384-384 0-209.962667 174.037333-384 384-384 210.005333 0 384 174.037333 384 384 0 210.005333-173.994667 384-384 384z m0-720A335.402667 335.402667 0 0 0 176 512 335.36 335.36 0 0 0 512 848 335.402667 335.402667 0 0 0 848 512 335.402667 335.402667 0 0 0 512 176z m123.648 366.293333l-180.224 123.477334c-24.448 16.810667-44.245333 6.4-44.245333-23.210667V381.44c0-29.610667 19.754667-40.021333 44.16-23.296l180.309333 123.52c24.405333 16.768 24.448 43.818667 0 60.586667z",fill:"#2c2c2c","p-id":2949})))},ue=(0,i.forwardRef)(pe),de=(r.p,["title","titleId"]);function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fe.apply(this,arguments)}var me,ye=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,de);return i.createElement("svg",fe({t:1664270051872,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":3726,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,se||(se=i.createElement("path",{d:"M876.544 530.432h-272.384c-12.288 0-20.48-8.192-20.48-20.48s8.192-20.48 20.48-20.48h272.384l-112.64-112.64c-8.192-8.192-8.192-20.48 0-28.672 8.192-8.192 20.48-8.192 28.672 0l145.408 145.408c2.048 2.048 4.096 6.144 6.144 10.24 2.048 8.192 2.048 16.384-4.096 22.528l-145.408 145.408c-8.192 8.192-20.48 8.192-28.672 0-8.192-8.192-8.192-20.48 0-28.672l110.592-112.64z m-741.376 0l110.592 110.592c8.192 8.192 8.192 20.48 0 28.672-8.192 8.192-20.48 8.192-28.672 0l-145.408-145.408c-6.144-6.144-8.192-14.336-4.096-22.528 0-4.096 2.048-6.144 6.144-10.24l145.408-145.408c8.192-8.192 20.48-8.192 28.672 0 8.192 8.192 8.192 20.48 0 28.672l-112.64 112.64h272.384c12.288 0 20.48 8.192 20.48 20.48s-8.192 20.48-20.48 20.48h-272.384z m356.352 335.872v-272.384c0-12.288 8.192-20.48 20.48-20.48s20.48 8.192 20.48 20.48v272.384l112.64-112.64c8.192-8.192 20.48-8.192 28.672 0 8.192 8.192 8.192 20.48 0 28.672l-145.408 145.408c-2.048 2.048-6.144 4.096-10.24 6.144-8.192 2.048-16.384 2.048-22.528-4.096l-145.408-145.408c-8.192-8.192-8.192-20.48 0-28.672 8.192-8.192 20.48-8.192 28.672 0l112.64 110.592z m0-720.896l-110.592 110.592c-8.192 8.192-20.48 8.192-28.672 0-8.192-8.192-8.192-20.48 0-28.672l145.408-145.408c6.144-6.144 14.336-8.192 22.528-4.096 4.096 0 6.144 2.048 10.24 6.144l145.408 145.408c8.192 8.192 8.192 20.48 0 28.672-8.192 8.192-20.48 8.192-28.672 0l-112.64-112.64v272.384c0 12.288-8.192 20.48-20.48 20.48s-20.48-8.192-20.48-20.48v-272.384z","p-id":3727})))},be=(0,i.forwardRef)(ye),he=(r.p,["title","titleId"]);function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ge.apply(this,arguments)}var ve,Oe,ke=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,he);return i.createElement("svg",ge({t:1664270488782,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":21323,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,me||(me=i.createElement("path",{d:"M60.235294 542.117647c0 132.879059 103.062588 240.941176 229.677177 240.941177v60.235294C130.048 843.294118 0 708.186353 0 542.117647s130.048-301.176471 289.912471-301.176471h254.735058L445.500235 141.793882l42.586353-42.586353L659.998118 271.058824 488.146824 442.970353l-42.646589-42.646588L544.707765 301.176471h-254.795294C163.297882 301.176471 60.235294 409.238588 60.235294 542.117647z m673.852235-301.176471v60.235295C860.702118 301.176471 963.764706 409.238588 963.764706 542.117647s-103.062588 240.941176-229.677177 240.941177h-254.795294l99.147294-99.147295-42.586353-42.586353L364.001882 813.176471l171.91153 171.911529 42.586353-42.586353L479.292235 843.294118h254.735059C893.952 843.294118 1024 708.186353 1024 542.117647s-130.048-301.176471-289.912471-301.176471z","p-id":21324})))},xe=(0,i.forwardRef)(ke),Ee=(r.p,["title","titleId"]);function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},we.apply(this,arguments)}var Pe,je,Se=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Ee);return i.createElement("svg",we({t:1620809373415,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":1377,xmlnsXlink:"http://www.w3.org/1999/xlink",width:64,height:64,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,ve||(ve=i.createElement("defs",null,i.createElement("style",{type:"text/css"}))),Oe||(Oe=i.createElement("path",{d:"M546.77 138.57l-77.26 32.86 60.37 135.6zM685.92 62.82L568.94 304.94 771.77 138.1zM293.09 81.09l-68.02 93.08 238.96 108.61zM138.79 463.9v495.39h327.1V385.18H217.51c-43.41 0-78.72 35.31-78.72 78.72z m267.1 435.39h-207.1V463.9c0-10.32 8.4-18.72 18.72-18.72h188.38v454.11zM777.3 385.18H528.92v574.11h327.1V463.9c0-43.41-35.31-78.72-78.72-78.72z m18.72 514.11h-207.1V445.18H777.3c10.32 0 18.72 8.4 18.72 18.72v435.39z",fill:"currentColor","p-id":1378})))},Ce=(0,i.forwardRef)(Se),Ie=(r.p,["title","titleId"]);function Ae(){return Ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ae.apply(this,arguments)}var Me,_e,De=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Ie);return i.createElement("svg",Ae({t:1622197379868,className:"icon",viewBox:"-100 -100 1224 1224",xmlns:"http://www.w3.org/2000/svg","p-id":11760,xmlnsXlink:"http://www.w3.org/1999/xlink",width:64,height:64,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,Pe||(Pe=i.createElement("defs",null,i.createElement("style",{type:"text/css"}))),je||(je=i.createElement("path",{d:"M950.857143 932.571429V310.857143q0-7.428571-5.428572-12.857143T932.571429 292.571429H310.857143q-7.428571 0-12.857143 5.428571T292.571429 310.857143v621.714286q0 7.428571 5.428571 12.857142t12.857143 5.428572h621.714286q7.428571 0 12.857142-5.428572t5.428572-12.857142z m73.142857-621.714286v621.714286q0 37.714286-26.857143 64.571428t-64.571428 26.857143H310.857143q-37.714286 0-64.571429-26.857143t-26.857143-64.571428V310.857143q0-37.714286 26.857143-64.571429t64.571429-26.857143h621.714286q37.714286 0 64.571428 26.857143t26.857143 64.571429z m-219.428571-219.428572v91.428572h-73.142858V91.428571q0-7.428571-5.428571-12.857142T713.142857 73.142857H91.428571q-7.428571 0-12.857142 5.428572T73.142857 91.428571v621.714286q0 7.428571 5.428572 12.857143t12.857142 5.428571h91.428572v73.142858H91.428571q-37.714286 0-64.571428-26.857143T0 713.142857V91.428571Q0 53.714286 26.857143 26.857143T91.428571 0h621.714286q37.714286 0 64.571429 26.857143t26.857143 64.571428z","p-id":11761,fill:"currentColor"})))},Re=(0,i.forwardRef)(De),Ne=(r.p,["title","titleId"]);function Ve(){return Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ve.apply(this,arguments)}var Be,Ze,Te=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Ne);return i.createElement("svg",Ve({t:1664421401775,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":2559,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,Me||(Me=i.createElement("path",{d:"M863.2 315.8c-0.2-1.4-0.4-2.6-0.8-4-1.5-5.5-3.9-10.6-7.8-14.5l-128-128c-6-6-14.1-9.4-22.6-9.4L320 159.9c-8.5 0-16.6 3.4-22.6 9.4l-128 128c-3.9 3.9-6.3 9-7.8 14.5-0.4 1.4-0.6 2.6-0.8 4-0.2 1.4-0.8 2.7-0.8 4.2l0 451.8c0 50.8 41.4 92.2 92.2 92.2l519.5 0c50.9 0 92.2-41.4 92.2-92.2L863.9 320C864 318.5 863.4 317.3 863.2 315.8zM333.2 224l357.5 0 64 64L269.2 288 333.2 224zM800 771.8c0 15.6-12.7 28.2-28.2 28.2L252.2 800c-15.6 0-28.2-12.7-28.2-28.2L224 352l576 0L800 771.8z","p-id":2560})),_e||(_e=i.createElement("path",{d:"M489.4 726.6c6.2 6.2 14.4 9.4 22.6 9.4s16.4-3.1 22.6-9.4l76.8-76.8c12.5-12.5 12.5-32.8 0-45.2s-32.8-12.5-45.2 0L544 626.8 544 448c0-17.7-14.3-32-32-32-17.7 0-32 14.3-32 32l0 178.8-22.2-22.2c-12.5-12.5-32.8-12.5-45.2 0s-12.5 32.8 0 45.2L489.4 726.6z","p-id":2561})))},ze=(0,i.forwardRef)(Te),Le=(r.p,["title","titleId"]);function Ue(){return Ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ue.apply(this,arguments)}var Fe,Ye,$e=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Le);return i.createElement("svg",Ue({t:1620810371425,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":16017,xmlnsXlink:"http://www.w3.org/1999/xlink",width:64,height:64,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,Be||(Be=i.createElement("defs",null,i.createElement("style",{type:"text/css"}))),Ze||(Ze=i.createElement("path",{d:"M263.616 870.016l440.256-751.872 61.376 35.904-440.256 751.808-61.376-35.84zM78.016 509.504l192.768-190.592-4.864-8.512-32.256-55.04-205.76 203.648a72.32 72.32 0 0 0-0.768 101.76l205.76 207.872 37.504-64.192-192.384-194.944zM996.032 459.008l-205.76-203.648-32.256 55.04-4.928 8.576 192.832 190.592-192.448 194.944 37.44 64.192 205.824-207.872a72.384 72.384 0 0 0-0.704-101.824z","p-id":16018,fill:"currentColor"})))},Qe=(0,i.forwardRef)($e),We=(r.p,["title","titleId"]);function Je(){return Je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Je.apply(this,arguments)}var Ke,He,Ge,qe,Xe=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,We);return i.createElement("svg",Je({t:1620809636131,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":3530,xmlnsXlink:"http://www.w3.org/1999/xlink",width:64,height:64,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,Fe||(Fe=i.createElement("defs",null,i.createElement("style",{type:"text/css"}))),Ye||(Ye=i.createElement("path",{d:"M906.666667 429.226667a32 32 0 0 0 22.613333-54.4l-196.053333-194.986667a32.64 32.64 0 0 0-45.226667 0 32 32 0 0 0 0 45.013333l141.44 140.586667H117.333333a32 32 0 1 0 0 64M117.333333 594.773333a32 32 0 0 0-22.613333 54.4l196.053333 194.986667a32.64 32.64 0 0 0 45.226667 0 32 32 0 0 0 0-45.013333l-141.44-140.586667H906.666667a32 32 0 1 0 0-64","p-id":3531,fill:"currentColor"})))},et=(0,i.forwardRef)(Xe),tt=(r.p,["title","titleId"]);function rt(){return rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rt.apply(this,arguments)}var nt,ot,at=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,tt);return i.createElement("svg",rt({t:1620809705455,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":4245,xmlnsXlink:"http://www.w3.org/1999/xlink",width:64,height:64,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,Ke||(Ke=i.createElement("defs",null,i.createElement("style",{type:"text/css"}))),He||(He=i.createElement("path",{d:"M792.1 702.7l110.1-110.1c12.7-12.7 12.7-33.3 0-46-12.7-12.7-33.3-12.7-46 0l-110 110.1L636 546.6c-12.7-12.7-33.3-12.7-46 0-12.7 12.7-12.7 33.3 0 46l110.1 110.1-110 110.1c-12.7 12.7-12.7 33.3 0 46 6.3 6.3 14.7 9.5 23 9.5s16.6-3.2 23-9.5l110.1-110.1 110.1 110.1c6.3 6.3 14.7 9.5 23 9.5s16.6-3.2 23-9.5c12.7-12.7 12.7-33.3 0-46L792.1 702.7z","p-id":4246,fill:"currentColor"})),Ge||(Ge=i.createElement("path",{d:"M474.9 893.2H133v-760h708.7v239.4c0 19.3 15.7 35 35 35s35-15.7 35-35V98.2c0-19.3-15.7-35-35-35H98c-19.3 0-35 15.7-35 35v830c0 19.3 15.7 35 35 35h376.9c19.3 0 35-15.7 35-35s-15.6-35-35-35z","p-id":4247,fill:"currentColor"})),qe||(qe=i.createElement("path",{d:"M753.4 302.1c0-19.3-15.7-35-35-35H267.8c-19.3 0-35 15.7-35 35s15.7 35 35 35h450.5c19.4 0 35.1-15.7 35.1-35zM493.5 508.6c0-19.3-15.7-35-35-35H267.8c-19.3 0-35 15.7-35 35s15.7 35 35 35h190.7c19.3 0 35-15.7 35-35zM267.8 680.2c-19.3 0-35 15.7-35 35s15.7 35 35 35h106.5c19.3 0 35-15.7 35-35s-15.7-35-35-35H267.8z","p-id":4248,fill:"currentColor"})))},it=(0,i.forwardRef)(at),lt=(r.p,["title","titleId"]);function ct(){return ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ct.apply(this,arguments)}var st,pt,ut=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,lt);return i.createElement("svg",ct({t:1622198058497,className:"icon",viewBox:"50 50 924 924",xmlns:"http://www.w3.org/2000/svg","p-id":19165,xmlnsXlink:"http://www.w3.org/1999/xlink",width:64,height:64,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,nt||(nt=i.createElement("defs",null,i.createElement("style",{type:"text/css"}))),ot||(ot=i.createElement("path",{d:"M168.021333 751.104a53.333333 53.333333 0 0 1-81.450666-55.893333c48-219.733333 177.493333-333.184 381.205333-332.458667l8.490667-0.213333V186.026667c0-8.213333 2.602667-16.213333 7.445333-22.826667 1.237333-1.621333 1.237333-1.621333 2.602667-3.136a33.92 33.92 0 0 1 47.936-1.621333l370.197333 346.005333a32 32 0 0 0 1.066667 0.938667c7.914667 6.784 12.437333 16.576 12.437333 26.901333v3.498667c0 10.325333-4.522667 20.117333-12.373333 26.837333l-0.896 0.768-0.256 0.213333-370.922667 323.968c-1.109333 0.938667-1.109333 0.938667-2.282667 1.834667-15.146667 11.093333-36.437333 7.786667-47.509333-7.36a38.656 38.656 0 0 1-7.466667-22.826667v-197.248l-7.253333-0.362666c-112.213333 1.237333-212.266667 31.04-300.970667 89.472z m301.290667-153.472l1.962667 0.021333 68.992 3.541334v195.52l301.44-263.274667-301.44-281.749333v173.12l-31.146667 0.853333-40.597333 1.066667c-165.504-0.554667-268.117333 82.773333-313.386667 256.896 93.76-56.192 198.698667-84.906667 314.176-85.994667z m384.64-65.322667v3.498667c0-0.597333 0-1.173333 0.042667-1.749333a28.714667 28.714667 0 0 1-0.042667-1.749334z",fill:"currentColor","p-id":19166})))},dt=(0,i.forwardRef)(ut),ft=(r.p,["title","titleId"]);function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mt.apply(this,arguments)}var yt,bt,ht=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ft);return i.createElement("svg",mt({t:1622198058497,className:"icon",viewBox:"50 50 924 924",xmlns:"http://www.w3.org/2000/svg","p-id":19165,xmlnsXlink:"http://www.w3.org/1999/xlink",width:64,height:64,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,st||(st=i.createElement("defs",null,i.createElement("style",{type:"text/css"}))),pt||(pt=i.createElement("path",{d:"M168.021333 751.104a53.333333 53.333333 0 0 1-81.450666-55.893333c48-219.733333 177.493333-333.184 381.205333-332.458667l8.490667-0.213333V186.026667c0-8.213333 2.602667-16.213333 7.445333-22.826667 1.237333-1.621333 1.237333-1.621333 2.602667-3.136a33.92 33.92 0 0 1 47.936-1.621333l370.197333 346.005333a32 32 0 0 0 1.066667 0.938667c7.914667 6.784 12.437333 16.576 12.437333 26.901333v3.498667c0 10.325333-4.522667 20.117333-12.373333 26.837333l-0.896 0.768-0.256 0.213333-370.922667 323.968c-1.109333 0.938667-1.109333 0.938667-2.282667 1.834667-15.146667 11.093333-36.437333 7.786667-47.509333-7.36a38.656 38.656 0 0 1-7.466667-22.826667v-197.248l-7.253333-0.362666c-112.213333 1.237333-212.266667 31.04-300.970667 89.472z m301.290667-153.472l1.962667 0.021333 68.992 3.541334v195.52l301.44-263.274667-301.44-281.749333v173.12l-31.146667 0.853333-40.597333 1.066667c-165.504-0.554667-268.117333 82.773333-313.386667 256.896 93.76-56.192 198.698667-84.906667 314.176-85.994667z m384.64-65.322667v3.498667c0-0.597333 0-1.173333 0.042667-1.749333a28.714667 28.714667 0 0 1-0.042667-1.749334z",fill:"currentColor","p-id":19166})))},gt=(0,i.forwardRef)(ht),vt=(r.p,["title","titleId"]);function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ot.apply(this,arguments)}var kt,xt,Et=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,vt);return i.createElement("svg",Ot({t:1622195590366,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":2365,xmlnsXlink:"http://www.w3.org/1999/xlink",width:64,height:64,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,yt||(yt=i.createElement("defs",null,i.createElement("style",{type:"text/css"}))),bt||(bt=i.createElement("path",{d:"M650.794667 597.418667a32 32 0 0 1 0-64h117.333333a106.752 106.752 0 1 0-21.76-211.285334l-8.704 2.176-3.242667 0.554667-5.589333 0.128-2.346667-0.256-3.754666-0.725333-4.309334-1.493334-1.664-0.725333-1.792-0.981333a29.312 29.312 0 0 1-6.186666-4.522667l-0.426667-0.469333a29.354667 29.354667 0 0 1-4.693333-5.76l-2.005334-3.84-2.133333-6.272a192.128 192.128 0 0 0-372.906667-9.130667l-2.944 11.946667-1.493333 3.754666-2.133333 3.84-1.962667 2.688-2.773333 2.986667-3.029334 2.56-2.005333 1.365333-3.328 1.834667-4.181333 1.621333-1.749334 0.554667-2.133333 0.426667a24.234667 24.234667 0 0 1-3.370667 0.426666h-5.077333l-2.858667-0.426666-2.858666-0.64A106.88 106.88 0 0 0 149.461333 426.666667a106.752 106.752 0 0 0 99.754667 106.538666l7.04 0.213334H373.333333a32 32 0 0 1 4.309334 63.701333l-4.309334 0.298667H256.256a170.752 170.752 0 1 1 14.08-340.906667 256.170667 256.170667 0 0 1 483.328 0.085333l2.773333-0.256 11.648-0.426666a170.752 170.752 0 1 1 0 341.504h-117.333333z m-164.778667 289.834666l-4.010667-3.541333-158.848-158.848a42.666667 42.666667 0 0 1 56.32-63.872l4.010667 3.541333 86.058667 86.016v-366.506666a42.666667 42.666667 0 0 1 37.632-42.368L512.170667 341.333333a42.666667 42.666667 0 0 1 42.368 37.674667l0.298666 4.992 0.042667 366.506667 85.973333-86.016a42.666667 42.666667 0 0 1 56.32-3.541334l4.010667 3.541334a42.666667 42.666667 0 0 1 3.541333 56.32l-3.541333 4.010666-158.848 158.848a42.666667 42.666667 0 0 1-56.32 3.541334z","p-id":2366,fill:"currentColor"})))},wt=(0,i.forwardRef)(Et),Pt=(r.p,["title","titleId"]);function jt(){return jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jt.apply(this,arguments)}var St,Ct=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Pt);return i.createElement("svg",jt({t:1622195630406,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":3444,xmlnsXlink:"http://www.w3.org/1999/xlink",width:64,height:64,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,kt||(kt=i.createElement("defs",null,i.createElement("style",{type:"text/css"}))),xt||(xt=i.createElement("path",{d:"M776.8 355.68l-45.12 45.12L810.72 480H544V213.28l79.2 79.04 45.12-45.12L512 90.72l-156.32 156.48 45.12 45.12L480 213.28V480H213.28l79.04-79.2-45.12-45.12L90.72 512l156.48 156.32 45.12-45.12L213.28 544H480v266.72l-79.2-79.04-45.12 45.12L512 933.28l156.32-156.48-45.12-45.12L544 810.72V544h266.72l-79.04 79.2 45.12 45.12L933.28 512l-156.48-156.32z",fill:"currentColor","p-id":3445})))},It=(0,i.forwardRef)(Ct),At=(r.p,["title","titleId"]);function Mt(){return Mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mt.apply(this,arguments)}var _t,Dt=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,At);return i.createElement("svg",Mt({t:1657002600217,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":61592,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,St||(St=i.createElement("path",{d:"M650.666667 117.333333v256H554.666667v106.666667h288v170.666667h85.333333v234.666666h-234.666667v-234.666666h85.333334v-106.666667h-512v106.666667h85.333333v234.666666h-234.666667v-234.666666h85.333334v-170.666667H490.666667v-106.666667h-96v-256h256z m-362.666667 597.333334h-106.666667v106.666666h106.666667v-106.666666z m576 0h-106.666667v106.666666h106.666667v-106.666666z m-277.333333-533.333334h-128v128h128v-128z",fill:"currentColor","p-id":61593})))},Rt=(0,i.forwardRef)(Dt),Nt=(r.p,["title","titleId"]);function Vt(){return Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vt.apply(this,arguments)}var Bt,Zt,Tt=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Nt);return i.createElement("svg",Vt({t:1656992939314,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":29554,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,_t||(_t=i.createElement("path",{d:"M279.241656 36.960361 332.0186 237.295889 500.343815 297.945767 332.749321 360.575664 282.353114 561.476912 229.552599 361.164956 61.227384 300.538649 228.821877 237.932324ZM630.412228 95.0645 696.153584 227.843654 822.804107 246.158832 714.350905 314.115925 707.89227 462.12237 642.150914 329.366788 515.500391 311.028037 623.930022 243.094517ZM298.688274 572.084158 328.223562 656.211408 402.545003 676.388748 332.796464 709.059067 318.064178 797.028498 288.528889 712.877676 214.207449 692.653193 283.955987 660.006445ZM416.027991 523.007965l99.18954-99.18954c21.355923-21.355923 56.312693-21.355923 77.621472 0l149.797891 149.797891-176.834584 176.811012L416.027991 600.605865C394.69564 579.297086 394.69564 544.363887 416.027991 523.007965L416.027991 523.007965zM777.169375 608.125224l-176.811012 176.834584 152.084342 152.084342c21.355923 21.355923 56.289121 21.355923 77.621472 0l99.165968-99.18954c21.355923-21.355923 21.355923-56.289121 0-77.621472L777.169375 608.125224 777.169375 608.125224zM436.464619 569.302702l125.071221 125.094793 125.094793-125.094793-125.094793-125.071221L436.464619 569.302702z","p-id":29555})))},zt=(0,i.forwardRef)(Tt),Lt=(r.p,["title","titleId"]);function Ut(){return Ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ut.apply(this,arguments)}var Ft,Yt,$t=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Lt);return i.createElement("svg",Ut({t:1622197690879,className:"icon",viewBox:"100 100 824 824",xmlns:"http://www.w3.org/2000/svg","p-id":16475,xmlnsXlink:"http://www.w3.org/1999/xlink",width:64,height:64,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,Bt||(Bt=i.createElement("defs",null,i.createElement("style",{type:"text/css"}))),Zt||(Zt=i.createElement("path",{d:"M808.106667 171.349333c23.466667 0 42.496 18.986667 42.496 42.453334v594.346666c0 23.466667-19.029333 42.453333-42.453334 42.453334H213.76a42.453333 42.453333 0 0 1-42.453333-42.453334V213.76c0-23.466667 18.986667-42.453333 42.453333-42.453333h594.346667z m0 42.453334H213.76v594.346666h594.346667V213.76z m-343.253334 122.666666l56.234667 301.866667H457.813333l-10.581333-65.109333H349.226667l-30.037334 65.109333H256l146.944-301.866667h61.994667z m97.962667 216.96h152.832c3.797333 0 7.125333 2.56 8.106667 6.229334l0.384 2.261333v25.472c0 3.84-2.56 7.168-6.272 8.192l-2.261334 0.298667H562.773333a8.490667 8.490667 0 0 1-8.192-6.229334l-0.298666-2.261333v-25.472c0-3.84 2.517333-7.168 6.186666-8.192l2.304-0.298667h152.832-152.832zM420.906667 418.986667l-49.493334 106.752h67.968l-17.237333-106.581334-1.237333-0.170666z m141.909333 7.04h152.832c3.797333 0 7.125333 2.56 8.106667 6.229333l0.384 2.261333v25.472c0 3.84-2.56 7.168-6.272 8.192l-2.261334 0.298667H562.773333a8.490667 8.490667 0 0 1-8.192-6.272l-0.298666-2.218667v-25.472c0-3.84 2.517333-7.168 6.186666-8.192l2.304-0.298666h152.832-152.832z",fill:"currentColor","p-id":16476})))},Qt=(0,i.forwardRef)($t),Wt=(r.p,["title","titleId"]);function Jt(){return Jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jt.apply(this,arguments)}var Kt,Ht,Gt,qt,Xt,er,tr,rr,nr,or,ar,ir,lr,cr,sr,pr,ur,dr,fr,mr,yr=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Wt);return i.createElement("svg",Jt({t:1620810264066,className:"icon",viewBox:"-100 -100 1224 1224",xmlns:"http://www.w3.org/2000/svg","p-id":14181,xmlnsXlink:"http://www.w3.org/1999/xlink",width:64,height:64,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,Ft||(Ft=i.createElement("defs",null,i.createElement("style",{type:"text/css"}))),Yt||(Yt=i.createElement("path",{d:"M562.490139 385.324741c-5.898848-13.197422-2.299551-28.894357 9.098223-37.892599 22.395626-17.796524 36.692833-45.291154 36.392892-76.18512-0.499902-51.889865-42.691662-94.381566-94.581527-95.081429H512c-52.98965 0-95.981254 42.991603-95.981254 95.981253 0 30.394064 14.097247 57.488772 36.092951 74.985355 11.397774 9.098223 15.297012 24.795157 9.398164 38.09256l-284.944346 638.675259h49.290373c12.59754 0 24.095294-7.398555 29.194298-18.99629l105.779339-236.95372h302.44093L768.949814 1005.00371c5.099004 11.497754 16.596758 18.99629 29.194298 18.99629h49.290373l-284.944346-638.675259z m-65.087288 76.585042c2.799453-6.29877 8.698301-9.498145 14.597149-9.498145s11.797696 3.199375 14.597149 9.498145l50.990041 114.1777H446.41281l50.990041-114.1777zM389.32396 704.062488l28.594415-63.987503h188.16325l28.594415 63.987503H389.32396zM762.351103 100.780316L709.761375 137.173208c9.098223 13.297403 16.796719 27.394649 23.095489 42.391721 12.69752 29.894161 19.09627 61.687952 19.09627 94.581527 0 32.793595-6.39875 64.587385-19.09627 94.581527-6.29877 14.89709-13.997266 29.094318-23.095489 42.39172l52.589728 36.392892C796.144503 398.122242 815.940637 338.4339 815.940637 274.146456s-19.796134-123.975786-53.589534-173.36614z m-452.111697 33.69342l-52.589728-36.392892C222.556532 147.871119 202.060535 208.659246 202.060535 274.146456s20.495997 126.275337 55.489162 176.165592l52.589729-36.392892c-9.898067-14.097247-18.296426-29.194298-25.095099-45.191173-12.59754-29.994142-18.99629-61.787932-18.99629-94.581527s6.39875-64.687366 19.096271-94.581527c6.698692-15.996876 15.097051-31.093927 25.095098-45.091193zM908.022652 0l-52.589729 36.392892c15.596954 22.795548 28.994337 47.190783 39.792228 72.885765C916.920914 160.468658 927.918766 214.958016 927.918766 271.147042s-10.997852 110.678383-32.693615 161.868385c-11.497754 27.194689-25.794962 52.98965-42.691661 76.984964l52.589728 36.392892c54.689318-77.984769 86.78305-172.866237 86.78305-275.246241 0-100.580355-30.993946-193.962117-83.883616-271.147042zM96.081234 271.147042c0-56.189026 10.997852-110.678383 32.693615-161.868385 10.897872-25.694981 24.195274-50.090217 39.792228-72.885765L115.977348 0C63.087678 77.184925 32.093732 170.566686 32.093732 271.147042c0 102.380004 32.093732 197.261472 86.683069 275.246241l52.589729-36.392892c-16.8967-23.995313-31.093927-49.690295-42.691662-76.984964C107.079086 381.825425 96.081234 327.336067 96.081234 271.147042z","p-id":14182,fill:"currentColor"})))},br=(0,i.forwardRef)(yr),hr=(r.p,["title","titleId"]);function gr(){return gr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gr.apply(this,arguments)}var vr,Or=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,hr);return i.createElement("svg",gr({t:1608281369417,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":16685,xmlnsXlink:"http://www.w3.org/1999/xlink",width:200,height:200,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,Kt||(Kt=i.createElement("defs",null,i.createElement("style",{type:"text/css"}))),Ht||(Ht=i.createElement("path",{d:"M918.7 217v51.1c0 2.2-1.8 4-4 4H202.1c-2.2 0-4-1.8-4-4V217c0-2.2 1.8-4 4-4h712.6c2.2 0 4 1.8 4 4z",fill:"currentColor","p-id":16686})),Gt||(Gt=i.createElement("path",{d:"M789.7 242.5H842c1.9 0 3.4 1.5 3.4 3.4v360.6c0 1.9-1.5 3.4-3.4 3.4h-52.3c-1.9 0-3.4-1.5-3.4-3.4V245.9c0-1.8 1.5-3.4 3.4-3.4z",fill:"currentColor","p-id":16687})),qt||(qt=i.createElement("path",{d:"M815.8 685.2m-121.8 0a121.8 121.8 0 1 0 243.6 0 121.8 121.8 0 1 0-243.6 0Z",fill:"currentColor","p-id":16688})),Xt||(Xt=i.createElement("path",{d:"M798.2 564.8C739.3 573.3 694 623.9 694 685.1c0 61.3 45.3 111.8 104.2 120.3 58.9-8.5 104.2-59.1 104.2-120.3 0-61.2-45.3-111.7-104.2-120.3z",fill:"currentColor","p-id":16689})),er||(er=i.createElement("path",{d:"M898.8 656.4c-11.6-47.7-51.3-84.4-100.6-91.5-49.3 7.2-89 43.8-100.6 91.5h201.2z",fill:"currentColor","p-id":16690})),tr||(tr=i.createElement("path",{d:"M737 680.3m-14.8 0a14.8 14.8 0 1 0 29.6 0 14.8 14.8 0 1 0-29.6 0Z",fill:"currentColor","p-id":16691})),rr||(rr=i.createElement("path",{d:"M773 601.5c-16.6 8.9-29.9 23-37.7 40.2-3.3 7.3 1.8 15.7 9.8 15.7h1.6c4.1 0 7.6-2.6 9.4-6.4 5.7-12.4 15.2-22.7 27-29.3 3.6-2 6.1-5.6 6.1-9.8v-0.8c0.1-8.3-8.9-13.5-16.2-9.6z",fill:"currentColor","p-id":16692})),nr||(nr=i.createElement("path",{d:"M501.7 242.5H554c1.9 0 3.4 1.5 3.4 3.4v360.6c0 1.9-1.5 3.4-3.4 3.4h-52.3c-1.9 0-3.4-1.5-3.4-3.4V245.9c0-1.8 1.5-3.4 3.4-3.4zM316.4 242.5h8.7c13.9 0 25.2 11.3 25.2 25.2l-98.4 309c0 16.3-13.2 29.5-29.5 29.5s-29.5-13.2-29.5-29.5l98.4-309c-0.1-13.9 11.2-25.2 25.1-25.2z",fill:"currentColor","p-id":16693})),or||(or=i.createElement("path",{d:"M198.1 656.4m-121.6 0a121.6 121.6 0 1 0 243.2 0 121.6 121.6 0 1 0-243.2 0Z",fill:"currentColor","p-id":16694})),ar||(ar=i.createElement("path",{d:"M198.1 656.4m-121.6 0a121.6 121.6 0 1 0 243.2 0 121.6 121.6 0 1 0-243.2 0Z",fill:"currentColor","p-id":16695})),ir||(ir=i.createElement("path",{d:"M180.6 536.2c-58.8 8.5-104.1 59-104.1 120.2s45.2 111.7 104.1 120.2c58.8-8.5 104.1-59 104.1-120.2-0.1-61.2-45.3-111.7-104.1-120.2z",fill:"currentColor","p-id":16696})),lr||(lr=i.createElement("path",{d:"M281.1 627.6c-11.6-47.7-51.2-84.3-100.5-91.5-49.3 7.2-89 43.9-100.6 91.5h201.1z",fill:"currentColor","p-id":16697})),cr||(cr=i.createElement("path",{d:"M119.4 651.5m-14.8 0a14.8 14.8 0 1 0 29.6 0 14.8 14.8 0 1 0-29.6 0Z",fill:"currentColor","p-id":16698})),sr||(sr=i.createElement("path",{d:"M155.4 572.8c-16.6 8.9-29.9 23-37.7 40.1-3.3 7.3 1.8 15.7 9.8 15.7h1.6c4.1 0 7.6-2.6 9.4-6.4 5.6-12.4 15.2-22.7 27-29.2 3.6-2 6.1-5.6 6.1-9.8v-0.8c0-8.3-8.9-13.5-16.2-9.6z",fill:"currentColor","p-id":16699})),pr||(pr=i.createElement("path",{d:"M527.8 685.2m-121.8 0a121.8 121.8 0 1 0 243.6 0 121.8 121.8 0 1 0-243.6 0Z",fill:"currentColor","p-id":16700})),ur||(ur=i.createElement("path",{d:"M510.2 564.8C451.3 573.3 406 623.9 406 685.1c0 61.3 45.3 111.8 104.2 120.3 58.9-8.5 104.2-59.1 104.2-120.3 0-61.2-45.3-111.7-104.2-120.3z",fill:"currentColor","p-id":16701})),dr||(dr=i.createElement("path",{d:"M610.8 656.4c-11.6-47.7-51.3-84.4-100.6-91.6-49.3 7.2-89 43.8-100.6 91.6h201.2z",fill:"currentColor","p-id":16702})),fr||(fr=i.createElement("path",{d:"M449 680.3m-14.8 0a14.8 14.8 0 1 0 29.6 0 14.8 14.8 0 1 0-29.6 0Z",fill:"currentColor","p-id":16703})),mr||(mr=i.createElement("path",{d:"M485 601.5c-16.6 8.9-29.9 23-37.7 40.2-3.3 7.3 1.8 15.7 9.8 15.7h1.6c4.1 0 7.6-2.6 9.4-6.4 5.7-12.4 15.2-22.7 27-29.3 3.6-2 6.1-5.6 6.1-9.8v-0.8c0-8.3-8.9-13.5-16.2-9.6z",fill:"currentColor","p-id":16704})))},kr=(0,i.forwardRef)(Or),xr=(r.p,["title","titleId"]);function Er(){return Er=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Er.apply(this,arguments)}var wr,Pr,jr,Sr,Cr,Ir,Ar,Mr=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,xr);return i.createElement("svg",Er({t:1656992910679,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":28593,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,vr||(vr=i.createElement("path",{d:"M875.52 433.152q-7.168-1.024-12.8-10.24t-8.704-33.792q-5.12-39.936-26.112-58.88t-65.024-27.136q-46.08-9.216-81.408-37.376t-58.88-52.736q-22.528-21.504-34.816-15.36t-12.288 22.528l0 44.032 0 96.256q0 57.344-0.512 123.904t-0.512 125.952l0 104.448 0 58.368q1.024 24.576-7.68 54.784t-32.768 56.832-64 45.568-99.328 22.016q-60.416 3.072-109.056-21.504t-75.264-61.952-26.112-81.92 38.4-83.456 81.92-54.272 84.992-16.896 73.216 5.632 47.616 13.312l0-289.792q0-120.832 1.024-272.384 0-29.696 15.36-48.64t40.96-22.016q21.504-3.072 35.328 8.704t28.16 32.768 35.328 47.616 56.832 52.224q30.72 23.552 53.76 33.792t43.008 18.944 39.424 20.992 43.008 39.936q23.552 26.624 28.672 55.296t0.512 52.224-14.848 38.4-17.408 13.824z","p-id":28594})))},_r=(0,i.forwardRef)(Mr),Dr=(r.p,["title","titleId"]);function Rr(){return Rr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rr.apply(this,arguments)}var Nr,Vr,Br,Zr=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Dr);return i.createElement("svg",Rr({t:1622196718267,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":7955,width:64,height:64,xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,wr||(wr=i.createElement("defs",null,i.createElement("style",{type:"text/css"}))),Pr||(Pr=i.createElement("path",{d:"M211.98 394.08h104.44c22.43 0 39.94 5.34 52.54 16.02 12.17 10.25 18.26 24.14 18.26 41.65 0 12.81-3.2 23.71-9.61 32.68-6.62 8.54-15.49 14.85-26.59 18.9 15.16 2.99 26.59 9.08 34.28 18.26 7.69 9.19 11.53 21.57 11.53 37.16 0 22.86-7.9 39.73-23.71 50.62-13.46 8.97-32.36 13.46-56.7 13.46H211.98V394.08z m34.92 28.83v68.24h60.23c15.8 0 27.34-2.77 34.6-8.33 7.05-5.77 10.57-14.74 10.57-26.91 0-11.53-3.52-19.86-10.57-24.99-6.84-5.34-18.16-8.01-33.96-8.01H246.9z m0 96.75v74.32h64.71c14.31 0 25.84-2.35 34.6-7.05 10.46-6.19 15.7-15.8 15.7-28.83 0-13.46-4.06-23.28-12.17-29.47-7.9-5.98-20.29-8.97-37.16-8.97H246.9z",fill:"currentColor","p-id":7956})),jr||(jr=i.createElement("path",{d:"M316.42 627.82H206.98V389.08h109.44c23.53 0 42.3 5.79 55.77 17.2 13.29 11.19 20.03 26.49 20.03 45.46 0 13.82-3.55 25.79-10.54 35.58l-0.12 0.16c-4.5 5.81-9.99 10.69-16.41 14.6 9.97 3.71 18.01 9.16 23.98 16.29 8.43 10.07 12.7 23.65 12.7 40.37 0 24.49-8.7 42.9-25.87 54.74-14.29 9.53-34.3 14.34-59.54 14.34z m-99.44-10h99.44c23.23 0 41.37-4.24 53.93-12.62 14.43-9.95 21.48-25.16 21.48-46.46 0-14.31-3.49-25.73-10.37-33.95-6.9-8.24-17.47-13.81-31.41-16.56l-17.55-3.47 16.8-6.14c10.12-3.7 18.29-9.48 24.29-17.19 5.72-8.05 8.62-18.04 8.62-29.69 0-16.11-5.39-28.48-16.48-37.82-11.63-9.85-28.22-14.84-49.32-14.84h-99.44v218.74z m94.64-18.83H241.9v-84.32h70.67c18.15 0 31.3 3.26 40.18 9.98 9.4 7.18 14.16 18.43 14.16 33.46 0 14.86-6.11 26.01-18.15 33.14l-0.18 0.1c-9.45 5.07-21.89 7.64-36.96 7.64z m-59.72-10h59.71c13.36 0 24.17-2.15 32.14-6.4 8.85-5.28 13.15-13.28 13.15-24.48 0-11.91-3.34-20.25-10.21-25.5-6.96-5.27-18.45-7.94-34.13-7.94H251.9v64.32z m55.23-92.84H241.9v-78.24h65.87c17.05 0 29.15 2.95 36.97 9.02 8.34 6.1 12.56 15.85 12.56 28.98 0 13.69-4.17 24.04-12.41 30.78l-0.13 0.1c-8.22 6.3-20.53 9.36-37.63 9.36z m-55.23-10h55.23c14.56 0 25.16-2.44 31.5-7.25 5.84-4.81 8.67-12.33 8.67-22.99 0-9.93-2.78-16.78-8.51-20.94l-0.14-0.1c-5.91-4.61-16.3-6.95-30.88-6.95H251.9v58.23zM414.45 394.08h187.41v29.79h-76.25v198.95h-34.6V423.87h-76.57v-29.79z",fill:"currentColor","p-id":7957})),Sr||(Sr=i.createElement("path",{d:"M530.62 627.82h-44.6V428.87h-76.57v-39.79h197.41v39.79h-76.25v198.95z m-34.6-10h24.6V418.87h76.25v-19.79H419.45v19.79h76.57v198.95z",fill:"currentColor","p-id":7958})),Cr||(Cr=i.createElement("path",{d:"M629.42 394.08h35.24l116.93 170.11h1.28V394.08h34.92v228.74h-33.96L665.62 450.78h-1.28v172.04h-34.92V394.08z",fill:"currentColor","p-id":7959})),Ir||(Ir=i.createElement("path",{d:"M822.79 627.82H781.2l-111.87-162.8v162.8h-44.92V389.08h42.87l110.58 160.88V389.08h44.92v238.74z m-36.33-10h26.33V399.08h-24.92v170.11h-8.91l-1.49-2.17-115.44-167.94h-27.61v218.74h24.92V445.78h8.91l118.21 172.04z",fill:"currentColor","p-id":7960})),Ar||(Ar=i.createElement("path",{d:"M884.08 819.68H146c-43.71 0-79.47-35.76-79.47-79.47V258.42c0-43.71 35.76-79.47 79.47-79.47h738.08c43.71 0 79.47 35.76 79.47 79.47V740.2c0 43.72-35.76 79.48-79.47 79.48z m15.4-129.88V308.83c0-36.2-29.61-65.81-65.81-65.81H196.41c-36.2 0-65.81 29.61-65.81 65.81V689.8c0 36.2 29.61 65.81 65.81 65.81h637.26c36.19 0 65.81-29.62 65.81-65.81z",fill:"currentColor","p-id":7961})))},Tr=(0,i.forwardRef)(Zr),zr=(r.p,["title","titleId"]);function Lr(){return Lr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lr.apply(this,arguments)}var Ur,Fr,Yr,$r=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,zr);return i.createElement("svg",Lr({t:1620810051996,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":7587,xmlnsXlink:"http://www.w3.org/1999/xlink",width:64,height:64,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,Nr||(Nr=i.createElement("defs",null,i.createElement("style",{type:"text/css"}))),Vr||(Vr=i.createElement("path",{d:"M512 12C236.31 12 12 236.31 12 512s224.31 500 500 500 500-224.31 500-500S787.69 12 512 12z m0 944.44C266.94 956.44 67.56 757.06 67.56 512S266.94 67.56 512 67.56 956.44 266.94 956.44 512 757.06 956.44 512 956.44z","p-id":7588,fill:"currentColor"})),Br||(Br=i.createElement("path",{d:"M373.11 289.78a27.76 27.76 0 0 0-27.78 27.78v388.88a27.78 27.78 0 1 0 55.56 0V317.56a27.76 27.76 0 0 0-27.78-27.78zM650.89 289.78a27.76 27.76 0 0 0-27.78 27.78v388.88a27.78 27.78 0 0 0 55.56 0V317.56a27.76 27.76 0 0 0-27.78-27.78z","p-id":7589,fill:"currentColor"})))},Qr=(0,i.forwardRef)($r),Wr=(r.p,["title","titleId"]);function Jr(){return Jr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jr.apply(this,arguments)}var Kr,Hr,Gr=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Wr);return i.createElement("svg",Jr({t:1622199814375,className:"icon",viewBox:"50 50 924 924",xmlns:"http://www.w3.org/2000/svg","p-id":20980,xmlnsXlink:"http://www.w3.org/1999/xlink",width:64,height:64,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,Ur||(Ur=i.createElement("defs",null,i.createElement("style",{type:"text/css"}))),Fr||(Fr=i.createElement("path",{d:"M512 960C265.6 960 64 758.4 64 512S265.6 64 512 64s448 201.6 448 448-201.6 448-448 448z m0-832C300.8 128 128 300.8 128 512s172.8 384 384 384 384-172.8 384-384S723.2 128 512 128z","p-id":20981,fill:"currentColor"})),Yr||(Yr=i.createElement("path",{d:"M433.6 672c-4.8 0-11.2-1.6-16-4.8-9.6-6.4-16-16-16-27.2V384c0-11.2 6.4-22.4 16-27.2 9.6-6.4 22.4-6.4 32 0l222.4 128c9.6 6.4 16 16 16 27.2s-6.4 22.4-16 27.2l-222.4 128c-4.8 3.2-11.2 4.8-16 4.8z m32-232v145.6l126.4-72-126.4-73.6z","p-id":20982,fill:"currentColor"})))},qr=(0,i.forwardRef)(Gr),Xr=(r.p,["title","titleId"]);function en(){return en=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},en.apply(this,arguments)}var tn,rn,nn=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Xr);return i.createElement("svg",en({t:1635770863531,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":1208,width:200,height:200,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,Kr||(Kr=i.createElement("path",{d:"M512 640h256v85.333333h-256zM243.2 631.466667l59.733333 59.733333 179.2-179.2-179.2-179.2-59.733333 59.733333L362.666667 512z","p-id":1209,fill:"currentColor"})),Hr||(Hr=i.createElement("path",{d:"M896 128H128c-25.6 0-42.666667 17.066667-42.666667 42.666667v682.666666c0 25.6 17.066667 42.666667 42.666667 42.666667h768c25.6 0 42.666667-17.066667 42.666667-42.666667V170.666667c0-25.6-17.066667-42.666667-42.666667-42.666667z m-42.666667 682.666667H170.666667V213.333333h682.666666v597.333334z","p-id":1210,fill:"currentColor"})))},on=(0,i.forwardRef)(nn),an=(r.p,["title","titleId"]);function ln(){return ln=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ln.apply(this,arguments)}var cn,sn,pn=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,an);return i.createElement("svg",ln({t:1637844324107,className:"icon",viewBox:"0 0 1242 1024",xmlns:"http://www.w3.org/2000/svg","p-id":5663,xmlnsXlink:"http://www.w3.org/1999/xlink",width:77.625,height:64,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,tn||(tn=i.createElement("defs",null,i.createElement("style",{type:"text/css"},'@font-face { font-family: element-icons; src: url("chrome-extension://moombeodfomdpjnpocobemoiaemednkg/fonts/element-icons.woff") format("woff"), url("chrome-extension://moombeodfomdpjnpocobemoiaemednkg/fonts/element-icons.ttf ") format("truetype"); }\n'))),rn||(rn=i.createElement("path",{d:"M1233.869891 472.860158l-145.482642 149.439425c-11.964829 11.82311-31.370828 11.82311-43.335657 0l-144.522735-149.439425c-17.176294-20.498178-5.698977-27.79763 6.265852-39.637747l132.329267 0C1002.611595 231.621095 829.034659 78.763417 620.001619 78.763417c-161.610219 0-302.183729 91.319684-374.541465 225.916449l-72.189563-29.33386C257.417424 111.795187 425.728098 0 620.001619 0c251.934093 0 460.097926 187.952871 497.475733 433.222411l110.119129 0C1239.568868 445.062528 1245.834719 461.0276 1233.869891 472.860158L1233.869891 472.860158zM196.595582 441.08307l145.482642 149.431867c11.964829 11.834448 5.698977 27.812747-6.27341 39.639636l-125.967047 0c50.619993 181.806063 214.962546 315.070673 410.163851 315.070673 148.545654 0 279.229095-77.227187 355.594633-194.218723l72.918942 29.628635c-88.817879 145.858669-247.261159 243.364842-428.513575 243.364842-238.244077 0-436.986457-168.172734-489.526265-393.845427l-115.470423 0c-11.972387-11.826889-23.444035-19.132011-6.267741-39.639636l144.524625-149.431867C165.226643 429.252401 184.630753 429.252401 196.595582 441.08307L196.595582 441.08307zM196.595582 441.08307","p-id":5664,fill:"currentColor"})))},un=(0,i.forwardRef)(pn),dn=(r.p,["title","titleId"]);function fn(){return fn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fn.apply(this,arguments)}var mn,yn,bn,hn,gn,vn=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,dn);return i.createElement("svg",fn({t:1664421421956,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":2927,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,cn||(cn=i.createElement("path",{d:"M324 666a48 48 0 1 0 96 0 48 48 0 1 0-96 0z","p-id":2928})),sn||(sn=i.createElement("path",{d:"M940.7 356.4L667.6 83.2C655.2 70.9 638.7 64 621.1 64s-34.1 6.8-46.5 19.2L83.3 574.5c-25.7 25.7-25.7 67.4 0 93.1l273.2 273.2c12.3 12.3 28.9 19.2 46.5 19.2s34.1-6.8 46.5-19.2l491.3-491.3c25.6-25.7 25.6-67.5-0.1-93.1zM403 880.1L143.9 621l477.2-477.2 259 259.2L403 880.1zM152.8 373.7c3.1 3.1 8.1 3.1 11.2 0L373.7 164c3.1-3.1 3.1-8.1 0-11.2l-38.4-38.4c-3.1-3.1-8.1-3.1-11.2 0L114.3 323.9c-3.1 3.1-3.1 8.1 0 11.2l38.5 38.6z m718.6 276.6c-3.1-3.1-8.1-3.1-11.2 0L650.3 860.1c-3.1 3.1-3.1 8.1 0 11.2l38.4 38.4c3.1 3.1 8.1 3.1 11.2 0L909.7 700c3.1-3.1 3.1-8.1 0-11.2l-38.3-38.5z","p-id":2929})))},On=(0,i.forwardRef)(vn),kn=(r.p,["title","titleId"]);function xn(){return xn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xn.apply(this,arguments)}var En,wn,Pn,jn=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,kn);return i.createElement("svg",xn({t:1637844256435,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":3958,xmlnsXlink:"http://www.w3.org/1999/xlink",width:64,height:64,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,mn||(mn=i.createElement("defs",null,i.createElement("style",{type:"text/css"},'@font-face { font-family: element-icons; src: url("chrome-extension://moombeodfomdpjnpocobemoiaemednkg/fonts/element-icons.woff") format("woff"), url("chrome-extension://moombeodfomdpjnpocobemoiaemednkg/fonts/element-icons.ttf ") format("truetype"); }\n'))),yn||(yn=i.createElement("path",{d:"M607.897867 768.043004c-17.717453 0-31.994625-14.277171-31.994625-31.994625L575.903242 383.935495c0-17.717453 14.277171-31.994625 31.994625-31.994625s31.994625 14.277171 31.994625 31.994625l0 351.94087C639.892491 753.593818 625.61532 768.043004 607.897867 768.043004z","p-id":3959,fill:"currentColor"})),bn||(bn=i.createElement("path",{d:"M415.930119 768.043004c-17.717453 0-31.994625-14.277171-31.994625-31.994625L383.935495 383.935495c0-17.717453 14.277171-31.994625 31.994625-31.994625 17.717453 0 31.994625 14.277171 31.994625 31.994625l0 351.94087C447.924744 753.593818 433.647573 768.043004 415.930119 768.043004z","p-id":3960,fill:"currentColor"})),hn||(hn=i.createElement("path",{d:"M928.016126 223.962372l-159.973123 0L768.043004 159.973123c0-52.980346-42.659499-95.983874-95.295817-95.983874L351.94087 63.989249c-52.980346 0-95.983874 43.003528-95.983874 95.983874l0 63.989249-159.973123 0c-17.717453 0-31.994625 14.277171-31.994625 31.994625s14.277171 31.994625 31.994625 31.994625l832.032253 0c17.717453 0 31.994625-14.277171 31.994625-31.994625S945.73358 223.962372 928.016126 223.962372zM319.946246 159.973123c0-17.545439 14.449185-31.994625 31.994625-31.994625l320.806316 0c17.545439 0 31.306568 14.105157 31.306568 31.994625l0 63.989249L319.946246 223.962372 319.946246 159.973123 319.946246 159.973123z","p-id":3961,fill:"currentColor"})),gn||(gn=i.createElement("path",{d:"M736.048379 960.010751 288.123635 960.010751c-52.980346 0-95.983874-43.003528-95.983874-95.983874L192.139761 383.591466c0-17.717453 14.277171-31.994625 31.994625-31.994625s31.994625 14.277171 31.994625 31.994625l0 480.435411c0 17.717453 14.449185 31.994625 31.994625 31.994625l448.096758 0c17.717453 0 31.994625-14.277171 31.994625-31.994625L768.215018 384.795565c0-17.717453 14.277171-31.994625 31.994625-31.994625s31.994625 14.277171 31.994625 31.994625l0 479.231312C832.032253 916.835209 789.028725 960.010751 736.048379 960.010751z","p-id":3962,fill:"currentColor"})))},Sn=(0,i.forwardRef)(jn),Cn=(r.p,["title","titleId"]);function In(){return In=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},In.apply(this,arguments)}var An,Mn=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Cn);return i.createElement("svg",In({t:1637844533825,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":1225,width:64,height:64,xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,En||(En=i.createElement("defs",null,i.createElement("style",{type:"text/css"},'@font-face { font-family: element-icons; src: url("chrome-extension://moombeodfomdpjnpocobemoiaemednkg/fonts/element-icons.woff") format("woff"), url("chrome-extension://moombeodfomdpjnpocobemoiaemednkg/fonts/element-icons.ttf ") format("truetype"); }\n'))),wn||(wn=i.createElement("path",{d:"M913.94086 431.828053c-4.878101-25.783223-20.693298-42.455951-40.947598-42.455951l-3.511987 0c-54.731532 0-99.248422-44.515866-99.248422-99.262748 0-17.294898 8.299013-37.015032 8.619308-37.798884 10.097986-22.722514 2.349511-50.567699-18.078751-64.859193l-102.701057-57.183374-1.509377-0.738827c-20.545942-8.909927-48.667419-3.207042-63.987337 12.753465-11.086499 11.434423-49.306986 44.037982-78.471213 44.037982-29.543873 0-67.849294-33.257451-78.992075-44.908816-15.293311-16.077164-43.12417-22.112624-63.902402-13.218046l-106.35733 58.272171-1.596358 1.016143c-20.430308 14.234189-28.207435 42.078351-18.165732 64.713884 0.346901 0.827855 8.676613 20.387329 8.676613 37.914518 0 54.746882-44.51689 99.262748-99.247398 99.262748l-4.149507 0c-19.617803 0-35.434024 16.671705-40.309054 42.455951-0.363274 1.814322-8.590656 45.446052-8.590656 80.429821 0 34.938744 8.227382 78.555124 8.590656 80.355119 4.875031 25.799596 20.691251 42.48665 40.946574 42.48665l3.511987 0c54.730509 0 99.247398 44.51689 99.247398 99.247398 0 17.411555-8.328689 37.058011-8.647961 37.812187-10.069333 22.766516-2.349511 50.567699 18.021445 64.787562l100.756775 56.531528 1.538029 0.696872c20.836561 9.17087 49.01432 3.191692 64.250326-13.464663 14.07353-15.207353 52.207036-46.782489 80.20981-46.782489 30.354332 0 69.445652 35.347043 80.706113 47.76691 10.387581 11.376095 26.349111 18.22713 42.687218 18.22713 7.631818 0 14.857383-1.511423 21.474081-4.354168l104.4724-57.574277 1.538029-0.989537c20.428262-14.276145 28.206412-42.077328 18.138102-64.727187-0.348947-0.842181-8.677637-20.402679-8.677637-37.928844 0-54.730509 44.51689-99.247398 99.248422-99.247398l4.093225 0c19.644409 0 35.488259-16.687054 40.365336-42.48665 0.347924-1.799996 8.588609-45.416376 8.588609-80.355119C922.529469 477.274104 914.288784 433.642374 913.94086 431.828053M862.982258 512.257873c0 22.605857-4.498454 51.655474-6.559393 63.785745-82.09781 6.732331-145.738245 75.335802-145.738245 158.303422 0 23.419386 7.430226 45.851281 11.377118 56.169277l-89.12076 49.216935c-4.38282-4.584412-17.325597-17.644869-34.939767-30.762631-30.93557-22.925129-60.595077-34.635845-88.106664-34.635845-27.278273 0-56.703443 11.420097-87.493703 34.05563-17.528212 12.768815-30.296003 25.479301-34.765805 30.18037l-85.724407-47.997154c4.179183-10.839883 11.405771-32.982182 11.405771-56.226582 0-82.96762-63.640436-151.571091-145.70857-158.303422-2.089591-12.130272-6.588045-41.178865-6.588045-63.785745 0-22.650883 4.498454-51.713802 6.588045-63.844074 82.068134-6.718005 145.70857-75.335802 145.70857-158.303422 0-23.288402-7.429203-45.792952-11.376095-56.095599l91.325985-50.190099c3.975545 3.976568 17.005302 16.730033 34.82311 29.411867 30.355355 21.663392 59.260685 32.633235 86.016049 32.633235 26.494421 0 55.19509-10.766205 85.346807-32.009018 17.963117-12.623505 30.964222-25.203008 34.736129-28.757974l87.900979 48.825009c-3.975545 10.244318-11.405771 32.676214-11.405771 56.18258 0 82.96762 63.640436 151.585417 145.738245 158.303422C858.483804 460.5717 862.982258 489.7523 862.982258 512.257873","p-id":1226,fill:"currentColor"})),Pn||(Pn=i.createElement("path",{d:"M510.215866 365.633445c-80.530105 0-146.056494 65.527412-146.056494 146.057517 0 80.543408 65.527412 146.043191 146.056494 146.043191 80.530105 0 146.057517-65.499783 146.057517-146.043191C656.273383 431.160857 590.74597 365.633445 510.215866 365.633445M596.725148 511.690962c0 47.693232-38.799678 86.491887-86.509283 86.491887-47.708582 0-86.479607-38.798655-86.479607-86.491887 0-47.665603 38.771025-86.479607 86.479607-86.479607C557.925471 425.212378 596.725148 464.025359 596.725148 511.690962","p-id":1227,fill:"currentColor"})))},_n=(0,i.forwardRef)(Mn),Dn=(r.p,["title","titleId"]);function Rn(){return Rn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rn.apply(this,arguments)}var Nn,Vn=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Dn);return i.createElement("svg",Rn({t:1657005645763,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":19006,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,An||(An=i.createElement("path",{d:"M853.333333 554.666667a341.333333 341.333333 0 0 1-682.666666 22.613333 21.76 21.76 0 0 1 5.546666-15.786667 22.186667 22.186667 0 0 1 16.64-6.826666h42.666667a21.333333 21.333333 0 0 1 21.333333 19.626666A256 256 0 1 0 512 298.666667v100.693333a20.906667 20.906667 0 0 1-6.4 15.36l-8.533333 8.533333a21.333333 21.333333 0 0 1-30.293334 0L315.733333 272.64a21.76 21.76 0 0 1 0-30.293333l151.04-150.613334a21.333333 21.333333 0 0 1 30.293334 0l8.533333 8.533334a20.906667 20.906667 0 0 1 6.4 15.36V213.333333a341.333333 341.333333 0 0 1 341.333333 341.333334z","p-id":19007})))},Bn=(0,i.forwardRef)(Vn),Zn=(r.p,["title","titleId"]);function Tn(){return Tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tn.apply(this,arguments)}var zn,Ln=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Zn);return i.createElement("svg",Tn({t:1657006307086,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":23912,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,Nn||(Nn=i.createElement("path",{d:"M598.847997 571.156308l0 49.741891c191.905728 17.447371 310.278719 90.323145 310.278719 142.534274 0 59.69252-154.717757 146.400325-397.159462 146.400325-242.438635 0-397.153322-86.708827-397.153322-146.400325 0-57.162908 141.886521-139.096988 366.819456-145.938813l5.525853 44.207851c-158.7547 2.167363-285.467637 45.743834-285.467637 99.197256 0 54.834886 133.35931 99.289354 297.867038 99.289354s297.867038-44.454468 297.867038-99.289354c0-43.215244-82.963527-79.875189-198.578708-93.519953l0 50.0233c78.29725 10.001795 127.444601 30.125111 144.428414 43.496653-23.309892 18.349927-106.500593 49.644677-243.716744 49.644677-137.213082 0-220.406852-31.29475-243.716744-49.644677 22.956851-18.071587 103.995539-48.698119 237.514485-49.622164l6.202259 49.622164 43.908022-351.266225c82.650395-14.553461 145.364739-85.356017 145.364739-170.508395 0-95.683223-79.183434-173.249833-176.86108-173.249833s-176.86108 77.56661-176.86108 173.249833c0 76.098165 50.087768 140.733255 119.728872 164.006308l20.61348 164.905794c-229.680053 8.15268-410.282341 92.518137-410.282341 195.396225 0 108.272959 200.038966 196.045001 446.801069 196.045001s446.801069-87.775112 446.801069-196.045001C958.771393 668.209738 804.001447 588.906577 598.847997 571.156308zM384.752898 239.125169c0-68.156286 57.069787-123.605156 127.216403-123.605156s127.216403 55.44887 127.216403 123.605156-57.069787 123.605156-127.216403 123.605156S384.752898 307.281455 384.752898 239.125169z","p-id":23913})))},Un=(0,i.forwardRef)(Ln),Fn=(r.p,["title","titleId"]);function Yn(){return Yn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yn.apply(this,arguments)}var $n,Qn,Wn=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Fn);return i.createElement("svg",Yn({t:1656992853915,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":26739,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,zn||(zn=i.createElement("path",{d:"M480 96l128.576 273.92L896 413.76l-208 213.12 49.088 301.056L480 785.92 222.912 928l49.088-300.992L64 413.824l287.424-43.968L480 96z m448 672v64H768v-64h160z m-448-521.408L394.88 427.968l-198.144 30.272 143.616 147.2-33.152 202.752 172.8-95.424 172.736 95.424-33.088-202.816 143.552-147.136-198.08-30.272L480 246.592zM928 576v64H768V576h160z m0-320v64H768V256h160z",fill:"currentColor","p-id":26740})))},Jn=(0,i.forwardRef)(Wn),Kn=(r.p,r(19061)),Hn=["title","titleId"];function Gn(){return Gn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gn.apply(this,arguments)}var qn,Xn=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Hn);return i.createElement("svg",Gn({t:1608280600316,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":6828,xmlnsXlink:"http://www.w3.org/1999/xlink",width:200,height:200,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,$n||($n=i.createElement("defs",null,i.createElement("style",{type:"text/css"}))),Qn||(Qn=i.createElement("path",{d:"M322.746182 122.740364c26.996364-4.328727 60.648727-6.376727 101.376-6.376728 54.411636 0 93.090909 7.819636 152.017454 26.344728 14.615273 4.654545 21.457455 6.795636 28.299637 8.843636 30.72 9.216 52.130909 13.218909 76.334545 13.218909 32.907636 0 62.789818-2.792727 89.553455-8.192a92.858182 92.858182 0 0 1 111.383272 90.996364v278.993454c0 42.542545-28.951273 79.685818-70.283636 90.065455-32.116364 8.052364-75.357091 11.822545-130.699636 11.822545-56.645818 0-91.694545-7.447273-148.014546-26.717091l-7.493818-2.56c-41.890909-14.242909-64.558545-19.130182-101.096727-19.130181-34.164364 0-62.184727 1.815273-83.688727 5.306181a93.556364 93.556364 0 0 1-14.615273 1.210182v340.340364c0 25.6-20.759273 46.359273-46.312727 46.359273h-0.465455A46.312727 46.312727 0 0 1 232.727273 926.906182V139.403636c0-25.6 20.759273-46.312727 46.312727-46.312727h0.465455c19.688727 0 36.538182 12.288 43.240727 29.649455zM325.818182 493.707636V216.808727 493.381818c26.903273-4.375273 59.578182-6.516364 98.304-6.516363 48.64 0 80.384 6.888727 131.118545 24.15709l7.540364 2.606546c47.476364 16.197818 73.262545 21.690182 117.946182 21.690182 48.267636 0 84.526545-3.165091 107.892363-8.983273v-278.807273c-32.907636 6.981818-68.933818 10.286545-107.892363 10.286546-34.676364 0-64.418909-5.538909-103.098182-17.175273-7.447273-2.234182-14.987636-4.608-29.416727-9.169455-50.641455-15.918545-80.989091-22.062545-124.090182-22.062545-43.613091 0-76.613818 2.606545-98.304 7.400727z","p-id":6829,fill:"currentColor"})))},eo=(0,i.forwardRef)(Xn),to=(r.p,["title","titleId"]);function ro(){return ro=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ro.apply(this,arguments)}var no,oo,ao,io=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,to);return i.createElement("svg",ro({t:1656992508215,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":9282,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,qn||(qn=i.createElement("path",{d:"M549.212137 182.033527a120.591442 120.591442 0 0 0-32.515026-82.582807 105.70361 105.70361 0 0 0-86.54297-27.051191 44.7826 44.7826 0 0 1-35.537256-6.982393 37.026039 37.026039 0 0 1-2.798912-27.602042 29.775665 29.775665 0 0 0-57.392594-15.944868 95.639435 95.639435 0 0 0 14.143441 81.436443c18.207819 22.197758 47.283756 31.830186 86.349428 28.659077a49.918902 49.918902 0 0 1 40.018493 10.123726 59.968189 59.968189 0 0 1 14.515637 37.621553c-2.054521 0.089327-4.362135 0.178654-7.309926 0.267981v0.163766c-148.878324 10.912781-267.980983 139.945625-267.980983 297.667321v247.286896a297.756648 297.756648 0 1 0 595.513296 0v-247.286896a299.945159 299.945159 0 0 0-259.048284-295.776566m-41.581716-2.977567c1.205914 0 2.396941 0.13399 3.602856 0.148879-1.697213 0-3.36465-0.089327-4.987424-0.104215a9.930184 9.930184 0 0 1 1.44412-0.119103zM750.197874 725.096989a238.205318 238.205318 0 1 1-476.410636 0V560.363124h476.410636v164.733865zM467.329059 485.655981v-69.71972a37.29402 37.29402 0 0 1 74.439162 0v69.71972h-74.439162z m282.868815 14.887832H601.31955v-84.667103a96.770911 96.770911 0 0 0-193.541821 0v84.667103H273.787238V477.750542a238.205318 238.205318 0 1 1 476.410636 0v22.793271z","p-id":9283})))},lo=(0,i.forwardRef)(io),co=(r.p,["title","titleId"]);function so(){return so=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},so.apply(this,arguments)}var po,uo,fo,mo,yo,bo,ho=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,co);return i.createElement("svg",so({t:1656992459915,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":7365,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,no||(no=i.createElement("path",{d:"M890 256H537v-33c0-24.813 20.187-45 45-45 13.808 0 25-11.193 25-25s-11.192-25-25-25c-52.383 0-95 42.617-95 95v33H134c-38.66 0-70 31.34-70 70v500c0 38.66 31.34 70 70 70h756c38.66 0 70-31.34 70-70V326c0-38.66-31.34-70-70-70z m20 570c0 11.028-8.972 20-20 20H134c-11.028 0-20-8.972-20-20V326c0-11.028 8.972-20 20-20h756c11.028 0 20 8.972 20 20v500z","p-id":7366})),oo||(oo=i.createElement("path",{d:"M229 366h-30c-19.33 0-35 15.67-35 35v30c0 19.33 15.67 35 35 35h30c19.33 0 35-15.67 35-35v-30c0-19.33-15.67-35-35-35zM348 466h30c19.33 0 35-15.67 35-35v-30c0-19.33-15.67-35-35-35h-30c-19.33 0-35 15.67-35 35v30c0 19.33 15.67 35 35 35zM497 466h30c19.33 0 35-15.67 35-35v-30c0-19.33-15.67-35-35-35h-30c-19.33 0-35 15.67-35 35v30c0 19.33 15.67 35 35 35zM646 466h30c19.33 0 35-15.67 35-35v-30c0-19.33-15.67-35-35-35h-30c-19.33 0-35 15.67-35 35v30c0 19.33 15.67 35 35 35z","p-id":7367})),ao||(ao=i.createElement("path",{d:"M825 366h-30c-19.33 0-35 15.67-35 35v125H646c-19.33 0-35 15.67-35 35v30c0 19.33 15.67 35 35 35h179c19.33 0 35-15.67 35-35V401c0-19.33-15.67-35-35-35zM229 526h-30c-19.33 0-35 15.67-35 35v30c0 19.33 15.67 35 35 35h30c19.33 0 35-15.67 35-35v-30c0-19.33-15.67-35-35-35zM348 626h30c19.33 0 35-15.67 35-35v-30c0-19.33-15.67-35-35-35h-30c-19.33 0-35 15.67-35 35v30c0 19.33 15.67 35 35 35zM497 626h30c19.33 0 35-15.67 35-35v-30c0-19.33-15.67-35-35-35h-30c-19.33 0-35 15.67-35 35v30c0 19.33 15.67 35 35 35zM229 686h-30c-19.33 0-35 15.67-35 35v30c0 19.33 15.67 35 35 35h30c19.33 0 35-15.67 35-35v-30c0-19.33-15.67-35-35-35zM676 686H348c-19.33 0-35 15.67-35 35v30c0 19.33 15.67 35 35 35h328c19.33 0 35-15.67 35-35v-30c0-19.33-15.67-35-35-35zM825 686h-30c-19.33 0-35 15.67-35 35v30c0 19.33 15.67 35 35 35h30c19.33 0 35-15.67 35-35v-30c0-19.33-15.67-35-35-35z","p-id":7368})))},go=(0,i.forwardRef)(ho),vo=(r.p,["title","titleId"]);function Oo(){return Oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oo.apply(this,arguments)}var ko,xo,Eo=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,vo);return i.createElement("svg",Oo({t:1657002267467,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":50406,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,po||(po=i.createElement("path",{d:"M475.2 903.2c-16.8 0-34.4-1.6-53.6-4l-4.8-0.8c-136-20.8-228.8-152.8-232.8-158.4-131.2-200-65.6-402.4 58.4-514.4 123.2-112 328.8-160 508.8-15.2C867.2 304 902.4 433.6 904 439.2v1.6c16.8 91.2 3.2 158.4-40.8 201.6-67.2 64.8-178.4 44-193.6 40.8-20.8-2.4-36 4-47.2 17.6-12 15.2-14.4 35.2-10.4 47.2 11.2 33.6 12.8 59.2 4.8 78.4-23.2 50.4-70.4 76.8-141.6 76.8z m-51.2-52.8l4.8 0.8c77.6 12 124.8-3.2 144-46.4 0-0.8 4-11.2-6.4-43.2-10.4-28.8-2.4-66.4 18.4-92 21.6-27.2 53.6-39.2 91.2-35.2l2.4 0.8c0.8 0 100 21.6 151.2-28 31.2-30.4 40.8-83.2 27.2-156.8-3.2-10.4-37.6-123.2-136.8-202.4-156.8-128-336.8-85.6-445.6 12.8C174.4 352 100.8 525.6 224 713.6c0.8 0 84.8 120 200 136.8z",fill:"#2c2c2c","p-id":50407})),uo||(uo=i.createElement("path",{d:"M284 526.4m-48 0a48 48 0 1 0 96 0 48 48 0 1 0-96 0Z",fill:"#2c2c2c","p-id":50408})),fo||(fo=i.createElement("path",{d:"M340 382.4m-48 0a48 48 0 1 0 96 0 48 48 0 1 0-96 0Z",fill:"#2c2c2c","p-id":50409})),mo||(mo=i.createElement("path",{d:"M484 302.4m-48 0a48 48 0 1 0 96 0 48 48 0 1 0-96 0Z",fill:"#2c2c2c","p-id":50410})),yo||(yo=i.createElement("path",{d:"M644 342.4m-48 0a48 48 0 1 0 96 0 48 48 0 1 0-96 0Z",fill:"#2c2c2c","p-id":50411})),bo||(bo=i.createElement("path",{d:"M724 470.4m-48 0a48 48 0 1 0 96 0 48 48 0 1 0-96 0Z",fill:"#2c2c2c","p-id":50412})))},wo=(0,i.forwardRef)(Eo),Po=(r.p,["title","titleId"]);function jo(){return jo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jo.apply(this,arguments)}var So,Co=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Po);return i.createElement("svg",jo({t:1656992671715,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":21063,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,ko||(ko=i.createElement("path",{d:"M483.2256 953.4464a441.6512 441.6512 0 1 1 244.9408-808.96l-45.4656 68.096A359.7312 359.7312 0 1 0 842.9568 512h81.92a442.1632 442.1632 0 0 1-441.6512 441.4464z",fill:"#2c2c2c","p-id":21064})),xo||(xo=i.createElement("path",{d:"M778.5472 519.3728l99.5328-145.8176 104.7552 145.8176H778.5472zM675.84 583.4752H432.0256V302.6944h81.92v198.8608H675.84v81.92z",fill:"#2c2c2c","p-id":21065})))},Io=(0,i.forwardRef)(Co),Ao=(r.p,["title","titleId"]);function Mo(){return Mo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mo.apply(this,arguments)}var _o,Do=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Ao);return i.createElement("svg",Mo({t:1657002651665,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":63359,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,So||(So=i.createElement("path",{d:"M917.333333 896c-58.813333 0-106.666667-47.853333-106.666666-106.666667 0-51.513333 36.706667-94.613333 85.333333-104.526666V522.666667a10.666667 10.666667 0 0 0-10.666667-10.666667H554.666667v172.806667c48.626667 9.913333 85.333333 53.013333 85.333333 104.526666 0 58.813333-47.853333 106.666667-106.666667 106.666667s-106.666667-47.853333-106.666666-106.666667c0-51.513333 36.706667-94.613333 85.333333-104.526666V512H181.333333a10.666667 10.666667 0 0 0-10.666666 10.666667v162.14c48.626667 9.913333 85.333333 53.013333 85.333333 104.526666 0 58.813333-47.853333 106.666667-106.666667 106.666667s-106.666667-47.853333-106.666666-106.666667c0-51.513333 36.706667-94.613333 85.333333-104.526666V522.666667a53.393333 53.393333 0 0 1 53.333333-53.333334h330.666667V339.193333C463.373333 329.28 426.666667 286.18 426.666667 234.666667c0-58.813333 47.853333-106.666667 106.666666-106.666667s106.666667 47.853333 106.666667 106.666667c0 51.513333-36.706667 94.613333-85.333333 104.526666V469.333333h330.666666a53.393333 53.393333 0 0 1 53.333334 53.333334v162.14c48.626667 9.913333 85.333333 53.013333 85.333333 104.526666 0 58.813333-47.853333 106.666667-106.666667 106.666667z m0-170.666667a64 64 0 1 0 64 64 64.073333 64.073333 0 0 0-64-64z m-384 0a64 64 0 1 0 64 64 64.073333 64.073333 0 0 0-64-64z m-384 0a64 64 0 1 0 64 64 64.073333 64.073333 0 0 0-64-64z m384-554.666666a64 64 0 1 0 64 64 64.073333 64.073333 0 0 0-64-64z",fill:"#2c2c2c","p-id":63360})))},Ro=(0,i.forwardRef)(Do),No=(r.p,["title","titleId"]);function Vo(){return Vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vo.apply(this,arguments)}var Bo,Zo,To=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,No);return i.createElement("svg",Vo({t:1657002832776,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":65166,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,_o||(_o=i.createElement("path",{d:"M729.051943 259.615852 292.623106 259.615852c-126.254495 0-228.604558 102.350063-228.604558 228.604558 0 126.255519 102.350063 228.604558 228.604558 228.604558l436.428837 0c126.255519 0 228.604558-102.350063 228.604558-228.604558C957.657524 361.965915 855.307462 259.615852 729.051943 259.615852zM291.32146 684.85279c-108.611673 0-196.656939-88.045265-196.656939-196.656939 0-108.61065 88.045265-196.656939 196.656939-196.656939 108.612697 0 196.657962 88.046289 196.657962 196.656939C487.979422 596.807524 399.934157 684.85279 291.32146 684.85279z","p-id":65167})))},zo=(0,i.forwardRef)(To),Lo=(r.p,["title","titleId"]);function Uo(){return Uo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uo.apply(this,arguments)}var Fo,Yo,$o=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Lo);return i.createElement("svg",Uo({t:1657003694864,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":16883,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,Bo||(Bo=i.createElement("path",{d:"M869 112H155c-23.75 0-43 19.25-43 43v714c0 23.75 19.25 43 43 43h380c23.75 0 43-19.25 43-43s-19.25-43-43-43H198V198h628v628h-52c-23.75 0-43 19.25-43 43s19.25 43 43 43h95c23.75 0 43-19.25 43-43V155c0-23.75-19.25-43-43-43z",fill:"#333333","p-id":16884})),Zo||(Zo=i.createElement("path",{d:"M392.02 423c0-14.24 3.56-24.92 17.8-28.48 24.92-7.12 46.28-17.8 71.2-10.68 21.36 3.56 35.6 14.24 46.28 39.16 3.56 14.24 7.12 32.04 14.24 46.28 3.57-3.56 3.57-7.12 7.12-10.68 10.68-17.8 21.36-35.6 35.6-53.4 7.12-7.12 14.24-17.8 24.92-21.36 17.8-10.68 35.6-3.56 46.28 10.68s10.68 39.16-3.56 53.4c-14.24 17.8-32.04 21.36-49.84 17.8-3.56 0-10.68 0-14.24-3.56-7.12-3.56-14.24 0-21.36 7.12-3.56 7.12-10.68 14.24-14.24 21.36 0 3.56-3.56 7.12 0 10.68 7.12 28.48 14.24 56.96 21.36 81.88 7.12 24.92 24.92 35.6 49.84 28.48 7.12 0 10.68-3.56 17.8-3.56 0 17.8-3.56 21.36-17.8 28.48-21.36 10.68-46.28 17.8-71.2 14.24-21.36-3.56-39.16-14.24-46.28-39.16-3.56-14.24-7.12-32.04-14.24-49.84-3.56 3.56-3.56 7.12-7.12 10.68-10.68 17.8-21.36 39.16-35.6 56.96-7.12 10.68-17.8 17.8-28.48 21.36-17.8 7.12-35.6 0-42.72-14.24-7.12-14.24-7.12-39.16 3.56-53.4 14.24-17.8 32.04-21.36 53.4-17.8 3.56 0 7.12 0 10.68 3.56 10.68 7.12 17.8 3.56 21.36-7.12 3.56-7.12 10.68-14.24 14.24-21.36 3.56-3.56 3.56-7.12 0-10.68-7.12-24.92-10.68-49.84-17.8-71.2-10.68-32.04-24.92-42.72-53.4-32.04-7.12-3.56-10.68-3.56-17.8-3.56zM678.18 690c28.48-56.96 46.28-113.92 46.28-178s-10.68-121.04-39.16-178h42.72c3.56 0 3.56 3.56 3.56 3.56 35.6 60.52 49.84 128.16 42.72 202.91-7.12 53.4-28.48 99.68-53.4 142.41 0 3.56-3.56 3.56-7.12 3.56-10.68 3.56-21.36 3.56-35.6 3.56zM337.26 334c-53.4 121.04-49.84 238.52 10.68 356h-39.16s-3.56 0-3.56-3.56c-24.92-42.72-46.28-85.44-53.4-135.28-10.68-74.76 0-145.96 39.16-210.04 3.56-3.56 7.12-7.12 10.68-7.12h35.6zM610.43 868.99a42.99 42.99 0 0 0 21.5 37.24 43.006 43.006 0 0 0 43 0 43.012 43.012 0 0 0 21.5-37.24c0-15.37-8.19-29.56-21.5-37.24a43.006 43.006 0 0 0-43 0 42.99 42.99 0 0 0-21.5 37.24z m0 0",fill:"#333333","p-id":16885})))},Qo=(0,i.forwardRef)($o),Wo=(r.p,["title","titleId"]);function Jo(){return Jo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jo.apply(this,arguments)}var Ko,Ho=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Wo);return i.createElement("svg",Jo({t:1657003742964,className:"icon",viewBox:"0 0 1073 1024",xmlns:"http://www.w3.org/2000/svg","p-id":19012,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,Fo||(Fo=i.createElement("path",{d:"M191.597683 1024h690.029335A191.850117 191.850117 0 0 0 1072.84605 833.033403V191.597683A191.850117 191.850117 0 0 0 881.627018 0H191.597683A191.850117 191.850117 0 0 0 0 191.597683V833.033403a191.850117 191.850117 0 0 0 191.597683 190.966597zM87.468507 833.033403V191.597683a104.255393 104.255393 0 0 1 104.129176-104.129176h690.029335a104.255393 104.255393 0 0 1 104.129176 104.129176V833.033403a104.255393 104.255393 0 0 1-104.129176 104.129176H191.597683A104.255393 104.255393 0 0 1 87.468507 833.033403z",fill:"#4D4D4D","p-id":19013})),Yo||(Yo=i.createElement("path",{d:"M248.016763 312.008875a160.043387 160.043387 0 0 1-37.865154 45.816837 265.056083 265.056083 0 0 1-63.865895 41.65167l-7.320596 3.407864v70.176753l17.291754-6.058424a329.048194 329.048194 0 0 0 50.486873-25.243437c8.835203-5.174904 16.913102-10.476026 24.233699-15.650931v277.29915h70.807839V304.940712h-50.234439zM492.247011 631.085912c7.320597-7.699248 25.243436-23.097744 51.749045-45.816838a770.682115 770.682115 0 0 0 71.691359-66.642672 181.87896 181.87896 0 0 0 31.80673-49.098484 124.450142 124.450142 0 0 0 10.097375-48.846049 109.556514 109.556514 0 0 0-35.088377-82.546038 130.003698 130.003698 0 0 0-93.400715-33.195119 136.062123 136.062123 0 0 0-92.643412 30.670776 127.353137 127.353137 0 0 0-40.515715 88.352027l-1.135955 12.621719 73.079749 7.573031v-13.883891a62.225071 62.225071 0 0 1 16.282016-45.943054 58.564773 58.564773 0 0 1 43.797363-16.155799 57.428818 57.428818 0 0 1 41.904104 15.146062 48.593615 48.593615 0 0 1 15.524714 36.602983A82.798472 82.798472 0 0 1 566.588931 467.003575a496.538395 496.538395 0 0 1-79.643042 76.487612 487.324541 487.324541 0 0 0-61.34155 57.807469 181.500308 181.500308 0 0 0-32.185382 53.137434 92.390977 92.390977 0 0 0-6.184642 36.602983v12.621718h270.862074v-69.41945H488.460496zM929.841982 513.32528a93.400715 93.400715 0 0 0-32.185381-26.758042 89.614199 89.614199 0 0 0 19.816097-21.709356 90.623937 90.623937 0 0 0 15.019845-50.486873 104.507827 104.507827 0 0 0-15.398496-54.399605 107.537039 107.537039 0 0 0-44.302231-40.389498 133.790213 133.790213 0 0 0-61.720203-14.388759 122.178232 122.178232 0 0 0-81.914951 28.272649 129.877481 129.877481 0 0 0-42.282756 78.38087l-2.271909 12.621718 70.807839 12.621718 2.019475-12.621718a72.322445 72.322445 0 0 1 18.932577-42.913842 49.603353 49.603353 0 0 1 35.719463-13.379021 47.836312 47.836312 0 0 1 35.088377 12.621718 42.913842 42.913842 0 0 1 12.621718 32.437816 39.379761 39.379761 0 0 1-17.544189 36.350548 81.157648 81.157648 0 0 1-45.564402 12.621719h-5.932208l-12.621718-1.388389-8.204117 70.934056 18.175274-4.796253a119.527672 119.527672 0 0 1 28.903735-4.543818 58.69099 58.69099 0 0 1 43.418711 16.660668 57.681252 57.681252 0 0 1 16.786885 42.913842 62.351288 62.351288 0 0 1-18.932577 46.321705 60.710465 60.710465 0 0 1-45.438186 18.680143 53.011217 53.011217 0 0 1-37.865155-13.88389 88.352028 88.352028 0 0 1-22.84531-49.098483l-2.398126-11.485764-69.41945 9.213854 1.262171 12.621718a124.828793 124.828793 0 0 0 40.894367 83.681992 129.246395 129.246395 0 0 0 89.740417 32.437816 137.702946 137.702946 0 0 0 98.449402-37.865155A122.30445 122.30445 0 0 0 950.667817 580.599039a108.546777 108.546777 0 0 0-20.825835-67.273759z",fill:"#4D4D4D","p-id":19014})))},Go=(0,i.forwardRef)(Ho),qo=(r.p,["title","titleId"]);function Xo(){return Xo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xo.apply(this,arguments)}var ea,ta,ra=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,qo);return i.createElement("svg",Xo({t:1657002532432,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":60295,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,Ko||(Ko=i.createElement("path",{d:"M886.656 137.152a30.656 30.656 0 0 1 0 44.096L162.56 886.848a32.64 32.64 0 0 1-45.248 0 30.656 30.656 0 0 1 0-44.096l116.672-113.536C173.952 686.848 96 611.2 0 502.208 152.832 294.4 323.456 190.4 512 190.4c76.8 0 150.656 17.28 221.568 51.776l107.776-105.024a32.64 32.64 0 0 1 45.312 0z m-53.248 170.432c34.56 28.928 98.048 93.824 190.592 194.624-152.832 207.936-323.456 311.872-512 311.872-63.104 0-124.16-11.648-183.232-34.944l51.392-48c42.816 13.696 86.656 20.544 131.84 20.544 153.728 0 296.256-80.064 429.312-245.76-71.872-77.312-122.24-128.064-149.632-151.04l41.728-47.36z m-140.544 131.776c7.232 19.648 11.136 40.768 11.136 62.848 0 103.36-85.952 187.136-192 187.136-22.528 0-44.16-3.84-64.256-10.752l53.376-52.096c3.584 0.32 7.232 0.448 10.88 0.448 70.72 0 128-55.808 128-124.736 0-3.648-0.128-7.232-0.448-10.816l53.312-52.032zM512 252.736c-153.92 0-296.64 80.32-429.824 246.464 82.688 91.008 149.248 153.024 197.76 185.28l75.52-73.856A183.04 183.04 0 0 1 320 502.208c0-103.36 85.952-187.072 192-187.072 41.472 0 79.872 12.8 111.232 34.56l62.208-60.736A431.808 431.808 0 0 0 512 252.8z m0 124.8c-70.72 0-128 55.808-128 124.672 0 22.784 6.272 44.544 17.728 63.36l175.232-170.88A129.984 129.984 0 0 0 512 377.472z","p-id":60296})))},na=(0,i.forwardRef)(ra),oa=(r.p,["title","titleId"]);function aa(){return aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aa.apply(this,arguments)}var ia,la=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,oa);return i.createElement("svg",aa({t:1657003124814,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":75935,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,ea||(ea=i.createElement("path",{d:"M128 128v768h768V128z m704 704H192V192h640z",fill:"#333333","p-id":75936})),ta||(ta=i.createElement("path",{d:"M517.12 315.36l-45.28-45.28-100.64 100.64-60.64-60.48-45.12 45.28 105.76 105.76 145.92-145.92zM692.8 586.56l-47.36 47.52-48.48-48.48-45.28 45.28 48.48 48.32-51.36 51.52 45.12 45.28 51.52-51.52 50.4 50.56 45.28-45.28-50.4-50.56 47.36-47.36-45.28-45.28zM297.456 681.36l384-383.984 45.248 45.264-384 383.984z",fill:"#333333","p-id":75937})))},ca=(0,i.forwardRef)(la),sa=(r.p,["title","titleId"]);function pa(){return pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pa.apply(this,arguments)}var ua,da=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,sa);return i.createElement("svg",pa({t:1657003194234,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":77038,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,ia||(ia=i.createElement("path",{d:"M72 112.197l0 0 0 799.604c0 22.215 17.987 40.198 40.198 40.198l799.604 0c22.215 0 40.198-17.987 40.198-40.198l0-799.604c0-22.215-17.987-40.198-40.198-40.198l-799.604 0c-22.215 0-40.198 17.987-40.198 40.198l0 0zM292 703.716l-70.613-70.613c-7.652-7.652-20.571-7.907-28.381-0.097-7.583 7.582-7.767 20.517 0.097 28.381l70.613 70.613-70.613 70.613c-7.652 7.652-7.907 20.571-0.097 28.381 7.582 7.583 20.517 7.767 28.381-0.097l70.613-70.613 70.613 70.613c7.652 7.652 20.571 7.907 28.381 0.097 7.582-7.582 7.767-20.517-0.097-28.381l-70.613-70.613 70.613-70.613c7.652-7.652 7.907-20.571 0.097-28.381-7.582-7.582-20.517-7.767-28.381 0.097l-70.613 70.613zM272 272l-99.863 0c-10.821 0-20.137 8.954-20.137 20 0 10.722 9.016 20 20.137 20l99.863 0 0 99.863c0 10.821 8.954 20.137 20 20.137 10.723 0 20-9.016 20-20.137l0-99.863 99.863 0c10.821 0 20.137-8.954 20.137-20 0-10.722-9.016-20-20.137-20l-99.863 0 0-99.863c0-10.821-8.954-20.137-20-20.137-10.722 0-20 9.016-20 20.137l0 99.863zM32 112.197c0-44.292 35.881-80.197 80.197-80.197l799.604 0c44.292 0 80.197 35.881 80.197 80.197l0 799.604c0 44.292-35.881 80.197-80.197 80.197l-799.604 0c-44.292 0-80.197-35.881-80.197-80.197l0-799.604zM552 292c0-11.046 9.316-20 20.137-20l239.726 0c11.122 0 20.137 9.278 20.137 20 0 11.046-9.316 20-20.137 20l-239.726 0c-11.122 0-20.137-9.278-20.137-20zM552 652c0-11.046 9.316-20 20.137-20l239.726 0c11.122 0 20.137 9.278 20.137 20 0 11.046-9.316 20-20.137 20l-239.726 0c-11.122 0-20.137-9.278-20.137-20zM552 812c0-11.046 9.316-20 20.137-20l239.726 0c11.122 0 20.137 9.278 20.137 20 0 11.046-9.316 20-20.137 20l-239.726 0c-11.122 0-20.137-9.278-20.137-20z","p-id":77039})))},fa=(0,i.forwardRef)(da),ma=(r.p,["title","titleId"]);function ya(){return ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ya.apply(this,arguments)}var ba,ha=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ma);return i.createElement("svg",ya({t:1657003395165,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":1933,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,ua||(ua=i.createElement("path",{d:"M253.66 885a225.13 225.13 0 0 1-54.46-6.62c-42.24-10.55-77.49-33-99.26-63.24-23.52-32.6-35.26-68.57-34.94-106.88 0.29-32.07 9.2-66.18 26.48-101.39 27-54.93 71.62-106.41 103.51-140.8-5.23-7-10.37-13.8-15.41-20.45-39.78-52.46-74.13-97.77-78.64-172.07C97.65 219 112.53 171.17 142.85 139a122.79 122.79 0 0 1 90.31-39c36.71 0 72.9 13.74 99.3 37.7 22.1 20.06 48.44 57.1 48.44 119.69 0 101.6-47.64 150.37-102.8 206.84l-6.79 7c42.92 60.12 44.37 62.29 60.17 86.06 11 16.58 29.94 45 77.86 115.39q0.87-11.54 0.73-23.82l58.84-0.64c0.37 33.8-4 64.74-13.1 92.54 15.32 22.39 32.54 47.52 51.95 75.79l-48.52 33.3q-18.08-26.34-33.7-49.15c-24.88 34.31-59.83 59.59-101.26 73.21A227.12 227.12 0 0 1 253.66 885z m-23.5-370.21c-32.47 35.71-65 75.6-85.83 118-13.37 27.24-20.25 52.81-20.46 76-0.23 25.88 7.56 49.43 23.82 72 13.65 19 37 33.35 65.77 40.54a168.82 168.82 0 0 0 92.46-3.33c30.27-9.95 55.59-28.47 73.22-53.58a149.1 149.1 0 0 0 10.16-16.72c-69.68-102-93.76-138.21-106.82-157.84C268 568.14 266 565 230.15 514.84z m3-356c-18.74 0-34.71 6.87-47.46 20.41-18.81 20-28.29 53-26 90.69 3.43 56.51 28.63 89.76 66.79 140.08 3.2 4.22 6.44 8.49 9.72 12.85 51.7-52.93 85.84-88 85.84-165.51 0-33-9.81-58.56-29.15-76.11-15.7-14.2-37.47-22.33-59.74-22.33zM702.37 885a225.13 225.13 0 0 1-54.46-6.62c-42.24-10.55-77.49-33-99.26-63.24-23.51-32.65-35.26-68.62-34.91-106.93 0.29-32.07 9.2-66.18 26.48-101.39 27-54.93 71.62-106.41 103.51-140.8-5.23-7-10.37-13.8-15.41-20.45-39.78-52.46-74.13-97.77-78.64-172.07-3.32-54.5 11.56-102.33 41.88-134.5a122.79 122.79 0 0 1 90.31-39c36.71 0 72.9 13.74 99.3 37.7 22.1 20.06 48.44 57.1 48.44 119.69 0 101.6-47.64 150.37-102.8 206.84l-6.79 7c42.92 60.12 44.37 62.29 60.17 86.06 11 16.58 29.94 45 77.86 115.39q0.87-11.54 0.73-23.82l58.84-0.64c0.37 33.8-4 64.74-13.1 92.54 15.32 22.39 32.54 47.52 51.95 75.79L908 849.83q-18.08-26.34-33.7-49.15c-24.92 34.32-59.87 59.59-101.3 73.2A227.12 227.12 0 0 1 702.37 885z m-23.5-370.21c-32.47 35.71-65 75.6-85.83 118-13.37 27.24-20.25 52.81-20.46 76-0.23 25.88 7.56 49.43 23.82 72 13.65 19 37 33.35 65.77 40.54a168.82 168.82 0 0 0 92.46-3.33c30.27-9.95 55.59-28.47 73.22-53.58A149.13 149.13 0 0 0 838 747.7c-69.68-102-93.76-138.21-106.82-157.84-14.43-21.72-16.5-24.86-52.32-75.02z m3-356c-18.74 0-34.71 6.87-47.46 20.41-18.81 20-28.29 53-26 90.69 3.43 56.51 28.63 89.76 66.79 140.08 3.2 4.22 6.44 8.49 9.72 12.85 51.7-52.93 85.84-88 85.84-165.51 0-33-9.81-58.56-29.15-76.11-15.7-14.2-37.47-22.33-59.74-22.33z","p-id":1934})))},ga=(0,i.forwardRef)(ha),va=(r.p,["title","titleId"]);function Oa(){return Oa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oa.apply(this,arguments)}var ka=function(e,t){var r=e.title,n=e.titleId,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,va);return i.createElement("svg",Oa({t:1657003413063,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":2088,width:48,height:48,ref:t,"aria-labelledby":n},o),r?i.createElement("title",{id:n},r):null,ba||(ba=i.createElement("path",{d:"M445.12 98.16v828.85h-63.79V98.16zM636.89 98.15V927H573.1V98.15z","p-id":2089})))},xa=(0,i.forwardRef)(ka);function Ea(e){var t;switch(e.type){case"Effect":return Jn;case"Blueprint":return Kn.Z;default:return"CustomScript"===e.props.script?n[function(e){switch(e){case"鼠标控制":return"Mouse";case"键盘控制":return"Keyboard";case"延迟":return"Time";case"设置颜色":return"Color";case"定义开关":return"Boolean";case"定义数值":return"Number";case"计数器":return"Count";case"数值判断":return"Compare";case"计算数值":return"Compute";case"任一启用":return"Or";case"同时启用":return"And";case"发送消息":return"EmitEvent";case"监听消息":return"EventListener";case"播放控制":return"Play";case"显示或隐藏":case"显示与隐藏":return"Visible"}}(e.props.name)||"CustomScript"]:null!=(t=n[e.props.script])?t:eo}}r.p},40985:function(e,t,r){"use strict";r.d(t,{GM:function(){return N.G},uj:function(){return Zt},T6:function(){return P},kj:function(){return ee},xG:function(){return re},qU:function(){return _},r3:function(){return N.r},gE:function(){return Ae},rz:function(){return St},PM:function(){return At},lm:function(){return F},Zk:function(){return U},w2:function(){return x.w2},$I:function(){return He},qC:function(){return jt},Nf:function(){return wt},$U:function(){return Et},td:function(){return L},I_:function(){return x.I_},Xm:function(){return b},m7:function(){return x.m7},HA:function(){return x.HA},vk:function(){return ft},Ng:function(){return ht},qZ:function(){return bt},se:function(){return Ot},AR:function(){return mt},n$:function(){return Nt},dU:function(){return D},v$:function(){return ut},_V:function(){return dt},HE:function(){return gt},zh:function(){return pt},_N:function(){return yt},sH:function(){return Rt},Qw:function(){return Vt},bN:function(){return kt},Ko:function(){return z},o$:function(){return Bt},Ry:function(){return Ct},Pe:function(){return x.Pe},a$:function(){return y},GV:function(){return x.GV},uz:function(){return x.uz},xh:function(){return x.xh},W6:function(){return _t},eE:function(){return Ge},cG:function(){return v},Fo:function(){return Dt},KC:function(){return Mt},$k:function(){return Xe.$},s_:function(){return h},QH:function(){return It},nE:function(){return n},JY:function(){return Je},Ak:function(){return Y},xv:function(){return Xe.x},zO:function(){return qe},G:function(){return be},Lu:function(){return R},q7:function(){return st},Xj:function(){return x.Xj},gz:function(){return xt},hX:function(){return Qe},QR:function(){return vt},oY:function(){return x.oY}});const n=e=>{let t,r=[];return(...n)=>((r.length!==n.length||n.some(((e,t)=>e!==r[t])))&&(t=e(...n),r=n),t)};var o=r(7910),a=r(73760),i=Object.defineProperty,l=Object.defineProperties,c=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&d(e,r,t[r]);if(s)for(var r of s(t))u.call(t,r)&&d(e,r,t[r]);return e},m=(e,t)=>l(e,c(t));const y=(e,t,r="value")=>{var n;switch(e.callee){case"Riko.useObject":case"object":return m(f({},e),{value:Object.fromEntries(Object.entries(null!=(n=e.value)?n:e.default).map((([e,n])=>[e,y(n,null==t?void 0:t[e],r)])))});default:return m(f({},e),{[r]:t})}},b=e=>{var t,r;switch(e.callee){case"Riko.useObject":case"object":return(0,a.mapValues)(null!=(t=e.value)?t:e.default,(e=>b(e)));default:return null!=(r=e.value)?r:e.default}},h=(e,t)=>{var r;switch(e.callee){case"Riko.useResNode":const n=t(e.value);return n===e.value?e:m(f({},e),{value:n});case"Riko.useObject":case"object":return m(f({},e),{value:(0,a.mapValues)(null!=(r=e.value)?r:e.default,(e=>h(e,t)))});case"Riko.useArray":return m(f({},e),{value:e.value.map((r=>b(h(y(e.defaultItem,r),t))))});default:return e}},g=["Riko.useSymbol","Riko.useString","Riko.useNumber","Riko.useBoolean","Riko.useColor","Riko.useSelect","Riko.useMode","Riko.useResNode","Riko.useRes","Riko.useNode","Riko.useSlider","Riko.useObject","Riko.useArray","Riko.useEase","Riko.useEvent","Riko.useEffect","Riko.useVector","Riko.useMaterial","Riko.useInput","Riko.useInputs","Riko.useOutput","Riko.useOutputs","boolean","object","string","number"];function v(e){return g.includes(e.callee)}var O=r(23247),k=r.n(O),x=r(43559),E=r(81749),w=r(74860),P=r(47709),j=Object.defineProperty,S=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,M=(e,t)=>{for(var r in t||(t={}))C.call(t,r)&&A(e,r,t[r]);if(S)for(var r of S(t))I.call(t,r)&&A(e,r,t[r]);return e};const _=e=>{if(4===e.settings.typeOfPlay)return e;const t=M(M({},e),R(e,D(e.scenes))),r=e.scenes.find((({editor:e})=>e.loading));return r&&t.scenes.push(r),t},D=e=>e.find((({type:e,editor:{loading:t}})=>!t&&"Scene"===e))||e[0],R=(e,t,r)=>{function*n(t){for(const{callee:r,type:a,default:l,value:c=l,defaultItem:s}of t)"Riko.useRes"===r&&"Component"===a&&"number"==typeof c?yield*i(yt(e,c)):"Riko.useArray"===r?yield*n(c.map((e=>y(s,e)))):"Riko.useObject"===r||"object"===r?yield*n(Object.values(c)):"Riko.useEvent"===r&&(yield*o(c))}function*o(t=[]){for(const{props:a}of t){const{script:t,url:l,sceneId:c,scripts:s=[],elseScripts:p=[]}=a;if("CloneComponent"===t&&"number"==typeof l&&(yield*i(yt(e,l))),"CustomScript"===t&&("number"==typeof l&&(yield Ot(e,l)),yield*n(Object.entries(a).filter((([e,t])=>t&&e.startsWith("$"))).map((e=>e[1])))),"ChangeScene"===t&&"number"==typeof c&&(!r||r.includes(c)))try{yield*i(yt(e,c))}catch(e){}yield*o(s),yield*o(p)}}function*i(t){if(!l.has(t.orderId)){l.add(t.orderId),yield t;for(const{type:r,url:a,scripts:l,jumpSceneId:c,compProps:s=[]}of Object.values(t.props)){if(c)try{yield*i(yt(e,c))}catch(e){}if(_t(r)){"number"==typeof a&&(yield*i(yt(e,a)));for(const{props:e}of s)yield*n(e.filter((({key:e,value:t})=>t&&e.startsWith("$"))).map((({value:e})=>e)))}"Script"!==r&&"Blueprint"!==r||(yield*o(l))}}}const l=new Set,c=(0,a.uniqBy)(Array.from(i(t)),"orderId");return{scenes:c.filter((({type:e})=>"CustomScript"!==e)),customScripts:c.filter((({type:e})=>"CustomScript"===e))}};var N=r(21703);const V={ideTabs:{name:"ideTabs",keyPath:"id",fields:[]}};let B=null;function Z(){return window.indexedDB||window.alert("Your browser doesn't support a stable version of IndexedDB."),new Promise(((e,t)=>{const r=indexedDB.open("MAGIC_PLAY_STORAGE",2);r.onerror=function(){t("Open IndexedDB Error!")},r.onsuccess=function(){B=r.result,e(B)},r.onupgradeneeded=function(){B=r.result;for(const e in V)if(!B.objectStoreNames.contains(e)){const t=B.createObjectStore(e,{keyPath:V[e].keyPath});for(const r of V[e].fields)t.createIndex(r,r,{unique:r===V[e].keyPath})}r.transaction&&(r.transaction.oncomplete=function(){e(B)})}}))}var T=function(e,t){return Promise.resolve().then((()=>B||Z())).then((()=>new Promise(((r,n)=>{const o=B.transaction([e]).objectStore(e).get(t);o.onerror=function(){n("IndexDB: getData Error")},o.onsuccess=function(){r(o.result)}}))))};function z(e){return T("ideTabs",e).then((e=>e))}const L=(e,t="BKMG")=>e<1024||t.length<2?`${Math.round(e)}${t.slice(0,1)}`:L(e/1024,t.slice(1)),U=(e,t=document.title.replace(/\./g,"_"))=>{const r=document.createElement("a");r.download=t,r.href=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)},F=(e,t)=>{const r=document.createElement("a");r.download=t,r.href=URL.createObjectURL(e),document.body.appendChild(r),r.click(),document.body.removeChild(r)},Y=e=>{throw new Error(`Oops, not supposed to throw: ${e}`)};var $=Object.defineProperty,Q=Object.defineProperties,W=Object.getOwnPropertyDescriptors,J=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,G=(e,t,r)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,q=(e,t)=>{for(var r in t||(t={}))K.call(t,r)&&G(e,r,t[r]);if(J)for(var r of J(t))H.call(t,r)&&G(e,r,t[r]);return e},X=(e,t)=>Q(e,W(t));const ee=(e,t=750,r=1334)=>{var n,o,a;const{width:i=0,height:l=0}=null!=(n=e.props)?n:{};if((null==(a=null==(o=e.scripts)?void 0:o[0])?void 0:a.props).loop=!0,e.props=X(q({},e.props),{fillType:3,center:!0,bottom:!0,top:!0}),l*t/i<=r){const n=l*t/i;e.props=X(q({},e.props),{width:t,x:0,height:n,y:(r-n)/2})}else{const n=i*r/l;e.props=X(q({},e.props),{height:r,y:0,width:n,x:(t-n)/2})}return e},te=e=>{if(e&&!0!==e||0===e){if(Array.isArray(e))return e.map(te).reduce(((e,t)=>e.concat(t)),[]);switch(typeof e){case"string":case"number":return[String(e)];case"object":return(e=>{const t=[];for(const[r,n]of Object.entries(e))(n||0===n)&&(t.push(r),te(n).forEach((e=>{t.push(`${r}-${e}`)})));return t})(e);default:return[]}}return[]},re=e=>te(e).join(" ");var ne=r(99045),oe=r(3207),ae=r(77769),ie=Object.defineProperty,le=Object.defineProperties,ce=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable,de=(e,t,r)=>t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fe=(e,t)=>{for(var r in t||(t={}))pe.call(t,r)&&de(e,r,t[r]);if(se)for(var r of se(t))ue.call(t,r)&&de(e,r,t[r]);return e},me=(e,t)=>le(e,ce(t));const ye=(e,t=!0)=>e?(0,oe.collectIndices)(e,[t?"required":"recommended"]):[],be=e=>{const t=(0,x.GV)(e),{nodes:r}=t,n=((e,t)=>{var r={};for(var n in e)pe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&se)for(var n of se(e))t.indexOf(n)<0&&ue.call(e,n)&&(r[n]=e[n]);return r})(t,["nodes"]);return me(fe({},e),{props:me(fe({},e.props),{[e.id]:me(fe({},e.props[e.id]),{compProps:Array.from(he((r||[]).concat(n),"Scene"===e.type)).filter((({props:e,type:t})=>e.length||_t(t)))})})})};function*he(e=[],t){for(const{id:r,type:n,editor:o={},props:i,scripts:l,nodes:c}of e){const{enabled:e=t,openKeys:s=ye(ae[n]({type:n,id:0},{propsMode:"Project",isRoot:!1,rootType:"Scene"}),!1)}=o;e&&(yield{ids:[r],type:n,name:(null==i?void 0:i.name)||n,props:(0,a.uniq)(ye(ae[n]({type:n,id:0},{propsMode:"Project",isRoot:!1,rootType:"Scene"})).concat(s)).map((e=>({key:e,default:null==i?void 0:i[e]})))}),yield*ge(null==i?void 0:i.name,l,t),_t(n)&&(yield*ve(r,null==i?void 0:i.compProps,t,e)),yield*he(c,t)}}function*ge(e="",t=[],r){var n,o,i,l,c,s;for(const{id:p,props:u,type:d,editor:f={}}of t){if("Conditions"===u.script){yield*ge(e,u.scripts,r),yield*ge(e,u.elseScripts,r);continue}const{enabled:t="Blueprint"===d||r,openKeys:m}=f;if(t){const r=`${e}${u.name}`,f=`${d}_${u.script}`;"Blueprint"!==d&&(yield{ids:[p],type:f,name:"CustomScript"===u.script&&((null==(n=null==u?void 0:u._editor)?void 0:n.name)||(null==(o=null==u?void 0:u._editor)?void 0:o.bpName)||(null==u?void 0:u._resName))?((null==(i=null==u?void 0:u._editor)?void 0:i.name)||(null==(l=null==u?void 0:u._editor)?void 0:l.bpName)||(null==u?void 0:u._resName)).replace(/\.(ts|js)$/g,""):r,props:(0,a.uniq)(ye(null==(c=ne.FP["Script"===d?u.script:"Effect"])?void 0:c.content).concat(null!=m?m:ye(null==(s=ne.FP["Script"===d?u.script:"Effect"])?void 0:s.content,!1))).filter((e=>!e.startsWith("$")||u[e])).map((e=>{const t=null==u?void 0:u[e],r=e.startsWith("$")&&t?h(t,(e=>me(fe({},e),{id:(0,Xe.x)()}))):t;return{key:e,default:r,value:r}}))}),yield*ge(r,u.scripts,t)}}}function*ve(e,t=[],r,n){for(const{enabled:o=r,ids:a,type:i,name:l,props:c}of t)(i.startsWith("Script_")?n:o)&&(yield{ids:[e,...a],type:i,name:l,props:c.filter((({enabled:e=r,key:t})=>e&&!t.startsWith("_"))).map((({value:e,default:t,key:r})=>({key:r,default:null!=e?e:t})))})}var Oe=Object.defineProperty,ke=Object.defineProperties,xe=Object.getOwnPropertyDescriptors,Ee=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable,je=(e,t,r)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Se=(e,t)=>{for(var r in t||(t={}))we.call(t,r)&&je(e,r,t[r]);if(Ee)for(var r of Ee(t))Pe.call(t,r)&&je(e,r,t[r]);return e},Ce=(e,t)=>ke(e,xe(t)),Ie=(e,t)=>{var r={};for(var n in e)we.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ee)for(var n of Ee(e))t.indexOf(n)<0&&Pe.call(e,n)&&(r[n]=e[n]);return r};const Ae=e=>{const t=e.props[e.id],{compProps:r}=t,n=Ie(t,["compProps"]);if(!r||!r.length)return Ce(Se({},e),{props:Ce(Se({},e.props),{[e.id]:n})});const o=(0,x.GV)(e);return(0,x.m7)(Ce(Se({},o),{nodes:Array.from(Me(o.nodes,r.filter((({enabled:e=!0})=>e)),"Scene"===e.type))}))};function*Me(e=[],t,r){for(const n of e)yield Ce(Se({},n),{editor:Re(n.editor,t.filter((({ids:e})=>(0,a.isEqual)(e,[n.id]))),r),props:_e(n,t),scripts:Array.from(De(n.scripts,t,r)),nodes:Array.from(Me(n.nodes,t,r))})}function _e(e,t){var r;const n=null!=(r=e.props)?r:{},{compProps:o=[]}=n,i=Ie(n,["compProps"]);return"Animation"!==e.type?i:Ce(Se({},i),{compProps:o.map((e=>{const r=t.filter((({ids:t})=>(0,a.isEqual)(t,e.ids)));if(r.length){const t=(0,a.uniq)(r.map((({props:e})=>e.map((({key:e})=>e)))).flat());return Ce(Se({},e),{enabled:!0,props:e.props.map((e=>Ce(Se({},e),{enabled:t.includes(e.key)})))})}return Ce(Se({},e),{enabled:!1})}))})}function*De(e=[],t,r){for(const n of e){let{editor:e}=n;"Conditions"!==n.props.script&&(e=Re(n.editor,t.filter((({ids:e})=>(0,a.isEqual)(e,[n.id]))),r)),yield Ce(Se({},n),{editor:e,props:Ce(Se({},n.props),{scripts:Array.from(De(n.props.scripts,t,r))})})}}const Re=(e,t,r)=>{if(t.length){const n=(0,a.uniq)(t.map((({props:e})=>e.map((({key:e})=>e)))).flat());return Se({openKeys:n,enabled:!r||void 0},e)}return r?Ce(Se({},e),{enabled:!1}):e};var Ne=r(19104),Ve=r(44372),Be=Object.defineProperty,Ze=Object.defineProperties,Te=Object.getOwnPropertyDescriptors,ze=Object.getOwnPropertySymbols,Le=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable,Fe=(e,t,r)=>t in e?Be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ye=(e,t)=>{for(var r in t||(t={}))Le.call(t,r)&&Fe(e,r,t[r]);if(ze)for(var r of ze(t))Ue.call(t,r)&&Fe(e,r,t[r]);return e},$e=(e,t)=>Ze(e,Te(t));const Qe=(e,t)=>{var r,n;const{id:o,props:a}=be(t),i=null==(r=(0,x.GV)(t).scripts)?void 0:r.find((e=>"Blueprint"===e.type));return We(e,t.orderId,a[o].compProps,[{name:"默认状态",id:-1,duration:t.props[t.id].duration},...null!=(n=t.editor.state)?n:[]],i&&[$e(Ye({},i),{props:$e(Ye({},i.props),{scripts:[],inputs:[]}),editor:$e(Ye({},i.editor),{nodeType:"node"})})])},We=(e,t,r=[],n,o=[])=>{const{editor:{prevState:i},scenes:l}=e;return $e(Ye({},e),{editor:$e(Ye({},e.editor),{prevState:i&&We(i,t,r,n,o)}),scenes:l.map((e=>{const i=Object.fromEntries(Object.entries(e.props).map((([e,n])=>_t(n.type)&&n.url===t?[e,$e(Ye({},n),{compProps:Je(r,n.compProps)})]:[e,n])));return $e(Ye({},e),{props:i,nodes:(0,Ne.replaceAllNodes)(e.nodes,(r=>{const{[r.id]:l}=e.props;if(!_t(l.type)||l.url!==t)return r;const c=(0,x.HA)(o.map((e=>$e(Ye({},e),{id:(0,Xe.x)()}))),i)[0];let s=r.scripts.map((t=>{var r,o;return"Controller"===t.type?$e(Ye({},t),{duration:null!=(o=null==(r=n.find((r=>r.id===(Number(e.props[t.id].stateId)||-1))))?void 0:r.duration)?o:0}):t}));return s=s.some((e=>"Blueprint"===e.type))?s.map((e=>"Blueprint"===e.type?$e(Ye({},c),{editor:Ye(Ye({},c.editor),(0,a.pick)(e.editor,"position")),id:e.id}):e)):[...s,c].filter(Boolean),$e(Ye({},r),{editor:$e(Ye({},(0,a.omit)(r.editor,"visitIndices")),{state:n}),scripts:s})}))})}))})},Je=(e=[],t=[])=>e.filter((({enabled:e=!0})=>e)).map((e=>{const r=t.find((({ids:t})=>(0,a.isEqual)(t,e.ids)));return $e(Ye({},e),{props:e.props.map((e=>{var t;const n=null==r?void 0:r.props.find((({key:t})=>t===e.key)),o=null!=(t=e.value)?t:e.default;return $e(Ye({},e),{default:o,value:(null==n?void 0:n.value)&&v(n.value)&&v(o)?(0,Ve.pL)(n.value,o):(null==n?void 0:n.value)?n.value:o})})),state:null==r?void 0:r.state})})),Ke=(e,t)=>e>t?1:e<t?-1:0,He=(e,t)=>{const[{head:r,digits:n,tail:o},{head:a,digits:i,tail:l}]=[e,t].map((e=>{const t=/\d+/.exec(e);return t?{head:e.slice(0,t.index),digits:t[0],tail:e.slice(t.index+t[0].length)}:{head:e,digits:"",tail:""}}));return n&&i?Ke(r,a)||Number(n)-Number(i)||He(o,l):Ke(e,t)},Ge=/Mac OS X/.test(window.navigator.userAgent),qe=(e,t)=>Ge?e:t;var Xe=r(40182),et=Object.defineProperty,tt=Object.defineProperties,rt=Object.getOwnPropertyDescriptors,nt=Object.getOwnPropertySymbols,ot=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable,it=(e,t,r)=>t in e?et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lt=(e,t)=>{for(var r in t||(t={}))ot.call(t,r)&&it(e,r,t[r]);if(nt)for(var r of nt(t))at.call(t,r)&&it(e,r,t[r]);return e},ct=(e,t)=>tt(e,rt(t));function st(e,t=0){if(!e)throw new Error(`Can not return from play state: ${t}`);return e.editor.playing?st(e.editor.prevState,t+1):e}function pt(e,t,r=!0){const{editor:n,scenes:a}=e,i=null!=t?t:n.selectedSceneId,l=(null==a?void 0:a.find((({id:e})=>e===i)))||a[0];if(!l)throw new Error(`Scene not exist: ${n.selectedSceneId}`);return r&&Dt(l.type)&&((0,o.cM)({release:!1})||(0,w.C)("componentRoot","1"))?ct(lt({},l),{nodes:[lt({scripts:[]},l)]}):l}function ut(e){const{editor:{stateId:t}}=e;return dt(e,t)}function dt(e,t=0){const{nodes:r,props:n,type:o}=e;if(!_t(o))return r;const a=e=>e.map((e=>{var r,o,i,l,c,s,p,u,d;return ct(lt({},e),{scripts:null!=(i=null==(o=null==(r=n[e.id].state)?void 0:r[t])?void 0:o.scripts)?i:e.scripts,enabled:null!=(s=null==(c=null==(l=n[e.id].state)?void 0:l[t])?void 0:c.enabled)?s:n[e.id].enabled,asMask:null!=(d=null==(u=null==(p=n[e.id].state)?void 0:p[t])?void 0:u.asMask)?d:n[e.id].asMask,nodes:a(e.nodes)})}));return a(r)}function ft(e,t){const{editor:r,scenes:n,customScripts:o,materials:a,cubemaps:i,panoramaDataList:l,texture2Ds:c}=e;return n.find((({orderId:e})=>e===t))||o.find((({orderId:e})=>e===t))||a.find((({orderId:e})=>e===t))||(null==i?void 0:i.find((({orderId:e})=>e===t)))||(null==c?void 0:c.find((({orderId:e})=>e===t)))||(null==l?void 0:l.find((({orderId:e})=>e===t)))||ft(r.prevState,t)}function mt({editor:e,settings:t}){var r;return e.prevState&&0===e.playing?mt(e.prevState):null!=(r=t.store)?r:{}}function yt(e,t){const{editor:r,scenes:n}=e;return n.find((({orderId:e})=>e===t))||yt(r.prevState,t)}function bt(e,t=[]){return e.cubemaps.forEach((e=>{t.map((e=>e.orderId)).includes(e.orderId)||t.push(e)})),e.editor.prevState&&bt(e.editor.prevState,t),t}function ht(e,t){var r;return null==(r=bt(e))?void 0:r.find((e=>e.orderId===t))}function gt(e){return e?e.panoramaDataList||gt(e.editor.prevState):[]}function vt(e,t){return e.panoramaDataList?ct(lt({},e),{panoramaDataList:t}):ct(lt({},e),{editor:ct(lt({},e.editor),{prevState:e.editor.prevState?vt(e.editor.prevState,t):void 0})})}function Ot({editor:e,customScripts:t},r){const n=t.find((({orderId:e})=>e===r));if(n)return n;if(e.prevState)return Ot(e.prevState,r);throw new Error(`无法根据orderId: ${r}查询到对应的组件`)}const kt=n((e=>({scriptIds:Object.values(e).reduce(((e,t)=>e.concat(t)),[]),nodeIds:Object.keys(e).map(Number)}))),xt=(e,t)=>{var r;if(!t.length)return[];const n=((null==(r=jt(e,t[0])[1])?void 0:r.nodes)||e).filter((({id:e})=>t.includes(e)));if(n.length!==t.length)throw new Error(`All ids of ${t} should be valid and with the same parent.`);return n};function Et(e,t){var r;if(e[t])return e[t];const[n]=wt(e,t);return null!=(r=null==n?void 0:n.props)?r:{}}function wt(e,t){for(const[r,n]of Object.entries(e)){const e=Pt(n.scripts,t);if(e.length)return[...e,{id:Number(r),props:n}]}throw new Error(`No such event id: ${t}`)}const Pt=(e=[],t)=>{for(const r of e){if(r.id===t)return[r];for(const e of["scripts","elseScripts"]){const n=Pt(r.props[e],t);if(n.length)return n.concat(r)}}return[]};function jt(e,t,r=!1){for(const n of e){if(r){if((n.scripts||[]).find((e=>e.id===t)))return[n]}else if(n.id===t)return[n];const e=jt(n.nodes,t,r);if(e.length)return e.push(n),e}return[]}function St({scenes:e,editor:{prevState:t}},r){const n=e=>Object.values(e).some((({callee:e,type:t,default:o,value:a=o,defaultItem:i})=>{switch(e){case"Riko.useArray":return n(lt({},a.map((e=>y(i,e)))));case"Riko.useRes":return"Component"===t&&a===r;case"Riko.useObject":case"object":return n(a);default:return!1}})),o=(e=[])=>e.some((({props:e})=>{const{url:t,script:i,scripts:l}=e;return t===r||!("CustomScript"!==i||!n((0,a.pickBy)(e,((e,t)=>e&&t.startsWith("$")))))||o(l)}));return!!e.some((e=>(({props:e})=>Object.values(e).some((({type:e,url:t,scripts:a,compProps:i=[]})=>{if(Dt(e)){if(t===r)return!0;if(i.some((({props:e})=>n(Object.fromEntries(e.filter((({key:e,value:t})=>t&&e.startsWith("$"))).map((({key:e,value:t})=>[e,t])))))))return!0}if(("Script"===e||"Blueprint"===e)&&o(a))return!0})))(e)))||!!t&&St(t,r)}function Ct({scenes:e,editor:{prevState:t}},r){const n=[];return e.forEach((e=>(({props:e})=>{Object.entries(e).forEach((([e,{materialUrls:t}])=>{(null==t?void 0:t.includes(r))&&n.push({id:Number(e),materialUrls:t})}))})(e))),t?Ct(t,r):n}function It({scenes:e,editor:{prevState:t}},r){return!!e.some((e=>(({props:e})=>Object.values(e).some((({materialUrls:e=[],skyboxMaterialUrl:t})=>e.includes(r)||t===r)))(e)))||!!t&&It(t,r)}function At(e,t){return null!==new RegExp(`"cubemapUrl":${t}`,"g").exec(JSON.stringify(e))}function Mt({scenes:e,editor:{prevState:t}},r){return!!e.some((e=>(({props:e})=>Object.values(e).some((({layer:e=0})=>`${e}`===r)))(e)))||!!t&&Mt(t,r)}function _t(e){return["Animation","Animation3D"].includes(e)}function Dt(e){return["Animation","Animation3D","Model","Particle3D"].includes(e)}const Rt=(e,t)=>{return void 0,null,r=function*(){if("number"==typeof t)return yt(e,t);const r=t.replace(/data\.json(?:\?mid=\d+)?$/,"source.json"),[n,a]=yield Promise.allSettled([k().get((0,o.GR)(t)),k().get((0,o.GR)(r))]);if("fulfilled"===n.status){const{data:o}=n.value,[i]=yield(0,E.Rr)(e.id,[(0,x.m7)(o)]);return i.orderId=0,"fulfilled"===a.status&&/\/data\.json(?:\?mid=\d+)?$/.test(t)&&(i.editor.sourceJson=r),i}return Promise.reject(n)},new Promise(((e,t)=>{var n=e=>{try{a(r.next(e))}catch(e){t(e)}},o=e=>{try{a(r.throw(e))}catch(e){t(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);a((r=r.apply(undefined,null)).next())}));var r};function Nt(e){return new Promise(((t,r)=>{let n=!1;const a=document.createElement("canvas"),i=a.getContext("2d"),l=new Image;l.crossOrigin="Anonymous",l.onload=function(){const e=l.width,o=l.height;a.width=e,a.height=o,null==i||i.clearRect(0,0,e,o),null==i||i.drawImage(l,0,0);const c=null==i?void 0:i.getImageData(0,0,e,o).data;if(c){n=!1;for(let e=3;e<c.length;e+=4)if(255!=c[e]){n=!0;break}t({width:l.width,height:l.height,isAlpha:n})}else r(null)},l.src=(0,o.GR)(e)}))}const Vt=()=>new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)}),Bt=e=>e.editor.prevState?Bt(e.editor.prevState):e;function Zt(e){const{project:t}=e(),{settings:{typeOfPlay:r,category:n}}=t;if(4===r){const e=pt(t),{editor:{selected:r},props:n}=e,{nodeIds:o}=kt(r);if(o.map((e=>n[e])).some((e=>["PVVideo","PVAlphaVideo"].includes(e.type))))return!0}if(3===r&&3===n){const e=pt(t),{editor:{selected:r},props:n}=e,{nodeIds:o}=kt(r);if(o.map((e=>n[e])).some((e=>["VRVideo"].includes(e.type))))return!0}return!1}},43559:function(e,t,r){"use strict";r.d(t,{GV:function(){return P},HA:function(){return _},I_:function(){return A},Pe:function(){return j},Xj:function(){return E},m7:function(){return I},oY:function(){return w},uz:function(){return S},w2:function(){return M},xh:function(){return C}});var n=r(7910),o=r(20072),a=r.n(o),i=r(79630),l=r.n(i),c=r(40182),s=r(1691),p=r.n(s),u=r(69996),d=r.n(u),f=Object.defineProperty,m=Object.defineProperties,y=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&v(e,r,t[r]);if(b)for(var r of b(t))g.call(t,r)&&v(e,r,t[r]);return e},k=(e,t)=>m(e,y(t)),x=(e,t)=>{var r={};for(var n in e)h.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&b)for(var n of b(e))t.indexOf(n)<0&&g.call(e,n)&&(r[n]=e[n]);return r};const E=["store","name","enabled","time","asMask","duration","loopInterval","playBySelf","loop","loopTimes","visible"];function w(e,t,r){var n;const o=e.props,{[n=e.id]:a}=o,i=x(o,[(l=n,"symbol"==typeof l?l:l+"")]);var l;return k(O({},e),{id:t,orderId:r,sceneId:t,props:k(O({},i),{[t]:a})})}function P(e,t=["store","type","compProps"]){var r,n;const o=e,{props:a,nodes:i,name:c,history:s,editor:p}=o,u=p,{selected:f}=u,m=x(u,["selected"]),y=x(o,["props","nodes","name","history","editor"]);return(null==(n=null==(r=m.capture)?void 0:r.startsWith)?void 0:n.call(r,"https://"))||delete m.capture,k(O({},y),{editor:m,props:l()(d()(a[e.id]||{},[...t,"url","state"])),state:l()(a[e.id].state),nodes:j(i,a),scripts:S(e.scripts||[],a)})}function j(e,t){return e.map((e=>{var r;return k(O({},d()(e,["name","enabled","asMask","visible"])),{props:l()(d()(t[e.id],["type","state"])),state:(null==(r=t[e.id])?void 0:r.state)&&Object.fromEntries(Object.entries(t[e.id].state).map((([e,r])=>[e,r.scripts?k(O({},r),{scripts:S(r.scripts,t)}):r]))),scripts:S(e.scripts,t),nodes:j(e.nodes,t)})}))}function S(e,t){return e.map((e=>k(O({},d()(e,["name","enabled","time","duration","loop","script","playBySelf","loopInterval","loopTimes"])),{props:l()(d()(t[e.id],["type"]))})))}function C(e){var t;const r=d()(e,["taskStack","active"]);return r.enableProps=null==(t=r.enableProps)?void 0:t.map((e=>({key:e.key,default:r[e.key]}))),r}function I(e){const{props:t,editor:r,nodes:n=[]}=e,o={[e.id]:l()(O(O(O({},p()(e,["name","store"])),t),p()(e,["type","state"])))};return k(O(O({},p()(t,["name"])),e),{editor:k(O({scale:50,moment:0},r),{selected:{}}),props:o,nodes:A(n,o,r),scripts:_(e.scripts||[],o),history:{redoStack:[],undoStack:[]}})}function A(e,t,r){const{state:o}=r||{};return e.map((e=>{var a,i,c=e,{props:s={},scripts:u=[],nodes:d=[]}=c,f=x(c,["props","scripts","nodes"]);return"isMask"in s&&(s.asMask=s.isMask,delete s.isMask),t[f.id]=l()(O(O(O({},p()(f,["name","enabled","asMask","visible"])),s),p()(f,["type","state"]))),"Button"===f.type&&"string"==typeof(null==(a=t[f.id])?void 0:a.url)&&(t[f.id].url=(0,n.Hn)(null==(i=t[f.id])?void 0:i.url)),t[f.id].state?t[f.id].state=Object.fromEntries(Object.entries(t[f.id].state).map((([e,r])=>[e,r.scripts?k(O({},r),{scripts:_(r.scripts,t)}):r]))):(null==o?void 0:o.length)&&(t[f.id].state=Object.fromEntries(o.map((({id:e})=>[e,{scripts:M(u,t)}])))),k(O(O({},f),p()(t[f.id],["name","enabled","asMask","visible"])),{scripts:_(u,t),nodes:A(d,t,r)})}))}const M=(e,t)=>{const r=e=>e&&e.map((e=>{var t=e,{id:n,props:o}=t,a=x(t,["id","props"]);return k(O({id:(0,c.x)()},a),{props:k(O({},o),{scripts:r(o.scripts),elseScripts:r(o.elseScripts)})})}));return _(r(e),t)};function _(e,t){return e.map((e=>{var r=e,{props:n={}}=r,o=x(r,["props"]);return t[o.id]=l()(O(O(O({},p()(o,["name","enabled","time","duration","script"])),n),p()(o,["type"]))),k(O(O({},o),p()(t[o.id],["name","enabled","time","duration","script","loop","playBySelf","loopInterval","loopTimes"])),{type:a()(o.type)})}))}},40182:function(e,t,r){"use strict";r.d(t,{$:function(){return n},x:function(){return o}});const n=e=>{let t=null!=e?e:Date.now();return()=>t++},o=n()},3799:function(e,t,r){"use strict";r.d(t,{HY:function(){return S},Vi:function(){return d},sg:function(){return k}});var n=r(22142),o=r(15745),a=r(62732),i=r(22142),l=Object.defineProperty,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const d=e=>{const[t,r]=(0,n.useState)(1);return i.createElement(o.Z,((e,t)=>{for(var r in t||(t={}))s.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))p.call(t,r)&&u(e,r,t[r]);return e})({maskClassName:(0,a.cx)((0,a.iv)({"&::after":{width:"calc(100% + 2px)!important",height:"calc(100% + 2px)!important"}}),1!==t&&(0,a.iv)({maxHeight:"100vh!important"}),3===t&&(0,a.iv)({borderLeftWidth:"4px !important"}),5===t&&(0,a.iv)({borderRightWidth:"8px !important"})),closable:!0,showPreviousBtn:!0,prevText:"上一步",okText:"我知道了",stepText:(e,t)=>(r(e),`${e}/${t}`),modalClassName:(0,a.iv)({backgroundColor:"#3955F6 !important",boxShadow:"none !important",color:"#fff",zIndex:1002,"& .guide-modal-close-icon svg path":{stroke:"#fff"},"& .guide-modal-footer-text":{color:"#fff"},"& .guide-modal-footer-btn":{borderRadius:"4px",color:"#3955F6"},"& .guide-modal-content":{color:"#fff"},"& .guide-modal-arrow":{backgroundColor:"#3955F6"},".guide-modal-footer-prev-btn":{color:"#fff",background:"none",boxShadow:"none",outline:"none","&:hover":{background:"none"},"&:focus":{boxShadow:"none"}}})},e))};var f=r(26840),m=Object.defineProperty,y=Object.defineProperties,b=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const k=e=>{var t,r,o=e,{title:i,children:l,placement:c}=o,s=((e,t)=>{var r={};for(var n in e)g.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&h)for(var n of h(e))t.indexOf(n)<0&&v.call(e,n)&&(r[n]=e[n]);return r})(o,["title","children","placement"]);return n.createElement(f.Z,(t=((e,t)=>{for(var r in t||(t={}))g.call(t,r)&&O(e,r,t[r]);if(h)for(var r of h(t))v.call(t,r)&&O(e,r,t[r]);return e})({},s),r={arrowPointAtCenter:!0,color:"white",title:i,placement:c,overlayInnerStyle:{color:"#333"},overlayClassName:(0,a.iv)({".ant-tooltip-inner":{padding:"8px 16px"}})},y(t,b(r))),l)};var x=r(70072),E=r(43919),w=r(27086),P=r(92187),j=r(33058);const S=({id:e,head:t,body:r,children:o,placement:i,className:l})=>{const[c,s]=(0,P.Em)(e),p=n.createElement("div",null,t&&n.createElement("div",{style:{fontSize:14,fontWeight:600,marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"}},n.createElement("div",null,n.createElement(j.Z,{component:E.Z})," ",t),n.createElement(x.Z,{type:"text",size:"small",icon:n.createElement(j.Z,{component:w.Z}),style:{color:"white"},onClick:e=>{e.stopPropagation(),s(!1)}})),r,n.createElement(x.Z,{style:{marginLeft:"auto",marginTop:16,display:"block"},type:"link",onClick:e=>{e.stopPropagation(),s(!1)}},"我知道了"));return n.createElement(f.Z,{open:c,color:"#2A55E5",title:p,placement:i,overlayStyle:{width:336,maxWidth:336},overlayClassName:(0,a.cx)("leftTop"===i&&(0,a.iv)({".ant-tooltip-inner":{transform:"translateY(-5px)"},".ant-tooltip-arrow":{top:0}}),l),arrowPointAtCenter:!0,overlayInnerStyle:{padding:16,lineHeight:"20px"}},o)}},71478:function(e,t,r){"use strict";r.d(t,{Je:function(){return f},M$:function(){return h},Vj:function(){return m},bh:function(){return y},cS:function(){return b},kO:function(){return d},sd:function(){return g}});var n=r(88460),o=Object.defineProperty,a=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));function d(e){return u(this,null,(function*(){const t=(r=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))s.call(t,r)&&p(e,r,t[r]);return e})({},e),o={isLocked:!1,createTime:Date.now()},a(r,i(o)));var r,o;try{n.db.transaction("rw",n.db.customScript,(()=>{n.db.customScript.where({projectId:e.projectId,id:e.id}).toArray().then((r=>{var o;if((null==(o=r.reverse()[0])?void 0:o.resourceContent)===t.resourceContent)return!1;r.length>50&&n.db.customScript.where({projectId:e.projectId,id:e.id}).filter((e=>!1===e.isLocked)).limit(1).delete(),n.db.customScript.add(t)}))}))}catch(e){console.log(e)}}))}function f(e){return u(this,null,(function*(){try{return n.db.transaction("rw",n.db.customScript,(()=>u(this,null,(function*(){return n.db.customScript.where({id:e}).toArray()}))))}catch(e){console.log(e)}}))}function m(e){return u(this,null,(function*(){try{return n.db.transaction("rw",n.db.customScript,(()=>u(this,null,(function*(){return n.db.customScript.where({historyId:e}).first()}))))}catch(e){console.log(e)}}))}function y(e,t){return u(this,null,(function*(){try{return n.db.transaction("rw",n.db.customScript,(()=>u(this,null,(function*(){return n.db.customScript.where({historyId:e}).modify({name:t})}))))}catch(e){console.log(e)}}))}function b(e,t){return u(this,null,(function*(){try{return n.db.transaction("rw",n.db.customScript,(()=>u(this,null,(function*(){return n.db.customScript.where({historyId:e}).modify({isLocked:t})}))))}catch(e){console.log(e)}}))}function h(e){return u(this,null,(function*(){try{return n.db.transaction("rw",n.db.customScript,(()=>u(this,null,(function*(){return n.db.customScript.where({historyId:e}).delete()}))))}catch(e){console.log(e)}}))}function g(e){return u(this,null,(function*(){try{return n.db.transaction("rw",n.db.customScript,(()=>u(this,null,(function*(){return n.db.customScript.where({id:e}).filter((e=>!1===e.isLocked)).delete()}))))}catch(e){console.log(e)}}))}},66445:function(e,t,r){"use strict";r.d(t,{I:function(){return s}});var n=r(22142),o=r(68961),a=r(32078),i=r(61754),l=r(62255);const{Option:c}=o.Z;function s({onConfirm:e,onCancel:t}){const[r,s]=(0,n.useState)(""),[p,u]=(0,n.useState)("typescript"),[d,f]=(0,n.useState)(!1);return n.createElement(a.Z,{title:"新建脚本",open:!0,width:500,okText:"创建",cancelText:"取消",confirmLoading:d,onOk:()=>{f(!0),e(r,p).catch((e=>{f(!1),i.ZP.error(e.message)}))},onCancel:t},n.createElement(l.Z.Group,{compact:!0},n.createElement(l.Z,{placeholder:"请输入脚本名称",maxLength:20,style:{width:"80%"},onPressEnter:()=>{f(!0),e(r,p).catch((e=>{f(!1),i.ZP.error(e.message)}))},onChange:e=>{const t=e.currentTarget.value;s(t)}}),n.createElement(o.Z,{defaultValue:"typescript",style:{width:"20%"},onChange:e=>u(e)},n.createElement(c,{value:"typescript"},".ts"),n.createElement(c,{value:"javascript"},".js"))))}},18725:function(e,t,r){"use strict";r.d(t,{Y:function(){return n}});const n="editor.ideUpdateTimestamp"},56808:function(e,t,r){"use strict";r.d(t,{Dr:function(){return b},dJ:function(){return h}});var n=r(7910),o=r(23247),a=r.n(o),i=r(73760),l=Object.defineProperty,c=Object.defineProperties,s=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&f(e,r,t[r]);if(p)for(var r of p(t))d.call(t,r)&&f(e,r,t[r]);return e},y=(e,t)=>c(e,s(t));const b={"x-relation-adv":new URLSearchParams(location.search).get("aadvid")||"-1"},h=((e={baseURL:"/api/",timeout:3e5,withCredentials:!0,headers:b})=>a().create(e))();h.interceptors.request.use((e=>{var t;return(null==(t=e.url)?void 0:t.startsWith("oneService"))||(e.params=y(m({},e.params),{_:Date.now()})),e}),(e=>{throw console.error(e),e})),h.interceptors.response.use((e=>{const{data:t}=e;return(t instanceof ArrayBuffer||t instanceof Blob)&&(e.data={code:200,message:"success",data:t}),e})),h.interceptors.response.use((e=>{const{data:{code:t,data:r}}=e;if(300<=t&&t<400&&r.url)throw location.href=r.url,e;return e})),h.interceptors.response.use((e=>{return void 0,null,t=function*(){const{data:t,config:r}=e;if(2006!==t.code||"user/info"===r.url)return e;if(location.hostname.indexOf("oceanengine.com")>-1)location.href=`https://e.oceanengine.com/account/page/service/login?from=${encodeURIComponent(location.href)}`,yield new Promise((e=>setTimeout(e,1e4)));else{const{data:{data:{url:e}}}=yield h.get(`/oauth2/auth_url?redirect=${window.location.pathname}`);location.href=e}throw e},new Promise(((e,r)=>{var n=e=>{try{a(t.next(e))}catch(e){r(e)}},o=e=>{try{a(t.throw(e))}catch(e){r(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);a((t=t.apply(undefined,null)).next())}));var t})),h.interceptors.response.use((e=>{const{data:t}=e;if(2008!==t.code)return e;throw e})),h.interceptors.response.use((e=>{const{data:t}=e;if(200!==(null==t?void 0:t.code))throw e;return e})),h.interceptors.response.use((e=>y(m({},e),{data:g(e.data)})),(e=>{var t;throw new Error((null==(t=e.data)?void 0:t.message)||e.message)}));const g=e=>e&&"object"==typeof e?Array.isArray(e)?e.map(g):(0,i.mapValues)(e,(e=>g(e))):(0,n.XO)(e)},62226:function(e,t,r){"use strict";r.d(t,{Jm:function(){return i},XY:function(){return c},Y4:function(){return a},Z6:function(){return l}});var n=r(56808),o=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const a=()=>o(void 0,null,(function*(){const{data:e}=yield n.dJ.get("category/all"),{data:t}=e;return t})),i=()=>o(void 0,null,(function*(){const{data:e}=yield n.dJ.get("user/category/list");return e.data})),l=e=>o(void 0,[e],(function*({id:e,name:t}){const{data:r}=yield n.dJ.post("user/category/"+(e?"update":"create"),{id:e,name:t});return r.data})),c=(e,t)=>o(void 0,null,(function*(){const{data:r}=yield n.dJ.post("user/category/delete",{id:e,empty:t});return r.data}))},98466:function(e,t,r){"use strict";r.d(t,{Dr:function(){return n.Dr},xA:function(){return k},SN:function(){return v},rB:function(){return O},Od:function(){return w},fS:function(){return j},q$:function(){return P},zi:function(){return g},G7:function(){return S},bG:function(){return d},dJ:function(){return n.dJ},D5:function(){return E},cT:function(){return x}});var n=r(56808),o=r(73760),a=Object.defineProperty,i=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(){return e=this,null,t=function*(){const{data:{data:e}}=yield n.dJ.get("user/info");return t=((e,t)=>{for(var r in t||(t={}))s.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))p.call(t,r)&&u(e,r,t[r]);return e})({},e),r={name:e.name||e.userName,avatar:e.avatarUrl||e.avatar,userId:e.staffId||e.userId},i(t,l(r));var t,r},new Promise(((r,n)=>{var o=e=>{try{i(t.next(e))}catch(e){n(e)}},a=e=>{try{i(t.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,a);i((t=t.apply(e,null)).next())}));var e,t}var f=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,b=(e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&f)for(var n of f(e))t.indexOf(n)<0&&y.call(e,n)&&(r[n]=e[n]);return r},h=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const g=(e={})=>{const t=new FormData;for(const[r,n]of Object.entries(e))(0,o.isNil)(n)||t.append(r,n);return t};function v(){return h(this,arguments,(function*(e={}){var t=e,{$config:r}=t,o=b(t,["$config"]);const a=g(o);console.log("formData:",a),console.log("config:",r);const{data:i}=yield n.dJ.post("user/resource/create",a,r);return i.data}))}function O(){return h(this,arguments,(function*(e={}){var t=e,{$config:r}=t,o=b(t,["$config"]);const a=g(o),{data:i}=yield n.dJ.post("user/resource/createOptimize",a,r);return i.data}))}function k(){return h(this,arguments,(function*(e={}){var t=e,{$config:r}=t,o=b(t,["$config"]);const a=g(o),{data:i}=yield n.dJ.post("user/resource/createMultiSequence",a,r);return i.data}))}function x(e,t){return h(this,null,(function*(){const r=new FormData;r.append("file",e);const{data:{data:o}}=yield n.dJ.post("upload/file",r,t);return o}))}function E(e,t){return h(this,null,(function*(){let r;try{r=yield w(e,t)}catch(t){return{previewUrl:e}}return x(r)}))}const w=(e,t="filename")=>h(void 0,null,(function*(){const r=/^data:(.*?\/(.*?));/.exec(e);if(!r||3!==r.length)throw new Error;const[n,o]=r.slice(1),a=yield fetch(e);return new File([yield a.blob()],`${t}.${o}`,{type:n})}));function P(e,t){return h(this,null,(function*(){const{data:{data:r}}=yield n.dJ.get(`editor/player/list?playerType=${e}`,t);return r}))}function j(){return h(this,null,(function*(){const{data:{data:e}}=yield n.dJ.get("admin/dashboard/getAeolusToken");return e.token}))}function S(){return h(this,null,(function*(){const{data:{data:e}}=yield n.dJ.get("upload/stsToken");return e}))}},61645:function(e,t,r){"use strict";r.d(t,{EZ:function(){return w},KI:function(){return C},Kr:function(){return S},LI:function(){return I},LT:function(){return h},OL:function(){return A},R7:function(){return _},YZ:function(){return b},am:function(){return P},bT:function(){return g},cI:function(){return M},hM:function(){return O},mO:function(){return E},pR:function(){return k},xP:function(){return x},xo:function(){return j},zs:function(){return v}});var n=r(56808),o=r(7910),a=(r(79385),Object.defineProperty),i=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))p.call(t,r)&&u(e,r,t[r]);return e},f=(e,t)=>i(e,l(t)),m=(e,t)=>{var r={};for(var n in e)s.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r},y=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const b=e=>y(void 0,null,(function*(){const{data:t}=yield n.dJ.get("material/list",{params:e}),{data:r}=t,a=r,{list:i=[],tagList:l=[]}=a,c=m(a,["list","tagList"]);return{materialList:i.map((e=>f(d({},e),{extra:(0,o.Mo)(e.extra)}))),tagList:l,pagination:c}})),h=e=>y(void 0,null,(function*(){const{data:t}=yield n.dJ.post("material/createUseHistory",{id:e});return t.data})),g=e=>y(void 0,null,(function*(){const{data:t}=yield n.dJ.get("material/getUseHistory",{params:e});return t.data})),v=e=>y(void 0,null,(function*(){const{data:t}=yield n.dJ.get("tag/list",{params:e});return t.data})),O=e=>y(void 0,null,(function*(){const t=e,{file:r}=t,o=m(t,["file"]),a=new FormData;a.append("file",r);for(const[e,t]of Object.entries(o))void 0!==t&&a.append(e,String(t));const{data:i}=yield n.dJ.post("material/create",a);return i})),k=(e,t)=>y(void 0,null,(function*(){const{data:r}=yield n.dJ.get("user/adv_resource/detailByResourceId",{params:{resourceId:e,type:t}});return r.data})),x=e=>y(void 0,null,(function*(){const{data:t}=yield n.dJ.get("user/resource/list",{params:e}),{data:r}=t,a=r,{list:i=[],tagList:l=[]}=a,c=m(a,["list","tagList"]);return{materialList:i.map((e=>f(d({},e),{extra:(0,o.Mo)(e.extra)}))),tagList:l,pagination:c}})),E=(e,t)=>y(void 0,null,(function*(){yield n.dJ.post("user/resource/delete",{ids:e,teamId:t})})),w=(e,t)=>y(void 0,null,(function*(){const{data:r}=yield n.dJ.post("user/resource/updateCategory",{ids:e,categoryIds:t});return r.data})),P=(e,t)=>y(void 0,null,(function*(){const{data:r}=yield n.dJ.post("user/resource/removeCategory",{ids:e,categoryIds:t});return r.data})),j=e=>y(void 0,null,(function*(){const{data:t}=yield n.dJ.post("user/resource/restore",{ids:e});return t.data})),S=e=>y(void 0,null,(function*(){const{data:t}=yield n.dJ.post("user/resource/cleanTrashed",{ids:e});return t.data})),C=e=>y(void 0,null,(function*(){const{data:t}=yield n.dJ.get("user/resource/detail",{params:{id:e}});return t.data})),I=e=>y(void 0,null,(function*(){const{data:t}=yield n.dJ.post("user/resource/rename",{renames:e});return t.data})),A=(e,t=!1)=>y(void 0,null,(function*(){const{data:r}=yield n.dJ.post("user/resource/batchCreateByUrls",{creates:e,uploadOnly:t});return r.data})),M=(e,t)=>y(void 0,null,(function*(){const{data:r}=yield n.dJ.post("faas/bundler",{entry:e,deps:t});return r.data})),_=(e,t)=>y(void 0,null,(function*(){const{data:r}=yield n.dJ.post("user/material/saveAsProject",{projectId:e,ids:t});return r.data}))},3197:function(e,t,r){"use strict";r.d(t,{$9:function(){return a},Cv:function(){return s},GG:function(){return c},aY:function(){return u},aq:function(){return f},gt:function(){return m},r4:function(){return d},to:function(){return p},ty:function(){return l},yq:function(){return i}});var n=r(56808),o=(Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())})));const a=e=>o(void 0,null,(function*(){const{data:t}=yield n.dJ.get(`project/preview?id=${e}&maxAge=86400`);return t.data})),i=e=>o(void 0,null,(function*(){const{data:t}=yield n.dJ.post("project/create",e);return t.data})),l=e=>o(void 0,null,(function*(){const{data:t}=yield n.dJ.post("project/update",e);return t.data})),c=(e,t)=>o(void 0,null,(function*(){const{data:r}=yield n.dJ.get(`project/detail?id=${e}`,t);return r.data})),s=(e,t,r)=>o(void 0,null,(function*(){const{data:o}=yield n.dJ.get(`project/transform?id=${e}&type=${t}`,r);return o.data.id})),p=(e,t)=>o(void 0,null,(function*(){if(!t.length)return[];const{data:r}=yield n.dJ.post("scene/batch_create",{projectId:e,scenes:t});return r.data})),u=e=>o(void 0,null,(function*(){const{data:t}=yield n.dJ.post("scene/create",e);return t.data})),d=e=>o(void 0,null,(function*(){const{data:t}=yield n.dJ.get(`scene/delete?id=${e}`);return t.data})),f=(e,t)=>o(void 0,null,(function*(){const{data:r}=yield n.dJ.post("scene/update",e,t);return r.data})),m=(e,t)=>o(void 0,null,(function*(){const{data:r}=yield n.dJ.get(`scene/detail?id=${e}`,t);return r.data}))},99674:function(e,t,r){"use strict";r.d(t,{$d:function(){return P},Dp:function(){return x},J2:function(){return v},Ks:function(){return k},U8:function(){return w},Xi:function(){return g},_h:function(){return O},dM:function(){return E},k4:function(){return m},mK:function(){return j},n3:function(){return h},uu:function(){return y},yr:function(){return b}});var n=r(98466),o=r(56808),a=Object.defineProperty,i=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))p.call(t,r)&&u(e,r,t[r]);return e},f=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const m=(e,t)=>f(void 0,null,(function*(){yield o.dJ.post("store/category/create",{type:e,name:t})})),y=e=>f(void 0,null,(function*(){yield o.dJ.post("store/category/delete",{id:e})})),b=(e,t)=>f(void 0,null,(function*(){yield o.dJ.post("store/category/update",d({id:e},t))})),h=e=>f(void 0,null,(function*(){const{data:t}=yield o.dJ.get(`store/category/list?type=${e}`);console.log("data: ",t);const{data:r}=t;return r})),g=e=>f(void 0,null,(function*(){yield o.dJ.post("store/material/apply",e)})),v=e=>f(void 0,null,(function*(){const{data:{data:t}}=yield o.dJ.get(`store/material/id?id=${e}`);return t})),O=e=>f(void 0,null,(function*(){const{data:{data:t}}=yield o.dJ.post("store/material/list",e);return{data:t.data.map((e=>{return t=d({},e),r={extra:e.extra?JSON.parse(e.extra):{}},i(t,l(r));var t,r})),total:t.total}})),k=(e,t)=>f(void 0,null,(function*(){var r;return(null==(r=t.type)?void 0:r.cid)&&(t.type=t.type.cid),yield o.dJ.post("store/material/update",{id:e,values:t})})),x=e=>f(void 0,null,(function*(){return yield o.dJ.post("store/material/delete",{ids:e})})),E=e=>f(void 0,null,(function*(){return yield o.dJ.post("store/material/viewCount",{id:e})})),w=e=>f(void 0,null,(function*(){return yield o.dJ.post("store/material/usedCount",{id:e})})),P=e=>f(void 0,null,(function*(){return yield o.dJ.post("faas/text2image",{text:e})})),j=(e,t)=>f(void 0,null,(function*(){const r=(0,n.zi)({image:e,text:t});return yield o.dJ.post("faas/image2image",r)}))},85349:function(e,t,r){"use strict";r.d(t,{ND:function(){return b},OC:function(){return h},Um:function(){return g}});var n=r(22142),o=r(23256),a=Object.defineProperty,i=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;let d=[],f=[],m=!1;const y=(e,t)=>{if(m)throw new Error("Do not addDebugFlag or setDebugFlags when dispatching");m=!0;try{for(const r of d)r(e,t)}finally{m=!1}},b=(e,t=!1)=>{const[r,a]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const r=f.find((({flagBit:t})=>t===e.flagBit));if(r)throw new Error(`'${r.title}' has taken the flag: 0b${r.flagBit.toString(2)}`);if(1&e.flagBit)throw new Error("You flagBit should not contain '0b1'.");var n;return f=f.concat((n=((e,t)=>{for(var r in t||(t={}))s.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))p.call(t,r)&&u(e,r,t[r]);return e})({},e),i(n,l({onChange:t?()=>location.reload():a})))),y(o.hR.getValue(),f),a((o.hR.getValue()&e.flagBit+1)===e.flagBit+1),()=>{f=f.filter((({flagBit:t})=>t!==e.flagBit))}}),[]),r},h=()=>{const[e,t]=(0,n.useState)(o.hR.getValue()),[r,a]=(0,n.useState)(f);return(0,n.useEffect)((()=>{const e=(e,r)=>{t(e),a(r)};return d=d.concat(e),()=>{d=d.filter((t=>t!==e))}}),[]),{items:r,flags:e,setFlags:(0,n.useCallback)((e=>{const t=o.hR.getValue();if(1&t){o.hR.setValue(e);for(const{flagBit:r,onChange:n}of f){const o=r&e;o!==(r&t)&&n(o===r)}y(e,f)}}),[])}},g=e=>{const t=f.find((({flagBit:t})=>t===e.flagBit));if(t)throw new Error(`'${t.title}' has taken the flag: 0b${t.flagBit.toString(2)}`);if(1&e.flagBit)throw new Error("You flagBit should not contain '0b1'.");return f=f.concat(e),y(o.hR.getValue(),f),[(o.hR.getValue()&e.flagBit+1)===e.flagBit+1,()=>{f=f.filter((({flagBit:t})=>t!==e.flagBit))}]}},23256:function(e,t,r){"use strict";var n,o;r.d(t,{DS:function(){return i},Ek:function(){return n},Yo:function(){return a},hR:function(){return l}}),(o=n||(n={})).SELECTED_SCENE_ID="editor.selected_scene_id",o.COMPONENT_WARNING="editor.component_warning",o.DEBUG_FLAGS="editor.debug_flags",o.TOOLBAR="editor.toolbar",o.BLUEPRINT="editor.blueprint";const a=(e,t,r,n=!1)=>{let o=t(localStorage.getItem(e));return{getValue(){return n?t(localStorage.getItem(e)):o},setValue(t){localStorage.setItem(e,r(o=t))}}},i=a(n.SELECTED_SCENE_ID,Number,String),l=a(n.DEBUG_FLAGS,(e=>{const t=parseInt(e||"0",2)||0;return location.search.includes("debug=true")?1|t:(1|t)-1}),(e=>e.toString(2)))},47914:function(e,t,r){"use strict";var n,o,a,i,l,c,s,p;r.d(t,{Ah:function(){return a},F6:function(){return l},O8:function(){return s},mZ:function(){return n}}),(o=n||(n={}))[o.Component2D=4]="Component2D",o[o.Image=5]="Image",o[o.Video=6]="Video",o[o.Audio=8]="Audio",o[o.Effect=99]="Effect",o[o.Particle2D=13]="Particle2D",o[o.Text=29]="Text",o[o.Component3D=32]="Component3D",o[o.Model=27]="Model",o[o.Particle=14]="Particle",o[o.Cubemap=31]="Cubemap",(i=a||(a={}))[i["2D组件"]=4]="2D组件",i[i["图片"]=5]="图片",i[i["视频"]=6]="视频",i[i["音频"]=8]="音频",i[i["特效"]=99]="特效",i[i["粒子"]=13]="粒子",i[i["文字"]=29]="文字",i[i["3D组件"]=32]="3D组件",i[i["模型"]=27]="模型",i[i["3D粒子"]=14]="3D粒子",i[i["天空盒"]=31]="天空盒",(c=l||(l={}))[c.examine=0]="examine",c[c.reject=1]="reject",c[c.shelve=2]="shelve",c[c.offShelve=3]="offShelve",c[c.deleted=4]="deleted",(p=s||(s={}))[p["审核中"]=0]="审核中",p[p["审核不通过"]=1]="审核不通过",p[p["上架"]=2]="上架",p[p["下架"]=3]="下架",p[p["删除"]=4]="删除"},51514:function(e,t,r){"use strict";r.d(t,{FJ:function(){return b},Pc:function(){return m},U6:function(){return h},ib:function(){return g},rp:function(){return y}});var n=r(98466),o=r(28324),a=Object.defineProperty,i=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))p.call(t,r)&&u(e,r,t[r]);return e},f=(e,t,r)=>new Promise(((n,o)=>{var a=e=>{try{l(r.next(e))}catch(e){o(e)}},i=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())}));const m=(0,o.ZP)((e=>{const t=r=>f(void 0,null,(function*(){try{r&&(e({loading:!0}),yield n.dJ.post("team/switch",{teamId:r}).catch((e=>{console.error(e)})));const o=yield function(){return f(this,null,(function*(){const{data:{data:e}}=yield n.dJ.get("team/userinfo");return t=d({},e),r={name:e.name||e.userName,avatar:e.avatarUrl||e.avatar,userId:e.staffId||e.userId},i(t,l(r));var t,r}))}(),a=v(o);if(a)return t(a.id);if(o.teams.every((({id:e})=>e!==o.teamId)))return t(o.teams.reverse()[0].id);e({userInfo:o,loading:!1}),O(o)}catch(t){throw e({loading:!1}),t}}));return{updateUserInfo:t,setUserInfo:t=>{e((({userInfo:e})=>({userInfo:d(d({},e),t(e))})))},userInfo:void 0,loading:!0}})),y={"<all>":"所有功能","<publish_example>":"案例功能","<direct_play>":"直出互动","<dashboard>":"数据披露","<export_project>":"导出项目","<clab_feature>":"内网测试功能","<download_zip>":"下载zip包"};function b(e="<all>"){const{userInfo:t}=m();return!!t&&g(t,e)}function h(e="<all>"){const{userInfo:t}=m.getState();return!!t&&g(t,e)}function g(e,t="<all>"){const{teams:r,teamId:n}=e,{features:o}=r.find((({id:e})=>e===n));return o.includes("<all>")||o.includes(t)||"<direct_play>"===t&&e.hasDirectPlayable||!1}const v=({teams:e,teamId:t})=>{const r=new URLSearchParams(location.search).get("aadvid");if(r&&Number(r)>0)return e.find((({id:e,advId:n})=>e!==t&&n===r))},O=({userId:e,teamId:t,teams:r})=>{var n;window.collectEvent("init",{app_id:7887,channel:"cn",log:!1,autotrack:!1}),window.collectEvent("config",{user_unique_id:e,evtParams:{teamType:null==(n=r.find((({id:e})=>e===t)))?void 0:n.type,teamId:t}}),window.collectEvent("start")}},7910:function(e,t,r){"use strict";r.d(t,{GR:function(){return x},cM:function(){return h},zp:function(){return y},yQ:function(){return o},Sw:function(){return v},zC:function(){return O},O5:function(){return n},OB:function(){return g},Mo:function(){return p},Qu:function(){return u},Hn:function(){return E},XO:function(){return k},g_:function(){return c},F3:function(){return l}});const n=(e,t)=>{e.newTab?window.open(o(e,t)):location.href=o(e,t)},o=(e,t)=>{const r=new URL(location.href);return r.pathname=`/play/${e.mode}/${e.id}`,e.readOnly&&r.searchParams.set("readonly","1"),t&&Object.entries(t).forEach((([e,t])=>{r.searchParams.set(e,t)})),r.href};var a=r(22142),i=r(80926);const l=(...e)=>a.createElement(a.Fragment,null,e.map(((e,t)=>(e=>"string"==typeof(null==e?void 0:e.text))(e)?a.createElement(i.Z.Text,{key:t,strong:!0},e.text):e))),c=(...e)=>{throw new s(e)};class s extends Error{constructor(e){super(),this.message=l(...e)}}const p=(e,t)=>{try{return JSON.parse(e)}catch(r){return null!=t?t:e}},u=e=>{if(a.isValidElement(e))return u(e.props.children);if(Array.isArray(e))return e.map(u).join("");switch(typeof e){case"number":return String(e);case"string":return e;default:return""}};var d=r(61754),f=r(79558),m=r.n(f);const y=(e,t)=>{const r=()=>{var e;(null==t?void 0:t.tip)&&d.ZP.success("复制成功"),null==(e=null==t?void 0:t.onCopySuccess)||e.call(t)};e?navigator.clipboard.writeText(e).then(r,(()=>{m()(e)?r():d.ZP.error("复制失败，请稍后重试")})):d.ZP.warning("您复制的是空内容，请检查！")};var b=r(51514);const h=({release:e,online:t})=>{let r=!0;if(void 0!==e&&r&&(r=e!==(0,b.U6)()),void 0!==t){const e="online";r&&(r=t===("offline"!==e))}return r},g=e=>{const t=Object.prototype.toString.call(e);return"[object String]"===t||"[object Number]"===t||"[object Boolean]"===t||"[object Undefined]"===t||"[object Null]"===t},v=e=>{switch(Object.prototype.toString.call(e)){case"[object Array]":return"数组";case"[object Object]":return"对象";case"[object Boolean]":return"布尔值";case"[object String]":return"字符串";case"[object Number]":return"数字";case"[object Null]":return"无效值";case"[object Symbol]":return"唯一值";default:return"undefined"}};function O(){return h({online:!0})?"https://creativelab-proxy.bytedance.com/api/upload/bucket/":["https://creativelab-proxy","bytedance","net/api/upload/bucket/"].join(".")}const k=e=>{if("string"!=typeof e||e.includes(" "))return e;if(e.includes("bucketExpire"))return e;for(const t of["/files/","/material/"])if(e.startsWith("http")&&e.includes(t))return`${O()}${e.slice(e.indexOf(t)+1)}`;for(const t of["files/","material/"])if(e.startsWith(t))return`${O()}${e}`;return e},x=(e,t)=>e.startsWith("/")||e.startsWith("data:")||/^https?:\/\//.test(e)?e:`${null!=t?t:O()}${e}`,E=e=>{const t=/\/material\/|\/files\//.exec(e);return t?e.slice(t.index+1):e}},8702:function(e,t,r){"use strict";r.d(t,{Fo:function(){return i},N7:function(){return u},Nm:function(){return m},PC:function(){return y},Yj:function(){return n},dI:function(){return a},rI:function(){return s},zI:function(){return b}});const n=e=>{switch(e){case 4:return"2D 组件";case 5:return"图片";case 6:return"视频";case 8:return"音频";case 99:return"特效";case 13:return"2D 粒子";case 12:return"Lottie";case 23:return"龙骨";case 18:return"序列帧";case 24:return"spine";case 30:return"Live2D";case 29:return"文字";case 7:return"图形";case 32:return"3D 组件";case 27:return"模型";case 14:return"3D 粒子";case 31:return"天空盒"}return"未知"},o=[4,32,27,14,31],a=e=>!o.includes(e),i=e=>o.includes(e),l=[32,27,14,31],c=["Animation3D","Model","Particle3D","Skybox6SidedMaterial"],s=({id:e=0,mime:t="Null"})=>l.includes(e)||c.includes(t),p=[...c,"MeshSprite3D","Light"],u=(e="Null")=>p.includes(e),d=[13,12,23,18,24,30],f=["Particle","Lottie","DragonBones","FrameAnime","spine","Live2D"],m=({id:e=0,mime:t="Null"})=>d.includes(e)||f.includes(t),y=e=>{switch(e){case 4:return"Animation";case 5:return"Sprite";case 6:return"Video";case 8:return"Sound";case 99:return"Effect";case 13:return"Particle";case 12:return"Lottie";case 23:return"DragonBones";case 18:return"FrameAnime";case 24:return"spine";case 30:return"Live2D";case 29:return"Text";case 7:return"Shape";case 32:return"Animation3D";case 27:return"Model";case 14:return"Particle3D";case 31:return"Skybox6SidedMaterial"}return"未知"},b=e=>("FrameAnime"===e&&(e="frame"),"Sprite"===e&&(e="image"),"Animation"===e&&(e="component"),"PSD"===e&&(e="psd"),e.replace(/^\w/,(e=>e.toLowerCase())))},94748:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII="},8738:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC"},4768:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAL0lEQVQoz2NgCD3x//9/BhBYBWdhgFVAiVW4JBFKGIa4AqD0//9D3pt4I4tAdAMAHTQ/j5Zom30AAAAASUVORK5CYII="},35555:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAAz0lEQVRIx2NgYGBY/R8I/vx5eelX3n82IJ9FxGf6tksvf/8FiTMQAcAGQMDvSwu09abffY8QYSAScNk45G198eX//yev73/4///701eh//kZSARckrNBRvz//+8+6ZohwCzjGNjdgQxkAg7B9WADeBjIBqtJCbhRA0YNoIkBSNmaPEMoNmA0FkYNoFKhapJ6FGyAH3nauaSmPfwI0v/3OukVi0CIZ+F25KrtYcx/CTIy0e+rC7R1Z4KMICVTQQ14feVXIbR695u14+Ir4gwAAD49E54wc1kWAAAAAElFTkSuQmCC"},26451:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00OC4wMzY0IDQuMDEwNDJINC4wMDc3OUw0LjAwNzc5IDMyLjAyODZINDguMDM2NFY0LjAxMDQyWk00LjAwNzc5IDAuMDA3ODEyNUMxLjc5NzIxIDAuMDA3ODEyNSAwLjAwNTE4Nzk5IDEuNzk5ODQgMC4wMDUxODc5OSA0LjAxMDQyVjMyLjAyODZDMC4wMDUxODc5OSAzNC4yMzkyIDEuNzk3MjEgMzYuMDMxMiA0LjAwNzc5IDM2LjAzMTJINDguMDM2NEM1MC4yNDcgMzYuMDMxMiA1Mi4wMzkgMzQuMjM5MiA1Mi4wMzkgMzIuMDI4NlY0LjAxMDQyQzUyLjAzOSAxLjc5OTg0IDUwLjI0NyAwLjAwNzgxMjUgNDguMDM2NCAwLjAwNzgxMjVINC4wMDc3OVpNOC4wMTA0MiA4LjAxMzAySDEyLjAxM1YxMi4wMTU2SDguMDEwNDJWOC4wMTMwMlpNMjAuMDE4MiA4LjAxMzAySDE2LjAxNTZWMTIuMDE1NkgyMC4wMTgyVjguMDEzMDJaTTI0LjAyMDggOC4wMTMwMkgyOC4wMjM0VjEyLjAxNTZIMjQuMDIwOFY4LjAxMzAyWk0zNi4wMjg2IDguMDEzMDJIMzIuMDI2VjEyLjAxNTZIMzYuMDI4NlY4LjAxMzAyWk00MC4wMzEyIDguMDEzMDJINDQuMDMzOVYxMi4wMTU2SDQwLjAzMTJWOC4wMTMwMlpNMTYuMDE1NiAxNi4wMTgySDguMDEwNDJWMjAuMDIwOEgxNi4wMTU2VjE2LjAxODJaTTIwLjAxODIgMTYuMDE4MkgyNC4wMjA4VjIwLjAyMDhIMjAuMDE4MlYxNi4wMTgyWk0zMi4wMjYgMTYuMDE4MkgyOC4wMjM0VjIwLjAyMDhIMzIuMDI2VjE2LjAxODJaTTQ0LjAzMzkgMTYuMDE4MlYyMC4wMjA4SDM2LjAyODZWMTYuMDE4Mkg0NC4wMzM5Wk0xMi4wMTMgMjQuMDIzNEg4LjAxMDQyVjI4LjAyNkgxMi4wMTNWMjQuMDIzNFpNMTYuMDE1NiAyNC4wMjM0SDM2LjAyODZWMjguMDI2SDE2LjAxNTZWMjQuMDIzNFpNNDQuMDMzOSAyNC4wMjM0SDQwLjAzMTJWMjguMDI2SDQ0LjAzMzlWMjQuMDIzNFoiIGZpbGw9IiM0MjQyNDIiLz4NCjwvZz4NCjxkZWZzPg0KPGNsaXBQYXRoIGlkPSJjbGlwMCI+DQo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+DQo8L2NsaXBQYXRoPg0KPC9kZWZzPg0KPC9zdmc+DQo="},21568:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00OC4wMzY0IDQuMDEwNDJINC4wMDc3OUw0LjAwNzc5IDMyLjAyODZINDguMDM2NFY0LjAxMDQyWk00LjAwNzc5IDAuMDA3ODEyNUMxLjc5NzIxIDAuMDA3ODEyNSAwLjAwNTE4Nzk5IDEuNzk5ODQgMC4wMDUxODc5OSA0LjAxMDQyVjMyLjAyODZDMC4wMDUxODc5OSAzNC4yMzkyIDEuNzk3MjEgMzYuMDMxMiA0LjAwNzc5IDM2LjAzMTJINDguMDM2NEM1MC4yNDcgMzYuMDMxMiA1Mi4wMzkgMzQuMjM5MiA1Mi4wMzkgMzIuMDI4NlY0LjAxMDQyQzUyLjAzOSAxLjc5OTg0IDUwLjI0NyAwLjAwNzgxMjUgNDguMDM2NCAwLjAwNzgxMjVINC4wMDc3OVpNOC4wMTA0MiA4LjAxMzAySDEyLjAxM1YxMi4wMTU2SDguMDEwNDJWOC4wMTMwMlpNMjAuMDE4MiA4LjAxMzAySDE2LjAxNTZWMTIuMDE1NkgyMC4wMTgyVjguMDEzMDJaTTI0LjAyMDggOC4wMTMwMkgyOC4wMjM0VjEyLjAxNTZIMjQuMDIwOFY4LjAxMzAyWk0zNi4wMjg2IDguMDEzMDJIMzIuMDI2VjEyLjAxNTZIMzYuMDI4NlY4LjAxMzAyWk00MC4wMzEyIDguMDEzMDJINDQuMDMzOVYxMi4wMTU2SDQwLjAzMTJWOC4wMTMwMlpNMTYuMDE1NiAxNi4wMTgySDguMDEwNDJWMjAuMDIwOEgxNi4wMTU2VjE2LjAxODJaTTIwLjAxODIgMTYuMDE4MkgyNC4wMjA4VjIwLjAyMDhIMjAuMDE4MlYxNi4wMTgyWk0zMi4wMjYgMTYuMDE4MkgyOC4wMjM0VjIwLjAyMDhIMzIuMDI2VjE2LjAxODJaTTQ0LjAzMzkgMTYuMDE4MlYyMC4wMjA4SDM2LjAyODZWMTYuMDE4Mkg0NC4wMzM5Wk0xMi4wMTMgMjQuMDIzNEg4LjAxMDQyVjI4LjAyNkgxMi4wMTNWMjQuMDIzNFpNMTYuMDE1NiAyNC4wMjM0SDM2LjAyODZWMjguMDI2SDE2LjAxNTZWMjQuMDIzNFpNNDQuMDMzOSAyNC4wMjM0SDQwLjAzMTJWMjguMDI2SDQ0LjAzMzlWMjQuMDIzNFoiIGZpbGw9IiNDNUM1QzUiLz4NCjwvZz4NCjxkZWZzPg0KPGNsaXBQYXRoIGlkPSJjbGlwMCI+DQo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+DQo8L2NsaXBQYXRoPg0KPC9kZWZzPg0KPC9zdmc+DQo="},55658:function(e){"use strict";e.exports="data:image/gif;base64,R0lGODlhKAAYAPfZAP/r6f/s6f/39P5gAP5eAP5qAP5iAP5ZAP5nAP/n3f8aAP5lAP5QAP5bAP66nP5kAP5cAP/Dqv6QWP5DAP5WAP5HAP5TAP8dAP5rAP8tAP5VAP8zAP8XAP8fAP5AAP5OAP5BAP5jAP5RAP5NAP4+AP49AP8nAP8cAP8iAP8kAP8qAP45AP5oAP5pAP8VAP8wAP8SAP5EAP6mff8UAP5mAP5YAP5KAP5UAP5XAP43AP5GAP46AP5LAP5JAP42AP5dAP5hAP5aAP5SAP8hAP8jAP8pAP8QAP8PAP8RAP8NAP8GAP8KAP8gAP8CAP8IAP8MAP/MuP8OAP+Af/+8uP47AP/m3f5MAP8lAP8oAP8ZAP/Vxf6AQv48AP8sAP8vAP4/AP5fAP8TAP+9uP8xAP8EAP8mAP6snP56Gf8LAP/19P80AP8YAP65nP/Uxf5IAP6xnP/b0f/t6f/KuP8WAP+7uP6wjf8yAP8rAP5PAP8DAP6tnP8uAP6pnP6unP+mnP8JAP/W0f6wnP6rnP/Utf/Vtv6ba//Etv44AP56GP8eAP6Na/57G/63nP6BQv81AP6vnP6FQv9DGf6onP6DQv5JGf8HAP5FAP64nP6qnP6hjf/Txf/a0f6vjf61nP/k3f6NWP6mjf6GWP53Jv9UQv6cjf6bjf6ljf/Cqv6La//Rxf+xqv9AJv60nP6gjf5/a/9TQv6nnP6OWP5/Qv6Ya/6fff+knP6jff6Ja//Jxf/c0f6znP/LuP/Kxf6ynP++uP6Pa//l3f6ojf9WQv6Oa/+yqv6PWP/Sxf55Jv9XQv6ejf6djf6lff6IWP62nP41AP6jjf6aa/6Ba/9EJv5CAP6njf6ijf6hff5sAP///////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDYuMC1jMDAyIDc5LjE2NDM1MiwgMjAyMC8wMS8zMC0xNTo1MDozOCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozZmRjMjc2ZC0wNjBhLTQ2MTQtOTZhNy02ZGUyZjllYzU3MjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0QyQkE3NzQ2ODI1MTFFQUJEQUNGMTMyRDMzQkU0QjQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0QyQkE3NzM2ODI1MTFFQUJEQUNGMTMyRDMzQkU0QjQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpmYTNmMjE3YS1iMjQyLTQ5MDAtOTA4MS0wY2Q1ODA1ZmQwNWQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6M2ZkYzI3NmQtMDYwYS00NjE0LTk2YTctNmRlMmY5ZWM1NzI3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEBQoA2QAsAAAAACgAGAAACP8ADVFaweXLBB09rOARoqFGgx8DDDygwaIAhmsYM2rceO0MoUgbfKwo4eFgjxEMLDRsQCDixIoXOcrEeKbLi5A7SE6oYAOlBQoHWA4IsQBBxZlIi2S4mSMniBg8fQKFQAAIUQQtCiCVaUJFhjHYsAEg8TQAtjgi3oRdG7YRm7ASrhWCe01CWAcZU3Tds5YUWbMBPgRiu3bLrLAyrjm4e00G4oxDUmC5sxYAlS+ArTwiHFbWlrBsrkEJG0FxWEgZE6G4goVtKS6Ae/QJC6pGkB9gJArAFgFDgrAJrkXAJkDjiQ6r2QJYAQBbAB16wppaCdFAFWxtRLG9pgVb8IxZjqP/IOyqeYAJZjjDaSkHW5VYbCX8hqKRg4ILTMLiSoMNUHMAHqRHGBwsdULcJe79VsdueGU0g30XhCVGLcqRIAhnmxwAAS1htXfKcKNhk1hGMLhgX1hTrMJfWJZhElYmPHwgwg04HBBKWLvZwglxdGVkRIlroJiCKpUdwkdYrbgR44w4BMHWFp9sp1ESRoThAopDjFKZI5Jwho0iGuDgCY4T7ebdRmhEUWVYdCAnBot2wOIlKgylEpYmErURlhYb/fFEFEiwedwrLHrhh5e3MCCEWtiwEhEjpMWEUSVL/InEDHOE1wERZRTRhRchjVRSVCkBJZQBRcGUkRJOVHrEpRAyZ8GpUkzl5AFUPZWqYUtXZZURGawukcQRMDx4n6xdLaVGU2RBteQNU1XVq1aI5AGsE2gMC+R9kSU7xrJUkGWJkjLSGAQEYFhVVAuLDNJEE1JkI++89NZr7734ZgNvvvz2i2+8/gYccEAAIfkEBQoA2QAsBAACAAkADwAACFAAsWELkK1gHGwHBSYrGABhwYEFI0bEpkziRAAWJ0azyCsNNkAWffnJJlCiGGkesVlUQSxjNhPIXL4U4zKFsIhzspwoeAXLHS9hchZE0bNLQAAh+QQFCgDZACwEAAIAEwAPAAAInQB3lPCQreAIBhay6cLGsCG2STkEgiho42C2Xg4bTioIgETBjyBDgiTlUWS2YBDAAAmx4CMAKiazUQvyQ+UDkKW4mHSY6yNDACt2NuxZkGE2VwBiisSVBhugpCGfIaRwAGQtbDGrfRBxgwLIVWliZvwFUhVWkRmHgRx1VmlRbHQKivmZzdkKLl+m6ehhBQ/DuNle0bXj466HCXutBAQAIfkEBQoA2QAsDgACABcADwAACO8ADzQgMCDEAgQsCjjAhk1CtkIMHUpg6IDCAQgEgBhE0AIaQxnZFmJzkE3Gx2woU6achJIkFJQRQqKElJKhzS0IBGSLmQBlz5gCrtW0iU0WjSrZtBzDhpKplmwJhKIEVSPIDzAod2WrMrGphJ4vU5rSUKPBD5SMsglgA7VnHZ0kVcrNZi0bNq0RYkJhCnIoQzgomdnVuayOWqYO/WLbhJJA02yTitlFKRVlJh4fRNzAkQ0CsMEcBTCNqrKVG8yaURpD2YYGgqdJ58rWhbIZykswUcIiahMVyqo/BqCkkRADSj+8Gd5CSdYsygfEC6AMCAA7"},19527:function(){},69331:function(){},77927:function(){},69862:function(){},40964:function(){},84648:function(e){"use strict";e.exports=JSON.parse('[{"key":"common","name":"通用","list":[{"script":"AlphaTo","duration":1000,"name":"透明动画"},{"script":"Move","duration":1000,"name":"位移动画","props":{"distanceY":300}},{"script":"MoveTo","duration":1000,"name":"位移到","props":{"distanceY":300,"x":0,"y":0}},{"script":"Rotate","duration":1000,"name":"旋转动画"},{"script":"RotateTo","duration":1000,"name":"旋转到"},{"script":"Scale","duration":1000,"name":"缩放动画"},{"script":"ScaleTo","duration":1000,"name":"缩放到"},{"script":"SizeTo","duration":1000,"name":"大小动画","props":{"width":100,"height":100}},{"script":"Path","duration":1000,"name":"路径动画","props":{"path":[]}},{"script":"Typing","duration":1000,"name":"打字效果"},{"script":"CountDown","duration":5000,"name":"倒计时效果"},{"script":"Toast","duration":3000,"name":"出现后消失"},{"script":"Brightness","duration":1000,"name":"亮度动画"},{"script":"Contrast","duration":1000,"name":"对比度动画"},{"script":"Saturation","duration":1000,"name":"饱和度动画"},{"script":"Anchor","duration":1000,"name":"锚点动画","props":{"axisX":0,"axisY":0}},{"script":"Flip","duration":1000,"name":"翻转动画","props":{"flipX":true,"flipY":false}}]}]')},36683:function(e){"use strict";e.exports=JSON.parse('[{"key":"common","name":"通用","list":[{"script":"Move3D","duration":1000,"name":"位移动画","props":{"offsetPos":[1,0,0]}},{"script":"MoveTo3D","duration":1000,"name":"位移到","props":{"destPos":[0,0,0]}},{"script":"Rotate3D","duration":1000,"name":"旋转动画","props":{"offsetAngle":[90,0,0]}},{"script":"RotateTo3D","duration":1000,"name":"旋转到","props":{"destAngle":[0,0,0]}},{"script":"Scale3D","duration":1000,"name":"缩放动画","props":{"offsetScale":[0.2,0.2,0.2]}},{"script":"ScaleTo3D","duration":1000,"name":"缩放到","props":{"destScale":[1,1,1]}}]}]')},78903:function(e){"use strict";e.exports=JSON.parse('[{"key":"recently","name":"最近使用","list":[{"script":"FadeIO","name":"淡入","duration":1000},{"script":"MoveIO","name":"左边滑入","duration":1000,"props":{"distanceX":-500}},{"script":"ScaleIO","name":"放大出现","duration":1000},{"script":"TurnIO","name":"右转出现","duration":1000,"props":{"startAngle":-45}},{"script":"TurnIO","name":"左转出现","duration":1000,"props":{"startAngle":45}},{"script":"ScaleIO","name":"弹入出现","duration":1000,"props":{"ease":"elasticOut"}},{"script":"Toast","duration":3000,"name":"出现后消失"}]},{"key":"opacity","name":"透明度变化","list":[{"script":"ImmediateIO","name":"立即出现","duration":1000},{"script":"FadeIO","name":"淡入","duration":1000},{"script":"Toast","duration":3000,"name":"出现后消失"}]},{"key":"translate","name":"平移出现","list":[{"script":"MoveIO","name":"左边滑入","duration":1000,"props":{"distanceX":-500}},{"script":"MoveIO","name":"右边滑入","duration":1000,"props":{"distanceX":500}},{"script":"MoveIO","name":"顶部滑入","duration":1000,"props":{"distanceY":-800}},{"script":"MoveIO","name":"底部滑入","duration":1000,"props":{"distanceY":800}},{"script":"MoveIO","name":"左上滑入","duration":1000,"props":{"distanceX":-500,"distanceY":-800}},{"script":"MoveIO","name":"左下滑入","duration":1000,"props":{"distanceX":-500,"distanceY":800}},{"script":"MoveIO","name":"右上滑入","duration":1000,"props":{"distanceX":500,"distanceY":-800}},{"script":"MoveIO","name":"右下滑入","duration":1000,"props":{"distanceX":500,"distanceY":800}}]},{"key":"scale","name":"缩放出现","list":[{"script":"ScaleIO","name":"放大出现","duration":1000},{"script":"SmallIO","name":"缩小出现","duration":1000},{"script":"ScaleIO","name":"向下放大","duration":1000,"props":{"anchorY":0}},{"script":"ScaleIO","name":"向上放大","duration":1000,"props":{"anchorY":1}},{"script":"ScaleIO","name":"向左放大","duration":1000,"props":{"anchorX":1}},{"script":"ScaleIO","name":"向右放大","duration":1000,"props":{"anchorX":0}},{"script":"ScaleIO","name":"右下放大","duration":1000,"props":{"anchorX":0,"anchorY":0}},{"script":"ScaleIO","name":"左下放大","duration":1000,"props":{"anchorX":1,"anchorY":0}},{"script":"ScaleIO","name":"右上放大","duration":1000,"props":{"anchorX":0,"anchorY":1}},{"script":"ScaleIO","name":"左上放大","duration":1000,"props":{"anchorX":1,"anchorY":1}}]},{"key":"rotate","name":"旋转出现","list":[{"script":"RotateIO","name":"旋转出现","duration":1000},{"script":"TurnIO","name":"右转出现","duration":1000,"props":{"startAngle":-45}},{"script":"TurnIO","name":"左转出现","duration":1000,"props":{"startAngle":45}},{"script":"RotateIO","name":"顶部旋入","duration":1000,"props":{"anchorY":0,"rotateRange":540,"startAngle":180}},{"script":"RotateIO","name":"底部旋入","duration":1000,"props":{"anchorY":1,"rotateRange":540,"startAngle":180}},{"script":"RotateIO","name":"左边旋入","duration":1000,"props":{"anchorX":0,"rotateRange":540,"startAngle":180}},{"script":"RotateIO","name":"右边旋入","duration":1000,"props":{"anchorX":1,"rotateRange":540,"startAngle":180}},{"script":"TurnIO","name":"左上切入","duration":1000,"props":{"anchorX":0,"anchorY":1,"startAngle":-45}},{"script":"TurnIO","name":"左下切入","duration":1000,"props":{"anchorX":0,"anchorY":1,"startAngle":45}},{"script":"TurnIO","name":"右上切入","duration":1000,"props":{"anchorX":1,"anchorY":1,"startAngle":45}},{"script":"TurnIO","name":"右下切入","duration":1000,"props":{"anchorX":1,"anchorY":1,"startAngle":-45}},{"script":"RotateScaleIO","name":"左上出现","duration":1000,"props":{"anchorX":0,"anchorY":0,"rotateRange":540,"startAngle":180}},{"script":"RotateScaleIO","name":"左下出现","duration":1000,"props":{"anchorX":0,"anchorY":1,"rotateRange":540,"startAngle":180}},{"script":"RotateScaleIO","name":"右上出现","duration":1000,"props":{"anchorX":1,"anchorY":0,"rotateRange":540,"startAngle":180}},{"script":"RotateScaleIO","name":"右下出现","duration":1000,"props":{"anchorX":1,"anchorY":1,"rotateRange":540,"startAngle":180}}]},{"key":"skew","name":"翻转出现","list":[{"script":"SkewIO","name":"向右翻转","duration":1000,"props":{"scaleRange":0.5}},{"script":"SkewIO","name":"向左翻转","duration":1000,"props":{"scaleRange":-0.5}},{"script":"SkewIO","name":"向下翻转","duration":1000,"props":{"scaleRange":-0.5,"enableX":false,"enableY":true}},{"script":"SkewIO","name":"向上翻转","duration":1000,"props":{"scaleRange":0.5,"enableX":false,"enableY":true}}]},{"key":"bounce","name":"弹动出现","list":[{"script":"ScaleIO","name":"弹入出现","duration":1000,"props":{"ease":"elasticOut"}},{"script":"MoveIO","name":"左边弹入","duration":1000,"props":{"distanceX":-500,"ease":"elasticOut"}},{"script":"MoveIO","name":"右边弹入","duration":1000,"props":{"distanceX":500,"ease":"elasticOut"}},{"script":"MoveIO","name":"顶部弹入","duration":1000,"props":{"distanceY":-800,"ease":"elasticOut"}},{"script":"MoveIO","name":"底部弹入","duration":1000,"props":{"distanceY":800,"ease":"elasticOut"}},{"script":"MoveIO","name":"左上弹入","duration":1000,"props":{"distanceX":-500,"distanceY":-800,"ease":"elasticOut"}},{"script":"MoveIO","name":"左下弹入","duration":1000,"props":{"distanceX":-500,"distanceY":800,"ease":"elasticOut"}},{"script":"MoveIO","name":"右上弹入","duration":1000,"props":{"distanceX":500,"distanceY":-800,"ease":"elasticOut"}},{"script":"MoveIO","name":"右下弹入","duration":1000,"props":{"distanceX":500,"distanceY":800,"ease":"elasticOut"}}]},{"key":"scroll","name":"滚动出现","list":[{"script":"RotateMoveIO","name":"左边滚入","duration":1000,"props":{"distanceX":-300}},{"script":"RotateMoveIO","name":"右边滚入","duration":1000,"props":{"distanceX":300}},{"script":"RotateMoveIO","name":"顶部滚入","duration":1000,"props":{"distanceY":-600}},{"script":"RotateMoveIO","name":"底部滚入","duration":1000,"props":{"distanceY":600}},{"script":"RotateMoveIO","name":"左上滚入","duration":1000,"props":{"distanceX":-300,"distanceY":-600}},{"script":"RotateMoveIO","name":"左下滚入","duration":1000,"props":{"distanceX":-300,"distanceY":600}},{"script":"RotateMoveIO","name":"右上滚入","duration":1000,"props":{"distanceX":300,"distanceY":-600}},{"script":"RotateMoveIO","name":"右下滚入","duration":1000,"props":{"distanceX":300,"distanceY":600}}]},{"key":"expand","name":"展开出现","list":[{"script":"ScaleIO","name":"向上展开","duration":1000,"props":{"anchorY":1,"enableX":false}},{"script":"ScaleIO","name":"向下展开","duration":1000,"props":{"anchorY":0,"enableX":false}},{"script":"ScaleIO","name":"向左展开","duration":1000,"props":{"anchorX":1,"enableY":false}},{"script":"ScaleIO","name":"向右展开","duration":1000,"props":{"anchorX":0,"enableY":false}},{"script":"ScaleIO","name":"上下展开","duration":1000,"props":{"enableX":false}},{"script":"ScaleIO","name":"左右展开","duration":1000,"props":{"enableY":false}}]},{"key":"combo","name":"组合出现","list":[{"script":"TurnSmallIO","name":"右转缩入","duration":1000,"props":{"startAngle":-45}},{"script":"TurnSmallIO","name":"左转缩入","duration":1000,"props":{"startAngle":45}},{"script":"TurnScaleIO","name":"放大转入","duration":1000},{"script":"RotateScaleIO","name":"放大旋入","duration":1000},{"script":"RotateSmallIO","name":"缩小旋入","duration":1000}]}]')},34326:function(e){"use strict";e.exports=JSON.parse('[{"key":"recently","name":"最近使用","list":[{"script":"Breathe","name":"呼吸效果","duration":1000},{"script":"Heartbeat","name":"心跳效果","duration":1000},{"script":"Float","name":"上下浮动","duration":1000,"props":{"distanceY":100}},{"script":"Float","name":"左右浮动","duration":1000,"props":{"distanceX":100}},{"script":"GoAndBack","duration":4000,"name":"左右往返","props":{"distanceX":300,"stayTime":1000}},{"script":"GoAndBack","duration":4000,"name":"上下往返","props":{"distanceY":300,"stayTime":1000}},{"script":"Rotate","name":"顺时旋转","duration":1000},{"script":"Rotate","name":"逆时旋转","duration":1000,"props":{"rotateRange":-360}},{"script":"Vibrate","name":"振动","duration":1000},{"script":"Shake","name":"顶部摇晃","duration":1000,"props":{"anchorY":-1,"rotateRange":5}}]},{"key":"scale","name":"缩放循环","list":[{"script":"Breathe","name":"呼吸效果","duration":1000},{"script":"Heartbeat","name":"心跳效果","duration":1000},{"script":"Pulse","name":"放大","duration":1000,"props":{"scaleRange":0.5}},{"script":"Pulse","name":"缩小","duration":1000,"props":{"scaleRange":-0.5}},{"script":"Wave","name":"放大波浪","duration":1000},{"script":"Wave","name":"缩小波浪","duration":1000,"props":{"scaleRange":-0.5}},{"script":"Pulse","name":"脉冲向前","duration":1000},{"script":"Pulse","name":"脉冲向后","duration":1000,"props":{"scaleRange":-0.15}}]},{"key":"translate","name":"位移循环","list":[{"script":"Float","name":"上下浮动","duration":1000,"props":{"distanceY":100}},{"script":"Float","name":"左右浮动","duration":1000,"props":{"distanceX":100}},{"script":"Float","name":"左上浮动","duration":1000,"props":{"distanceX":100,"distanceY":100}},{"script":"Float","name":"右上浮动","duration":1000,"props":{"distanceX":-100,"distanceY":100}},{"script":"GoAndBack","duration":4000,"name":"左右往返","props":{"distanceX":300,"stayTime":1000}},{"script":"GoAndBack","duration":4000,"name":"上下往返","props":{"distanceY":300,"stayTime":1000}}]},{"key":"bounce","name":"弹性循环","list":[{"script":"Jelly","duration":1000,"name":"水平果冻"},{"script":"Jelly","duration":1000,"name":"垂直果冻","props":{"amplitudeX":-0.2,"amplitudeY":0.2}},{"script":"Bounce","name":"顶部弹跳","duration":1000,"props":{"distanceY":50}},{"script":"Bounce","name":"底部弹跳","duration":1000,"props":{"distanceY":-50}},{"script":"Bounce","name":"左边弹跳","duration":1000,"props":{"distanceX":50}},{"script":"Bounce","name":"右边弹跳","duration":1000,"props":{"distanceX":-50}}]},{"key":"rotate","name":"旋转循环","list":[{"script":"Rotate","name":"顺时旋转","duration":1000},{"script":"Rotate","name":"逆时旋转","duration":1000,"props":{"rotateRange":-360}},{"script":"Swing","name":"秋千效果","duration":1000}]},{"key":"opacity","name":"透明度循环","list":[{"script":"Twinkle","name":"闪烁效果","duration":2000},{"script":"Twinkle","name":"闪烁效果2","duration":2000,"props":{"startAlpha":1.3}},{"script":"Flash","duration":1000,"name":"故障闪烁1"},{"script":"Flash","duration":1000,"name":"故障闪烁2","props":{"ease":"flash2"}}]},{"key":"shake","name":"震动与晃动","list":[{"script":"Jolty","name":"抖动效果","duration":1000,"props":{"ease":"shake2","rotateRange":20}},{"script":"Shake","name":"顶部震动","duration":1000,"props":{"anchorY":0}},{"script":"Shake","name":"底部震动","duration":1000,"props":{"anchorY":1}},{"script":"Shake","name":"左边震动","duration":1000,"props":{"anchorX":0}},{"script":"Shake","name":"右边震动","duration":1000,"props":{"anchorX":1}},{"script":"Shake","name":"左上震动","duration":1000,"props":{"anchorX":0,"anchorY":0}},{"script":"Shake","name":"左下震动","duration":1000,"props":{"anchorX":0,"anchorY":1}},{"script":"Shake","name":"右上震动","duration":1000,"props":{"anchorX":1,"anchorY":0}},{"script":"Shake","name":"右下震动","duration":1000,"props":{"anchorX":1,"anchorY":1}},{"script":"Shake","name":"上下震动","duration":1000,"props":{"scaleRange":0,"distanceY":20}},{"script":"Shake","name":"左右震动","duration":1000,"props":{"scaleRange":0,"distanceX":20}},{"script":"Vibrate","name":"振动","duration":1000},{"script":"Shake","name":"顶部摇晃","duration":1000,"props":{"anchorY":-1,"rotateRange":5}},{"script":"Shake","name":"底部摇晃","duration":1000,"props":{"anchorY":2,"rotateRange":5}},{"script":"Shake","name":"左边摇晃","duration":1000,"props":{"anchorX":-1,"rotateRange":5}},{"script":"Shake","name":"右边摇晃","duration":1000,"props":{"anchorX":2,"rotateRange":5}}]},{"key":"combo","name":"组合循环","list":[{"script":"RotateScale","name":"旋转放大","duration":1000},{"script":"RotateScale","name":"旋转缩小","duration":1000,"props":{"scaleRange":-0.5}},{"script":"ShakeScale","name":"抖动放大","duration":1000}]}]')},24648:function(e){"use strict";e.exports=JSON.parse('[{"key":"common","name":"通用","list":[{"script":"Breathe3D","name":"呼吸效果","duration":1000,"props":{"scaleRange":0.1}},{"script":"Heartbeat3D","name":"心跳效果","duration":1000,"props":{"scaleRange":0.2}},{"script":"Float3D","name":"上下浮动","duration":1000,"props":{"offsetPos":[0,1,0]}},{"script":"Float3D","name":"左右浮动","duration":1000,"props":{"offsetPos":[1,0,0]}},{"script":"Jelly3D","duration":1000,"name":"果冻","props":{"amplitudeVector":[0.2,0.2,0.2]}}]}]')},94580:function(e){"use strict";e.exports=JSON.parse('[{"key":"mask","name":"遮罩动画","list":[{"script":"CircularMask","name":"圆形","duration":1000},{"script":"ClockMask","name":"钟表","duration":1000},{"script":"DownToUpMask","name":"向上展开","duration":1000},{"script":"UpToDownMask","name":"向下展开","duration":1000},{"script":"LeftToRightMask","name":"向右展开","duration":1000},{"script":"RightToLeftMask","name":"向左展开","duration":1000},{"script":"SkewMask","name":"斜切","duration":1000},{"script":"TriangleMask","name":"三角形","duration":1000},{"script":"SquareMask","name":"正方形","duration":1000},{"script":"DiamondMask","name":"菱形","duration":1000},{"script":"PentagonMask","name":"五边形","duration":1000},{"script":"OctagonMask","name":"八边形","duration":1000},{"script":"PentagramMask","name":"五角星","duration":1000},{"script":"StarMask","name":"十字星","duration":1000},{"script":"OctagramMask","name":"八角星","duration":1000},{"script":"HeartMask","name":"心型","duration":1000},{"script":"BlindsMask","name":"横百叶窗","duration":1000},{"script":"BlindsMask","name":"竖百叶窗","duration":1000,"props":{"isHorizontal":false}},{"script":"DiagonalMask","name":"菱形展开","duration":1000},{"script":"MultiPotMask","name":"波点渐变","duration":1000},{"script":"WiperMask","name":"雨刷","duration":1000},{"script":"SpreadMask","name":"展开","duration":1000},{"script":"WindmillMask","name":"风车","duration":1000}]}]')},60730:function(e){"use strict";e.exports=JSON.parse('[{"key":"recently","name":"最近使用","list":[{"script":"FadeIO","name":"淡出","duration":1000},{"script":"MoveIO","name":"右边滑出","duration":1000,"props":{"distanceX":600}},{"script":"ScaleIO","name":"缩小消失","duration":1000},{"script":"TurnIO","name":"右旋消失","duration":1000,"props":{"startAngle":-45}},{"script":"TurnIO","name":"左旋消失","duration":1000,"props":{"startAngle":45}},{"script":"SmallIO","duration":1000,"name":"中心弹出","props":{"startScale":0.2,"ease":"backIn"}},{"script":"Toast","duration":3000,"name":"出现后消失"}]},{"key":"opacity","name":"透明度变化","list":[{"script":"ImmediateIO","name":"立即消失","duration":1000},{"script":"FadeIO","name":"淡出","duration":1000},{"script":"Toast","duration":3000,"name":"出现后消失"}]},{"key":"translate","name":"平移消失","list":[{"script":"MoveIO","name":"左边滑出","duration":1000,"props":{"distanceX":-600}},{"script":"MoveIO","name":"右边滑出","duration":1000,"props":{"distanceX":600}},{"script":"MoveIO","name":"顶部滑出","duration":1000,"props":{"distanceY":-1000}},{"script":"MoveIO","name":"底部滑出","duration":1000,"props":{"distanceY":1000}},{"script":"MoveIO","name":"左上滑出","duration":1000,"props":{"distanceX":-600,"distanceY":-1000}},{"script":"MoveIO","name":"左下滑出","duration":1000,"props":{"distanceX":-600,"distanceY":1000}},{"script":"MoveIO","name":"右上滑出","duration":1000,"props":{"distanceX":600,"distanceY":-1000}},{"script":"MoveIO","name":"右下滑出","duration":1000,"props":{"distanceX":600,"distanceY":1000}}]},{"key":"scale","name":"缩放消失","list":[{"script":"ScaleIO","name":"缩小消失","duration":1000},{"script":"SmallIO","name":"放大消失","duration":1000},{"script":"ScaleIO","name":"向上缩小","duration":1000,"props":{"anchorY":0}},{"script":"ScaleIO","name":"向下缩小","duration":1000,"props":{"anchorY":1}},{"script":"ScaleIO","name":"向左缩小","duration":1000,"props":{"anchorX":0}},{"script":"ScaleIO","name":"向右缩小","duration":1000,"props":{"anchorX":1}},{"script":"ScaleIO","name":"左上缩小","duration":1000,"props":{"anchorX":0,"anchorY":0}},{"script":"ScaleIO","name":"右上缩小","duration":1000,"props":{"anchorX":1,"anchorY":0}},{"script":"ScaleIO","name":"左下缩小","duration":1000,"props":{"anchorX":0,"anchorY":1}},{"script":"ScaleIO","name":"右下缩小","duration":1000,"props":{"anchorX":1,"anchorY":1}}]},{"key":"rotate","name":"旋转消失","list":[{"script":"RotateIO","name":"旋转消失","duration":1000},{"script":"TurnIO","name":"右旋消失","duration":1000,"props":{"startAngle":-45}},{"script":"TurnIO","name":"左旋消失","duration":1000,"props":{"startAngle":45}},{"script":"RotateIO","name":"顶部旋出","duration":1000,"props":{"anchorY":0,"rotateRange":540,"startAngle":-180}},{"script":"RotateIO","name":"底部旋出","duration":1000,"props":{"anchorY":1,"rotateRange":540,"startAngle":-180}},{"script":"RotateIO","name":"左边旋出","duration":1000,"props":{"anchorX":0,"rotateRange":540,"startAngle":-180}},{"script":"RotateIO","name":"右边旋出","duration":1000,"props":{"anchorX":1,"rotateRange":540,"startAngle":-180}},{"script":"TurnIO","name":"左上切出","duration":1000,"props":{"anchorX":0,"anchorY":1,"startAngle":-45}},{"script":"TurnIO","name":"左下切出","duration":1000,"props":{"anchorX":0,"anchorY":1,"startAngle":45}},{"script":"TurnIO","name":"右上切出","duration":1000,"props":{"anchorX":1,"anchorY":1,"startAngle":45}},{"script":"TurnIO","name":"右下切出","duration":1000,"props":{"anchorX":1,"anchorY":1,"startAngle":-45}},{"script":"RotateScaleIO","name":"左下旋出","duration":1000,"props":{"anchorX":0,"anchorY":1,"rotateRange":540,"startAngle":-180}},{"script":"RotateScaleIO","name":"右下旋出","duration":1000,"props":{"anchorX":1,"anchorY":1,"rotateRange":540,"startAngle":-180}},{"script":"RotateScaleIO","name":"左上旋出","duration":1000,"props":{"anchorX":0,"anchorY":0,"rotateRange":540,"startAngle":-180}},{"script":"RotateScaleIO","name":"右上旋出","duration":1000,"props":{"anchorX":1,"anchorY":0,"rotateRange":540,"startAngle":-180}},{"script":"TurnScaleIO","name":"转动消失","duration":1000},{"script":"RotateBlurIO","duration":1000,"name":"向左模糊","props":{"anchorX":-0.3,"anchorY":0.5,"startAngle":-120,"rotateRange":120}},{"script":"RotateBlurIO","duration":1000,"name":"向右模糊","props":{"anchorX":1.3,"anchorY":0.5,"startAngle":120,"rotateRange":-120}}]},{"key":"skew","name":"翻转消失","list":[{"script":"SkewIO","name":"向右翻转","duration":1000,"props":{"scaleRange":0.5}},{"script":"SkewIO","name":"向左翻转","duration":1000,"props":{"scaleRange":-0.5}},{"script":"SkewIO","name":"向下翻转","duration":1000,"props":{"scaleRange":-0.5,"enableX":false,"enableY":true}},{"script":"SkewIO","name":"向上翻转","duration":1000,"props":{"scaleRange":0.5,"enableX":false,"enableY":true}}]},{"key":"bounce","name":"弹动消失","list":[{"script":"SmallIO","duration":1000,"name":"中心弹出","props":{"startScale":0.2,"ease":"backIn"}},{"script":"MoveIO","name":"左边弹出","duration":1000,"props":{"distanceX":-500,"ease":"backIn"}},{"script":"MoveIO","name":"右边弹出","duration":1000,"props":{"distanceX":500,"ease":"backIn"}},{"script":"MoveIO","name":"顶部弹出","duration":1000,"props":{"distanceY":-1000,"ease":"backIn"}},{"script":"MoveIO","name":"底部弹出","duration":1000,"props":{"distanceY":800,"ease":"backIn"}},{"script":"MoveIO","name":"左上弹出","duration":1000,"props":{"distanceX":-500,"distanceY":-800,"ease":"backIn"}},{"script":"MoveIO","name":"左下弹出","duration":1000,"props":{"distanceX":-500,"distanceY":800,"ease":"backIn"}},{"script":"MoveIO","name":"右上弹出","duration":1000,"props":{"distanceX":500,"distanceY":-800,"ease":"backIn"}},{"script":"MoveIO","name":"右下弹出","duration":1000,"props":{"distanceX":500,"distanceY":800,"ease":"backIn"}}]},{"key":"scroll","name":"滚动消失","list":[{"script":"RotateMoveIO","name":"顶部滚出","duration":1000,"props":{"distanceY":-600}},{"script":"RotateMoveIO","name":"底部滚出","duration":1000,"props":{"distanceY":600}},{"script":"RotateMoveIO","name":"左边滚出","duration":1000,"props":{"distanceX":-300}},{"script":"RotateMoveIO","name":"右边滚出","duration":1000,"props":{"distanceX":300}},{"script":"RotateMoveIO","name":"左上滚出","duration":1000,"props":{"distanceX":-300,"distanceY":-600}},{"script":"RotateMoveIO","name":"左下滚出","duration":1000,"props":{"distanceX":-300,"distanceY":600}},{"script":"RotateMoveIO","name":"右上滚出","duration":1000,"props":{"distanceX":300,"distanceY":-600}},{"script":"RotateMoveIO","name":"右下滚出","duration":1000,"props":{"distanceX":300,"distanceY":600}}]},{"key":"expand","name":"展开消失","list":[{"script":"ScaleIO","name":"向上收缩","duration":1000,"props":{"anchorY":0,"enableX":false}},{"script":"ScaleIO","name":"向下收缩","duration":1000,"props":{"anchorY":1,"enableX":false}},{"script":"ScaleIO","name":"向左收缩","duration":1000,"props":{"anchorX":0,"enableY":false}},{"script":"ScaleIO","name":"向右收缩","duration":1000,"props":{"anchorX":1,"enableY":false}},{"script":"ScaleIO","name":"左右收缩","duration":1000,"props":{"enableY":false}},{"script":"ScaleIO","name":"上下收缩","duration":1000,"props":{"enableX":false}}]},{"key":"combo","name":"组合消失","list":[{"script":"RotateScaleIO","name":"缩小旋出","duration":1000},{"script":"RotateSmallIO","name":"放大旋出","duration":1000},{"script":"TurnScaleIO","name":"缩小转出","duration":1000},{"script":"TurnSmallIO","name":"右旋放大","duration":1000,"props":{"startAngle":-45}},{"script":"TurnSmallIO","name":"左旋放大","duration":1000,"props":{"startAngle":45}}]},{"key":"drop","name":"脱落消失","list":[{"script":"RotateDropIO","duration":1000,"name":"向左脱落","props":{"distanceY":1200,"anchorX":0,"anchorY":0,"startAngle":45,"rotateRange":20}},{"script":"RotateDropIO","duration":1000,"name":"向右脱落","props":{"distanceY":1200,"anchorX":1,"anchorY":0,"startAngle":-45,"rotateRange":20}}]}]')}}]);