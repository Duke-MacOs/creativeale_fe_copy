"use strict";(self.webpackChunk_byted_editor=self.webpackChunk_byted_editor||[]).push([[858],{18691:function(e,t,n){n.d(t,{Z:function(){return k}});var i=n(22142),a=n(50509),r=n(61754),o=n(78296),l=n(70072),p=n(50969),c=n(72299),s=n(99305),d=n(1502),m=n(16969),u=n(32078),g=n(73073),x=n(40985),h=n(84269),f=n(20282),v=n(7910),b=(e,t,n)=>new Promise(((i,a)=>{var r=e=>{try{l(n.next(e))}catch(e){a(e)}},o=e=>{try{l(n.throw(e))}catch(e){a(e)}},l=e=>e.done?i(e.value):Promise.resolve(e.value).then(r,o);l((n=n.apply(e,t)).next())}));const y=(0,i.memo)((({onAddResourceEntry:e,setUploading:t,children:n,categoryId:a,uploading:o,className:l,teamId:p,$scope:c})=>i.createElement(m.Z,{multiple:!0,disabled:o,showUploadList:!1,className:l,accept:g.n$.FrameAnime,beforeUpload:(n,o)=>b(void 0,null,(function*(){if(o.indexOf(n)!==o.length-1)return!1;(0,x.r3)(x.GM.UploadResource,{type:"用户上传量"});let l=1;const[s,d]=g.Ip.FrameAnime,m=e=>b(this,null,(function*(){return new Promise((t=>{u.Z.confirm({centered:!0,title:"序列帧压缩",icon:i.createElement(h.Z,null),content:e?`动画序列尺寸超过了${s}×${d}，是否压缩？`:`动画序列过大，不得超过${Math.round(g.jP.FrameAnime/1024/1024)}M，是否压缩？`,okText:"开始压缩",cancelText:"放弃上传",onOk:()=>{(0,f.Z)({fileList:o}).then((e=>b(this,null,(function*(){t(e)}))))}})}))})),y=yield(0,g.fA)(o,"FrameAnime");if((0,v.cM)({release:!0}))y.length&&(y.reduce(((e,t)=>e+t.size),0)>g.jP.FrameAnime?r.ZP.error(`动画序列过大，不得超过${Math.round(g.jP.FrameAnime/1024/1024)}M`):(t(!0),(0,g.Pg)(y,{categoryId:a,teamId:p,$scope:c},"FrameAnime").then((t=>b(this,null,(function*(){yield e(t)})))).catch((e=>{r.ZP.error(e.message)})).finally((()=>{t(!1)}))));else if(y.length){const{width:n,height:i}=yield(0,g.jL)(y[0]);n*i>s*d?yield m("overSize").then((e=>{l=e})):y.reduce(((e,t)=>e+t.size),0)>g.jP.FrameAnime&&(yield m().then((e=>{l=e}))),t(!0),(0,g.Pg)(y,{categoryId:a,teamId:p,$scope:c,scale:Number(l)},"FrameAnime").then((t=>b(this,null,(function*(){yield e(t)})))).catch((e=>{r.ZP.error(e.message)})).finally((()=>{t(!1),l=1}))}return!1}))},n)));var E=n(21703);const w=(0,i.memo)((({onAddResourceEntry:e,setUploading:t,acceptFiles:n,uploading:a,categoryId:r,type:o,children:l,className:p,teamId:c,$scope:s,multiple:d=!0})=>{const u=o?g.n$[o]:g.NC;return i.createElement(m.Z,{multiple:d,disabled:a,showUploadList:!1,className:p,accept:u,beforeUpload:(i,a)=>{return void 0,null,l=function*(){if(a.indexOf(i)!==a.length-1)return!1;const l=yield(0,g.Kf)(a,{categoryId:r,teamId:c,$scope:s},o,n);return l&&(t(!0),l().then((t=>(t.forEach((()=>{(0,E.r)(E.G.UploadResource,{type:"上传成功量"})})),Promise.all(t.map(e))))).catch((e=>console.error(e))).finally((()=>{t(!1)}))),!1},new Promise(((e,t)=>{var n=e=>{try{a(l.next(e))}catch(e){t(e)}},i=e=>{try{a(l.throw(e))}catch(e){t(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,i);a((l=l.apply(undefined,null)).next())}));var l}},l)}));var Z=n(47707),C=n(22142);function k({onRefetch:e,teamId:t,categoryId:n=""}){const[m,u]=(0,i.useState)(!1),g=(0,i.useMemo)((()=>C.createElement(a.Z,null,[{type:void 0,title:"基础资源",desc:"图片、视频、音频"},{type:"Lottie",title:"Lottie",desc:"格式为json或zip"},{type:"Particle",title:"粒子",desc:"格式为plist或zip"},{type:"DragonBones",title:"龙骨动画",desc:"格式为zip"},{type:"Spine",title:"Spine",desc:"格式为zip"},{type:"Font",title:"字体",desc:"格式为ttf"},{type:"Live2d",title:"Live2D",desc:"格式为zip(json+图片)"},{type:"Animation",title:"互动组件",desc:"格式为json或zip"}].map(((i,o)=>{var l;return C.createElement(a.Z.Item,{key:null!=(l=i.type)?l:o},C.createElement(w,{type:i.type,teamId:t,multiple:!0,uploading:m,categoryId:n,setUploading:u,onAddResourceEntry:(t,n,i)=>{n===i.length-1&&(e(!0),r.ZP.success(`成功上传${i.length}个资源`))}},C.createElement("div",{className:Z.Z.uploadMenuItem},C.createElement("div",{className:Z.Z.updateMenuTitle},i.title),C.createElement("div",{className:Z.Z.uploadMenuDesc},i.desc))))})),C.createElement(a.Z.Item,{key:"FrameAnime"},C.createElement(y,{teamId:t,uploading:m,categoryId:n,setUploading:u,onAddResourceEntry:()=>{e(!0),r.ZP.success("成功上传1个资源")}},C.createElement("div",{className:Z.Z.uploadMenuItem},C.createElement("div",{className:Z.Z.updateMenuTitle},"序列帧"),C.createElement("div",{className:Z.Z.uploadMenuDesc},"需上传多张图片")))))),[m,e]);return C.createElement(o.Z,{overlay:g,trigger:["click"]},C.createElement(l.Z,{className:Z.Z.optionButton},C.createElement(p.Z,{placement:"bottom",content:C.createElement("div",{style:{fontSize:"12px"}},C.createElement("div",null,"图片:格式为jpeg、jpg、png、WebP、Heic、GIF、TIFF、ICO、svg,不大于1M"),C.createElement("div",null,"视频:格式为mp4,不大于5M"),C.createElement("div",null,"音频:格式为mp3,不大于2M"),C.createElement("div",null,"字体:格式为ttf，不大于20M"),C.createElement("div",null,"Lottie:格式为json或zip(图片+json)，不大于2M"),C.createElement("div",null,"2D粒子:格式为plist或zip（图片+plist），不大于2M"),C.createElement("div",null,"Live2D:格式为zip（json+图片），不大于20M"),C.createElement("div",null,"序列帧:需上传多张图片,不大于2M"),C.createElement("div",null,"互动组件组件:格式为json或zip,不大于50M"))},C.createElement(c.Z,{className:Z.Z.optionTipsTrigger,onClick:e=>e.stopPropagation()})),"上传物料 ",m?C.createElement(s.Z,null):C.createElement(d.Z,null)))}},47707:function(e,t,n){var i=n(62732),a=Object.defineProperty,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&p(e,n,t[n]);if(r)for(var n of r(t))l.call(t,n)&&p(e,n,t[n]);return e};const s="#3955f6",d={sidebarItem:(0,i.iv)({display:"flex",alignItems:"center",padding:"0 8px",height:"46px",fontSize:"14px",cursor:"pointer","&.active":{color:s,backgroundColor:"#eef3fe"}})},m={wrapper:(0,i.iv)({minHeight:"100%"}),filterWrapper:(0,i.iv)({padding:"16px 30px",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center",minWidth:"1230px",width:"100%",position:"relative","& .ant-form-item":{marginBottom:0},"& .ant-input-search-button":{},"& .ant-select-selector":{padding:"2px 4px"},"& .ant-form-item-label > label":{height:"34px",lineHeight:"34px"},"& .ant-input":{padding:"5px 11px"},"& .anticon-search":{transform:"scale(0.85)"}}),headerWrapper:(0,i.iv)({width:"90%"}),filterLabel:(0,i.iv)({color:"#999",width:"60px"}),section:(0,i.iv)({borderBottom:"1px solid #EEE",userSelect:"none",width:"95%",margin:"5px 0","&:last-child":{borderBottom:"none"}}),container:(0,i.iv)({margin:"0 auto",padding:"16px"}),content:(0,i.iv)({position:"relative",display:" flex",margin:"0 auto",minWidth:"1208px",minHeight:"1501px",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.08)",borderRadius:"4px",flexFlow:"row wrap"}),deleteCatModalContent:(0,i.iv)({padding:"16px 0",color:"#666"}),deleteCatModalCheckbox:(0,i.iv)({color:"#666"}),optionBar:(0,i.iv)({padding:"24px 32px"}),optionCheckbox:(0,i.iv)({marginRight:"24px"}),optionButton:(0,i.iv)({marginRight:"24px",padding:"5px 15px",height:"34px"}),optionTipsTrigger:(0,i.iv)({color:"#999","&:hover":{color:s}}),uploadMenuItem:(0,i.iv)({display:"flex",width:"258px"}),updateMenuTitle:(0,i.iv)({flex:"0 0 72px",width:"72px"}),uploadMenuDesc:(0,i.iv)({flex:1,paddingLeft:"8px",borderLeft:"1px solid #ebebeb",fontSize:"12px",color:"#999"}),list:(0,i.iv)({display:"flex",flexWrap:"wrap",padding:"0 32px 8px",fontSize:0}),item:(0,i.iv)({position:"relative",margin:"0 2%",marginBottom:"20px",minWidth:"230px",height:"270px",border:"1px solid #ebebeb",borderRadius:"4px",overflow:"hidden",flex:"0 0 16%"}),itemPreview:(0,i.iv)({position:"absolute",top:0,bottom:"60px",left:0,right:0,backgroundColor:"#F2F4F7"}),itemCatTag:(0,i.iv)({position:"absolute",top:0,left:0,padding:"0 8px",borderRadius:"4px 0 4px 0",backgroundColor:"rgba(49, 72, 136, .6)",lineHeight:"20px",fontSize:"12px",color:"#fff"}),statusTag:(0,i.iv)({position:"absolute",bottom:0,right:0,padding:"0 8px",borderRadius:"4px 0 4px 0",backgroundColor:"rgba(57, 85, 246,.8)",lineHeight:"20px",fontSize:"12px",color:"#fff"}),itemCheckbox:(0,i.iv)({position:"absolute",top:"8px",right:"8px",zIndex:10}),itemPoster:(0,i.iv)({width:"100%",height:"100%",objectFit:"contain"}),itemFooter:(0,i.iv)({position:"absolute",bottom:0,left:0,right:0,display:"flex",flexWrap:"wrap",alignItems:"center",padding:"0 12px",height:"60px",overflow:"hidden"}),itemId:(0,i.iv)({marginRight:"4px",padding:"0 4px",lineHeight:"20px",backgroundColor:"#F0F0F0",borderRadius:"4px",fontSize:"12px",cursor:"pointer"}),itemIdTips:(0,i.iv)({fontSize:"12px","& .ant-btn-sm":{fontSize:"12px"}}),itemName:(0,i.iv)({lineHeight:"20px",fontSize:"14px",whiteSpace:"nowrap",width:"180px",overflow:"hidden",textOverflow:"ellipsis"}),editItemName:(0,i.iv)({lineHeight:"20px",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"180px",border:"1px solid #2f4f7"}),itemOptions:(0,i.iv)({position:"absolute",bottom:0,left:0,right:0,display:"flex",width:"100%",justifyContent:"space-around",zIndex:10,backgroundColor:"rgba(255, 255, 255, 0.8)","& .ant-btn":{padding:"5px 0px"}}),itemTags:(0,i.iv)({lineHeight:"20px",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",position:"relative",width:"100%"}),modalFooter:(0,i.iv)({padding:"14px 0",display:"flex",alignItems:"center"}),modalFooterTips:(0,i.iv)({flex:1,textAlign:"left",color:"#999"}),stringLength:(0,i.iv)({color:"#c1c1c1",pointerEvents:"none"}),copyInput:(0,i.iv)({position:"absolute",top:0,left:"-10px",padding:"0",width:"10px",height:"100%",fontSize:"12px",opacity:0}),pagination:(0,i.iv)({padding:"0 32px 32px",textAlign:"right","& .ant-pagination-item":{minWidth:"26px",height:"26px",lineHeight:"24px",fontSize:"12px"},"& .ant-pagination-prev, & .ant-pagination-next, & .ant-pagination-jump-prev, & .ant-pagination-jump-next":{minWidth:"26px",height:"26px",lineHeight:"24px"},"& .ant-select-single:not(.ant-select-customize-input) .ant-select-selector":{height:"26px"},"& .ant-select-single:not(.ant-select-customize-input) .ant-select-selector .ant-select-selection-search-input":{height:"24px"},"& .ant-select-selection-item":{lineHeight:"24px!important",fontSize:"12px!important"},"& .ant-pagination-options-quick-jumper":{height:"26px",lineHeight:"26px"},"& .ant-pagination-options-quick-jumper input":{height:"26px",lineHeight:"26px",fontSize:"12px"},"& .ant-pagination-total-text":{marginRight:"16px",height:"26px",lineHeight:"26px"}}),modalWrapper:(0,i.iv)({"& .ant-modal-body":{paddingTop:"24px"},"& .ant-modal-close":{top:"5px"},"& .ant-modal-confirm-content":{marginTop:"24px",color:"#666"},"& .ant-modal-confirm-btns":{marginTop:"32px"}}),row:(0,i.iv)({display:"flex",alignItems:"flex-start",padding:"8px 10px"}),label:(0,i.iv)({width:60}),items:(0,i.iv)({flex:1,display:"flex",flexWrap:"wrap"}),searchBox:(0,i.iv)({width:200,display:"flex",alignItems:"center"}),addButton:(0,i.iv)({margin:"10px"}),radioButton:(0,i.iv)({margin:"10px",border:"none",borderRadius:"2px","&:hover":{color:"rgb(51,51,51)"},"&::before":{width:"0 !important"}}),select:(0,i.iv)({maxHeight:"50px",color:"#333333",marginTop:"0","& .ant-select-selector":{paddingRight:"0px !important"},"& .ant-select-selection-overflow":{maxHeight:"50px",overflow:"auto",width:"100%"}})};t.Z=c(c({},d),m)},60920:function(e,t,n){var i=n(22142),a=n(26494),r=n(2961),o=n(61754),l=n(81513),p=n(62255),c=n(70072),s=n(32078),d=n(76151),m=n(68961),u=n(16969),g=n(99305),x=n(55309),h=n(61645),f=n(73760),v=n(98466),b=n(47914),y=n(99674),E=n(91094),w=n(75382),Z=n(22142),C=Object.defineProperty,k=Object.defineProperties,S=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,F=(e,t,n)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,z=(e,t)=>{for(var n in t||(t={}))P.call(t,n)&&F(e,n,t[n]);if(j)for(var n of j(t))I.call(t,n)&&F(e,n,t[n]);return e},O=(e,t)=>k(e,S(t)),R=(e,t,n)=>new Promise(((i,a)=>{var r=e=>{try{l(n.next(e))}catch(e){a(e)}},o=e=>{try{l(n.throw(e))}catch(e){a(e)}},l=e=>e.done?i(e.value):Promise.resolve(e.value).then(r,o);l((n=n.apply(e,t)).next())}));const N=e=>{var t;return"string"==typeof e&&null!=(t=null==e?void 0:e.split(",").filter((e=>e)))?t:[]};t.Z=({id:e,type:t,onCancel:n,onRefetch:C})=>{const[k]=r.Z.useForm(),[S,j]=(0,i.useState)({}),{categories:P,getCategories:I}=(0,E.Z)(),[F,T]=(0,i.useState)({detail:!1,examine:!1,delete:!1,update:!1,reject:!1,agree:!1,shelve:!1,offShelve:!1}),[H,M]=(0,i.useState)(!1),L="super"===t||S.status===b.F6.shelve;console.log("******:",t,S),(0,i.useEffect)((()=>{A()}),[e]);const W=(e,t)=>{T((n=>O(z({},n),{[e]:t})))},A=()=>R(void 0,null,(function*(){var e,t,n;try{W("detail",!0);const i=yield B();console.log("detail:",i),i&&(yield I(null==(e=i.type)?void 0:e.cid)),k.setFieldsValue({name:i.name,description:i.description,category:null!=(t=i.category)?t:"0",price:null!=(n=i.price)?n:0,tags:N(i.tags),cover:i.cover,rejectDesc:i.rejectDesc})}catch(e){o.ZP.error(e.message)}finally{W("detail",!1)}})),B=(0,a.Z)((()=>R(void 0,null,(function*(){var n,i;if(!(0,f.isNil)(e)){const a="examine"===t?yield(0,h.KI)(e):yield(0,y.J2)(e);return j(O(z({},a),{type:a.type,category:"",price:0,tags:null==a?void 0:a.tags,cover:a.cover||((null==(n=a.url)?void 0:n.endsWith("jpg"))||(null==(i=a.url)?void 0:i.endsWith("png"))?a.url:"")})),a}})))),D=()=>{const e=k.getFieldsValue();return{name:e.name,description:e.description,category:e.category,cover:e.cover,tags:(t=e.tags,null!=(n=null==t?void 0:t.join(","))?n:"")};var t,n},$=()=>R(void 0,null,(function*(){k.validateFields().then((()=>R(this,null,(function*(){try{W("examine",!0);const t=z(O(z({},D()),{resourceId:S.id,extra:(e=S,console.log("getExtra:",e),e.extra?JSON.stringify(e.extra):"")}),(0,f.pick)(S,["cover","type","url","previewUrl"]));yield(0,y.Xi)(t),n(),o.ZP.success("发布成功，等待管理员审核")}catch(e){o.ZP.error(e.message)}finally{W("examine",!1)}var e})))).catch((e=>{console.log("e:",e)}))})),U=()=>R(void 0,null,(function*(){k.validateFields().then((()=>R(this,null,(function*(){try{W("examine",!0);const e=D();yield(0,y.Ks)(S.id,O(z(z({},S),e),{status:b.F6.examine,rejectDesc:""})),n(),null==C||C(),o.ZP.success("发布成功，等待管理员审核")}catch(e){o.ZP.error(e.message)}finally{W("examine",!1)}})))).catch((e=>{console.log("e:",e)}))})),V=()=>R(void 0,null,(function*(){k.validateFields().then((()=>R(this,null,(function*(){try{W("update",!0);const e=D();yield(0,y.Ks)(S.id,e),o.ZP.success("修改成功")}catch(e){o.ZP.error(e.message)}finally{W("update",!1)}})))).catch((e=>{console.log("e:",e)}))})),q=e=>R(void 0,null,(function*(){try{W("delete",!0),yield(0,y.Dp)(e),n(),o.ZP.success("删除成功"),yield null==C?void 0:C()}catch(e){o.ZP.error(e.message)}finally{W("delete",!1)}})),K=()=>R(void 0,null,(function*(){k.validateFields().then((()=>R(this,null,(function*(){try{W("reject",!0);const e=k.getFieldValue("rejectDesc");console.log("reject:",e),yield(0,y.Ks)(S.id,{status:b.F6.reject,rejectDesc:e}),o.ZP.success("资源已拒绝审核"),n(),null==C||C()}catch(e){o.ZP.error(e.message)}finally{W("reject",!1)}})))).catch((e=>{console.log("e:",e)}))})),_=()=>R(void 0,null,(function*(){try{W("agree",!0),yield(0,y.Ks)(S.id,{status:b.F6.shelve}),o.ZP.success("资源通过审核，自动上架"),n(),null==C||C()}catch(e){o.ZP.error(e.message)}finally{W("agree",!1)}})),G=()=>R(void 0,null,(function*(){try{W("offShelve",!0),yield(0,y.Ks)(S.id,{status:b.F6.offShelve}),o.ZP.success("已下架"),n(),null==C||C()}catch(e){o.ZP.error(e.message)}finally{W("offShelve",!1)}})),J=()=>R(void 0,null,(function*(){try{W("shelve",!0),yield(0,y.Ks)(S.id,{status:b.F6.shelve}),o.ZP.success("已上架"),n(),null==C||C()}catch(e){o.ZP.error(e.message)}finally{W("shelve",!1)}})),Q=Z.createElement("div",null,H?Z.createElement(g.Z,null):Z.createElement(x.Z,null),Z.createElement("div",{style:{marginTop:8}},"上传")),Y=Z.createElement(Z.Fragment,null,Z.createElement(l.Z,null),Z.createElement(r.Z.Item,{name:"rejectDesc",label:Z.createElement("span",null,"拒绝"),rules:[{required:!0,message:"请输入拒绝原因"}]},Z.createElement(p.Z.TextArea,{placeholder:"请输入拒绝原因",maxLength:125,disabled:!("super"===t&&S.status===b.F6.examine)})));return Z.createElement(s.Z,{visible:!0,footer:(()=>{if("examine"===t)return Z.createElement(c.Z,{type:"primary",loading:F.examine,onClick:$},"发布");if(S.status===b.F6.examine){if("admin"===t)return Z.createElement(Z.Fragment,null,Z.createElement(c.Z,{type:"primary",danger:!0,loading:F.delete,onClick:()=>{q([S.id])}},"删除"),Z.createElement(c.Z,{type:"primary",loading:F.update,onClick:V},"修改"));if("super"===t)return Z.createElement(Z.Fragment,null,Z.createElement(c.Z,{danger:!0,type:"primary",loading:F.reject,onClick:K},"拒绝"),Z.createElement(c.Z,{type:"primary",loading:F.agree,onClick:_},"通过"))}else{if(S.status===b.F6.shelve)return Z.createElement(c.Z,{type:"primary",loading:F.offShelve,onClick:G},"下架");if(S.status===b.F6.offShelve){if("admin"===t)return Z.createElement(Z.Fragment,null,Z.createElement(c.Z,{type:"primary",danger:!0,loading:F.delete,onClick:()=>{q([S.id])}},"删除"),Z.createElement(c.Z,{type:"primary",loading:F.shelve,onClick:J},"上架"));if("super"===t)return Z.createElement(c.Z,{type:"primary",loading:F.shelve,onClick:J},"上架")}else if(S.status===b.F6.reject){if("admin"===t)return Z.createElement(Z.Fragment,null,Z.createElement(c.Z,{type:"primary",danger:!0,loading:F.delete,onClick:()=>{q([S.id])}},"删除"),Z.createElement(c.Z,{type:"primary",loading:F.examine,onClick:U},"重新发布"));if("super"===t)return Z.createElement(c.Z,{type:"primary",loading:F.agree,onClick:_},"通过")}else if(S.status===b.F6.deleted){if("admin"===t)return Z.createElement(c.Z,{type:"primary",loading:F.examine,onClick:U},"重新发布");if("super"===t)return null}}})(),onCancel:n},F.detail?Z.createElement(d.Z,null):Z.createElement(r.Z,{form:k,colon:!1,labelCol:{span:6},wrapperCol:{span:14}},"examine"!==t&&Z.createElement(r.Z.Item,{label:Z.createElement("span",null,"状态")},Z.createElement("span",{style:{color:"white",padding:"0 8px",borderRadius:"4px 0 4px 0",backgroundColor:(0,w.n)(S.status)}},b.O8[S.status])),Z.createElement(r.Z.Item,{name:"name",label:Z.createElement("span",null,"名称"),rules:[{required:!0,message:"请输入商品名称"}]},Z.createElement(p.Z,{placeholder:"请输入商品名称",maxLength:25,disabled:L})),Z.createElement(r.Z.Item,{name:"description",label:Z.createElement("span",null,"描述")},Z.createElement(p.Z.TextArea,{placeholder:"请输入商品描述",maxLength:125,disabled:L})),Z.createElement(r.Z.Item,{name:"category",label:Z.createElement("span",null,"分类")},Z.createElement(m.Z,{style:{width:"100%"},disabled:L,options:P})),Z.createElement(r.Z.Item,{label:Z.createElement("span",null,"封面"),name:"cover"},Z.createElement(u.Z,{name:"cover",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,disabled:L,beforeUpload:e=>R(void 0,null,(function*(){if("image/jpeg"===e.type||"image/png"===e.type){M(!0);try{const t=yield(0,v.cT)(e);j((e=>O(z({},e),{cover:t.downloadUrl}))),k.setFieldValue("cover",t.downloadUrl)}catch(e){o.ZP.error(e.message)}return M(!1),!1}o.ZP.error("只能上传图片")}))},(null==S?void 0:S.cover)?Z.createElement("img",{src:null==S?void 0:S.cover,alt:"封面",style:{height:"100%",width:"100%"}}):Q)),Z.createElement(r.Z.Item,{name:"price",label:Z.createElement("span",null,"价格")},Z.createElement(p.Z,{disabled:!0,prefix:"￥",value:S.price+""})),Z.createElement(r.Z.Item,{name:"tags",label:Z.createElement("span",null,"标签")},Z.createElement(m.Z,{mode:"tags",style:{width:"100%"},tokenSeparators:[","],disabled:L,options:N(S.tags).map((e=>({label:e,value:e}))).filter((e=>e))})),(S.rejectDesc&&S.status===b.F6.reject||"super"===t&&S.status===b.F6.examine)&&Y))}},91094:function(e,t,n){var i=n(99674),a=n(22142);const r={label:"全部",value:"0"};t.Z=()=>{const[e,t]=(0,a.useState)([r]);return{categories:e,getCategories:e=>{return void 0,null,n=function*(){const n=yield(0,i.n3)(e);t([r,...n.map((e=>({label:e.name,value:e.id})))])},new Promise(((e,t)=>{var i=e=>{try{r(n.next(e))}catch(e){t(e)}},a=e=>{try{r(n.throw(e))}catch(e){t(e)}},r=t=>t.done?e(t.value):Promise.resolve(t.value).then(i,a);r((n=n.apply(undefined,null)).next())}));var n}}}},75382:function(e,t,n){n.d(t,{Z:function(){return ve},n:function(){return fe}});var i=n(2961),a=n(16066),r=n(26750),o=n(68961),l=n(62255),p=n(78048),c=n(47914),s=n(22142);const d=[{label:"全部",value:-1},...Object.entries(c.O8).filter((([,e])=>"number"==typeof e)).map((([e,t])=>({label:e,value:t}))).filter((e=>"删除"!==e.label))],m=[{label:"全部",value:-1},...Object.entries(c.Ah).filter((([,e])=>"number"==typeof e)).map((([e,t])=>({label:e,value:t})))];var u=({keyword:e,type:t,status:n,category:c,categories:u,onChange:g,onSearch:x})=>{const[h]=i.Z.useForm();return s.createElement("div",{className:p.Z.filterWrapper},s.createElement(i.Z,{form:h,colon:!1},s.createElement(a.Z,{gutter:36,justify:"center"},s.createElement(r.Z,{span:6,xxl:5},s.createElement(i.Z.Item,{label:s.createElement("span",{className:p.Z.filterLabel},"类型")},s.createElement(o.Z,{placeholder:"请选择",maxTagCount:2,showArrow:!0,value:t,onChange:e=>{g({type:e,category:"0"})}},m.map((e=>s.createElement(o.Z.Option,{key:e.value,value:e.value},e.label)))))),s.createElement(r.Z,{span:6,xxl:5},s.createElement(i.Z.Item,{label:s.createElement("span",{className:p.Z.filterLabel},"分类")},s.createElement(o.Z,{placeholder:"请选择",maxTagCount:2,showArrow:!0,value:c,onChange:e=>{g({category:e})}},u.map((e=>s.createElement(o.Z.Option,{key:e.value,value:e.value},e.label)))))),s.createElement(r.Z,{span:6,xxl:5},s.createElement(i.Z.Item,{label:s.createElement("span",{className:p.Z.filterLabel},"搜索")},s.createElement(l.Z.Search,{placeholder:"请输入资源名称、ID",value:e,onChange:e=>{g({keyword:e.target.value})},onSearch:x}))),s.createElement(r.Z,{span:6,xxl:5},s.createElement(i.Z.Item,{label:s.createElement("span",{className:p.Z.filterLabel},"商品状态")},s.createElement(o.Z,{allowClear:!0,maxTagCount:2,placeholder:"请选择商品状态",showArrow:!0,value:n,onChange:e=>{g({status:e})}},d.map((e=>s.createElement(o.Z.Option,{key:e.value,value:e.value},e.label)))))))))},g=n(22142),x=n(91094),h=n(50509),f=n(61754),v=n(32078),b=n(76151),y=n(34394),E=n(78296),w=n(70072),Z=n(50969),C=n(69641),k=n(72299),S=n(1502),j=n(26494),P=n(62732),I=n(60920),F=n(40953),z=Object.defineProperty,O=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,T=(e,t,n)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,H=(e,t)=>{for(var n in t||(t={}))R.call(t,n)&&T(e,n,t[n]);if(O)for(var n of O(t))N.call(t,n)&&T(e,n,t[n]);return e};const M="#3955f6",L={sidebarItem:(0,P.iv)({display:"flex",alignItems:"center",padding:"0 8px",height:"46px",fontSize:"14px",cursor:"pointer","&:hover":{color:M,backgroundColor:"#eef3fe"},"&.active":{color:M,backgroundColor:"#eef3fe"}})},W={wrapper:(0,P.iv)({backgroundColor:"#f8f9fa",minHeight:"100%"}),filterWrapper:(0,P.iv)({padding:"16px 30px",backgroundColor:"#fff",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center",minWidth:"1230px",width:"100%",position:"relative",background:"#fff","& .ant-form-item":{marginBottom:0},"& .ant-input-search-button":{backgroundColor:"#fafafa"},"& .ant-select-selector":{padding:"2px 4px"},"& .ant-form-item-label > label":{height:"34px",lineHeight:"34px"},"& .ant-input":{padding:"5px 11px"},"& .anticon-search":{transform:"scale(0.85)"}}),headerWrapper:(0,P.iv)({width:"90%"}),filterLabel:(0,P.iv)({color:"#999",width:"60px"}),section:(0,P.iv)({borderBottom:"1px solid #EEE",userSelect:"none",width:"95%",margin:"5px 0","&:last-child":{borderBottom:"none"}}),container:(0,P.iv)({margin:"0 auto",padding:"16px"}),content:(0,P.iv)({position:"relative",display:" flex",margin:"0 auto",minWidth:"1208px",minHeight:"1501px",backgroundColor:"#fff",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.08)",borderRadius:"4px",flexFlow:"row wrap"}),deleteCatModalContent:(0,P.iv)({padding:"16px 0",color:"#666"}),deleteCatModalCheckbox:(0,P.iv)({color:"#666"}),optionBar:(0,P.iv)({padding:"24px 32px"}),optionCheckbox:(0,P.iv)({marginRight:"24px"}),optionButton:(0,P.iv)({marginRight:"24px",padding:"5px 15px",height:"34px",backgroundColor:"#fafafa"}),optionTipsTrigger:(0,P.iv)({color:"#999","&:hover":{color:M}}),uploadMenuItem:(0,P.iv)({display:"flex",width:"258px"}),updateMenuTitle:(0,P.iv)({flex:"0 0 72px",width:"72px"}),uploadMenuDesc:(0,P.iv)({flex:1,paddingLeft:"8px",borderLeft:"1px solid #ebebeb",fontSize:"12px",color:"#999"}),list:(0,P.iv)({display:"flex",flexWrap:"wrap",padding:"0 32px 8px",fontSize:0}),item:(0,P.iv)({position:"relative",margin:"0 2%",marginBottom:"20px",minWidth:"230px",height:"270px",background:"#fff",border:"1px solid #ebebeb",borderRadius:"4px",overflow:"hidden",flex:"0 0 16%"}),itemPreview:(0,P.iv)({position:"absolute",top:0,bottom:"60px",left:0,right:0,backgroundColor:"#F2F4F7"}),itemCatTag:(0,P.iv)({position:"absolute",top:0,left:0,padding:"0 8px",borderRadius:"4px 0 4px 0",backgroundColor:"rgba(49, 72, 136, .6)",lineHeight:"20px",fontSize:"12px",color:"#fff"}),statusTag:(0,P.iv)({position:"absolute",bottom:0,right:0,padding:"0 8px",borderRadius:"4px 0 4px 0",backgroundColor:"rgba(57, 85, 246,.8)",lineHeight:"20px",fontSize:"12px",color:"#fff"}),itemCheckbox:(0,P.iv)({position:"absolute",top:"8px",right:"8px",zIndex:10}),itemPoster:(0,P.iv)({width:"100%",height:"100%",objectFit:"contain"}),itemFooter:(0,P.iv)({position:"absolute",bottom:0,left:0,right:0,display:"flex",flexWrap:"wrap",alignItems:"center",padding:"0 12px",height:"60px",overflow:"hidden"}),itemId:(0,P.iv)({marginRight:"4px",padding:"0 4px",lineHeight:"20px",backgroundColor:"#F0F0F0",borderRadius:"4px",fontSize:"12px",cursor:"pointer"}),itemIdTips:(0,P.iv)({fontSize:"12px","& .ant-btn-sm":{fontSize:"12px"}}),itemName:(0,P.iv)({lineHeight:"20px",fontSize:"14px",whiteSpace:"nowrap",width:"180px",overflow:"hidden",textOverflow:"ellipsis"}),editItemName:(0,P.iv)({lineHeight:"20px",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"180px",border:"1px solid #2f4f7"}),itemOptions:(0,P.iv)({position:"absolute",bottom:0,left:0,right:0,display:"flex",width:"100%",justifyContent:"space-around",zIndex:10,backgroundColor:"rgba(255, 255, 255, 0.8)","& .ant-btn":{padding:"5px 0px"}}),itemTags:(0,P.iv)({lineHeight:"20px",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",position:"relative",width:"100%"}),modalFooter:(0,P.iv)({padding:"14px 0",display:"flex",alignItems:"center"}),modalFooterTips:(0,P.iv)({flex:1,textAlign:"left",color:"#999"}),stringLength:(0,P.iv)({color:"#c1c1c1",pointerEvents:"none"}),copyInput:(0,P.iv)({position:"absolute",top:0,left:"-10px",padding:"0",width:"10px",height:"100%",fontSize:"12px",opacity:0}),pagination:(0,P.iv)({padding:"0 32px 32px",textAlign:"right","& .ant-pagination-item":{minWidth:"26px",height:"26px",lineHeight:"24px",fontSize:"12px"},"& .ant-pagination-prev, & .ant-pagination-next, & .ant-pagination-jump-prev, & .ant-pagination-jump-next":{minWidth:"26px",height:"26px",lineHeight:"24px"},"& .ant-select-single:not(.ant-select-customize-input) .ant-select-selector":{height:"26px"},"& .ant-select-single:not(.ant-select-customize-input) .ant-select-selector .ant-select-selection-search-input":{height:"24px"},"& .ant-select-selection-item":{lineHeight:"24px!important",fontSize:"12px!important"},"& .ant-pagination-options-quick-jumper":{height:"26px",lineHeight:"26px"},"& .ant-pagination-options-quick-jumper input":{height:"26px",lineHeight:"26px",fontSize:"12px"},"& .ant-pagination-total-text":{marginRight:"16px",height:"26px",lineHeight:"26px"}}),modalWrapper:(0,P.iv)({"& .ant-modal-body":{paddingTop:"24px"},"& .ant-modal-close":{top:"5px"},"& .ant-modal-confirm-content":{marginTop:"24px",color:"#666"},"& .ant-modal-confirm-btns":{marginTop:"32px"}}),row:(0,P.iv)({display:"flex",alignItems:"flex-start",padding:"8px 10px"}),label:(0,P.iv)({width:60}),items:(0,P.iv)({flex:1,display:"flex",flexWrap:"wrap"}),searchBox:(0,P.iv)({width:200,display:"flex",alignItems:"center"}),addButton:(0,P.iv)({margin:"10px"}),radioButton:(0,P.iv)({margin:"10px",border:"none",borderRadius:"2px","&:hover":{color:"rgb(51,51,51)"},"&::before":{width:"0 !important"}}),select:(0,P.iv)({maxHeight:"50px",color:"#333333",marginTop:"0","& .ant-select-selector":{paddingRight:"0px !important"},"& .ant-select-selection-overflow":{maxHeight:"50px",overflow:"auto",width:"100%"}})};var A=H(H({},L),W),B=n(16848),D=n(99674),$=n(8702),U=(e,t,n)=>new Promise(((i,a)=>{var r=e=>{try{l(n.next(e))}catch(e){a(e)}},o=e=>{try{l(n.throw(e))}catch(e){a(e)}},l=e=>e.done?i(e.value):Promise.resolve(e.value).then(r,o);l((n=n.apply(e,t)).next())}));function V({item:e,selected:t,onSelect:n,onShowModal:i,onPreviewStart:a,handlePreviewEnd:r,onRefetch:o}){const[l,p]=(0,g.useState)(!1),s=(0,g.useRef)(null),d=(0,g.useRef)(null),{previewUrl:m,type:u}=e,x=(0,j.Z)((t=>{var n,i;p(!0);const{offsetLeft:r,offsetTop:o,clientWidth:l,clientHeight:s}=t.currentTarget;if(![c.mZ.Video,c.mZ.Audio,c.mZ.Image,c.mZ.Text].includes(e.type.cid))if(null==(n=e.extra)?void 0:n.previewVideo){const t=null==(i=e.extra)?void 0:i.previewVideo;a(r,o,l,s,t,"Video")}else(0,$.Nm)({id:u.cid})&&a(r,o,l,s,m,B.N7[u.cid])})),h=(0,j.Z)((()=>{p(!1),r()})),v=(0,j.Z)((()=>{s.current&&(s.current.value=String(e.id),s.current.select(),document.execCommand("Copy"),f.ZP.info("复制成功"))}));return g.createElement("div",{className:A.item,onMouseEnter:e=>x(e),onMouseLeave:h},g.createElement("div",{ref:d,className:A.itemPreview},g.createElement(F.Z,{data:e,CoverBoxRef:d}),g.createElement("div",{className:A.itemCatTag},e.type.name),g.createElement("div",{className:A.statusTag,style:{backgroundColor:fe(e.status)}},c.O8[e.status]),g.createElement(y.Z,{className:A.itemCheckbox,checked:t,onChange:t=>{const{checked:i}=t.target;n(e.id,i)}}),l&&g.createElement("div",{className:A.itemOptions},e.status===c.F6.shelve&&g.createElement(w.Z,{type:"link",onClick:()=>U(this,null,(function*(){try{yield(0,D.Ks)(e.id,{status:c.F6.offShelve}),null==o||o()}catch(e){f.ZP.error(e.message)}}))},"下架"),e.status===c.F6.offShelve&&g.createElement(w.Z,{type:"link",onClick:()=>U(this,null,(function*(){try{yield(0,D.Ks)(e.id,{status:c.F6.shelve}),null==o||o()}catch(e){f.ZP.error(e.message)}}))},"上架"),g.createElement(w.Z,{type:"link",onClick:()=>i("detail",[e.id],e)},"详情"),e.type.cid===c.mZ.Component2D&&g.createElement(w.Z,{type:"link",onClick:()=>{const t=new URL(location.href);t.pathname="/play/component",t.search=`?url=${e.previewUrl}`,location.href=t.href}},"查看"))),g.createElement("div",{className:A.itemFooter},g.createElement("div",{className:A.itemFooter},g.createElement(Z.Z,{content:g.createElement("div",{className:A.itemIdTips},g.createElement("span",null,"物料ID: ",e.id),g.createElement(w.Z,{size:"small",type:"link",onClick:v},"复制"))},g.createElement("div",{className:A.itemId},"ID")),g.createElement(Z.Z,{content:e.name},g.createElement("div",{className:A.itemName},e.name)),g.createElement("input",{className:A.copyInput,type:"text",ref:s,value:e.id,readOnly:!0})),g.createElement("input",{className:A.copyInput,type:"text",ref:s,value:e.id,readOnly:!0})))}var q=n.p+"c6b730343e54e9bcc338528bebfdfc6c.svg";n(61645),Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var K=n(1293),_=Object.defineProperty,G=Object.defineProperties,J=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,ee=(e,t,n)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,te=(e,t)=>{for(var n in t||(t={}))Y.call(t,n)&&ee(e,n,t[n]);if(Q)for(var n of Q(t))X.call(t,n)&&ee(e,n,t[n]);return e},ne=(e,t)=>G(e,J(t));Laya.init(0,0),document.body.style.overflow="auto";const ie=(0,P.iv)({padding:"32px",height:"428px",textAlign:"center"});function ae({type:e,page:t,pageSize:n,total:i,list:a,onChange:r,onRefetch:o,isFetching:l}){console.log("list:",a,i);const[p,s]=(0,g.useState)({}),d=(0,g.useRef)(null),{clearIframe:m,postMessage:u}=(0,K.s_)(d),[x,P]=(0,g.useState)(0),[F,z]=(0,g.useState)(0),[O,R]=(0,g.useState)(0),[N,T]=(0,g.useState)(!1),[H,M]=(0,g.useState)(""),[L,W]=(0,g.useState)({detail:{visible:!1,id:""}}),B=(0,g.useMemo)((()=>(a||[]).filter((e=>{var t;return null==(t=p[e.id])?void 0:t.selected}))),[p,a]),$=B.length===(a&&a.length),U=(0,j.Z)(((e,t)=>{s((n=>ne(te({},n),{[e]:ne(te({},n[e]),{selected:t})})))})),_=(0,j.Z)((e=>{const{checked:t}=e.target;s((e=>{const n={};return null==a||a.forEach((i=>{n[i.id]=ne(te({},e[i.id]),{selected:t})})),n}))})),G=(0,j.Z)((e=>()=>{W((t=>ne(te({},t),{[e]:ne(te({},t[e]),{visible:!1})})))})),J=(e,t,n,i,a,r)=>{P(e),z(t),R(n),T(!0),"Video"===r&&M(a),d.current&&u("particle"===r?{type:"change",url:a,projectType:r,width:2*n,height:2*i}:{type:"change",url:a,projectType:r})},Q=()=>{M(""),T(!1),m()},Y=(0,g.useMemo)((()=>g.createElement(h.Z,null,g.createElement(h.Z.Item,{key:"delete",onClick:()=>{const e=B.length;0!==e?v.Z.confirm({className:A.modalWrapper,title:"删除物料",icon:null,centered:!0,closable:!0,content:`您将删除${e}个物料`,okText:"确认",cancelText:"取消",onOk:()=>{return e=this,null,t=function*(){try{const e=B.filter((e=>e.status===c.F6.shelve)).map((e=>e.name));yield(0,D.Dp)(B.filter((e=>e.status!==c.F6.shelve)).map((e=>e.id))),e.forEach((e=>{f.ZP.error(`${e}已上架，无法删除`)})),o()}catch(e){f.ZP.error(e.message)}},new Promise(((n,i)=>{var a=e=>{try{o(t.next(e))}catch(e){i(e)}},r=e=>{try{o(t.throw(e))}catch(e){i(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,r);o((t=t.apply(e,null)).next())}));var e,t}}):f.ZP.error("请勾选需要操作的素材")}},"批量删除"))),[B,o]);return(0,g.useEffect)((()=>{a&&s((e=>{const t={};for(const n of a)t[n.id]=e[n.id]||{selected:!1};return t}))}),[a]),a?g.createElement(g.Fragment,null,g.createElement(g.Fragment,null,g.createElement("div",{className:A.optionBar},(a||[]).length>0&&g.createElement(g.Fragment,null,g.createElement(y.Z,{className:A.optionCheckbox,checked:$,indeterminate:B.length>0&&!$,onChange:_},"全选"),g.createElement(E.Z,{overlay:Y,trigger:["click"]},g.createElement(w.Z,{className:A.optionButton},g.createElement(Z.Z,{placement:"bottom",content:g.createElement("div",{style:{fontSize:"12px"}},g.createElement("div",null,'"批量修改分类"操作前需选择素材类别'))},g.createElement(k.Z,{className:A.optionTipsTrigger,onClick:e=>e.stopPropagation()})),"批量操作 ",g.createElement(S.Z,null))))),g.createElement(b.Z,{size:"large",spinning:l},0===(a||[]).length?g.createElement("div",{className:ie},g.createElement("img",{src:q}),g.createElement("p",{style:{color:"#999"}},"该分类下暂无相关物料")):g.createElement(g.Fragment,null,g.createElement("div",{className:A.list},(a||[]).map((e=>{var t,n;return g.createElement(V,{key:e.id,item:e,selected:null!=(n=null==(t=p[e.id])?void 0:t.selected)&&n,onSelect:U,onPreviewStart:J,handlePreviewEnd:Q,onShowModal:(e,t,n)=>{W((i=>ne(te({},i),{[e]:te(ne(te({},i[e]),{visible:!0}),"detail"===e?{id:t[0]}:{ids:t,item:n})})))},onRefetch:o})})),g.createElement("div",{style:{left:`${x+1}px`,top:`${F}px`,width:`${O}px`,height:"209px",position:"absolute",zIndex:9,visibility:N?"visible":"hidden",pointerEvents:"none"},onMouseLeave:Q},H&&g.createElement("video",{src:H,style:{position:"absolute",zIndex:10},autoPlay:!0,loop:!0,width:O,height:209}),g.createElement(K.t1,{ref:d,width:O,height:209}))),g.createElement("div",{className:A.pagination},g.createElement(C.Z,{current:t,total:i,showTotal:e=>`共${e}条记录`,defaultPageSize:n,defaultCurrent:t,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["20","60","100"],onChange:(e,t)=>{r({page:e,pageSize:t})}}))))),L.detail.visible&&g.createElement(I.Z,{id:""+L.detail.id,type:e,onRefetch:o,onCancel:G("detail")})):g.createElement("div",{className:ie},g.createElement(b.Z,{size:"large",spinning:!0}))}var re=n(73760),oe=(e,t,n)=>new Promise(((i,a)=>{var r=e=>{try{l(n.next(e))}catch(e){a(e)}},o=e=>{try{l(n.throw(e))}catch(e){a(e)}},l=e=>e.done?i(e.value):Promise.resolve(e.value).then(r,o);l((n=n.apply(e,t)).next())}));const le=(0,re.throttle)((e=>oe(void 0,null,(function*(){return yield(0,D._h)(e)}))),1e3,{trailing:!1});var pe=n(22142),ce=Object.defineProperty,se=Object.defineProperties,de=Object.getOwnPropertyDescriptors,me=Object.getOwnPropertySymbols,ue=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,xe=(e,t,n)=>t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,he=(e,t)=>{for(var n in t||(t={}))ue.call(t,n)&&xe(e,n,t[n]);if(me)for(var n of me(t))ge.call(t,n)&&xe(e,n,t[n]);return e};const fe=e=>{switch(e){case c.F6.shelve:return"green";case c.F6.deleted:return"red";default:return"#D395E0"}};var ve=({visible:e,type:t})=>{const[n,i]=(0,g.useState)({keyword:"",type:-1,status:-1,category:"0",page:1,pageSize:60}),a=(0,g.useRef)(),{categories:r,getCategories:o}=(0,x.Z)(),{loading:l,materialList:c,getMaterialList:s,total:d}=(()=>{const[e,t]=(0,g.useState)(!1),[n,i]=(0,g.useState)(0),[a,r]=(0,g.useState)([]);return{total:n,loading:e,materialList:a,getMaterialList:e=>oe(void 0,null,(function*(){t(!0);try{const n=yield le(e);console.log("data:",n),r(n.data),i(n.total)}catch(e){throw e}finally{t(!1)}}))}})();(0,g.useEffect)((()=>{var t;!e||a.current&&(null==(t=a.current)?void 0:t.keyword)!==n.keyword||m()}),[n,e]),(0,g.useEffect)((()=>{o(n.type)}),[n.type]);const m=()=>{return void 0,null,e=function*(){try{console.log("params:",n),s(n),a.current=n}catch(e){f.ZP.error("获取列表出错："+e)}},new Promise(((t,n)=>{var i=t=>{try{r(e.next(t))}catch(e){n(e)}},a=t=>{try{r(e.throw(t))}catch(e){n(e)}},r=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,a);r((e=e.apply(undefined,null)).next())}));var e};return pe.createElement("div",{className:p.Z.wrapper,style:{width:"100%"}},pe.createElement(u,{keyword:n.keyword,type:n.type,status:n.status,category:n.category,categories:r,onChange:e=>{i((t=>he(he({},t),e)))},onSearch:m}),pe.createElement("div",{className:p.Z.container,style:{display:"flex",justifyContent:"center"}},pe.createElement("div",{className:p.Z.content},pe.createElement("div",{style:{flex:1}},pe.createElement(ae,{type:t,list:c,total:d,page:n.page,pageSize:n.pageSize,isFetching:l,onChange:e=>{i((t=>he(he({},t),e)))},onRefetch:e=>{var t,i;s((t=he({},n),i={page:e?1:n.page},se(t,de(i))))}})))))}},78048:function(e,t,n){var i=n(62732),a=Object.defineProperty,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&p(e,n,t[n]);if(r)for(var n of r(t))l.call(t,n)&&p(e,n,t[n]);return e};const s="#3955f6",d={sidebarItem:(0,i.iv)({display:"flex",alignItems:"center",padding:"0 8px",height:"46px",fontSize:"14px",cursor:"pointer","&.active":{color:s,backgroundColor:"#eef3fe"}})},m={wrapper:(0,i.iv)({minHeight:"100%",flex:"auto"}),filterWrapper:(0,i.iv)({padding:"16px 30px","& .ant-form-item":{marginBottom:0},"& .ant-input-search-button":{},"& .ant-select-selector":{padding:"2px 4px"},"& .ant-form-item-label > label":{height:"34px",lineHeight:"34px"},"& .ant-input":{padding:"5px 11px"},"& .anticon-search":{transform:"scale(0.85)"}}),filterLabel:(0,i.iv)({color:"#999"}),container:(0,i.iv)({margin:"0 auto",padding:"16px"}),content:(0,i.iv)({position:"relative",display:" flex",margin:"0 50px",maxWidth:"1248px",minWidth:"1180px",minHeight:"1501px",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.08)",borderRadius:"4px"}),sidebarWrapper:(0,i.iv)({flex:"0 0 252px",width:"252px",borderRight:"1px solid #ebebeb"}),sidebar:(0,i.iv)({position:"sticky",top:0,zIndex:1,display:"flex",flexDirection:"column"}),sidebarHeader:(0,i.iv)({height:"55px",borderBottom:"1px solid #ebebeb","& .ant-btn":{padding:"0 16px",width:"100%",lineHeight:"55px",fontSize:"14px",textAlign:"left",fontWeight:"bold"}}),sidebarList:(0,i.iv)({flex:1,paddingTop:"8px",overflowY:"hidden","&::-webkit-scrollbar-thumb":{backgroundColor:"#e8e8e8",borderRadius:"2px"},"&::-webkit-scrollbar":{width:"4px"},"&:hover":{paddingRight:0,overflowY:"scroll",["& ."+d.sidebarItem]:{paddingRight:"4px"}}}),sidebarItemContent:(0,i.iv)({display:"flex",alignItems:"center",padding:"5px 8px",width:"100%",border:"1px solid transparent",borderRadius:"4px","&.hover":{borderColor:s,backgroundColor:"#eef3fe",color:s},"&.dangerHover":{borderColor:"#ff4538",backgroundColor:"#ffeceb"}}),sidebarItemLeft:(0,i.iv)({flex:1,width:0,display:"flex",alignItems:"center"}),sidebarNum:(0,i.iv)({}),sidebarInput:(0,i.iv)({marginLeft:"2%",width:"98%"}),sidebarBtn:(0,i.iv)({fontSize:"18px",color:"#333","&:hover":{color:s}}),sidebarTitle:(0,i.iv)({marginLeft:"10px"}),sidebarIcon:(0,i.iv)({fontSize:"16px",lineHeight:"11px"}),deleteCatModalContent:(0,i.iv)({padding:"16px 0",color:"#666"}),deleteCatModalCheckbox:(0,i.iv)({color:"#666"}),optionBar:(0,i.iv)({padding:"24px 32px"}),optionCheckbox:(0,i.iv)({marginRight:"24px"}),optionButton:(0,i.iv)({marginRight:"24px",padding:"5px 15px",height:"34px"}),optionTipsTrigger:(0,i.iv)({color:"#999","&:hover":{color:s}}),uploadMenuItem:(0,i.iv)({display:"flex",width:"258px"}),updateMenuTitle:(0,i.iv)({flex:"0 0 72px",width:"72px"}),uploadMenuDesc:(0,i.iv)({flex:1,paddingLeft:"8px",borderLeft:"1px solid #ebebeb",fontSize:"12px",color:"#999"}),list:(0,i.iv)({display:"flex",flexWrap:"wrap",padding:"0 32px 8px",fontSize:0}),item:(0,i.iv)({position:"relative",marginRight:"16px",marginBottom:"16px",flex:1,maxWidth:"221px",minWidth:"200px",height:"255px",border:"1px solid #ebebeb",borderRadius:"4px",overflow:"hidden","&:nth-child(4n+4)":{marginRight:0}}),itemDragBox:(0,i.iv)({position:"absolute",top:0,bottom:"45px",left:0,right:0}),itemPreview:(0,i.iv)({position:"absolute",top:0,bottom:"45px",left:0,right:0,backgroundColor:"#F2F4F7"}),itemTag:(0,i.iv)({position:"absolute",top:0,left:0,padding:"0 8px",borderRadius:"4px 0 4px 0",backgroundColor:s,lineHeight:"20px",fontSize:"12px",color:"#fff"}),itemCheckbox:(0,i.iv)({position:"absolute",top:"8px",right:"8px"}),itemPoster:(0,i.iv)({width:"100%",height:"100%",objectFit:"contain"}),itemFooter:(0,i.iv)({position:"absolute",bottom:0,left:0,right:0,display:"flex",alignItems:"center",padding:"0 12px",height:"45px",overflow:"hidden"}),itemId:(0,i.iv)({marginRight:"4px",padding:"0 4px",lineHeight:"20px",backgroundColor:"#F0F0F0",borderRadius:"4px",fontSize:"12px",cursor:"pointer"}),itemIdTips:(0,i.iv)({fontSize:"12px","& .ant-btn-sm":{fontSize:"12px"}}),itemName:(0,i.iv)({lineHeight:"20px",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),itemOptions:(0,i.iv)({position:"absolute",bottom:0,left:0,right:0,display:"flex",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.8)","& .ant-btn":{padding:"5px 8px"}}),modalFooter:(0,i.iv)({padding:"14px 0",display:"flex",alignItems:"center"}),modalFooterTips:(0,i.iv)({flex:1,textAlign:"left",color:"#999"}),stringLength:(0,i.iv)({color:"#c1c1c1",pointerEvents:"none"}),copyInput:(0,i.iv)({position:"absolute",top:0,left:"-10px",padding:"0",width:"10px",height:"100%",fontSize:"12px",opacity:0}),pagination:(0,i.iv)({padding:"0 32px 32px",textAlign:"right","& .ant-pagination-item":{minWidth:"26px",height:"26px",lineHeight:"24px",fontSize:"12px"},"& .ant-pagination-prev, & .ant-pagination-next, & .ant-pagination-jump-prev, & .ant-pagination-jump-next":{minWidth:"26px",height:"26px",lineHeight:"24px"},"& .ant-select-single:not(.ant-select-customize-input) .ant-select-selector":{height:"26px"},"& .ant-select-single:not(.ant-select-customize-input) .ant-select-selector .ant-select-selection-search-input":{height:"24px"},"& .ant-select-selection-item":{lineHeight:"24px!important",fontSize:"12px!important"},"& .ant-pagination-options-quick-jumper":{height:"26px",lineHeight:"26px"},"& .ant-pagination-options-quick-jumper input":{height:"26px",lineHeight:"26px",fontSize:"12px"},"& .ant-pagination-total-text":{marginRight:"16px",height:"26px",lineHeight:"26px"}}),modalWrapper:(0,i.iv)({"& .ant-modal-body":{paddingTop:"24px"},"& .ant-modal-close":{top:"5px"},"& .ant-modal-confirm-content":{marginTop:"24px",color:"#666"},"& .ant-modal-confirm-btns":{marginTop:"32px"}})};t.Z=c(c({},d),m)},34708:function(e,t,n){n.d(t,{Z:function(){return S}});var i=n(66305),a=n(62732),r=n(92366),o=n(36803),l=n(16848),p=n(22142),c=n(76151),s=n(70072),d=n(86694);const m={frame:(0,a.iv)({border:"none",backgroundColor:"#000"}),controller:(0,a.iv)({display:"flex",justifyContent:"center",alignItems:"center",height:60})};var u=({url:e,name:t})=>{const[n,i]=(0,p.useState)(!0),a=(0,p.useRef)(null),r=(0,p.useCallback)((()=>{a.current&&e&&(a.current.src=e)}),[e]);return p.createElement(p.Fragment,null,p.createElement(c.Z,{spinning:n,size:"large"},p.createElement("iframe",{allow:"autoplay",name:t,title:t,src:e,className:m.frame,style:{width:"375px",height:"667px"},ref:a,onLoad:()=>{i(!1)}},e)),p.createElement("div",{className:m.controller,onClick:r},p.createElement(s.Z,{icon:p.createElement(d.Z,null)},"刷新")))},g=n(57416);n(37112);const x={video:(0,a.iv)({outline:"none","& .xgplayer-progress-btn":{background:"rgba(57, 85, 246,.304093) !important",boxShadow:"none !important",border:"none !important"},"& .xgplayer-drag":{background:"#5676EA !important"}})};var h=({url:e})=>{const t=(0,p.useRef)(null);return(0,p.useEffect)((()=>{if(t.current){const t=new g.ZP({id:"xgVideo",url:e,width:"375px",height:"667px",cssFullscreen:!1,playbackRate:!1,commonStyle:{playedColor:"#5676EA",sliderBtnStyle:{borderColor:"none"}}});return()=>{t.destroy(!0)}}}),[e]),p.createElement("div",{ref:t,className:x.video},p.createElement("div",{id:"xgVideo"}))},f=n(42560);const v={audio:(0,a.iv)({outline:"none","& .xgplayer-progress-btn":{background:"rgba(57, 85, 246,.304093) !important",boxShadow:"none !important",border:"none !important"},"& .xgplayer-drag":{background:"#5676EA !important"},"& .xgplayer-poster":{display:"block !important",background:`url(${f.Z}) #F2F4F7 no-repeat`,backgroundPosition:"50% !important",backgroundSize:"100px 100px !important"}})};var b=({url:e})=>{const t=(0,p.useRef)(null);return(0,p.useEffect)((()=>{if(t.current){const t=new g.ZP({id:"xgVideo",url:e,height:"667px",width:"375px",cssFullscreen:!1,playbackRate:!1,commonStyle:{playedColor:"#5676EA",sliderBtnStyle:{borderColor:"none"}}});return()=>{t.destroy(!0)}}}),[e]),p.createElement("div",{ref:t,className:v.audio},p.createElement("div",{id:"xgVideo"}))},y=n(61754),E=({material:{previewUrl:e,name:t,playerId:n,type:i},playerList:a=[{id:55,name:"0.0.55",url:"https://magicplay.oceanengine.com/static-cloud/invoke/riko_player"}]})=>{const r=(0,p.useMemo)((()=>{var e;return null!=(e=null==a?void 0:a.find((({id:e})=>e===n)))?e:a[0]}),[a,n]),o=(0,p.useMemo)((()=>e.endsWith("html")?e:`${r.url}?url=${e}&type=${l.N7[i.cid]}`),[e,r,i]);return(0,p.useEffect)((()=>{r||y.ZP.error("播放器加载失败！")}),[r]),r&&p.createElement(u,{url:o,name:t})},w=n(98466),Z=n(55305),C=n(22142);const k={container:(0,a.iv)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"})};var S=({detail:e})=>{const{data:t={}}=(0,Z.useQuery)({queryKey:[],cacheTime:1/0,queryFn:()=>{return void 0,null,e=function*(){const e=Object.keys(l.Gn).filter((e=>!isNaN(Number(e))));return(yield Promise.all(e.map((e=>(0,w.q$)(Number(e)))))).reduce(((t,n,i)=>(t[e[i]]=n,t)),{})},new Promise(((t,n)=>{var i=t=>{try{r(e.next(t))}catch(e){n(e)}},a=t=>{try{r(e.throw(t))}catch(e){n(e)}},r=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,a);r((e=e.apply(undefined,null)).next())}));var e}});return C.createElement("section",{className:k.container},((e,t)=>{const{name:n,previewUrl:a,type:p}=e;switch(p.cid){case l.Rj.case:case l.Rj.otherCase:case l.Rj.creative:return C.createElement(u,{name:n,url:a});case l.Rj.image:return C.createElement(i.Z,{src:a,alt:"previewImage",style:{width:"375px",height:"667px",objectFit:"contain",cursor:"zoom-in"}});case l.Rj.video:return C.createElement(h,{url:a});case l.Rj.audio:return C.createElement(b,{url:a});case l.Rj.lottie:case l.Rj.particles2D:case l.Rj.component:case l.Rj.frameAni:case l.Rj.editor:case l.Rj.scene:case l.Rj.live2d:case l.Rj.dragonBones:case l.Rj.spine:return C.createElement(E,{material:e,playerList:t[l.Gn.Editor]});case l.Rj.photoshop:return C.createElement("img",{src:o.Z,alt:n,style:{width:"375px",height:"200px",objectFit:"contain"}});default:return C.createElement("img",{src:r,alt:n,style:{width:"375px"}})}})(e,t))}}}]);