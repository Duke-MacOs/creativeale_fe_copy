"use strict";(self.webpackChunk_byted_editor=self.webpackChunk_byted_editor||[]).push([[156],{49156:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var r,a,l=n(98797),i=n(80481),c=n(97029),o=n(60203),s=n(70528),d=n(89320),u=n(80926),m=n(26840),p=n(80863),y=n(14908),f=n(33647),b=n(61754),k=n(70072),h=n(54520),g=n(77397),v=n(98466),E=n(22142),I=n(5023),w=n(72777),x=n(65355),Z=n(51514),C=n(62732),O=n(22142),j=Object.defineProperty,P=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,L=(e,t,n)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,N=(e,t,n)=>new Promise(((r,a)=>{var l=e=>{try{c(n.next(e))}catch(e){a(e)}},i=e=>{try{c(n.throw(e))}catch(e){a(e)}},c=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,i);c((n=n.apply(e,t)).next())}));(a=r||(r={}))[a["个人版"]=0]="个人版",a[a["管理员"]=1]="管理员",a[a["服务商"]=2]="服务商",a[a["广告主"]=3]="广告主",a[a["代理商"]=4]="代理商";const T=e=>N(void 0,null,(function*(){const{data:t}=yield v.dJ.get("team/listMyTeam",{params:e}),{data:n}=t,r=n,{list:a}=r;return{list:a,pagination:((e,t)=>{var n={};for(var r in e)D.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&P)for(var r of P(e))t.indexOf(r)<0&&S.call(e,r)&&(n[r]=e[r]);return n})(r,["list"])}}));var F=(0,o.VT)((function({loading:e}){const{userInfo:t,updateUserInfo:n}=(0,Z.Pc)(),[a,l]=(0,E.useState)(null),{params:o,onParamsChange:j}=(0,c.N6)(),{list:F,total:J,refetch:V}=(0,i.F)([T,o],T,o),_=[{title:"团队图标",dataIndex:"logo",key:"logo",width:"10%",align:"center",render:e=>O.createElement(d.C,{size:"large",src:e})},{title:"名称及ID",dataIndex:"name",key:"name",width:"10%",ellipsis:!0,render:(e,{id:t,name:n})=>O.createElement(u.Z.Link,{onClick:()=>{j({teamId:String(t)})}},O.createElement(m.Z,{title:`ID: ${t}`},n))},{title:"类型",dataIndex:"type",key:"type",width:"10%",align:"center",ellipsis:!0,render:e=>O.createElement(u.Z.Link,{onClick:()=>{j({type:String(e)})}},r[e])},{title:"创建者",dataIndex:"owner",width:"10%",key:"owner",render(e,{owner:t,ownerName:n}){return O.createElement(u.Z.Link,{onClick:()=>{j({userId:t})}},n)}},{title:"我的角色",dataIndex:"roles",key:"roles",width:"10%",ellipsis:!0,render:e=>O.createElement("div",{style:{display:"flex",flexDirection:"column",padding:"6px",background:"none",userSelect:"text"}},w.C0[e])},{title:"实验功能",dataIndex:"features",key:"features",width:"20%",className:(0,C.iv)({lineHeight:"28px"}),render:e=>{const t=Object.entries(Z.rp).filter((([t])=>e.includes(t)));return O.createElement(O.Fragment,null,t.map((([e,t])=>O.createElement(p.Z,{key:e,color:"processing",style:{cursor:"pointer"},onClick:()=>{j({feature:e})}},t))))}},{title:"操作",dataIndex:"features",key:"action",width:"15%",render:(e,n)=>{const r=(0,x.jI)("退出团队"),{id:a,type:i,owner:c,roles:o}=n;return O.createElement(y.Z,null,O.createElement(f.Z,{title:"确定要离开团队吗?",onConfirm:()=>N(this,null,(function*(){try{yield v.dJ.post("team/quitMember",{teamId:a,userId:t.userId}),b.ZP.success("退出团队成功"),r("okay"),location.reload()}catch(e){b.ZP.error(e.message),r("error")}})),okText:"确定",cancelText:"取消",onCancel:()=>{r("cancel")}},O.createElement(u.Z.Link,{disabled:0===i||c===t.userId},"退出")),O.createElement(u.Z.Link,{disabled:0===i||!(2&o),onClick:()=>{l(O.createElement(I.Z,{onCancel:()=>l(null),title:"修改团队信息",initValues:n,onFinish:e=>N(this,null,(function*(){yield v.dJ.post("team/update",((e,t)=>{for(var n in t||(t={}))D.call(t,n)&&L(e,n,t[n]);if(P)for(var n of P(t))S.call(t,n)&&L(e,n,t[n]);return e})({teamId:n.id},e)),V()}))}))}},"修改"))}},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",width:"15%",ellipsis:!0,render:e=>O.createElement("div",{style:{padding:"6px",background:"none",userSelect:"text"}},e)}];return O.createElement(g.TZ,{extra:O.createElement(k.Z,{type:"primary",onClick:()=>{l(O.createElement(I.Z,{title:"新建团队",onCancel:()=>l(null),onFinish:e=>N(this,null,(function*(){const{data:{data:{id:t}}}=yield v.dJ.post("team/create",e);n(t)}))}))}},"新建团队")},O.createElement(h.Z,{rowKey:"userId",columns:_,dataSource:F,pagination:(0,s.h)(J),loading:e}),a)})),J=n(59701),V=n(22142);function _(){return V.createElement(l.Z,{filter:{spark:"flex",columnGap:40,content:[{spark:"label",label:"团队名称",width:88,content:{spark:"string",index:"keyword",allowClear:!0}},{spark:"label",label:"团队ID",width:88,content:{spark:"string",index:"teamId",allowClear:!0}},{spark:"label",label:"团队类型",width:88,content:{spark:"select",index:"type",options:[{name:"全部",value:""},...J.yv.slice(1)].map((({name:e,value:t})=>({label:e,value:t})))}},{spark:"label",label:"实验功能",width:88,content:{spark:"select",index:"feature",options:[{label:"全部",value:""},...Object.entries(Z.rp).map((([e,t])=>({value:e,label:t})))]}}]},children:V.createElement(F,null)})}},98797:function(e,t,n){var r=n(97029),a=n(62732),l=n(50424),i=n(66139),c=n(80926),o=n(14908),s=n(80863),d=n(70072),u=n(3207),m=n(73760),p=n(22142),y=Object.defineProperty,f=Object.defineProperties,b=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=(e,t,n)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function E(e){switch(e){case"tab":case"deleted":return"";case"type":return location.pathname.includes("/super/team")?"":"类型";case"status":return location.pathname.includes("/playable")?"":"状态";case"id":return"项目ID";case"userId":return"用户ID";case"teamId":return"团队ID";case"parentId":return"版本组ID";case"templateId":return"模板ID";case"industry":return"行业";default:return e}}t.Z=({children:e,filter:t})=>{const{defaultParams:n,params:y,onParamsChange:I}=(0,r.N6)(),w=(0,m.pick)(y,Object.entries(n).filter((([e,t])=>t!==y[e]&&E(e))).map((([e])=>e)));return p.createElement("div",{style:{flex:"auto",width:0,minWidth:1275}},p.createElement("div",{className:(0,a.iv)({marginBottom:8,borderRadius:4,padding:24})},p.createElement("div",{style:{marginBottom:20}},t&&(0,u.default)({spark:"context",provide(){return{useValue(e){const{indexValue:t,indexEntries:n}=(0,u.getIndexer)(e);return{value:[t(y)],onChange([e]){I(Object.fromEntries(n(e)))}}}}},content:t})),p.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginLeft:10}},p.createElement("div",{style:{display:"flex",columnGap:12,alignItems:"center"}},p.createElement(c.Z.Link,null,p.createElement(l.Z,{theme:"outline",style:{lineHeight:0,fontSize:14}})),p.createElement(o.Z,null,Object.entries(w).map((([e,t])=>t&&p.createElement(s.Z,{closable:!0,color:"processing",onClose:()=>{I({[e]:void 0})}},E(e),"：",t))))),p.createElement(o.Z,{size:30},p.createElement(d.Z,{type:"link",icon:p.createElement(i.Z,null),onClick:()=>{I(((e,t)=>{return n=((e,t)=>{for(var n in t||(t={}))h.call(t,n)&&v(e,n,t[n]);if(k)for(var n of k(t))g.call(t,n)&&v(e,n,t[n]);return e})({},t),r={tab:e.tab},f(n,b(r));var n,r}))}},"重置筛选")))),p.createElement("div",{style:{borderRadius:4}},e))}}}]);