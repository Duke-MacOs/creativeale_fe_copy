## 约定与说明

**版本迭代**　两周一迭代，依次按二十四节气立春、雨水、惊蛰、春分、清明、谷雨、立夏、小满、芒种、夏至、小暑、大暑、立秋、处暑、白露、秋分、寒露、霜降、立冬、小雪、大雪、冬至、小寒、大寒命名。比如发布日期的下一节气是清明，该迭代就代号为清明。

**术语约定**

1. 编辑器前端分为六大面板，分别是*顶部导航*、_场景列表_、_资源面板_、_可视画板_、*属性面板*和*时间面板*。
1. 目前右键菜单有两个：*节点菜单*和*轨道菜单*。

**更新说明**

1. 从上往下倒叙记录每个版本的更新日志
1. 在提交代码时一起更新日志
1. 每迭代依次按特性、变更、废弃、修复排列
1. 特性：本迭代新增的功能
1. 变更：同一功能的实现或接口改了
1. 重构：代码重构，不涉及功能修改
1. 废弃：去掉了某功能
1. 修复：修复了往期迭代的问题

## 当前版本

1. 变更：内网可跳过直出互动试玩验证
1. 特性：互动视频故事板显示视频时长
1. 特性：导出历史调整
1. 特性：URL 参数打开互动视频故事板
1. 变更：脚本编译成功、错误提醒框
1. 修复：轻互动修改配置保留原值
1. 变量：非管理员可导出只读项目
1. 变更：发送消息默认值调整
1. 变更：riko.useNode 支持选择场景
1. 变更：管理后台子表格对齐与导出窗口布局修改
1. 特性：视频 Cover 显示时长
1. 变更：图块展示场景变量名称
1. 变更：蓝图脚本搜索优化
1. 修复: 粘贴粒子、模型节点失败
1. 修复: 3D 内置材质显示了天空盒材质
1. 修复: 组件编辑切换状态后，事件拖拽失去吸附效果
1. 特性：组件输入输出传值
1. 修复：脚本编译时转义非法字符
1. 修复：导入 3d 场景时，天空盒材质异常
1. 修复：脚本编译时转义非法字符 1
1. 修复：useResNode value 为空问题
1. 特性：蓝图侧边栏支持收起
1. 变更：混合模式 反向遮罩
1. 特性：StringCell 支持格式检验
1. 修复：缓动曲线组件 bug
1. 特性：重叠脚本在时间轴上显示小白点
1. 变更：组件输出输出
1. 特性：互动视频层级显示
1. 变更：window.open webIde 根据项目 id 划分
1. 特性：蓝图脚本属性静态开放
1. 特性：检测代码中被 import 引用的脚本
1. 特性：URL 参数打开预览地址
1. 修复：运行时全局变量监听失效
1. 修复：复制节点时也复制节点下通过代码中 import 的脚本，发布公共组件时也带上代码中 import 的脚本
1. 特性：Riko.useHook required
1. 特性：编辑器预览时引擎自动切换场景，结束播放后返回初始场景
1. 特性：废弃简易模式
1. 变更：资源面板声音/视频时长精确到 0.1s
1. 变更：customGroups 删掉 predict 逻辑
1. 修复：互动视频场景层级名称显示问题
1. 修复：计算概率时过滤 compProps
1. 变更：VR 看房标记由 typOfPlay 改为 category
1. 修复：添加 3d 容器时，在当前节点下添加；导入 3d 节点时，在场景节点下添加
1. 特性：脚本属性间相互引用并计算
1. 特性：互动视频添加 PVDragger
1. 修复：useHooks eval
1. 修复：事件穿透 bug
1. 特性：天空盒支持 HDR 格式
1. 变更：互动视频导出时非循环视频时长必须大于两秒
1. 修复：概率计算 bug
1. 特性：天空盒支持更多 zip 内命名规范
1. 修复：全景项目预览时保存逻辑错误
1. 变更：外网屏蔽模板创建入口
1. 修复：全景编辑时修改全局变量失效
1. 变更：性能优化
1. 修复：全景编辑时，修改组件时保存异常
1. 修复：全局变量在运行结束后没有恢复编辑时状态
1. 修复：脚本解析异常捕获
1. 变更：蓝图调整
1. 变更：性能优化
1. 变更：前端只在外网校验包体大小
1. 特性：文本节点可以不开放文本属性
1. 修复：编辑器场景 QA 问题总结
1. 特性: 导出历史添加下载 zip 包
1. 变更：优化右键菜单
1. 变更：更新 compProps 深度合并更新
1. 变更：使用 Button.href 代替 window.open 打开 url 防止影响父窗口
1. 变更: 预览窗口根据视口高度决定居中还是上边界对齐
1. 变更：蓝图细节优化
1. 变更：上传视频封面接口改成 uploadFile
1. 修复：组件脚本及 VR 脚本保存失效
1. 特性: 事件图标重叠显示角标
1. 特性：手动上报埋点开关
1. 废弃：替换物理引擎后，部分属性不再适用
1. 特性：直出互动 URL 参数 ?exportAsLynx
1. 变更：下载函数 downloadBlob
1. 变更：脚本支持配置的导出和导入
1. 变更：组件支持 compProps 配置的导出和导入
1. 特性：新增材质复制功能
1. 修复: 复制节点时，材质丢失
1. 特性：直出互动新增 ExportAsLynx 开关
1. 变更：蓝图面板优化
1. 修复：调整 useVector label 宽度
1. 变更：支持批量 enabled 蓝图节点
1. 变更：蓝图支持全局变量
1. 特性：项目故事板
1. 变更：外网模板模式下替换所有时只替换 compProps 内数据
1. 变更：去除“下载 APP”事件的 Alert 提示
1. 修复：加强多标签相互覆盖的检测
1. 特性：分包
1. 变更：texture2D 资源独立存储
1. 修复：VR 项目首次创建时，全景节点替换 url 后未保存
1. 特性：对接 Ad 同步直出互动
1. 特性：VR 看房新增一次性固定视角功能
1. 修复：节点复制粘贴时，材质没有被复制
1. 变更：3D 场景导入时，材质资源直接场景化存储
1. 新增：3D 组件内外属性同步
1. 特性：互动视频添加引导文案和震动反馈
1. 特性：互动视频导出时可选上传兜底视频

## 2022 大暑版

1. 特性：蓝图系统
1. 修复：画布某些模式下不应该拖拽新增资源
1. 修复：WebIDE 支持 `/play` 和 `/simple`
1. 修复：转化为 rubeex 项目
1. 修复：压缩重试倒计时和报错提示
1. 修复：增加 useSubscribe 解决未用场景不更新
1. 修复：直出互动压缩初始化没有相应 url 要报错
1. 修复：压缩 playableError
1. 修复：添加常驻转化按钮报错
1. 特性：蓝图支持代码只读查看
1. 修复：删除场景后的选中
1. 修复：getCustomScriptByOrderId 手动抛出异常方便调试
1. 修复：ResourceChanger 删除最外层蒙层，避免影响其他 modal 的滚动行为
1. 修复：riko.useArray 内资源名混乱 bug
1. 特性：蓝图支持黑暗主题，优化体验
1. 特性：直出 loading 界面适配
1. 修复：更新二维码扫码工具指引
1. 修复：设计稿上的 ui 修改
1. 特性：添加 lint-staged 对提交文件执行 eslint 命令
1. 修复：更新@byted/riko@1.2.6
1. 修复：蓝图输入名无法修改 bug
1. 修复：只读模式的预览不应该有新标签打开
1. 修复：场景历史记录中切换场景时节点不显示与暂停后重新播放报错
1. 修复：无法修改组件根节点的脚本属性问题
1. 特性：交互视频支持
1. 特性：升级 antd@4.21.6 及优化时间轴右键菜单
1. 特性：缓动曲线编辑器可以直接设置曲线值
1. 修复：直出互动不展示 loading 组件
1. 修复：动态注册滑动区域
1. 修复：直出互动适配
1. 修复：直出互动弹出不同的介绍视频
1. 重构：定义 custom edgeType
1. 修复：抖音扫码 url 加 ?refer=scan
1. 修复：隐藏是否 3D 项目
1. 修复：只有普通项目能发布场景
1. 修复：故事板视频预览触发
1. 变更：简易模式历史回退功能也可见、快捷呼出全局变量菜单时自动切换到对应的 tab
1. 变更：时间轴放大和缩小换位、互动视频故事板预览视频
1. 修复：简易模式切换 bug
1. 变更: VR 配置
1. 变更：其他设置事件新增淡出背景音乐
1. 修复：更新直出互动新手视频
1. 修复：修复几个 UI 走查问题
1. 修复：“配置页”改为“加载页”
1. 重构：组件 StepGuider
1. 修复：压缩对话框移除浏览器预览链接
1. 特性：新增导出历史
1. 修复：节点搜索名称显示异常
1. 特性: 升级react-scripts@4.0.2可选择在开发时关闭 eslint
1. 修复：画布右键菜单
1. 特性：eden proxy 支持 noProxy 设置
1. 修复：Button 的 url 图片应该不能删除
1. 变更：spine premultipliedAlpha field
1. 特性：编辑器使用引导
1. 修复：修复 pixel 偏差
1. 修复：修复 UI 走查问题
1. 修复：移除不小心合入的调试代码
1. 修复：fromNodes 漏了 visible 字段
1. 变更：切换场景-替换当前场景时 relation 为 1
1. 修复：ArrayCell add button 样式
1. 修复：xgplayer 视频后台播放问题
1. 特性：添加视频节点时自动截取第一帧
1. 修复: 全局 tooltip 位置
1. 修复：切换场景 relation 默认值
1. 变更：替换视频时截取第一帧
1. 特性：hasSearchFlag, 继续使用已废弃的功能
1. 变更：新手引导样式调整.
1. 变更：支持找回删除的场景数据
1. 变更：`/app` 升级为 `/play`
1. 修复：外网屏蔽"重玩"事件
1. 变更：video poster 属性可以手动修改
1. 变更：去掉预览机型选择提示
1. 特性：脚本标签
1. 变更：表达式自动选择操作符
1. 修复：管理后台样式
1. 修复：视频封面压缩
1. 特性：蓝图代码编辑全屏展示
1. 特性：预览二维码
1. 修复: 模板列表接口权限限制
1. 特性：添加 PVSlider, PVGuider, PVAlphaVideo 节点
1. 修复：导入 3D 场景时，3d 粒子 orderId 重复
1. 特性：循环动画直接拖动后面重复的动画块也有吸附对齐效果
1. 修复：动画不能粘贴到组件根节点 bug
1. 变更：脚本保存逻辑统一处理
1. 修复：3D 粒子无法编辑材质
1. 修复: 新增粒子容器无法编辑
1. 特性：穿山甲全局设置
1. 变更：引入 reselect 库

## 2022 小暑版

1. 特性：项目管理页面在搜索的版本表格中添加复制功能
1. 流程：每次推送必须填写本次推送的 CHANGELOG
1. 特性：同步选中事件给引擎优化画布体验
1. 修复：轻互动导出 URL 为 JSON 配置
1. 修复：加载项目时根据 url 设置 selectedSceneId
1. 特性：碰撞体多边形默认顶点
1. 特性：修改 2D 粒子属性后自动预览
1. 修复：字段错误
1. 修复：跳转场景 bug
1. 修复：不合法 from=rubeex 不报错，一直 loading, 改为报错提示
1. 重构：整理 src/entries/editor/Editor/Property/spark/layouts/Script
1. 修复：Script/ 循环引用
1. 废弃：轻互动不能导出为 URL
1. 修复：在作品模式时，没开放 width, height 的图片应该不能重置尺寸
1. 变更：调整粒子参数设置
1. 修复：一个判断漏洞
1. 变更：作品模式只能从 0 开始播放，在画板中预览时自动 setInterval 移动时间轴
1. 修复：useEase 的 label 可变
1. 修复：一键转为按钮带上子节点
1. 修复：parseScript 的时候需要把可能存在的 Proxy 值过滤掉
1. 修复：pbr 类型材质颜色格式错误
1. 修复：动画循环次数为 1 时表示只播放一次
1. 修复：自定义脚本名称兼容老数据
1. 修复：组件编辑保存退出后，画布异常
1. 废弃：视频假剪辑和声音假剪辑
1. 修复：tabIndex & SceneAdder
1. 特性：升级@byted/riko Tween 类型支持
1. 修复：删除无用变量 1
1. 修复：材质编辑后，返回场景页面异常
1. 废弃：spark 不再保留历史路径
1. 修复：作品模式节点预览用引擎播放，但会自动停止
1. 特性：埋点事件新增 clickArea
1. 特性：MeshSprite3D 新增 quad
1. 特性：节点、脚本复制成功提示
1. 特性：资源面板搜索优化
1. 特性：节点 x、y、宽、高支持计算数据
1. 特性：内网导出可设置横竖屏
1. 变更：useRes, useResNode 可删除
1. 变更：播放动效事件没有选择动效时提示
1. 特性：管理后台除首页与我的投放外的优化
1. 特性：增加压缩失败重试对话弹窗
1. 变更：更新 riko 版本
1. 修复：脚本支持嵌套 import 引用
1. 修复：导出 url 时请求带上 region 参数
1. 变更：埋点事件延迟时间
1. 特性：useRes, useResNode, useNode deletable
1. 资源 URL 删除后隐藏动画和控制器
1. 特性：直出互动产能支持
1. 变更：作品模式下不会自动停止播放
1. 特性：作品模式下支持播放倍速
1. 修复：原生加载视频在 ResourceBox 播放
1. 修复：跨项目复制时所有 actions 的 dispatch 包装为一个事务
1. 修复：普通项目可使用下载蒙层
1. 特性：属性输入支持输入数学表达式
1. 修复：粘贴上传放弃时“添加节点”一直 loading
1. 修复：在进入保存后播放，播放可能会被保存过程中更新封面的 action 中止
1. 特性：useResNode 开放更多属性、控制器播放方式
1. 修复：3d 位移动画支持小数点 2 位
1. 修复：Alpha 蒙层图片应该纯白不能纯黑
1. 修复：直出互动加载预览动画效果
1. 特性：只在回车的时候计算数学表达式
1. 修复：组件编辑不显示直出蒙层的设置
1. 修复：组件编辑开放属性保存后，数据未同步
1. 修复：一些 3D BUG
1. 特性：新增重玩事件
1. 特性：useString 支持 TextArea
1. 特性：预览显示作者名
1. 修复：flexbox 下的 height 可能会被压缩
1. 特性：简易模式开放更多属性
1. 修复：预览时 extra 字段可能为空
1. 变更：在外网新建模板时有个预览模板模式，从这个模式返回编辑作品模式需要 reload scene, 以前通过 prevState 依赖实现，现改为 force reload 实现
1. 修复：复制组件的同时复制组件根节点上的脚本组件
1. 变更：直出互动默认进入简易模式
1. 修复：无法锁定封面问题
1. 修复：未用场景检测需要检测 elseScripts
1. 特性：直出互动压缩时 loadingStruct
1. 修复：直出互动导出成 URL
1. 修复：numberCell 精度问题、只有序列帧有播放方式
1. 修复：震动反馈暂不支持震动时长
1. 变更：宽高默认等比修改
1. 变更：节点不可见时标上后缀
1. 特性：VR 全景看房模块
1. 修复：设计验收上的 UI 修改
1. 修复：直出互动移除图标设置，预览 loading 时没有常驻转化
1. 修复：3D 编辑快捷键
1. 变更：视频填充类型
1. 修复：flexbox 下的 height 可能会被压缩
1. 特性：简易模式开放更多属性
1. 修复：无法锁定封面问题
1. 变更：直出互动预览时模拟下载的图片更换
1. 变更：全局通用的复制方法
1. 修复：蓝图图块跨项目粘贴更新 orderId
1. 修复：上传 psd 时无宽度节点绘制错误
1. 修复：横竖屏枚举错误
1. 修复：直出互动的生成 URL 兼容老的临时方案
1. 修复：压缩大小显示对齐
1. 修复：VR 看房项目默认使用寻宝玩法
1. 修复：组件编辑不显示视图切换
1. 修复：全局通用的复制方法
1. 变更：外网屏蔽蓝图入口
1. 修复：按编辑场景限制 3D 资源使用
1. 变更：脚本编辑器区分代码来源
1. 修复：代码编辑页 title 动态修改
1. 变更：简易模式开放组件展示限制
1. 特性：添加用于开发的新命令：start:reload 用于修改保存后自动刷新网页，start:hmr 用于修改保存后热更新
1. 变更：事件和脚本的 icons 统一管理
1. 变更：调整蓝图 icons
1. 变更：替换图片时自动修改宽高
1. 变更：VR 数据结构调整
1. 变更：scene3D 节点天空盒格式改造
1. 修复：全景变量在编辑组件后没有同步
1. 修复：VR 看房使用模板创建新项目
1. 修复：VR 替换数据后初始场景重置
1. 变更：VR 默认玩法内置组件替换
1. 变更：VR 项目创建表单抽离
1. 修复：删除无用变量
1. 特性：预加载设置，按节点和脚本维度
1. 特性：优化 VR 看房页面
1. 修复：VR 直出互动配置
1. 修复：3D 材质打包优化 & VR 项目创建限制
1. 特性：蓝图脚本打包

## 2021 秋分版

1. 特性：发布多场景到场景库
1. 废弃：移除内网编辑器内模板发布入口
1. 特性：新增场景的历史记录回退功能
1. 特性：属性面板优化

## 2021 处暑版

1. 特性：新增转化按钮
1. 特性：新增模板场景库

## 2021 立秋版

1. 特性：白名单支持 advId 和 cusId
1. 特性：时间轴支持批量改变动画时长
1. 特性：互动组件场景化
1. 特性：互动组件素材化
1. 特性：编辑器 3D 支持

## 2021 大暑版

1. 特性：支持模板受限物料全替换控制
1. 特性：支持将公共互动组件另存为个人
1. 特性：免 QA 测试优化
1. 特性：场景不存在节点时禁用播放按钮
1. 特性：禁用触控板双指回退/前进功能
1. 特性：编辑器内新增导入项目入口
1. 特性：避免层层嵌套编辑互动组件
1. 特性：普通项目转直玩项目
1. 特性：模板预览调试模式
1. 特性：支持 Spine 和 DragonBones 资源直接上传
1. 特性：预览链接支持抖音扫码
1. 特性：支持资源面板预览
1. 特性：管理后台实现项目、模板、资源等管理功能
1. 特性：hidden_event_console=1 在浏览器屏蔽 SDK 日志

## 2021 小暑版

1. 特性：动态参数
1. 特性：新增文本素材资源标签
1. 特性：支持轻互动
1. 特性：整体选中和移动重叠的脚本或动画
1. 特性：支持通过右键菜单查看/编辑互动组件
1. 变更：直玩的默认尺寸从 720P 变更到 750P
1. 变量：每次播放前清空之前的日志
1. 变更：优化动画脚本重叠时的显示
1. 变更：鼠标移过预览动画
1. 变更：视频、声音、互动组件不支持调时长
1. 变更：控制条只允许克隆到自身
1. 变更：不能复制下载 APP 事件

## 2021 夏至版

1. 特性：管理平台查询参数放在 url
1. 特性：管理平台支持一键按制作者搜索
1. 特性：同步项目压缩优化
1. 特性：新增团队素材列表
1. 特性：互动组件在属性面板的编辑和查看入口
1. 变更：对齐 Rubeex 同步逻辑
1. 修复：不能将 Controller 粘贴到图片等不支持 Controller 的节点
1. 修复：不能将动画效果粘贴到声音节点
1. 修复：时间面板展开新增节点的父节点

## 2021 芒种版

1. 特性：信息流直接试玩
1. 特性：支持复制/剪切/粘贴事件
1. 特性：支持示例项目只读模式
1. 特性：支持跨项目复制与粘贴
1. 特性：补充大量的事件图标

## 2021 小满版

1. 特性：推送时提示更新 CHANGELOG.md
1. 特性：脚本属性支持`Riko.useRes` type 为 Component 的解析
1. 特性：预览弹窗新增录屏功能
1. 特性：全局设置支持全局背景音乐音量设置
1. 特性：高亮显示重叠的动画和脚本
1. 特性：右键菜单将节点转为互动组件
1. 特性：新手引导
1. 变更：URL 移除`.html`后缀，`editor.html`改为`app/`
1. 修复：使用模板时替换资源把节点名称一并修改的问题

## 2021 立夏版

1. 修复：音视频裁剪编辑器不能通过拖动定位帧的问题
1. 特性：新增日志面板，倒序显示每次播放的日志
1. 特性：脚本组件属性设置
1. 特性：支持条件判断内和多跳转线的可视编辑
1. 特性：事件跳转线支持参考线对齐吸附
1. 特性：新增剪切(`Cmd/Ctrl + X`)节点和动画功能
1. 特性：在收起时间面板时，仍然可以添加动画和事件
1. 特性：脚本属性支持`Riko.useString`, `Riko.useNumber`, `Riko.useBoolean`的解析
1. 特性：自定义脚本在线编辑新增语法错误面板功能
1. 变更：当没有复制内容也没有选中节点时，画板不出现右键节点菜单
1. 变更：管理平台路由改名改路径，导入项目移到了新建项目旁边
1. 修复：编辑器加上声音节点后出现裂图的问题

## 2021 谷雨版

1. 特性：轨道菜单可复制和粘贴动画和事件
1. 特性：自定义脚本在线编辑功能
1. 特性：新增打开 FPS 面板开关
1. 特性：预览弹窗可重复预览
1. 变更：选中节点即出现跳转线，跳转线样式优化

## 2021 清明版

1. 特性：新增蒙版功能，节点菜单“作为蒙版”或快捷键`Cmd/Ctrl + M`设置，作用与直接父节点
1. 特性：时间面板新增`Cmd/Ctrl + 点击`多选动画和事件支持
1. 特性：时间面板新增动画和事件批量操作，包括添加、移动、删除、复制、粘贴、方向键调整等
1. 特性：多个节点轨道可以同时一起拖动
1. 特性：新增对`添加动画(A)`和`添加事件(E)`的快捷键支持
1. 特性：节点菜单新增`添加动画(A)`和`添加事件(E)`选项
1. 特性：节点菜单新增`解锁`和`显示`选项
1. 变更：时间面板选中动作从 onClick 改为 onMouseDown
1. 变更：动画选择器的图标
1. 变更：动画属性面板改版
1. 变更：事件属性面板改版
1. 废弃：打散快捷键`Cmd/Ctrl + Shift + G`, 跟组合合并为`Cmd/Ctrl + G`
   > 原因：打散和组合为一对互斥操作，用同一对快捷键即可
1. 修复：轨道菜单出现多个的问题
